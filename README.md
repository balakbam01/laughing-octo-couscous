Test 4

PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+UG9saWN5IENvbmZpZ3VyYXRpb24gTWFuYWdlcjwvdGl0bGU+CiAgICA8c3R5bGU+CiAgICAgICAgKiB7CiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICB9CgogICAgICAgIGJvZHkgewogICAgICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmNWY1ZjU7CiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICB9CgogICAgICAgIC5jb250YWluZXIgewogICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDFweCA0cHggcmdiYSgwLDAsMCwwLjEpOwogICAgICAgICAgICBwYWRkaW5nOiAxMnB4OwogICAgICAgIH0KCiAgICAgICAgaDEgewogICAgICAgICAgICBjb2xvcjogIzMzMzsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4OwogICAgICAgICAgICBmb250LXNpemU6IDE4cHg7CiAgICAgICAgfQoKICAgICAgICBoMiB7CiAgICAgICAgICAgIGNvbG9yOiAjNTU1OwogICAgICAgICAgICBtYXJnaW46IDhweCAwIDZweCAwOwogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjNENBRjUwOwogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogM3B4OwogICAgICAgIH0KCiAgICAgICAgaDMgewogICAgICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgICAgICAgbWFyZ2luOiA2cHggMCA0cHggMDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgICAgICBmb250LXdlaWdodDogNjAwOwogICAgICAgIH0KCiAgICAgICAgLmhlYWRlciB7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICAgICAgfQoKICAgICAgICAuYWN0aW9ucyB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGdhcDogNnB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4OwogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7CiAgICAgICAgfQoKICAgICAgICBidXR0b24gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjNENBRjUwOwogICAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgcGFkZGluZzogNnB4IDEycHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICBmb250LXNpemU6IDExcHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgICAgfQoKICAgICAgICBidXR0b246aG92ZXIgewogICAgICAgICAgICBvcGFjaXR5OiAwLjk7CiAgICAgICAgfQoKICAgICAgICBidXR0b24uc2Vjb25kYXJ5IHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzIxOTZGMzsKICAgICAgICB9CgogICAgICAgIGJ1dHRvbi5kYW5nZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjQ0MzM2OwogICAgICAgIH0KCiAgICAgICAgYnV0dG9uLnNtYWxsIHsKICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4OwogICAgICAgIH0KCiAgICAgICAgLmZvcm0tZ3JvdXAgewogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7CiAgICAgICAgfQoKICAgICAgICBsYWJlbCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAycHg7CiAgICAgICAgICAgIGNvbG9yOiAjNTU1OwogICAgICAgICAgICBmb250LXdlaWdodDogNTAwOwogICAgICAgICAgICBmb250LXNpemU6IDExcHg7CiAgICAgICAgfQoKICAgICAgICBsYWJlbC5yZXF1aXJlZDo6YWZ0ZXIgewogICAgICAgICAgICBjb250ZW50OiAiICoiOwogICAgICAgICAgICBjb2xvcjogcmVkOwogICAgICAgIH0KCiAgICAgICAgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEgewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgcGFkZGluZzogNHB4IDZweDsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgICAgICAgICBmb250LXNpemU6IDExcHg7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgICAgICAgICAgY29sb3I6ICMzMzM7CiAgICAgICAgfQoKICAgICAgICBzZWxlY3QgewogICAgICAgICAgICBhcHBlYXJhbmNlOiBub25lOwogICAgICAgICAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7CiAgICAgICAgICAgIC1tb3otYXBwZWFyYW5jZTogbm9uZTsKICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD1VVEYtOCwlM2NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMjQgMjQnIGZpbGw9J25vbmUnIHN0cm9rZT0nY3VycmVudENvbG9yJyBzdHJva2Utd2lkdGg9JzInIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCclM2UlM2Nwb2x5bGluZSBwb2ludHM9JzYgOSAxMiAxNSAxOCA5JyUzZSUzYy9wb2x5bGluZSUzZSUzYy9zdmclM2UiKTsKICAgICAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICAgICAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogcmlnaHQgNHB4IGNlbnRlcjsKICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiAxNnB4OwogICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAyNHB4OwogICAgICAgIH0KCiAgICAgICAgaW5wdXQ6Zm9jdXMsIHNlbGVjdDpmb2N1cywgdGV4dGFyZWE6Zm9jdXMgewogICAgICAgICAgICBvdXRsaW5lOiBub25lOwogICAgICAgICAgICBib3JkZXItY29sb3I6ICM0Q0FGNTA7CiAgICAgICAgfQoKICAgICAgICB0ZXh0YXJlYSB7CiAgICAgICAgICAgIHJlc2l6ZTogdmVydGljYWw7CiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDQwcHg7CiAgICAgICAgfQoKICAgICAgICAuY2hhbm5lbC1zZWN0aW9uIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2Y5ZjlmOTsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2UwZTBlMDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgICBwYWRkaW5nOiA4cHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDsKICAgICAgICB9CgogICAgICAgIC5wb2xpY3ktc2VjdGlvbiB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDZweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4OwogICAgICAgIH0KCiAgICAgICAgLnBvbGljeS1jb250ZW50IHsKICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgfQoKICAgICAgICAucG9saWN5LWNvbnRlbnQuY29sbGFwc2VkIHsKICAgICAgICAgICAgZGlzcGxheTogbm9uZTsKICAgICAgICB9CgogICAgICAgIC50b2dnbGUtYnRuIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzIxOTZGMzsKICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4OwogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDRweDsKICAgICAgICB9CgogICAgICAgIC50b2dnbGUtYnRuOmhvdmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzE5NzZEMjsKICAgICAgICB9CgogICAgICAgIC5hY2Nlc3Mtc2VjdGlvbiB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmYWZhZmE7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlOGU4ZTg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgcGFkZGluZzogNnB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7CiAgICAgICAgfQoKICAgICAgICAubm90aWZpY2F0aW9uLXNlY3Rpb24gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZTBlMGUwOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDRweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4OwogICAgICAgIH0KCiAgICAgICAgLmdyaWQtMiB7CiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7CiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsKICAgICAgICAgICAgZ2FwOiA2cHg7CiAgICAgICAgfQoKICAgICAgICAuZ3JpZC0zIHsKICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsKICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyIDFmcjsKICAgICAgICAgICAgZ2FwOiA2cHg7CiAgICAgICAgfQoKICAgICAgICAuZ3JpZC00IHsKICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsKICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyIDFmciAxZnI7CiAgICAgICAgICAgIGdhcDogNnB4OwogICAgICAgIH0KCiAgICAgICAgLmdyaWQtNSB7CiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7CiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDUsIDFmcik7CiAgICAgICAgICAgIGdhcDogNnB4OwogICAgICAgIH0KCiAgICAgICAgLmJ0bi1ncm91cCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGdhcDogNnB4OwogICAgICAgICAgICBtYXJnaW4tdG9wOiA2cHg7CiAgICAgICAgfQoKICAgICAgICAub3V0cHV0LWFyZWEgewogICAgICAgICAgICBtYXJnaW4tdG9wOiAxMnB4OwogICAgICAgICAgICBib3JkZXItdG9wOiAycHggc29saWQgI2VlZTsKICAgICAgICAgICAgcGFkZGluZy10b3A6IDEycHg7CiAgICAgICAgfQoKICAgICAgICAub3V0cHV0LWJveCB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmNGY0ZjQ7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgcGFkZGluZzogOHB4OwogICAgICAgICAgICBmb250LWZhbWlseTogJ0NvdXJpZXIgTmV3JywgbW9ub3NwYWNlOwogICAgICAgICAgICBmb250LXNpemU6IDEwcHg7CiAgICAgICAgICAgIG1heC1oZWlnaHQ6IDI1MHB4OwogICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvOwogICAgICAgICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7CiAgICAgICAgICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDsKICAgICAgICB9CgogICAgICAgIC5maWxlLWlucHV0LXdyYXBwZXIgewogICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICB9CgogICAgICAgIC5maWxlLWlucHV0LXdyYXBwZXIgaW5wdXRbdHlwZT1maWxlXSB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgbGVmdDogLTk5OTlweDsKICAgICAgICB9CgogICAgICAgIC5zZWN0aW9uLWhlYWRlciB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4OwogICAgICAgIH0KCiAgICAgICAgLmJhZGdlIHsKICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMjE5NkYzOwogICAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgICAgIHBhZGRpbmc6IDJweCA2cHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4OwogICAgICAgICAgICBtYXJnaW4tbGVmdDogNHB4OwogICAgICAgIH0KCiAgICAgICAgLmFsZXJ0IHsKICAgICAgICAgICAgcGFkZGluZzogNnB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4OwogICAgICAgIH0KCiAgICAgICAgLmFsZXJ0LWluZm8gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZDFlY2YxOwogICAgICAgICAgICBjb2xvcjogIzBjNTQ2MDsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2JlZTVlYjsKICAgICAgICB9CgogICAgICAgIC5tb2RhbCB7CiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgei1pbmRleDogMTAwMDsKICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICAgICAgdG9wOiAwOwogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDAuNSk7CiAgICAgICAgfQoKICAgICAgICAubW9kYWwtY29udGVudCB7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogICAgICAgICAgICBtYXJnaW46IDUwcHggYXV0bzsKICAgICAgICAgICAgcGFkZGluZzogMjBweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4OwogICAgICAgICAgICB3aWR0aDogODAlOwogICAgICAgICAgICBtYXgtd2lkdGg6IDgwMHB4OwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAyMHB4IHJnYmEoMCwwLDAsMC4zKTsKICAgICAgICB9CgogICAgICAgIC5tb2RhbC1oZWFkZXIgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICAgICAgfQoKICAgICAgICAubW9kYWwtaGVhZGVyIGgyIHsKICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgfQoKICAgICAgICAuY2xvc2UgewogICAgICAgICAgICBjb2xvcjogI2FhYTsKICAgICAgICAgICAgZm9udC1zaXplOiAyOHB4OwogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICBsaW5lLWhlaWdodDogMjBweDsKICAgICAgICB9CgogICAgICAgIC5jbG9zZTpob3ZlciB7CiAgICAgICAgICAgIGNvbG9yOiAjMDAwOwogICAgICAgIH0KCiAgICAgICAgI2pzb25JbnB1dCB7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBtaW4taGVpZ2h0OiAzMDBweDsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsKICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgICAgICBwYWRkaW5nOiAxMHB4OwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgfQoKICAgICAgICAudGFicyB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGdhcDogNHB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4OwogICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgI2UwZTBlMDsKICAgICAgICB9CgogICAgICAgIC50YWIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjBmMGYwOwogICAgICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICBwYWRkaW5nOiA4cHggMjBweDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICBmb250LXNpemU6IDEzcHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweCA0cHggMCAwOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuM3M7CiAgICAgICAgfQoKICAgICAgICAudGFiOmhvdmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2UwZTBlMDsKICAgICAgICB9CgogICAgICAgIC50YWIuYWN0aXZlIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzRDQUY1MDsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgIH0KCiAgICAgICAgLnRhYi1jb250ZW50IHsKICAgICAgICAgICAgZGlzcGxheTogbm9uZTsKICAgICAgICB9CgogICAgICAgIC50YWItY29udGVudC5hY3RpdmUgewogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgICB9CgogICAgICAgIC5jb21wYXJlLWNvbnRhaW5lciB7CiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7CiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsKICAgICAgICAgICAgZ2FwOiAxMnB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4OwogICAgICAgIH0KCiAgICAgICAgLmNvbXBhcmUtcGFuZWwgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICAgIH0KCiAgICAgICAgLmNvbXBhcmUtcGFuZWwgaDMgewogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7CiAgICAgICAgfQoKICAgICAgICAuY29tcGFyZS10ZXh0YXJlYSB7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBtaW4taGVpZ2h0OiA0MDBweDsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsKICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4OwogICAgICAgICAgICBwYWRkaW5nOiA4cHg7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICAgICAgcmVzaXplOiB2ZXJ0aWNhbDsKICAgICAgICB9CgogICAgICAgIC5kaWZmLXJlc3VsdHMgewogICAgICAgICAgICBtYXJnaW4tdG9wOiAxMnB4OwogICAgICAgICAgICBwYWRkaW5nOiAxMnB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjlmOWY5OwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgICAgIG1heC1oZWlnaHQ6IDUwMHB4OwogICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvOwogICAgICAgIH0KCiAgICAgICAgLmRpZmYtaXRlbSB7CiAgICAgICAgICAgIHBhZGRpbmc6IDhweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDsKICAgICAgICB9CgogICAgICAgIC5kaWZmLWFkZGVkIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2Q0ZWRkYTsKICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjMjhhNzQ1OwogICAgICAgIH0KCiAgICAgICAgLmRpZmYtcmVtb3ZlZCB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmOGQ3ZGE7CiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiA0cHggc29saWQgI2RjMzU0NTsKICAgICAgICB9CgogICAgICAgIC5kaWZmLW1vZGlmaWVkIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZjNjZDsKICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjZmZjMTA3OwogICAgICAgIH0KCiAgICAgICAgLmRpZmYtcGF0aCB7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICAgICAgICAgIGNvbG9yOiAjMzMzOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7CiAgICAgICAgfQoKICAgICAgICAuZGlmZi12YWx1ZSB7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnQ291cmllciBOZXcnLCBtb25vc3BhY2U7CiAgICAgICAgICAgIGNvbG9yOiAjNjY2OwogICAgICAgIH0KCiAgICAgICAgLmluZm8taWNvbiB7CiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAgICAgd2lkdGg6IDEycHg7CiAgICAgICAgICAgIGhlaWdodDogMTJweDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEycHg7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgICAgICAgICAgIGNvbG9yOiAjMjE5NkYzOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjMjE5NkYzOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogOHB4OwogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICAgICAgY3Vyc29yOiBoZWxwOwogICAgICAgICAgICBtYXJnaW4tbGVmdDogM3B4OwogICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogICAgICAgIH0KCiAgICAgICAgLmluZm8taWNvbjpob3ZlciB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMyMTk2RjM7CiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgICB9CgogICAgICAgIC5leHBhbmQtaWNvbiB7CiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAgICAgd2lkdGg6IDE2cHg7CiAgICAgICAgICAgIGhlaWdodDogMTZweDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDE2cHg7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzRDQUY1MDsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDRweDsKICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTsKICAgICAgICB9CgogICAgICAgIC5leHBhbmQtaWNvbjpob3ZlciB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICM0NWEwNDk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xKTsKICAgICAgICB9CgogICAgICAgIC5pbnB1dC13aXRoLWV4cGFuZCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGdhcDogNHB4OwogICAgICAgIH0KCiAgICAgICAgLmlucHV0LXdpdGgtZXhwYW5kIGlucHV0IHsKICAgICAgICAgICAgZmxleDogMTsKICAgICAgICB9CgogICAgICAgIC5leHBhbmQtbW9kYWwgewogICAgICAgICAgICBkaXNwbGF5OiBub25lOwogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHotaW5kZXg6IDEwMDI7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHRvcDogMDsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwwLjUpOwogICAgICAgIH0KCiAgICAgICAgLmV4cGFuZC1tb2RhbC1jb250ZW50IHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgICAgICAgICAgIG1hcmdpbjogODBweCBhdXRvOwogICAgICAgICAgICBwYWRkaW5nOiAyMHB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICAgICAgICAgIHdpZHRoOiA5MCU7CiAgICAgICAgICAgIG1heC13aWR0aDogODAwcHg7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDIwcHggcmdiYSgwLDAsMCwwLjMpOwogICAgICAgIH0KCiAgICAgICAgLmV4cGFuZC1tb2RhbC1oZWFkZXIgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4OwogICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzRDQUY1MDsKICAgICAgICB9CgogICAgICAgIC5leHBhbmQtbW9kYWwtaGVhZGVyIGgzIHsKICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICBjb2xvcjogIzMzMzsKICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgIH0KCiAgICAgICAgLmV4cGFuZC10ZXh0YXJlYSB7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBtaW4taGVpZ2h0OiAzMDBweDsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsKICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgICAgICBwYWRkaW5nOiAxMHB4OwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgICAgIHJlc2l6ZTogdmVydGljYWw7CiAgICAgICAgfQoKICAgICAgICAuZXhwYW5kLXRleHRhcmVhOmZvY3VzIHsKICAgICAgICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjNENBRjUwOwogICAgICAgIH0KCiAgICAgICAgLmluZm8tbW9kYWwgewogICAgICAgICAgICBkaXNwbGF5OiBub25lOwogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHotaW5kZXg6IDEwMDE7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHRvcDogMDsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwwLjUpOwogICAgICAgIH0KCiAgICAgICAgLmluZm8tbW9kYWwtY29udGVudCB7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogICAgICAgICAgICBtYXJnaW46IDEwMHB4IGF1dG87CiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgICAgICAgICAgd2lkdGg6IDkwJTsKICAgICAgICAgICAgbWF4LXdpZHRoOiA2MDBweDsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMjBweCByZ2JhKDAsMCwwLDAuMyk7CiAgICAgICAgfQoKICAgICAgICAuaW5mby1tb2RhbC1oZWFkZXIgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4OwogICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzRDQUY1MDsKICAgICAgICB9CgogICAgICAgIC5pbmZvLW1vZGFsLWhlYWRlciBoMyB7CiAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgY29sb3I6ICMzMzM7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICB9CgogICAgICAgIC5pbmZvLW1vZGFsLWJvZHkgewogICAgICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjsKICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4OwogICAgICAgIH0KCiAgICAgICAgLmluZm8tbW9kYWwtYm9keSBzdHJvbmcgewogICAgICAgICAgICBjb2xvcjogIzMzMzsKICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDsKICAgICAgICB9CgogICAgICAgIC5pbmZvLW1vZGFsLWJvZHkgY29kZSB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmNGY0ZjQ7CiAgICAgICAgICAgIHBhZGRpbmc6IDJweCA2cHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsKICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgIH0KCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDEyMDBweCkgewogICAgICAgICAgICAuZ3JpZC00LCAuZ3JpZC01IHsKICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7CiAgICAgICAgICAgIC5ncmlkLTIsIC5ncmlkLTMsIC5ncmlkLTQsIC5ncmlkLTUgewogICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGRpdiBjbGFzcz0iY29udGFpbmVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXIiPgogICAgICAgICAgICA8aDE+UG9saWN5IENvbmZpZyBNYW5hZ2VyPC9oMT4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBUYWJzIC0tPgogICAgICAgIDxkaXYgY2xhc3M9InRhYnMiPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJ0YWIgYWN0aXZlIiBvbmNsaWNrPSJzd2l0Y2hUYWIoJ2VkaXRvcicpIj5FZGl0b3I8L2J1dHRvbj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0idGFiIiBvbmNsaWNrPSJzd2l0Y2hUYWIoJ2NvbXBhcmUnKSI+Q29tcGFyZSBKU09OPC9idXR0b24+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDwhLS0gRWRpdG9yIFRhYiAtLT4KICAgICAgICA8ZGl2IGlkPSJlZGl0b3JUYWIiIGNsYXNzPSJ0YWItY29udGVudCBhY3RpdmUiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJhY3Rpb25zIj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNlY29uZGFyeSIgb25jbGljaz0ib3BlbkxvYWRNb2RhbCgpIj5Mb2FkIEpTT048L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNlY29uZGFyeSIgb25jbGljaz0iZ2VuZXJhdGVKU09OKCkiPkdlbiBKU09OPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJzZWNvbmRhcnkiIG9uY2xpY2s9ImdlbmVyYXRlU1FMKCkiPkdlbiBTUUw8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNlY29uZGFyeSIgb25jbGljaz0iZG93bmxvYWRPdXRwdXQoKSI+RG93bmxvYWQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNlY29uZGFyeSIgb25jbGljaz0iY29sbGFwc2VBbGxQb2xpY2llcygpIj5Db2xsYXBzZSBBbGw8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNlY29uZGFyeSIgb25jbGljaz0iZXhwYW5kQWxsUG9saWNpZXMoKSI+RXhwYW5kIEFsbDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZGFuZ2VyIiBvbmNsaWNrPSJyZXNldEZvcm0oKSI+UmVzZXQ8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgIDwhLS0gTG9hZCBKU09OIE1vZGFsIC0tPgogICAgICAgIDxkaXYgaWQ9ImxvYWRNb2RhbCIgY2xhc3M9Im1vZGFsIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtY29udGVudCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxoMj5Mb2FkIEpTT048L2gyPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJjbG9zZSIgb25jbGljaz0iY2xvc2VMb2FkTW9kYWwoKSI+JnRpbWVzOzwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0iY29sb3I6ICM2NjY7IG1hcmdpbi1ib3R0b206IDEwcHg7Ij5QYXN0ZSB5b3VyIEpTT04gY29udGVudCBiZWxvdzo8L3A+CiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJqc29uSW5wdXQiIHBsYWNlaG9sZGVyPSdQYXN0ZSBKU09OIGhlcmUsIGUuZy4sIHsicG9saWNpZXNNYXBzIjogWy4uLl19Jz48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJ0bi1ncm91cCIgc3R5bGU9Im1hcmdpbi10b3A6IDEwcHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJsb2FkRnJvbVRleHRhcmVhKCkiPkxvYWQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJjbG9zZUxvYWRNb2RhbCgpIj5DYW5jZWw8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBJbmZvIE1vZGFsIC0tPgogICAgICAgIDxkaXYgaWQ9ImluZm9Nb2RhbCIgY2xhc3M9ImluZm8tbW9kYWwiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbmZvLW1vZGFsLWNvbnRlbnQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5mby1tb2RhbC1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxoMyBpZD0iaW5mb1RpdGxlIj5GaWVsZCBJbmZvcm1hdGlvbjwvaDM+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImNsb3NlIiBvbmNsaWNrPSJjbG9zZUluZm9Nb2RhbCgpIj4mdGltZXM7PC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbmZvLW1vZGFsLWJvZHkiIGlkPSJpbmZvQm9keSI+CiAgICAgICAgICAgICAgICAgICAgPCEtLSBEeW5hbWljIGNvbnRlbnQgd2lsbCBiZSBpbnNlcnRlZCBoZXJlIC0tPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8IS0tIEV4cGFuZCBNb2RhbCAtLT4KICAgICAgICA8ZGl2IGlkPSJleHBhbmRNb2RhbCIgY2xhc3M9ImV4cGFuZC1tb2RhbCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImV4cGFuZC1tb2RhbC1jb250ZW50Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImV4cGFuZC1tb2RhbC1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxoMyBpZD0iZXhwYW5kVGl0bGUiPkVkaXQgRmllbGQ8L2gzPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJjbG9zZSIgb25jbGljaz0iY2xvc2VFeHBhbmRNb2RhbCgpIj4mdGltZXM7PC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0iZXhwYW5kVGV4dGFyZWEiIGNsYXNzPSJleHBhbmQtdGV4dGFyZWEiIHBsYWNlaG9sZGVyPSJFbnRlciB5b3VyIHZhbHVlIGhlcmUuLi4iPjwvdGV4dGFyZWE+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYnRuLWdyb3VwIiBzdHlsZT0ibWFyZ2luLXRvcDogMTBweDsiPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InNhdmVFeHBhbmRlZFZhbHVlKCkiPlNhdmU8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJjbG9zZUV4cGFuZE1vZGFsKCkiPkNhbmNlbDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8Zm9ybSBpZD0icG9saWN5Rm9ybSI+CiAgICAgICAgICAgIDxkaXYgaWQ9ImNoYW5uZWxzQ29udGFpbmVyIj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYnRuLWdyb3VwIj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJhZGRDaGFubmVsKCkiPisgQWRkIENoYW5uZWw8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9mb3JtPgoKICAgICAgICA8ZGl2IGNsYXNzPSJvdXRwdXQtYXJlYSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyIj4KICAgICAgICAgICAgICAgIDxoMj5PdXRwdXQ8L2gyPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiA2cHg7Ij4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJzZWNvbmRhcnkgc21hbGwiIG9uY2xpY2s9ImNvcHlPdXRwdXQoKSIgdGl0bGU9IkNvcHkgdG8gY2xpcGJvYXJkIj5Db3B5PC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ib3V0cHV0VHlwZSIgc3R5bGU9IndpZHRoOiBhdXRvOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IG1hcmdpbi1yaWdodDogNnB4OyI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ianNvbiI+SlNPTjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InNxbCI+U1FMPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im91dHB1dC1ib3giIGlkPSJvdXRwdXRCb3giPk91dHB1dCB3aWxsIGFwcGVhciBoZXJlLi4uPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDwhLS0gQ29tcGFyZSBUYWIgLS0+CiAgICAgICAgPGRpdiBpZD0iY29tcGFyZVRhYiIgY2xhc3M9InRhYi1jb250ZW50Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29tcGFyZS1jb250YWluZXIiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29tcGFyZS1wYW5lbCI+CiAgICAgICAgICAgICAgICAgICAgPGgzPkpTT04gMSAoTGVmdCk8L2gzPgogICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0ianNvbjEiIGNsYXNzPSJjb21wYXJlLXRleHRhcmVhIiBwbGFjZWhvbGRlcj0nUGFzdGUgZmlyc3QgSlNPTiBoZXJlLi4uJz48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb21wYXJlLXBhbmVsIj4KICAgICAgICAgICAgICAgICAgICA8aDM+SlNPTiAyIChSaWdodCk8L2gzPgogICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0ianNvbjIiIGNsYXNzPSJjb21wYXJlLXRleHRhcmVhIiBwbGFjZWhvbGRlcj0nUGFzdGUgc2Vjb25kIEpTT04gaGVyZS4uLic+PC90ZXh0YXJlYT4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbnMiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJjb21wYXJlSlNPTnMoKSI+Q29tcGFyZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJjbGVhckNvbXBhcmlzb24oKSI+Q2xlYXI8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGlkPSJkaWZmUmVzdWx0cyIgY2xhc3M9ImRpZmYtcmVzdWx0cyIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4KICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMTBweDsiPkRpZmZlcmVuY2VzOjwvaDM+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJkaWZmQ29udGVudCI+PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPHNjcmlwdD4KICAgICAgICBsZXQgY2hhbm5lbENvdW50ZXIgPSAwOwogICAgICAgIGxldCBwb2xpY3lDb3VudGVyID0gMDsKICAgICAgICBsZXQgYWNjZXNzQ291bnRlciA9IDA7CiAgICAgICAgbGV0IG5vdGlmaWNhdGlvbkNvdW50ZXIgPSAwOwogICAgICAgIGxldCBjdXJyZW50T3V0cHV0ID0gJyc7CgogICAgICAgIC8vIEZpZWxkIGluZm9ybWF0aW9uIGRhdGFiYXNlCiAgICAgICAgY29uc3QgZmllbGRJbmZvID0gewogICAgICAgICAgICBjaGFubmVsSWQ6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiQ2hhbm5lbCBJRCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY2hhbm5lbCB0aHJvdWdoIHdoaWNoIHRoZSBzZXJ2aWNlIGlzIGFjY2Vzc2VkLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJTR19NQiIsICJVU19XRUIiLCAiVUtfQVBJIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXJ2aWNlSWQ6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiU2VydmljZSBJRCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgc2VydmljZS9BUEkgZW5kcG9pbnQuIFRoaXMgc2hvdWxkIGJlIHVuaXF1ZSBhY3Jvc3MgYWxsIHBvbGljaWVzLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJQQVlOT1dfVVBJXzEiLCAiVFJBTlNGRVJfRlVORFMiLCAiVklFV19CQUxBTkNFIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBlbmRQb2ludDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJFbmQgUG9pbnQgKFVSSSkiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgQVBJIGVuZHBvaW50IHBhdGggdGhhdCB0aGlzIHBvbGljeSBhcHBsaWVzIHRvLiBUaGlzIGlzIHRoZSBpbmNvbWluZyByZXF1ZXN0IHBhdGguIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIi9wYXltZW50cy9wcm94eS10cmFuc2Zlci1mY3kvcGF5bm93dXBpIiwgIi9hcGkvdHJhbnNmZXIiLCAiL2JhbGFuY2UvdmlldyJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaHR0cE1ldGhvZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJIVFRQIE1ldGhvZCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlRoZSBIVFRQIG1ldGhvZCB1c2VkIGZvciB0aGlzIGVuZHBvaW50LiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJQT1NUIiwgIkdFVCIsICJQVVQiLCAiREVMRVRFIiwgIlBBVENIIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBvdXRFbmRQb2ludDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJPdXQgRW5kIFBvaW50IiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIG91dGdvaW5nIGVuZHBvaW50IHBhdGguIENhbiBiZSBzYW1lIGFzIGVuZHBvaW50IG9yIGRpZmZlcmVudCBmb3Igcm91dGluZyBwdXJwb3Nlcy4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiL3BheW1lbnRzL3Byb3h5LXRyYW5zZmVyLWZjeS9wYXlub3d1cGkiLCAiL2ludGVybmFsL2FwaS90cmFuc2ZlciJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlcnZpY2VEZXNjOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlNlcnZpY2UgRGVzY3JpcHRpb24iLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJBIGh1bWFuLXJlYWRhYmxlIGRlc2NyaXB0aW9uIG9mIHdoYXQgdGhpcyBzZXJ2aWNlIGRvZXMuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlBheW5vd1VQSShTR0QgdG8gSU5SKSB0cmFuc2ZlciIsICJGdW5kIHRyYW5zZmVyIHNlcnZpY2UiLCAiQmFsYW5jZSBpbnF1aXJ5Il0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBhdXRoTGV2ZWxSZXF1aXJlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJBdXRoIExldmVsIFJlcXVpcmVkIChMZXZlbCkiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgYXV0aGVudGljYXRpb24gbGV2ZWwgcmVxdWlyZWQgdG8gYWNjZXNzIHRoaXMgc2VydmljZS4gTGV2ZWwgMCBtZWFucyBubyBhdXRoZW50aWNhdGlvbiByZXF1aXJlZC4gSGlnaGVyIGxldmVscyByZXF1aXJlIHN0cm9uZ2VyIGF1dGhlbnRpY2F0aW9uLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyIwIChObyBhdXRoKSIsICIxIChCYXNpYykiLCAiMiAoU3Ryb25nKSIsICIzIChNdWx0aS1mYWN0b3IpIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICAgIGxvZ2ljOiAiSWYgbGV2ZWwgPSAwLCB2YWxpZGF0aW9uID0gZmFsc2UgYW5kIHdoaXRlbGlzdCA9IHRydWUuIElmIGxldmVsICE9IDAsIHZhbGlkYXRpb24gPSB0cnVlIGFuZCB3aGl0ZWxpc3QgPSBmYWxzZS4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlc3Npb25WYWxSZXF1aXJlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJTZXNzaW9uIFZhbGlkYXRpb24gUmVxdWlyZWQiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJXaGV0aGVyIHNlc3Npb24gdmFsaWRhdGlvbiBpcyByZXF1aXJlZCBmb3IgdGhpcyBzZXJ2aWNlLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJ0cnVlIiwgImZhbHNlIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgICAgICAgICBsb2dpYzogIkF1dG9tYXRpY2FsbHkgc2V0IGJhc2VkIG9uIGF1dGggbGV2ZWwuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB3aGl0ZWxpc3RlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJXaGl0ZWxpc3RlZCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIldoZXRoZXIgdGhpcyBzZXJ2aWNlIGlzIHdoaXRlbGlzdGVkIChhbGxvd2VkIHdpdGhvdXQgY2VydGFpbiBjaGVja3MpLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJ0cnVlIiwgImZhbHNlIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgICAgICAgICBsb2dpYzogIkF1dG9tYXRpY2FsbHkgc2V0IGJhc2VkIG9uIGF1dGggbGV2ZWwuIgogICAgICAgICAgICB9LAogICAgICAgICAgICBhbGxvd2VkU2NvcGU6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiQWxsb3dlZCBTY29wZSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlRoZSBPQXV0aC9hY2Nlc3Mgc2NvcGVzIHJlcXVpcmVkIHRvIGFjY2VzcyB0aGlzIHNlcnZpY2UuIFNwYWNlLXNlcGFyYXRlZCBsaXN0LiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJhY2Nlc3NfbGV2ZWwyIGlhbV9hY2Nlc3Mgc2VydmljZV9sZXZlbDIiLCAiYWNjZXNzX2xldmVsMCIsICJhZG1pbl9zY29wZSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdHhuQXV0aENvbmNlcm5zOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlRyYW5zYWN0aW9uIEF1dGggQ29uY2VybnMgKFR4biBBdXRoKSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIldoZXRoZXIgdGhpcyBzZXJ2aWNlIHJlcXVpcmVzIHRyYW5zYWN0aW9uIGF1dGhlbnRpY2F0aW9uL2F1dGhvcml6YXRpb24uIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlkgKFllcykiLCAiTiAoTm8pIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICAgIGxvZ2ljOiAiSWYgTiwgb25seSAxIGFjY2VzcyByZWNvcmQgaXMgYWxsb3dlZC4gSWYgWSwgMSBvciBtb3JlIGFjY2VzcyByZWNvcmRzIGFsbG93ZWQuIgogICAgICAgICAgICB9LAogICAgICAgICAgICBjb29saW5nUGVyaW9kQ2hlY2tSZXF1aXJlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJDb29saW5nIFBlcmlvZCBDaGVjayBSZXF1aXJlZCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIldoZXRoZXIgYSBjb29saW5nIHBlcmlvZCBjaGVjayBpcyByZXF1aXJlZCBiZWZvcmUgYWxsb3dpbmcgdGhpcyB0cmFuc2FjdGlvbi4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsidHJ1ZSIsICJmYWxzZSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHR4bkF1dGhSZXF1aXJlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJUcmFuc2FjdGlvbmFsIEF1dGggUmVxdWlyZWQiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgbGV2ZWwgb2YgdHJhbnNhY3Rpb24gYXV0aG9yaXphdGlvbiByZXF1aXJlZC4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiMCAoTm9uZSkiLCAiMSAoQmFzaWMpIiwgIjIgKFN0cm9uZykiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBub3RpZmljYXRpb25QYXJhbU1hcDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJOb3RpZmljYXRpb24gUGFyYW1ldGVyIE1hcCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIk1hcHMgcmVxdWVzdCBmaWVsZHMgdG8gbm90aWZpY2F0aW9uIHRlbXBsYXRlIHBhcmFtZXRlcnMuIFVzZWQgdG8gcG9wdWxhdGUgbm90aWZpY2F0aW9uIG1lc3NhZ2VzLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJTSE9SVEZJRUxEMDE9cnFPYmoucmVxdWVzdF9ib2R5LmFtb3VudCwgU0hPUlRGSUVMRDAyPXJxT2JqLnJlcXVlc3RfYm9keS5jdXJyZW5jeSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlc3Npb25Db25kaXRpb25NYXA6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiU2Vzc2lvbiBDb25kaXRpb25zIE1hcCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIkNvbmRpdGlvbnMgYmFzZWQgb24gc2Vzc2lvbiBhdHRyaWJ1dGVzIHRoYXQgbXVzdCBiZSBtZXQuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbInNlc3Npb24ubG9naW5UeXBlPVNFQ1VSRSIsICJzZXNzaW9uLmRldmljZVZlcmlmaWVkPXRydWUiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBwcm9maWxlQ29uZGl0aW9uTWFwOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlByb2ZpbGUgQ29uZGl0aW9ucyBNYXAiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJDb25kaXRpb25zIGJhc2VkIG9uIHVzZXIgcHJvZmlsZSBhdHRyaWJ1dGVzIHRoYXQgbXVzdCBiZSBtZXQuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbInByb2ZpbGUuYWNjb3VudFR5cGU9UFJFTUlVTSIsICJwcm9maWxlLnZlcmlmaWVkPXRydWUiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICByZXF1ZXN0Q29uZGl0aW9uc01hcDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJSZXF1ZXN0IENvbmRpdGlvbnMgTWFwIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiQ3VzdG9tIGNvbmRpdGlvbnMgYmFzZWQgb24gcmVxdWVzdCBkYXRhIHRoYXQgbXVzdCBiZSBtZXQuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbInJxT2JqLnJlcXVlc3RfYm9keS5hbW91bnQ+MTAwMCIsICJycU9iai5yZXF1ZXN0X2JvZHkuY3VycmVuY3k9VVNEIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmlza0luZGljYXRvcjogewogICAgICAgICAgICAgICAgdGl0bGU6ICJSaXNrIEluZGljYXRvciIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlJpc2sgbGV2ZWwgaW5kaWNhdG9yIGZvciB0aGlzIHRyYW5zYWN0aW9uIHR5cGUuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIjAgKExvdykiLCAiMSAoTWVkaXVtKSIsICIyIChIaWdoKSIsICIzIChDcml0aWNhbCkiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBwb3N0YWxDb2RlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlBvc3RhbCBDb2RlIENoZWNrIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiV2hldGhlciBwb3N0YWwgY29kZSB2YWxpZGF0aW9uIGlzIHJlcXVpcmVkLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyIwIChOb3QgcmVxdWlyZWQpIiwgIjEgKFJlcXVpcmVkKSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVwZGF0ZUxpbWl0OiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlVwZGF0ZSBMaW1pdCBDaGVjayIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIldoZXRoZXIgbGltaXQgdXBkYXRlcyBhcmUgYWxsb3dlZC4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiMCAoTm90IGFsbG93ZWQpIiwgIjEgKEFsbG93ZWQpIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWluQW10Q29kZTogewogICAgICAgICAgICAgICAgdGl0bGU6ICJNaW4gQW1vdW50IENvZGUiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJSZWZlcmVuY2UgY29kZSBmb3IgdGhlIG1pbmltdW0gYW1vdW50IGFsbG93ZWQgZm9yIHRoaXMgdHJhbnNhY3Rpb24uIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIkRFRkFVTFRfTUlOX0FNVCIsICJQQVlOT1dfTUlOIiwgIlRSQU5TRkVSX01JTiJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1pbkFtdENvZGVWYWx1ZTogewogICAgICAgICAgICAgICAgdGl0bGU6ICJNaW4gQW1vdW50IFZhbHVlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIGFjdHVhbCBtaW5pbXVtIGFtb3VudCB2YWx1ZS4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiMC4wMDAwIiwgIjEwLjAwMDAiLCAiMTAwLjAwMDAiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBtYXhBbXRDb2RlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIk1heCBBbW91bnQgQ29kZSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlJlZmVyZW5jZSBjb2RlIGZvciB0aGUgbWF4aW11bSBhbW91bnQgYWxsb3dlZCBmb3IgdGhpcyB0cmFuc2FjdGlvbi4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiREVGQVVMVF9NQVhfQU1UIiwgIlBBWU5PV19NQVgiLCAiVFJBTlNGRVJfTUFYIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWF4QW10Q29kZVZhbHVlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIk1heCBBbW91bnQgVmFsdWUiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgYWN0dWFsIG1heGltdW0gYW1vdW50IHZhbHVlLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyI5OTk5OTkuOTk5OSIsICIxMDAwMC4wMDAwIiwgIjUwMDAwLjAwMDAiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBub3RpZmljYXRpb25UeXBlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIk5vdGlmaWNhdGlvbiBUeXBlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIHR5cGUgb2Ygbm90aWZpY2F0aW9uIHRvIHNlbmQgdG8gdGhlIHVzZXIuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlNNUyIsICJFTUFJTCIsICJQVVNIIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXV0aFR5cGU6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiQXV0aCBUeXBlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIGF1dGhlbnRpY2F0aW9uIHR5cGUgcmVxdWlyZWQgZm9yIHRoaXMgbm90aWZpY2F0aW9uL3RyYW5zYWN0aW9uLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJBVVRIX0hBUkRfU0lHTiIsICJBVVRIX1NPRlRfU0lHTiIsICJBVVRIX09UUCJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRlbXBsYXRlSWQ6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiVGVtcGxhdGUgSUQiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgbm90aWZpY2F0aW9uIHRlbXBsYXRlIGlkZW50aWZpZXIgaW5jbHVkaW5nIGxhbmd1YWdlLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJTVEI4OFVQMTA4OkVuZ2xpc2giLCAiVEVNUExBVEVfMDAxOkVuZ2xpc2giLCAiVFhOX0FMRVJUOlNwYW5pc2giXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICB0ZW1wbGF0ZVBhcmFtczogewogICAgICAgICAgICAgICAgdGl0bGU6ICJUZW1wbGF0ZSBQYXJhbWV0ZXJzIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiQ29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgcGFyYW1ldGVycyB1c2VkIGluIHRoZSBub3RpZmljYXRpb24gdGVtcGxhdGUuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlNIT1JURklFTEQwMSxTSE9SVEZJRUxEMDIsU0hPUlRGSUVMRDAzIiwgIkFNT1VOVCxDVVJSRU5DWSxEQVRFIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaXNNYW5kYXRvcnk6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiSXMgTWFuZGF0b3J5IiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiV2hldGhlciB0aGlzIG5vdGlmaWNhdGlvbiBpcyBtYW5kYXRvcnkgZm9yIHRoZSB0cmFuc2FjdGlvbi4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsidHJ1ZSIsICJmYWxzZSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICB3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGFkZENoYW5uZWwoKTsKICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBzaG93SW5mbyhmaWVsZE5hbWUpIHsKICAgICAgICAgICAgY29uc3QgaW5mbyA9IGZpZWxkSW5mb1tmaWVsZE5hbWVdOwogICAgICAgICAgICBpZiAoIWluZm8pIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdObyBpbmZvcm1hdGlvbiBhdmFpbGFibGUgZm9yIHRoaXMgZmllbGQuJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvVGl0bGUnKS50ZXh0Q29udGVudCA9IGluZm8udGl0bGU7CgogICAgICAgICAgICBsZXQgYm9keUhUTUwgPSBgPHA+JHtpbmZvLmRlc2NyaXB0aW9ufTwvcD5gOwoKICAgICAgICAgICAgaWYgKGluZm8ucmVxdWlyZWQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgYm9keUhUTUwgKz0gYDxzdHJvbmc+UmVxdWlyZWQ6PC9zdHJvbmc+ICR7aW5mby5yZXF1aXJlZCA/ICdZZXMnIDogJ05vJ31gOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaW5mby5leGFtcGxlcyAmJiBpbmZvLmV4YW1wbGVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGJvZHlIVE1MICs9IGA8c3Ryb25nPkV4YW1wbGVzOjwvc3Ryb25nPmA7CiAgICAgICAgICAgICAgICBib2R5SFRNTCArPSAnPHVsIHN0eWxlPSJtYXJnaW46IDVweCAwOyBwYWRkaW5nLWxlZnQ6IDIwcHg7Ij4nOwogICAgICAgICAgICAgICAgaW5mby5leGFtcGxlcy5mb3JFYWNoKGV4ID0+IHsKICAgICAgICAgICAgICAgICAgICBib2R5SFRNTCArPSBgPGxpPjxjb2RlPiR7ZXh9PC9jb2RlPjwvbGk+YDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgYm9keUhUTUwgKz0gJzwvdWw+JzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGluZm8ubG9naWMpIHsKICAgICAgICAgICAgICAgIGJvZHlIVE1MICs9IGA8c3Ryb25nPkJ1c2luZXNzIExvZ2ljOjwvc3Ryb25nPjxwIHN0eWxlPSJtYXJnaW46IDVweCAwOyBwYWRkaW5nOiA4cHg7IGJhY2tncm91bmQ6ICNmZmYzY2Q7IGJvcmRlci1sZWZ0OiAzcHggc29saWQgI2ZmYzEwNzsgYm9yZGVyLXJhZGl1czogM3B4OyI+JHtpbmZvLmxvZ2ljfTwvcD5gOwogICAgICAgICAgICB9CgogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mb0JvZHknKS5pbm5lckhUTUwgPSBib2R5SFRNTDsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm9Nb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xvc2VJbmZvTW9kYWwoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIH0KCiAgICAgICAgLy8gQ2xvc2UgaW5mbyBtb2RhbCB3aGVuIGNsaWNraW5nIG91dHNpZGUKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICBjb25zdCBpbmZvTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mb01vZGFsJyk7CiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgPT0gaW5mb01vZGFsKSB7CiAgICAgICAgICAgICAgICBjbG9zZUluZm9Nb2RhbCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zdCBleHBhbmRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBhbmRNb2RhbCcpOwogICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09IGV4cGFuZE1vZGFsKSB7CiAgICAgICAgICAgICAgICBjbG9zZUV4cGFuZE1vZGFsKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgLy8gRXhwYW5kIGZpZWxkIGZ1bmN0aW9uYWxpdHkKICAgICAgICBsZXQgY3VycmVudEV4cGFuZElucHV0ID0gbnVsbDsKCiAgICAgICAgZnVuY3Rpb24gZXhwYW5kRmllbGQoZXhwYW5kSWNvbiwgZmllbGRUaXRsZSkgewogICAgICAgICAgICBjb25zdCBpbnB1dFdyYXBwZXIgPSBleHBhbmRJY29uLnBhcmVudEVsZW1lbnQ7CiAgICAgICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGlucHV0V3JhcHBlci5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpOwoKICAgICAgICAgICAgY3VycmVudEV4cGFuZElucHV0ID0gaW5wdXRFbGVtZW50OwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kVGl0bGUnKS50ZXh0Q29udGVudCA9IGZpZWxkVGl0bGU7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBhbmRUZXh0YXJlYScpLnZhbHVlID0gaW5wdXRFbGVtZW50LnZhbHVlOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGFuZFRleHRhcmVhJykuZm9jdXMoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNsb3NlRXhwYW5kTW9kYWwoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBhbmRNb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIGN1cnJlbnRFeHBhbmRJbnB1dCA9IG51bGw7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzYXZlRXhwYW5kZWRWYWx1ZSgpIHsKICAgICAgICAgICAgaWYgKGN1cnJlbnRFeHBhbmRJbnB1dCkgewogICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kVGV4dGFyZWEnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGN1cnJlbnRFeHBhbmRJbnB1dC52YWx1ZSA9IG5ld1ZhbHVlOwogICAgICAgICAgICAgICAgY2xvc2VFeHBhbmRNb2RhbCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzd2l0Y2hUYWIodGFiTmFtZSkgewogICAgICAgICAgICAvLyBIaWRlIGFsbCB0YWJzCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItY29udGVudCcpLmZvckVhY2godGFiID0+IHsKICAgICAgICAgICAgICAgIHRhYi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBSZW1vdmUgYWN0aXZlIGNsYXNzIGZyb20gYWxsIHRhYiBidXR0b25zCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWInKS5mb3JFYWNoKGJ0biA9PiB7CiAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gU2hvdyBzZWxlY3RlZCB0YWIKICAgICAgICAgICAgaWYgKHRhYk5hbWUgPT09ICdlZGl0b3InKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdG9yVGFiJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiJylbMF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodGFiTmFtZSA9PT0gJ2NvbXBhcmUnKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tcGFyZVRhYicpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYicpWzFdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwoKICAgICAgICAgICAgICAgIC8vIFBvcHVsYXRlIGRlZmF1bHQgdmFsdWUgaW4gYm90aCB0ZXh0YXJlYXMgaWYgZW1wdHkKICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRKc29uU3RyaW5nID0gYHsKICAicG9saWNpZXNNYXBzIjogWwogICAgewogICAgICAiY2hhbm5lbElkIjogIlNHX01CIiwKICAgICAgInBvbGljaWVzIjogWwoKICAgICAgXQogICAgfQogIF0KfWA7CgogICAgICAgICAgICAgICAgY29uc3QganNvbjFUZXh0YXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc29uMScpOwogICAgICAgICAgICAgICAgaWYgKCFqc29uMVRleHRhcmVhLnZhbHVlLnRyaW0oKSkgewogICAgICAgICAgICAgICAgICAgIGpzb24xVGV4dGFyZWEudmFsdWUgPSBkZWZhdWx0SnNvblN0cmluZzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zdCBqc29uMlRleHRhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzb24yJyk7CiAgICAgICAgICAgICAgICBpZiAoIWpzb24yVGV4dGFyZWEudmFsdWUudHJpbSgpKSB7CiAgICAgICAgICAgICAgICAgICAganNvbjJUZXh0YXJlYS52YWx1ZSA9IGRlZmF1bHRKc29uU3RyaW5nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhZGRDaGFubmVsKCkgewogICAgICAgICAgICBjb25zdCBjaGFubmVsSWQgPSBgY2hhbm5lbF8ke2NoYW5uZWxDb3VudGVyKyt9YDsKICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYW5uZWxzQ29udGFpbmVyJyk7CgogICAgICAgICAgICBjb25zdCBjaGFubmVsRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGNoYW5uZWxEaXYuY2xhc3NOYW1lID0gJ2NoYW5uZWwtc2VjdGlvbic7CiAgICAgICAgICAgIGNoYW5uZWxEaXYuaWQgPSBjaGFubmVsSWQ7CiAgICAgICAgICAgIGNoYW5uZWxEaXYuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxoMj5DaGFubmVsIDxzcGFuIGNsYXNzPSJiYWRnZSI+IyR7Y2hhbm5lbENvdW50ZXJ9PC9zcGFuPjwvaDI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJkYW5nZXIgc21hbGwiIG9uY2xpY2s9InJlbW92ZUNoYW5uZWwoJyR7Y2hhbm5lbElkfScpIj5SZW1vdmU8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJyZXF1aXJlZCI+Q2hhbm5lbCBJRCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnY2hhbm5lbElkJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImNoYW5uZWxJZCIgdmFsdWU9IlNHX01CIiByZXF1aXJlZD4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icG9saWNpZXMtY29udGFpbmVyIiBpZD0icG9saWNpZXNfJHtjaGFubmVsSWR9Ij48L2Rpdj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ic2Vjb25kYXJ5IHNtYWxsIiBvbmNsaWNrPSJhZGRQb2xpY3koJyR7Y2hhbm5lbElkfScpIj4rIFBvbGljeTwvYnV0dG9uPgogICAgICAgICAgICBgOwogICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2hhbm5lbERpdik7CiAgICAgICAgICAgIGFkZFBvbGljeShjaGFubmVsSWQpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQ2hhbm5lbChjaGFubmVsSWQpIHsKICAgICAgICAgICAgaWYgKGNvbmZpcm0oJ1JlbW92ZSB0aGlzIGNoYW5uZWw/JykpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNoYW5uZWxJZCkucmVtb3ZlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFkZFBvbGljeShjaGFubmVsSWQpIHsKICAgICAgICAgICAgY29uc3QgcG9saWN5SWQgPSBgcG9saWN5XyR7cG9saWN5Q291bnRlcisrfWA7CiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwb2xpY2llc18ke2NoYW5uZWxJZH1gKTsKCiAgICAgICAgICAgIGNvbnN0IHBvbGljeURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBwb2xpY3lEaXYuY2xhc3NOYW1lID0gJ3BvbGljeS1zZWN0aW9uJzsKICAgICAgICAgICAgcG9saWN5RGl2LmlkID0gcG9saWN5SWQ7CiAgICAgICAgICAgIHBvbGljeURpdi5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlciI+CiAgICAgICAgICAgICAgICAgICAgPGgzPgogICAgICAgICAgICAgICAgICAgICAgICBQb2xpY3kgPHNwYW4gY2xhc3M9ImJhZGdlIj4jJHtwb2xpY3lDb3VudGVyfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImZvbnQtd2VpZ2h0OiBub3JtYWw7IGNvbG9yOiAjNjY2OyBmb250LXNpemU6IDExcHg7IG1hcmdpbi1sZWZ0OiA4cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJwb2xpY3ktbWV0aG9kIiBpZD0ibWV0aG9kXyR7cG9saWN5SWR9Ij5QT1NUPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InBvbGljeS11cmkiIGlkPSJ1cmlfJHtwb2xpY3lJZH0iPi9hcGkvZW5kcG9pbnQ8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8L2gzPgogICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0idG9nZ2xlLWJ0biBzbWFsbCIgb25jbGljaz0idG9nZ2xlUG9saWN5KCcke3BvbGljeUlkfScpIj7iiJI8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJkYW5nZXIgc21hbGwiIG9uY2xpY2s9InJlbW92ZVBvbGljeSgnJHtwb2xpY3lJZH0nKSI+UmVtb3ZlPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwb2xpY3ktY29udGVudCIgaWQ9ImNvbnRlbnRfJHtwb2xpY3lJZH0iPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZC01Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJyZXF1aXJlZCI+U2VydmljZSBJRCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnc2VydmljZUlkJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJzZXJ2aWNlSWQiIHZhbHVlPSJTRVJWSUNFX0lEXyR7cG9saWN5Q291bnRlcn0iIHJlcXVpcmVkPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InJlcXVpcmVkIj5VUkkgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ2VuZFBvaW50JykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJlbmRQb2ludCIgdmFsdWU9Ii9hcGkvZW5kcG9pbnQiIHJlcXVpcmVkIG9uaW5wdXQ9InVwZGF0ZVBvbGljeUhlYWRlcignJHtwb2xpY3lJZH0nKSI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0icmVxdWlyZWQiPk1ldGhvZCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnaHR0cE1ldGhvZCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9Imh0dHBNZXRob2QiIHJlcXVpcmVkIG9uY2hhbmdlPSJ1cGRhdGVQb2xpY3lIZWFkZXIoJyR7cG9saWN5SWR9JykiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUE9TVCI+UE9TVDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iR0VUIj5HRVQ8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlBVVCI+UFVUPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJERUxFVEUiPkRFTEVURTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPk91dCBVUkkgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ291dEVuZFBvaW50JykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJvdXRFbmRQb2ludCIgdmFsdWU9Ii9hcGkvZW5kcG9pbnQiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InJlcXVpcmVkIj5EZXNjcmlwdGlvbiA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnc2VydmljZURlc2MnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InNlcnZpY2VEZXNjIiB2YWx1ZT0iU2VydmljZSBkZXNjcmlwdGlvbiIgcmVxdWlyZWQ+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkLTUiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InJlcXVpcmVkIj5MZXZlbCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnYXV0aExldmVsUmVxdWlyZWQnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJhdXRoTGV2ZWxSZXF1aXJlZCIgb25jaGFuZ2U9InVwZGF0ZVZhbGlkYXRpb25GaWVsZHModGhpcykiIHJlcXVpcmVkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMCIgc2VsZWN0ZWQ+MDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMSI+MTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMiI+Mjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlZhbGlkYXRpb24gPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3Nlc3Npb25WYWxSZXF1aXJlZCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9InNlc3Npb25WYWxSZXF1aXJlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJmYWxzZSIgc2VsZWN0ZWQ+ZmFsc2U8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InRydWUiPnRydWU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5XaGl0ZWxpc3QgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3doaXRlbGlzdGVkJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0id2hpdGVsaXN0ZWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0idHJ1ZSIgc2VsZWN0ZWQ+dHJ1ZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZmFsc2UiPmZhbHNlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InJlcXVpcmVkIj5UeG4gQXV0aCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygndHhuQXV0aENvbmNlcm5zJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0idHhuQXV0aENvbmNlcm5zIiBvbmNoYW5nZT0idXBkYXRlQWNjZXNzUmVzdHJpY3Rpb24odGhpcykiIHJlcXVpcmVkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iTiI+Tjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iWSI+WTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJyZXF1aXJlZCI+U2NvcGUgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ2FsbG93ZWRTY29wZScpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iYWxsb3dlZFNjb3BlIiB2YWx1ZT0iYWNjZXNzX2xldmVsMCIgcmVxdWlyZWQ+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhbGVydCBhbGVydC1pbmZvIGFjY2Vzcy1yZXN0cmljdGlvbiIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPgogICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+Tm90ZTo8L3N0cm9uZz4gVHhuIEF1dGg9TiBhbGxvd3Mgb25seSAxIGFjY2VzcyByZWNvcmQuCiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8aDMgc3R5bGU9Im1hcmdpbi10b3A6IDhweDsiPk5vdGlmaWNhdGlvbnMgKGFwcGxpZWQgdG8gYWxsIGFjY2VzcyByZWNvcmRzKTwvaDM+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJub3RpZmljYXRpb25zLWNvbnRhaW5lciIgaWQ9Im5vdGlmaWNhdGlvbnNfJHtwb2xpY3lJZH0iPjwvZGl2PgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJzZWNvbmRhcnkgc21hbGwiIG9uY2xpY2s9ImFkZE5vdGlmaWNhdGlvbignJHtwb2xpY3lJZH0nKSI+KyBOb3RpZmljYXRpb248L2J1dHRvbj4KCiAgICAgICAgICAgICAgICA8aDMgc3R5bGU9Im1hcmdpbi10b3A6IDhweDsiPkFjY2VzcyBSZWNvcmRzPC9oMz4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjY2Vzc2VzLWNvbnRhaW5lciIgaWQ9ImFjY2Vzc2VzXyR7cG9saWN5SWR9Ij48L2Rpdj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ic2Vjb25kYXJ5IHNtYWxsIiBvbmNsaWNrPSJhZGRBY2Nlc3MoJyR7cG9saWN5SWR9JykiPisgQWNjZXNzPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYDsKICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHBvbGljeURpdik7CiAgICAgICAgICAgIGFkZE5vdGlmaWNhdGlvbihwb2xpY3lJZCk7CiAgICAgICAgICAgIGFkZEFjY2Vzcyhwb2xpY3lJZCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZW1vdmVQb2xpY3kocG9saWN5SWQpIHsKICAgICAgICAgICAgaWYgKGNvbmZpcm0oJ1JlbW92ZSB0aGlzIHBvbGljeT8nKSkgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9saWN5SWQpLnJlbW92ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB0b2dnbGVQb2xpY3kocG9saWN5SWQpIHsKICAgICAgICAgICAgY29uc3QgY29udGVudERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50XycgKyBwb2xpY3lJZCk7CiAgICAgICAgICAgIGNvbnN0IHBvbGljeVNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb2xpY3lJZCk7CiAgICAgICAgICAgIGNvbnN0IHRvZ2dsZUJ0biA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnRvZ2dsZS1idG4nKTsKCiAgICAgICAgICAgIGlmIChjb250ZW50RGl2LmNsYXNzTGlzdC5jb250YWlucygnY29sbGFwc2VkJykpIHsKICAgICAgICAgICAgICAgIGNvbnRlbnREaXYuY2xhc3NMaXN0LnJlbW92ZSgnY29sbGFwc2VkJyk7CiAgICAgICAgICAgICAgICB0b2dnbGVCdG4udGV4dENvbnRlbnQgPSAn4oiSJzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnRlbnREaXYuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2VkJyk7CiAgICAgICAgICAgICAgICB0b2dnbGVCdG4udGV4dENvbnRlbnQgPSAnKyc7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNvbGxhcHNlQWxsUG9saWNpZXMoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb2xpY3ktY29udGVudCcpLmZvckVhY2goY29udGVudCA9PiB7CiAgICAgICAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoJ2NvbGxhcHNlZCcpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvZ2dsZS1idG4nKS5mb3JFYWNoKGJ0biA9PiB7CiAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSAnKyc7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZXhwYW5kQWxsUG9saWNpZXMoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb2xpY3ktY29udGVudCcpLmZvckVhY2goY29udGVudCA9PiB7CiAgICAgICAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbGxhcHNlZCcpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvZ2dsZS1idG4nKS5mb3JFYWNoKGJ0biA9PiB7CiAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSAn4oiSJzsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVQb2xpY3lIZWFkZXIocG9saWN5SWQpIHsKICAgICAgICAgICAgY29uc3QgcG9saWN5U2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBvbGljeUlkKTsKICAgICAgICAgICAgY29uc3QgdXJpSW5wdXQgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJlbmRQb2ludCJdJyk7CiAgICAgICAgICAgIGNvbnN0IG1ldGhvZFNlbGVjdCA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Imh0dHBNZXRob2QiXScpOwoKICAgICAgICAgICAgY29uc3QgdXJpRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cmlfJyArIHBvbGljeUlkKTsKICAgICAgICAgICAgY29uc3QgbWV0aG9kRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZXRob2RfJyArIHBvbGljeUlkKTsKCiAgICAgICAgICAgIGlmICh1cmlEaXNwbGF5ICYmIHVyaUlucHV0KSB7CiAgICAgICAgICAgICAgICB1cmlEaXNwbGF5LnRleHRDb250ZW50ID0gdXJpSW5wdXQudmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1ldGhvZERpc3BsYXkgJiYgbWV0aG9kU2VsZWN0KSB7CiAgICAgICAgICAgICAgICBtZXRob2REaXNwbGF5LnRleHRDb250ZW50ID0gbWV0aG9kU2VsZWN0LnZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVWYWxpZGF0aW9uRmllbGRzKGlucHV0KSB7CiAgICAgICAgICAgIGNvbnN0IHBvbGljeVNlY3Rpb24gPSBpbnB1dC5jbG9zZXN0KCcucG9saWN5LXNlY3Rpb24nKTsKICAgICAgICAgICAgY29uc3QgbGV2ZWwgPSBwYXJzZUludChpbnB1dC52YWx1ZSk7CiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb25TZWxlY3QgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJzZXNzaW9uVmFsUmVxdWlyZWQiXScpOwogICAgICAgICAgICBjb25zdCB3aGl0ZWxpc3RTZWxlY3QgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ3aGl0ZWxpc3RlZCJdJyk7CgogICAgICAgICAgICBpZiAobGV2ZWwgPT09IDApIHsKICAgICAgICAgICAgICAgIHZhbGlkYXRpb25TZWxlY3QudmFsdWUgPSAnZmFsc2UnOwogICAgICAgICAgICAgICAgd2hpdGVsaXN0U2VsZWN0LnZhbHVlID0gJ3RydWUnOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdmFsaWRhdGlvblNlbGVjdC52YWx1ZSA9ICd0cnVlJzsKICAgICAgICAgICAgICAgIHdoaXRlbGlzdFNlbGVjdC52YWx1ZSA9ICdmYWxzZSc7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUFjY2Vzc1Jlc3RyaWN0aW9uKHNlbGVjdCkgewogICAgICAgICAgICBjb25zdCBwb2xpY3lTZWN0aW9uID0gc2VsZWN0LmNsb3Nlc3QoJy5wb2xpY3ktc2VjdGlvbicpOwogICAgICAgICAgICBjb25zdCBhbGVydCA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignLmFjY2Vzcy1yZXN0cmljdGlvbicpOwogICAgICAgICAgICBjb25zdCBhY2Nlc3NDb250YWluZXIgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5hY2Nlc3Nlcy1jb250YWluZXInKTsKCiAgICAgICAgICAgIGlmIChzZWxlY3QudmFsdWUgPT09ICdOJykgewogICAgICAgICAgICAgICAgYWxlcnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICBjb25zdCBhY2Nlc3NTZWN0aW9ucyA9IGFjY2Vzc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuYWNjZXNzLXNlY3Rpb24nKTsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgYWNjZXNzU2VjdGlvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uc1tpXS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGFsZXJ0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFkZE5vdGlmaWNhdGlvbihwb2xpY3lJZCkgewogICAgICAgICAgICBjb25zdCBub3RpZmljYXRpb25JZCA9IGBub3RpZmljYXRpb25fJHtub3RpZmljYXRpb25Db3VudGVyKyt9YDsKICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYG5vdGlmaWNhdGlvbnNfJHtwb2xpY3lJZH1gKTsKCiAgICAgICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBub3RpZmljYXRpb25EaXYuY2xhc3NOYW1lID0gJ25vdGlmaWNhdGlvbi1zZWN0aW9uJzsKICAgICAgICAgICAgbm90aWZpY2F0aW9uRGl2LmlkID0gbm90aWZpY2F0aW9uSWQ7CiAgICAgICAgICAgIG5vdGlmaWNhdGlvbkRpdi5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlciI+CiAgICAgICAgICAgICAgICAgICAgPGgzPk5vdGlmIDxzcGFuIGNsYXNzPSJiYWRnZSI+IyR7bm90aWZpY2F0aW9uQ291bnRlcn08L3NwYW4+PC9oMz4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImRhbmdlciBzbWFsbCIgb25jbGljaz0icmVtb3ZlTm90aWZpY2F0aW9uKCcke25vdGlmaWNhdGlvbklkfScpIj54PC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQtNSI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5UeXBlIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdub3RpZmljYXRpb25UeXBlJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0ibm90aWZpY2F0aW9uVHlwZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJTTVMiPlNNUzwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRU1BSUwiPkVNQUlMPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQVVNIIj5QVVNIPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+QXV0aCBUeXBlIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdhdXRoVHlwZScpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iYXV0aFR5cGUiIHZhbHVlPSJBVVRIX0hBUkRfU0lHTiI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5NYW5kYXRvcnkgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ2lzTWFuZGF0b3J5JykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0iaXNNYW5kYXRvcnkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0idHJ1ZSIgc2VsZWN0ZWQ+dHJ1ZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZmFsc2UiPmZhbHNlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+VGVtcGxhdGUgSUQgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3RlbXBsYXRlSWQnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InRlbXBsYXRlSWQiIHZhbHVlPSJURU1QTEFURV8wMDE6RW5nbGlzaCI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5UZW1wbGF0ZSBQYXJhbXMgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3RlbXBsYXRlUGFyYW1zJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJ0ZW1wbGF0ZVBhcmFtcyIgdmFsdWU9IlNIT1JURklFTEQwMSxTSE9SVEZJRUxEMDIiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGA7CiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChub3RpZmljYXRpb25EaXYpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbklkKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG5vdGlmaWNhdGlvbklkKS5yZW1vdmUoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFkZEFjY2Vzcyhwb2xpY3lJZCkgewogICAgICAgICAgICBjb25zdCBwb2xpY3lTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9saWN5SWQpOwogICAgICAgICAgICBjb25zdCB0eG5BdXRoU2VsZWN0ID0gcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0idHhuQXV0aENvbmNlcm5zIl0nKTsKICAgICAgICAgICAgY29uc3QgYWNjZXNzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGFjY2Vzc2VzXyR7cG9saWN5SWR9YCk7CiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRBY2Nlc3NDb3VudCA9IGFjY2Vzc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuYWNjZXNzLXNlY3Rpb24nKS5sZW5ndGg7CgogICAgICAgICAgICBpZiAodHhuQXV0aFNlbGVjdC52YWx1ZSA9PT0gJ04nICYmIGN1cnJlbnRBY2Nlc3NDb3VudCA+PSAxKSB7CiAgICAgICAgICAgICAgICBhbGVydCgnVHhuIEF1dGg9TiBhbGxvd3Mgb25seSAxIGFjY2VzcyByZWNvcmQuJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnN0IGFjY2Vzc0lkID0gYGFjY2Vzc18ke2FjY2Vzc0NvdW50ZXIrK31gOwoKICAgICAgICAgICAgY29uc3QgYWNjZXNzRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGFjY2Vzc0Rpdi5jbGFzc05hbWUgPSAnYWNjZXNzLXNlY3Rpb24nOwogICAgICAgICAgICBhY2Nlc3NEaXYuaWQgPSBhY2Nlc3NJZDsKICAgICAgICAgICAgYWNjZXNzRGl2LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyIj4KICAgICAgICAgICAgICAgICAgICA8aDM+QWNjZXNzIDxzcGFuIGNsYXNzPSJiYWRnZSI+IyR7YWNjZXNzQ291bnRlcn08L3NwYW4+PC9oMz4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImRhbmdlciBzbWFsbCIgb25jbGljaz0icmVtb3ZlQWNjZXNzKCcke2FjY2Vzc0lkfScpIj5SZW1vdmU8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQtMyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5Db29saW5nIFBlcmlvZCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnY29vbGluZ1BlcmlvZENoZWNrUmVxdWlyZWQnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJjb29saW5nUGVyaW9kQ2hlY2tSZXF1aXJlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJmYWxzZSIgc2VsZWN0ZWQ+ZmFsc2U8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InRydWUiPnRydWU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5UeG4gQXV0aCBSZXEgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3R4bkF1dGhSZXF1aXJlZCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9InR4bkF1dGhSZXF1aXJlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIwIiBzZWxlY3RlZD4wPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIxIj4xPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIyIj4yPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+Tm90aWYgUGFyYW0gTWFwIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdub3RpZmljYXRpb25QYXJhbU1hcCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0ibm90aWZpY2F0aW9uUGFyYW1NYXAiIHZhbHVlPSJTSE9SVEZJRUxEMDE9dmFsMSI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkLTMiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+U2Vzc2lvbiBDb25kIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdzZXNzaW9uQ29uZGl0aW9uTWFwJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImlucHV0LXdpdGgtZXhwYW5kIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJzZXNzaW9uQ29uZGl0aW9uc01hcCIgdmFsdWU9IiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZXhwYW5kLWljb24iIG9uY2xpY2s9ImV4cGFuZEZpZWxkKHRoaXMsICdTZXNzaW9uIENvbmRpdGlvbnMgTWFwJykiIHRpdGxlPSJFeHBhbmQiPuKkojwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5Qcm9maWxlIENvbmQgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3Byb2ZpbGVDb25kaXRpb25NYXAnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5wdXQtd2l0aC1leHBhbmQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InByb2ZpbGVDb25kaXRpb25zTWFwIiB2YWx1ZT0iIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJleHBhbmQtaWNvbiIgb25jbGljaz0iZXhwYW5kRmllbGQodGhpcywgJ1Byb2ZpbGUgQ29uZGl0aW9ucyBNYXAnKSIgdGl0bGU9IkV4cGFuZCI+4qSiPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlJlcXVlc3QgQ29uZCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygncmVxdWVzdENvbmRpdGlvbnNNYXAnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5wdXQtd2l0aC1leHBhbmQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InJlcXVlc3RDb25kaXRpb25zTWFwIiB2YWx1ZT0iIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJleHBhbmQtaWNvbiIgb25jbGljaz0iZXhwYW5kRmllbGQodGhpcywgJ1JlcXVlc3QgQ29uZGl0aW9ucyBNYXAnKSIgdGl0bGU9IkV4cGFuZCI+4qSiPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQtMyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5SaXNrIEluZCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygncmlza0luZGljYXRvcicpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0icmlza0luZGljYXRvciIgdmFsdWU9IjAiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+UG9zdGFsIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdwb3N0YWxDb2RlJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJwb3N0YWxDb2RlIiB2YWx1ZT0iMCI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5VcGRhdGUgTG10IDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCd1cGRhdGVMaW1pdCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0idXBkYXRlTGltaXQiIHZhbHVlPSIwIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQtNCI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5NaW4gQW10IENvZGUgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ21pbkFtdENvZGUnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9Im1pbkFtdENvZGUiIHZhbHVlPSJERUZBVUxUX01JTl9BTVQiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+TWluIEFtdCBWYWwgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ21pbkFtdENvZGVWYWx1ZScpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBzdGVwPSIwLjAxIiBuYW1lPSJtaW5BbXRDb2RlVmFsdWUiIHZhbHVlPSIwIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPk1heCBBbXQgQ29kZSA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnbWF4QW10Q29kZScpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0ibWF4QW10Q29kZSIgdmFsdWU9IkRFRkFVTFRfTUFYX0FNVCI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5NYXggQW10IFZhbCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnbWF4QW10Q29kZVZhbHVlJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIHN0ZXA9IjAuMDEiIG5hbWU9Im1heEFtdENvZGVWYWx1ZSIgdmFsdWU9Ijk5OTk5OS45OSI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYDsKICAgICAgICAgICAgYWNjZXNzQ29udGFpbmVyLmFwcGVuZENoaWxkKGFjY2Vzc0Rpdik7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZW1vdmVBY2Nlc3MoYWNjZXNzSWQpIHsKICAgICAgICAgICAgaWYgKGNvbmZpcm0oJ1JlbW92ZSB0aGlzIGFjY2VzcyByZWNvcmQ/JykpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFjY2Vzc0lkKS5yZW1vdmUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY29sbGVjdEZvcm1EYXRhKCkgewogICAgICAgICAgICBjb25zdCBjaGFubmVscyA9IFtdOwogICAgICAgICAgICBjb25zdCBjaGFubmVsU2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhbm5lbC1zZWN0aW9uJyk7CgogICAgICAgICAgICBjaGFubmVsU2VjdGlvbnMuZm9yRWFjaChjaGFubmVsU2VjdGlvbiA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBjaGFubmVsSWQgPSBjaGFubmVsU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iY2hhbm5lbElkIl0nKS52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljaWVzID0gW107CgogICAgICAgICAgICAgICAgY29uc3QgcG9saWN5U2VjdGlvbnMgPSBjaGFubmVsU2VjdGlvbi5xdWVyeVNlbGVjdG9yQWxsKCcucG9saWN5LXNlY3Rpb24nKTsKICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb25zLmZvckVhY2gocG9saWN5U2VjdGlvbiA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9saWN5ID0gewogICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlSWQ6IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InNlcnZpY2VJZCJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFBvaW50OiBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJlbmRQb2ludCJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGh0dHBNZXRob2Q6IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Imh0dHBNZXRob2QiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBvdXRFbmRQb2ludDogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ib3V0RW5kUG9pbnQiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlRGVzYzogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ic2VydmljZURlc2MiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBhdXRoTGV2ZWxSZXF1aXJlZDogcGFyc2VJbnQocG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYXV0aExldmVsUmVxdWlyZWQiXScpLnZhbHVlKSwKICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblZhbFJlcXVpcmVkOiBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJzZXNzaW9uVmFsUmVxdWlyZWQiXScpLnZhbHVlID09PSAndHJ1ZScsCiAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlbGlzdGVkOiBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ3aGl0ZWxpc3RlZCJdJykudmFsdWUgPT09ICd0cnVlJywKICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dlZFNjb3BlOiBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhbGxvd2VkU2NvcGUiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICB0eG5BdXRoQ29uY2VybnM6IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InR4bkF1dGhDb25jZXJucyJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc2VzOiBbXQogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIC8vIENvbGxlY3QgcG9saWN5LWxldmVsIG5vdGlmaWNhdGlvbnMKICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2xpY3lOb3RpZmljYXRpb25zID0gW107CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9saWN5Tm90aWZTZWN0aW9ucyA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvckFsbCgnLm5vdGlmaWNhdGlvbnMtY29udGFpbmVyIC5ub3RpZmljYXRpb24tc2VjdGlvbicpOwogICAgICAgICAgICAgICAgICAgIHBvbGljeU5vdGlmU2VjdGlvbnMuZm9yRWFjaChub3RpZmljYXRpb25TZWN0aW9uID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90aWZpY2F0aW9uID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uVHlwZTogbm90aWZpY2F0aW9uU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibm90aWZpY2F0aW9uVHlwZSJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoVHlwZTogbm90aWZpY2F0aW9uU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYXV0aFR5cGUiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVJZDogbm90aWZpY2F0aW9uU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0idGVtcGxhdGVJZCJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVBhcmFtczogbm90aWZpY2F0aW9uU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0idGVtcGxhdGVQYXJhbXMiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNYW5kYXRvcnk6IG5vdGlmaWNhdGlvblNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImlzTWFuZGF0b3J5Il0nKS52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lOb3RpZmljYXRpb25zLnB1c2gobm90aWZpY2F0aW9uKTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzU2VjdGlvbnMgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoJy5hY2Nlc3Mtc2VjdGlvbicpOwogICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb25zLmZvckVhY2goYWNjZXNzU2VjdGlvbiA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjY2VzcyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvb2xpbmdQZXJpb2RDaGVja1JlcXVpcmVkOiBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJjb29saW5nUGVyaW9kQ2hlY2tSZXF1aXJlZCJdJykudmFsdWUgPT09ICd0cnVlJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4bkF1dGhSZXF1aXJlZDogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0idHhuQXV0aFJlcXVpcmVkIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblBhcmFtTWFwOiBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJub3RpZmljYXRpb25QYXJhbU1hcCJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25EZXRsczogWy4uLnBvbGljeU5vdGlmaWNhdGlvbnNdLCAvLyBDb3B5IHBvbGljeS1sZXZlbCBub3RpZmljYXRpb25zIHRvIGVhY2ggYWNjZXNzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uQ29uZGl0aW9uc01hcDogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ic2Vzc2lvbkNvbmRpdGlvbnNNYXAiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZmlsZUNvbmRpdGlvbnNNYXA6IGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InByb2ZpbGVDb25kaXRpb25zTWFwIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RDb25kaXRpb25zTWFwOiBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJyZXF1ZXN0Q29uZGl0aW9uc01hcCJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0Q29uZGl0aW9uczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpc2tJbmRpY2F0b3I6IGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InJpc2tJbmRpY2F0b3IiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkFtdDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbXRDb2RlOiBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJtaW5BbXRDb2RlIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW10Q29kZVZhbHVlOiBwYXJzZUZsb2F0KGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im1pbkFtdENvZGVWYWx1ZSJdJykudmFsdWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhBbXQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW10Q29kZTogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibWF4QW10Q29kZSJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtdENvZGVWYWx1ZTogcGFyc2VGbG9hdChhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJtYXhBbXRDb2RlVmFsdWUiXScpLnZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdGFsQ29kZTogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0icG9zdGFsQ29kZSJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlTGltaXQ6IGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InVwZGF0ZUxpbWl0Il0nKS52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5LmFjY2Vzc2VzLnB1c2goYWNjZXNzKTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgcG9saWNpZXMucHVzaChwb2xpY3kpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY2hhbm5lbHMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbElkOiBjaGFubmVsSWQsCiAgICAgICAgICAgICAgICAgICAgcG9saWNpZXM6IHBvbGljaWVzCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICByZXR1cm4geyBwb2xpY2llc01hcHM6IGNoYW5uZWxzIH07CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZUpTT04oKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gY29sbGVjdEZvcm1EYXRhKCk7CiAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMik7CiAgICAgICAgICAgICAgICBjdXJyZW50T3V0cHV0ID0ganNvbjsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdXRwdXRUeXBlJykudmFsdWUgPSAnanNvbic7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3V0cHV0Qm94JykudGV4dENvbnRlbnQgPSBqc29uOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgYWxlcnQoJ0Vycm9yIGdlbmVyYXRpbmcgSlNPTjogJyArIGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZVNRTCgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBjb2xsZWN0Rm9ybURhdGEoKTsKICAgICAgICAgICAgICAgIGxldCBzcWwgPSAnLS0gR2VuZXJhdGVkIFNRTCBJbnNlcnQgU3RhdGVtZW50c1xuJzsKICAgICAgICAgICAgICAgIHNxbCArPSAnLS0gR2VuZXJhdGVkIG9uOiAnICsgbmV3IERhdGUoKS50b0lTT1N0cmluZygpICsgJ1xuXG4nOwoKICAgICAgICAgICAgICAgIGRhdGEucG9saWNpZXNNYXBzLmZvckVhY2goY2hhbm5lbCA9PiB7CiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbC5wb2xpY2llcy5mb3JFYWNoKHBvbGljeSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgLS0gUG9saWN5OiAke3BvbGljeS5zZXJ2aWNlSWR9XG5gOwogICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYElOU0VSVCBJTlRPIHJpc2tfbWF0cml4X3BvbGljeV9tYXN0ZXIKICAgIChQT0xJQ1lfVFlQRSwgTkVYVEdFTl9GTEFHLCBTRVJWSUNFX0lELCBDSEFOTkVMX0lELCBFTkRfUE9JTlQsIEhUVFBfTUVUSE9ELAogICAgIFNFUlZJQ0VfREVTQywgQVVUSF9MRVZFTF9SRVEsIFNFU19WQUxEX1JFUSwgV0hJVEVMSVNURUQsIEFMTE9XRURfU0NPUEUsCiAgICAgVFhOX0FVVEhfQ09OQ0VSTlMsIE9VVF9FTkRfUE9JTlQsIENSRUFURURfQllfVVNFUiwgQ1JFQVRFRF9EQVRFLCBNQUtFUl9VU0VSKQpWQUxVRVMKICAgICgnUE9MSUNZJywgMSwgJyR7cG9saWN5LnNlcnZpY2VJZH0nLCAnJHtjaGFubmVsLmNoYW5uZWxJZH0nLCAnJHtwb2xpY3kuZW5kUG9pbnR9JywKICAgICAnJHtwb2xpY3kuaHR0cE1ldGhvZH0nLCAnJHtwb2xpY3kuc2VydmljZURlc2MucmVwbGFjZSgvJy9nLCAiJyciKX0nLCAke3BvbGljeS5hdXRoTGV2ZWxSZXF1aXJlZH0sCiAgICAgJHtwb2xpY3kuc2Vzc2lvblZhbFJlcXVpcmVkID8gMSA6IDB9LCAke3BvbGljeS53aGl0ZWxpc3RlZCA/IDEgOiAwfSwgJyR7cG9saWN5LmFsbG93ZWRTY29wZX0nLAogICAgICcke3BvbGljeS50eG5BdXRoQ29uY2VybnN9JywgJyR7cG9saWN5Lm91dEVuZFBvaW50fScsICdTWVNURU0nLCBOT1coKSwgJ1NZU1RFTScpO1xuXG5gOwoKICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5LmFjY2Vzc2VzLmZvckVhY2goKGFjY2VzcywgYWNjZXNzSWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYC0tIEFjY2VzcyBSZWNvcmQgJHthY2Nlc3NJZHggKyAxfSAtIFJlcXVlc3QgQ29uZGl0aW9ucyBmb3IgJHtwb2xpY3kuc2VydmljZUlkfVxuYDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgSU5TRVJUIElOVE8gcmlza19tYXRyaXhfcnFjb25kaXRpb25fbWFzdGVyCiAgICAoU0VSVklDRV9JRCwgTUlOX0FNVF9DT0RFLCBNQVhfQU1UX0NPREUsIFBPU1RBTF9DT0RFLCBSSVNLX0lORElDQVRPUiwKICAgICBVUERBVEVfTElNSVQsIENSRUFURURfQllfVVNFUiwgQ1JFQVRFRF9EQVRFLCBNQUtFUl9VU0VSKQpWQUxVRVMKICAgICgnJHtwb2xpY3kuc2VydmljZUlkfScsICcke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5taW5BbXQuYW10Q29kZX0nLAogICAgICcke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5tYXhBbXQuYW10Q29kZX0nLCAnJHthY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMucG9zdGFsQ29kZX0nLAogICAgICcke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5yaXNrSW5kaWNhdG9yfScsICcke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy51cGRhdGVMaW1pdH0nLAogICAgICdTWVNURU0nLCBOT1coKSwgJ1NZU1RFTScpO1xuYDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYFNFVCBAcmVxdWVzdF9jb25kaXRpb25zX2lkID0gTEFTVF9JTlNFUlRfSUQoKTtcblxuYDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYC0tIEFtb3VudCBDb2RlIGZvciBNaW4gQW1vdW50XG5gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGBJTlNFUlQgSU5UTyBhbW91bnRfY29kZV9tYXN0ZXIKICAgIChBTU9VTlRfQ09ERSwgQU1PVU5UX0NPREVfREVTQywgQU1PVU5UX0NPREVfVkFMVUUsIENSRUFURURfQllfVVNFUiwgQ1JFQVRFRF9EQVRFLCBNQUtFUl9VU0VSKQpWQUxVRVMKICAgICgnJHthY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMubWluQW10LmFtdENvZGV9JywgJ01pbiBhbW91bnQgZm9yICR7cG9saWN5LnNlcnZpY2VJZH0nLAogICAgICR7YWNjZXNzLnJlcXVlc3RDb25kaXRpb25zLm1pbkFtdC5hbXRDb2RlVmFsdWV9LCAnU1lTVEVNJywgTk9XKCksICdTWVNURU0nKQpPTiBEVVBMSUNBVEUgS0VZIFVQREFURSBVUERBVEVEX0JZX1VTRVI9J1NZU1RFTScsIFVQREFURURfREFURT1OT1coKTtcblxuYDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYC0tIEFtb3VudCBDb2RlIGZvciBNYXggQW1vdW50XG5gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGBJTlNFUlQgSU5UTyBhbW91bnRfY29kZV9tYXN0ZXIKICAgIChBTU9VTlRfQ09ERSwgQU1PVU5UX0NPREVfREVTQywgQU1PVU5UX0NPREVfVkFMVUUsIENSRUFURURfQllfVVNFUiwgQ1JFQVRFRF9EQVRFLCBNQUtFUl9VU0VSKQpWQUxVRVMKICAgICgnJHthY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMubWF4QW10LmFtdENvZGV9JywgJ01heCBhbW91bnQgZm9yICR7cG9saWN5LnNlcnZpY2VJZH0nLAogICAgICR7YWNjZXNzLnJlcXVlc3RDb25kaXRpb25zLm1heEFtdC5hbXRDb2RlVmFsdWV9LCAnU1lTVEVNJywgTk9XKCksICdTWVNURU0nKQpPTiBEVVBMSUNBVEUgS0VZIFVQREFURSBVUERBVEVEX0JZX1VTRVI9J1NZU1RFTScsIFVQREFURURfREFURT1OT1coKTtcblxuYDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3Mubm90aWZpY2F0aW9uRGV0bHMuZm9yRWFjaCgobm90aWYsIG5vdGlmSWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGAtLSBOb3RpZmljYXRpb24gJHtub3RpZklkeCArIDF9IGZvciBBY2Nlc3MgUmVjb3JkICR7YWNjZXNzSWR4ICsgMX1cbmA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGBJTlNFUlQgSU5UTyByaXNrX21hdHJpeF9ub3RpZmljYWl0b25fbWFzdGVyCiAgICAoU0VSVklDRV9JRCwgTk9USUZJQ0FUSU9OX1RZUEUsIFRFTVBMQVRFX0lELCBURU1QTEFURV9QQVJBTVMsIElTX01BTkRBVE9SWSwKICAgICBBVVRIX1RZUEUsIENSRUFURURfQllfVVNFUiwgQ1JFQVRFRF9EQVRFLCBNQUtFUl9VU0VSKQpWQUxVRVMKICAgICgnJHtwb2xpY3kuc2VydmljZUlkfScsICcke25vdGlmLm5vdGlmaWNhdGlvblR5cGV9JywgJyR7bm90aWYudGVtcGxhdGVJZH0nLAogICAgICcke25vdGlmLnRlbXBsYXRlUGFyYW1zfScsICR7bm90aWYuaXNNYW5kYXRvcnkgPT09ICd0cnVlJyA/IDEgOiAwfSwKICAgICAnJHtub3RpZi5hdXRoVHlwZX0nLCAnU1lTVEVNJywgTk9XKCksICdTWVNURU0nKTtcblxuYDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgLS0gQWNjZXNzIFJlY29yZCBmb3IgJHtwb2xpY3kuc2VydmljZUlkfVxuYDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgSU5TRVJUIElOVE8gcmlza19tYXRyaXhfYWNjZXNzX21hc3RlcgogICAgKFNFUlZJQ0VfSUQsIENPT0xJTkdfUEVSSU9EX0NIRUNLX1JFUSwgVFJBTlNBQ1RJT05BTF9BVVRIX1JFUSwKICAgICBOT1RJRklDQVRJT05fRklFTERTX01BUCwgS0VZX1NFU1NJT05fQ09ORElUSU9OUywgS0VZX1BST0ZJTEVfQ09ORElUSU9OUywKICAgICBLRVlfUkVRVUVTVF9DT05ESVRJT05TLCBSRVFVRVNUX0NPTkRJVElPTlNfSUQsIENSRUFURURfQllfVVNFUiwgQ1JFQVRFRF9EQVRFLCBNQUtFUl9VU0VSKQpWQUxVRVMKICAgICgnJHtwb2xpY3kuc2VydmljZUlkfScsICR7YWNjZXNzLmNvb2xpbmdQZXJpb2RDaGVja1JlcXVpcmVkID8gMSA6IDB9LAogICAgICcke2FjY2Vzcy50eG5BdXRoUmVxdWlyZWR9JywgJyR7YWNjZXNzLm5vdGlmaWNhdGlvblBhcmFtTWFwLnJlcGxhY2UoLycvZywgIicnIil9JywKICAgICAnJHthY2Nlc3Muc2Vzc2lvbkNvbmRpdGlvbnNNYXB9JywgJyR7YWNjZXNzLnByb2ZpbGVDb25kaXRpb25zTWFwfScsCiAgICAgJyR7YWNjZXNzLnJlcXVlc3RDb25kaXRpb25zTWFwfScsIEByZXF1ZXN0X2NvbmRpdGlvbnNfaWQsCiAgICAgJ1NZU1RFTScsIE5PVygpLCAnU1lTVEVNJyk7XG5cbmA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9ICctLSAnICsgJy0nLnJlcGVhdCg4MCkgKyAnXG5cbic7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjdXJyZW50T3V0cHV0ID0gc3FsOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ291dHB1dFR5cGUnKS52YWx1ZSA9ICdzcWwnOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ291dHB1dEJveCcpLnRleHRDb250ZW50ID0gc3FsOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgYWxlcnQoJ0Vycm9yIGdlbmVyYXRpbmcgU1FMOiAnICsgZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIG9wZW5Mb2FkTW9kYWwoKSB7CiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRKc29uU3RyaW5nID0gYHsKICAicG9saWNpZXNNYXBzIjogWwogICAgewogICAgICAiY2hhbm5lbElkIjogIlNHX01CIiwKICAgICAgInBvbGljaWVzIjogWwoKICAgICAgXQogICAgfQogIF0KfWA7CgogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZE1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgIGNvbnN0IGpzb25JbnB1dFRleHRhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzb25JbnB1dCcpOwogICAgICAgICAgICBpZiAoIWpzb25JbnB1dFRleHRhcmVhLnZhbHVlLnRyaW0oKSkgewogICAgICAgICAgICAgICAganNvbklucHV0VGV4dGFyZWEudmFsdWUgPSBkZWZhdWx0SnNvblN0cmluZzsKICAgICAgICAgICAgfQogICAgICAgICAgICBqc29uSW5wdXRUZXh0YXJlYS5mb2N1cygpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xvc2VMb2FkTW9kYWwoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbG9hZEZyb21UZXh0YXJlYSgpIHsKICAgICAgICAgICAgY29uc3QganNvblRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNvbklucHV0JykudmFsdWUudHJpbSgpOwoKICAgICAgICAgICAgaWYgKCFqc29uVGV4dCkgewogICAgICAgICAgICAgICAgYWxlcnQoJ1BsZWFzZSBwYXN0ZSBKU09OIGNvbnRlbnQgZmlyc3QuJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZShqc29uVGV4dCk7CiAgICAgICAgICAgICAgICBwb3B1bGF0ZUZvcm0oanNvbik7CiAgICAgICAgICAgICAgICBjbG9zZUxvYWRNb2RhbCgpOwogICAgICAgICAgICAgICAgYWxlcnQoJ0pTT04gbG9hZGVkIHN1Y2Nlc3NmdWxseSEnKTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdFcnJvciBwYXJzaW5nIEpTT046ICcgKyBlcnJvci5tZXNzYWdlICsgJ1xuXG5QbGVhc2UgY2hlY2sgeW91ciBKU09OIGZvcm1hdC4nKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gQ2xvc2UgbW9kYWwgd2hlbiBjbGlja2luZyBvdXRzaWRlCiAgICAgICAgd2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkTW9kYWwnKTsKICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PSBtb2RhbCkgewogICAgICAgICAgICAgICAgY2xvc2VMb2FkTW9kYWwoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcG9wdWxhdGVGb3JtKGRhdGEpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYW5uZWxzQ29udGFpbmVyJykuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgIGNoYW5uZWxDb3VudGVyID0gMDsKICAgICAgICAgICAgcG9saWN5Q291bnRlciA9IDA7CiAgICAgICAgICAgIGFjY2Vzc0NvdW50ZXIgPSAwOwogICAgICAgICAgICBub3RpZmljYXRpb25Db3VudGVyID0gMDsKCiAgICAgICAgICAgIGlmIChkYXRhLnBvbGljaWVzTWFwcyAmJiBBcnJheS5pc0FycmF5KGRhdGEucG9saWNpZXNNYXBzKSkgewogICAgICAgICAgICAgICAgZGF0YS5wb2xpY2llc01hcHMuZm9yRWFjaChjaGFubmVsRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgYWRkQ2hhbm5lbCgpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYW5uZWxTZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGFubmVsLXNlY3Rpb24nKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFubmVsU2VjdGlvbiA9IGNoYW5uZWxTZWN0aW9uc1tjaGFubmVsU2VjdGlvbnMubGVuZ3RoIC0gMV07CgogICAgICAgICAgICAgICAgICAgIGNoYW5uZWxTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJjaGFubmVsSWQiXScpLnZhbHVlID0gY2hhbm5lbERhdGEuY2hhbm5lbElkIHx8ICcnOwoKICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2xpY2llc0NvbnRhaW5lciA9IGNoYW5uZWxTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5wb2xpY2llcy1jb250YWluZXInKTsKICAgICAgICAgICAgICAgICAgICBwb2xpY2llc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5uZWxEYXRhLnBvbGljaWVzICYmIEFycmF5LmlzQXJyYXkoY2hhbm5lbERhdGEucG9saWNpZXMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWxEYXRhLnBvbGljaWVzLmZvckVhY2gocG9saWN5RGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFubmVsSWQgPSBjaGFubmVsU2VjdGlvbi5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBvbGljeShjaGFubmVsSWQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeVNlY3Rpb25zID0gcG9saWNpZXNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnBvbGljeS1zZWN0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2xpY3lTZWN0aW9uID0gcG9saWN5U2VjdGlvbnNbcG9saWN5U2VjdGlvbnMubGVuZ3RoIC0gMV07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ic2VydmljZUlkIl0nKS52YWx1ZSA9IHBvbGljeURhdGEuc2VydmljZUlkIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iZW5kUG9pbnQiXScpLnZhbHVlID0gcG9saWN5RGF0YS5lbmRQb2ludCB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Imh0dHBNZXRob2QiXScpLnZhbHVlID0gcG9saWN5RGF0YS5odHRwTWV0aG9kIHx8ICdQT1NUJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im91dEVuZFBvaW50Il0nKS52YWx1ZSA9IHBvbGljeURhdGEub3V0RW5kUG9pbnQgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJzZXJ2aWNlRGVzYyJdJykudmFsdWUgPSBwb2xpY3lEYXRhLnNlcnZpY2VEZXNjIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYXV0aExldmVsUmVxdWlyZWQiXScpLnZhbHVlID0gcG9saWN5RGF0YS5hdXRoTGV2ZWxSZXF1aXJlZCB8fCAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ic2Vzc2lvblZhbFJlcXVpcmVkIl0nKS52YWx1ZSA9IHBvbGljeURhdGEuc2Vzc2lvblZhbFJlcXVpcmVkID8gJ3RydWUnIDogJ2ZhbHNlJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9IndoaXRlbGlzdGVkIl0nKS52YWx1ZSA9IHBvbGljeURhdGEud2hpdGVsaXN0ZWQgPyAndHJ1ZScgOiAnZmFsc2UnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYWxsb3dlZFNjb3BlIl0nKS52YWx1ZSA9IHBvbGljeURhdGEuYWxsb3dlZFNjb3BlIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0idHhuQXV0aENvbmNlcm5zIl0nKS52YWx1ZSA9IHBvbGljeURhdGEudHhuQXV0aENvbmNlcm5zIHx8ICdOJzsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcG9saWN5IGhlYWRlciB3aXRoIGxvYWRlZCB2YWx1ZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBvbGljeUhlYWRlcihwb2xpY3lTZWN0aW9uLmlkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGVhciBkZWZhdWx0IG5vdGlmaWNhdGlvbiBhbmQgcG9wdWxhdGUgZnJvbSBmaXJzdCBhY2Nlc3MgcmVjb3JkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub3RpZmljYXRpb25zQ29udGFpbmVyID0gcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcubm90aWZpY2F0aW9ucy1jb250YWluZXInKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbnNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvbGljeURhdGEuYWNjZXNzZXMgJiYgcG9saWN5RGF0YS5hY2Nlc3Nlcy5sZW5ndGggPiAwICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5RGF0YS5hY2Nlc3Nlc1swXS5ub3RpZmljYXRpb25EZXRscyAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkocG9saWN5RGF0YS5hY2Nlc3Nlc1swXS5ub3RpZmljYXRpb25EZXRscykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lEYXRhLmFjY2Vzc2VzWzBdLm5vdGlmaWNhdGlvbkRldGxzLmZvckVhY2gobm90aWZEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9saWN5SWQgPSBwb2xpY3lTZWN0aW9uLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RpZmljYXRpb24ocG9saWN5SWQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90aWZTZWN0aW9ucyA9IG5vdGlmaWNhdGlvbnNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLm5vdGlmaWNhdGlvbi1zZWN0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGlmU2VjdGlvbiA9IG5vdGlmU2VjdGlvbnNbbm90aWZTZWN0aW9ucy5sZW5ndGggLSAxXTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibm90aWZpY2F0aW9uVHlwZSJdJykudmFsdWUgPSBub3RpZkRhdGEubm90aWZpY2F0aW9uVHlwZSB8fCAnU01TJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhdXRoVHlwZSJdJykudmFsdWUgPSBub3RpZkRhdGEuYXV0aFR5cGUgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0idGVtcGxhdGVJZCJdJykudmFsdWUgPSBub3RpZkRhdGEudGVtcGxhdGVJZCB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ0ZW1wbGF0ZVBhcmFtcyJdJykudmFsdWUgPSBub3RpZkRhdGEudGVtcGxhdGVQYXJhbXMgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iaXNNYW5kYXRvcnkiXScpLnZhbHVlID0gbm90aWZEYXRhLmlzTWFuZGF0b3J5IHx8ICd0cnVlJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY2Nlc3Nlc0NvbnRhaW5lciA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignLmFjY2Vzc2VzLWNvbnRhaW5lcicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzZXNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvbGljeURhdGEuYWNjZXNzZXMgJiYgQXJyYXkuaXNBcnJheShwb2xpY3lEYXRhLmFjY2Vzc2VzKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeURhdGEuYWNjZXNzZXMuZm9yRWFjaChhY2Nlc3NEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9saWN5SWQgPSBwb2xpY3lTZWN0aW9uLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRBY2Nlc3MocG9saWN5SWQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzU2VjdGlvbnMgPSBhY2Nlc3Nlc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuYWNjZXNzLXNlY3Rpb24nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzU2VjdGlvbiA9IGFjY2Vzc1NlY3Rpb25zW2FjY2Vzc1NlY3Rpb25zLmxlbmd0aCAtIDFdOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iY29vbGluZ1BlcmlvZENoZWNrUmVxdWlyZWQiXScpLnZhbHVlID0gYWNjZXNzRGF0YS5jb29saW5nUGVyaW9kQ2hlY2tSZXF1aXJlZCA/ICd0cnVlJyA6ICdmYWxzZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InR4bkF1dGhSZXF1aXJlZCJdJykudmFsdWUgPSBhY2Nlc3NEYXRhLnR4bkF1dGhSZXF1aXJlZCB8fCAnMCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im5vdGlmaWNhdGlvblBhcmFtTWFwIl0nKS52YWx1ZSA9IGFjY2Vzc0RhdGEubm90aWZpY2F0aW9uUGFyYW1NYXAgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InNlc3Npb25Db25kaXRpb25zTWFwIl0nKS52YWx1ZSA9IGFjY2Vzc0RhdGEuc2Vzc2lvbkNvbmRpdGlvbnNNYXAgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InByb2ZpbGVDb25kaXRpb25zTWFwIl0nKS52YWx1ZSA9IGFjY2Vzc0RhdGEucHJvZmlsZUNvbmRpdGlvbnNNYXAgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InJlcXVlc3RDb25kaXRpb25zTWFwIl0nKS52YWx1ZSA9IGFjY2Vzc0RhdGEucmVxdWVzdENvbmRpdGlvbnNNYXAgfHwgJyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjZXNzRGF0YS5yZXF1ZXN0Q29uZGl0aW9ucykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmMgPSBhY2Nlc3NEYXRhLnJlcXVlc3RDb25kaXRpb25zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0icmlza0luZGljYXRvciJdJykudmFsdWUgPSByYy5yaXNrSW5kaWNhdG9yIHx8ICcwJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InBvc3RhbENvZGUiXScpLnZhbHVlID0gcmMucG9zdGFsQ29kZSB8fCAnMCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ1cGRhdGVMaW1pdCJdJykudmFsdWUgPSByYy51cGRhdGVMaW1pdCB8fCAnMCc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJjLm1pbkFtdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im1pbkFtdENvZGUiXScpLnZhbHVlID0gcmMubWluQW10LmFtdENvZGUgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibWluQW10Q29kZVZhbHVlIl0nKS52YWx1ZSA9IHJjLm1pbkFtdC5hbXRDb2RlVmFsdWUgfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmMubWF4QW10KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibWF4QW10Q29kZSJdJykudmFsdWUgPSByYy5tYXhBbXQuYW10Q29kZSB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJtYXhBbXRDb2RlVmFsdWUiXScpLnZhbHVlID0gcmMubWF4QW10LmFtdENvZGVWYWx1ZSB8fCAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkb3dubG9hZE91dHB1dCgpIHsKICAgICAgICAgICAgaWYgKCFjdXJyZW50T3V0cHV0KSB7CiAgICAgICAgICAgICAgICBhbGVydCgnUGxlYXNlIGdlbmVyYXRlIEpTT04gb3IgU1FMIG91dHB1dCBmaXJzdC4nKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3Qgb3V0cHV0VHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdXRwdXRUeXBlJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IGZpbGVuYW1lID0gb3V0cHV0VHlwZSA9PT0gJ2pzb24nID8gJ3BvbGljeS1jb25maWcuanNvbicgOiAncG9saWN5LWluc2VydC5zcWwnOwogICAgICAgICAgICBjb25zdCBtaW1lVHlwZSA9IG91dHB1dFR5cGUgPT09ICdqc29uJyA/ICdhcHBsaWNhdGlvbi9qc29uJyA6ICd0ZXh0L3BsYWluJzsKCiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY3VycmVudE91dHB1dF0sIHsgdHlwZTogbWltZVR5cGUgfSk7CiAgICAgICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICAgICAgYS5kb3dubG9hZCA9IGZpbGVuYW1lOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7CiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHsKICAgICAgICAgICAgaWYgKGNvbmZpcm0oJ1Jlc2V0IHRoZSBlbnRpcmUgZm9ybT8nKSkgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYW5uZWxzQ29udGFpbmVyJykuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3V0cHV0Qm94JykudGV4dENvbnRlbnQgPSAnT3V0cHV0IHdpbGwgYXBwZWFyIGhlcmUuLi4nOwogICAgICAgICAgICAgICAgY3VycmVudE91dHB1dCA9ICcnOwogICAgICAgICAgICAgICAgY2hhbm5lbENvdW50ZXIgPSAwOwogICAgICAgICAgICAgICAgcG9saWN5Q291bnRlciA9IDA7CiAgICAgICAgICAgICAgICBhY2Nlc3NDb3VudGVyID0gMDsKICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbkNvdW50ZXIgPSAwOwogICAgICAgICAgICAgICAgYWRkQ2hhbm5lbCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjb3B5T3V0cHV0KCkgewogICAgICAgICAgICBpZiAoIWN1cnJlbnRPdXRwdXQpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdQbGVhc2UgZ2VuZXJhdGUgSlNPTiBvciBTUUwgb3V0cHV0IGZpcnN0LicpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBVc2UgbW9kZXJuIGNsaXBib2FyZCBBUEkKICAgICAgICAgICAgaWYgKG5hdmlnYXRvci5jbGlwYm9hcmQgJiYgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQpIHsKICAgICAgICAgICAgICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGN1cnJlbnRPdXRwdXQpLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gVmlzdWFsIGZlZWRiYWNrCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuID0gZXZlbnQudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsVGV4dCA9IGJ0bi50ZXh0Q29udGVudDsKICAgICAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSAnQ29waWVkISc7CiAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLmJhY2tncm91bmQgPSAnIzRDQUY1MCc7CgogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9IG9yaWdpbmFsVGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLmJhY2tncm91bmQgPSAnJzsKICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdGYWlsZWQgdG8gY29weTogJyArIGVycik7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrIGZvciBvbGRlciBicm93c2VycwogICAgICAgICAgICAgICAgY29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpOwogICAgICAgICAgICAgICAgdGV4dGFyZWEudmFsdWUgPSBjdXJyZW50T3V0cHV0OwogICAgICAgICAgICAgICAgdGV4dGFyZWEuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnOwogICAgICAgICAgICAgICAgdGV4dGFyZWEuc3R5bGUub3BhY2l0eSA9ICcwJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dGFyZWEpOwogICAgICAgICAgICAgICAgdGV4dGFyZWEuc2VsZWN0KCk7CgogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGV2ZW50LnRhcmdldDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbFRleHQgPSBidG4udGV4dENvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gJ0NvcGllZCEnOwogICAgICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5iYWNrZ3JvdW5kID0gJyM0Q0FGNTAnOwoKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSBvcmlnaW5hbFRleHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5iYWNrZ3JvdW5kID0gJyc7CiAgICAgICAgICAgICAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBhbGVydCgnRmFpbGVkIHRvIGNvcHk6ICcgKyBlcnIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGV4dGFyZWEpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjb21wYXJlSlNPTnMoKSB7CiAgICAgICAgICAgIGNvbnN0IGpzb24xVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc29uMScpLnZhbHVlLnRyaW0oKTsKICAgICAgICAgICAgY29uc3QganNvbjJUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzb24yJykudmFsdWUudHJpbSgpOwoKICAgICAgICAgICAgaWYgKCFqc29uMVRleHQgfHwgIWpzb24yVGV4dCkgewogICAgICAgICAgICAgICAgYWxlcnQoJ1BsZWFzZSBwYXN0ZSBKU09OIGNvbnRlbnQgaW4gYm90aCB0ZXh0IGFyZWFzLicpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3Qgb2JqMSA9IEpTT04ucGFyc2UoanNvbjFUZXh0KTsKICAgICAgICAgICAgICAgIGNvbnN0IG9iajIgPSBKU09OLnBhcnNlKGpzb24yVGV4dCk7CgogICAgICAgICAgICAgICAgY29uc3QgZGlmZmVyZW5jZXMgPSBbXTsKICAgICAgICAgICAgICAgIGZpbmREaWZmZXJlbmNlcyhvYmoxLCBvYmoyLCAnJywgZGlmZmVyZW5jZXMpOwoKICAgICAgICAgICAgICAgIGRpc3BsYXlEaWZmZXJlbmNlcyhkaWZmZXJlbmNlcyk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBhbGVydCgnRXJyb3IgcGFyc2luZyBKU09OOiAnICsgZXJyb3IubWVzc2FnZSArICdcblxuUGxlYXNlIGNoZWNrIHlvdXIgSlNPTiBmb3JtYXQuJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGZpbmREaWZmZXJlbmNlcyhvYmoxLCBvYmoyLCBwYXRoLCBkaWZmZXJlbmNlcykgewogICAgICAgICAgICAvLyBDaGVjayBpZiBib3RoIGFyZSBvYmplY3RzCiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqMSA9PT0gJ29iamVjdCcgJiYgb2JqMSAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqMiA9PT0gJ29iamVjdCcgJiYgb2JqMiAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgLy8gR2V0IGFsbCB1bmlxdWUga2V5cyBmcm9tIGJvdGggb2JqZWN0cwogICAgICAgICAgICAgICAgY29uc3Qga2V5czEgPSBPYmplY3Qua2V5cyhvYmoxKTsKICAgICAgICAgICAgICAgIGNvbnN0IGtleXMyID0gT2JqZWN0LmtleXMob2JqMik7CiAgICAgICAgICAgICAgICBjb25zdCBhbGxLZXlzID0gWy4uLm5ldyBTZXQoWy4uLmtleXMxLCAuLi5rZXlzMl0pXTsKCiAgICAgICAgICAgICAgICBhbGxLZXlzLmZvckVhY2goa2V5ID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXRoID0gcGF0aCA/IGAke3BhdGh9LiR7a2V5fWAgOiBrZXk7CgogICAgICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBvYmoxKSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBLZXkgZXhpc3RzIGluIG9iajIgYnV0IG5vdCBpbiBvYmoxCiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2FkZGVkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG5ld1BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkob2JqMltrZXldLCBudWxsLCAyKQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCEoa2V5IGluIG9iajIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtleSBleGlzdHMgaW4gb2JqMSBidXQgbm90IGluIG9iajIKICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmVyZW5jZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVtb3ZlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBuZXdQYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KG9iajFba2V5XSwgbnVsbCwgMikKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2V5IGV4aXN0cyBpbiBib3RoLCBjb21wYXJlIHZhbHVlcyByZWN1cnNpdmVseQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmoxW2tleV0pICYmIEFycmF5LmlzQXJyYXkob2JqMltrZXldKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGFyZSBhcnJheXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeShvYmoxW2tleV0pICE9PSBKU09OLnN0cmluZ2lmeShvYmoyW2tleV0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFyZUFycmF5cyhvYmoxW2tleV0sIG9iajJba2V5XSwgbmV3UGF0aCwgZGlmZmVyZW5jZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvYmoxW2tleV0gPT09ICdvYmplY3QnICYmIG9iajFba2V5XSAhPT0gbnVsbCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBvYmoyW2tleV0gPT09ICdvYmplY3QnICYmIG9iajJba2V5XSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5kRGlmZmVyZW5jZXMob2JqMVtrZXldLCBvYmoyW2tleV0sIG5ld1BhdGgsIGRpZmZlcmVuY2VzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvYmoxW2tleV0gIT09IG9iajJba2V5XSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmFsdWVzIGFyZSBkaWZmZXJlbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtb2RpZmllZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogbmV3UGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZTogSlNPTi5zdHJpbmdpZnkob2JqMVtrZXldLCBudWxsLCAyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZTogSlNPTi5zdHJpbmdpZnkob2JqMltrZXldLCBudWxsLCAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChvYmoxICE9PSBvYmoyKSB7CiAgICAgICAgICAgICAgICAvLyBTaW1wbGUgdmFsdWUgY29tcGFyaXNvbgogICAgICAgICAgICAgICAgZGlmZmVyZW5jZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21vZGlmaWVkJywKICAgICAgICAgICAgICAgICAgICBwYXRoOiBwYXRoIHx8ICcocm9vdCknLAogICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlOiBKU09OLnN0cmluZ2lmeShvYmoxLCBudWxsLCAyKSwKICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZTogSlNPTi5zdHJpbmdpZnkob2JqMiwgbnVsbCwgMikKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjb21wYXJlQXJyYXlzKGFycjEsIGFycjIsIHBhdGgsIGRpZmZlcmVuY2VzKSB7CiAgICAgICAgICAgIGNvbnN0IG1heExlbiA9IE1hdGgubWF4KGFycjEubGVuZ3RoLCBhcnIyLmxlbmd0aCk7CgogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heExlbjsgaSsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXRoID0gYCR7cGF0aH1bJHtpfV1gOwoKICAgICAgICAgICAgICAgIGlmIChpID49IGFycjEubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gRWxlbWVudCBleGlzdHMgaW4gYXJyMiBidXQgbm90IGluIGFycjEKICAgICAgICAgICAgICAgICAgICBkaWZmZXJlbmNlcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2FkZGVkJywKICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogbmV3UGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KGFycjJbaV0sIG51bGwsIDIpCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPj0gYXJyMi5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAvLyBFbGVtZW50IGV4aXN0cyBpbiBhcnIxIGJ1dCBub3QgaW4gYXJyMgogICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVtb3ZlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG5ld1BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBKU09OLnN0cmluZ2lmeShhcnIxW2ldLCBudWxsLCAyKQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBFbGVtZW50IGV4aXN0cyBpbiBib3RoIGFycmF5cwogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJyMVtpXSA9PT0gJ29iamVjdCcgJiYgYXJyMVtpXSAhPT0gbnVsbCAmJgogICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgYXJyMltpXSA9PT0gJ29iamVjdCcgJiYgYXJyMltpXSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICBmaW5kRGlmZmVyZW5jZXMoYXJyMVtpXSwgYXJyMltpXSwgbmV3UGF0aCwgZGlmZmVyZW5jZXMpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoSlNPTi5zdHJpbmdpZnkoYXJyMVtpXSkgIT09IEpTT04uc3RyaW5naWZ5KGFycjJbaV0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21vZGlmaWVkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG5ld1BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZTogSlNPTi5zdHJpbmdpZnkoYXJyMVtpXSwgbnVsbCwgMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZTogSlNPTi5zdHJpbmdpZnkoYXJyMltpXSwgbnVsbCwgMikKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkaXNwbGF5RGlmZmVyZW5jZXMoZGlmZmVyZW5jZXMpIHsKICAgICAgICAgICAgY29uc3QgZGlmZlJlc3VsdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlmZlJlc3VsdHMnKTsKICAgICAgICAgICAgY29uc3QgZGlmZkNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlmZkNvbnRlbnQnKTsKCiAgICAgICAgICAgIGlmIChkaWZmZXJlbmNlcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIGRpZmZDb250ZW50LmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJkaWZmLWl0ZW0iIHN0eWxlPSJiYWNrZ3JvdW5kOiAjZDRlZGRhOyBib3JkZXItbGVmdDogNHB4IHNvbGlkICMyOGE3NDU7Ij48c3Ryb25nPk5vIGRpZmZlcmVuY2VzIGZvdW5kITwvc3Ryb25nPiBCb3RoIEpTT05zIGFyZSBpZGVudGljYWwuPC9kaXY+JzsKICAgICAgICAgICAgICAgIGRpZmZSZXN1bHRzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgaHRtbCA9ICcnOwogICAgICAgICAgICBkaWZmZXJlbmNlcy5mb3JFYWNoKGRpZmYgPT4gewogICAgICAgICAgICAgICAgaWYgKGRpZmYudHlwZSA9PT0gJ2FkZGVkJykgewogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaWZmLWl0ZW0gZGlmZi1hZGRlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaWZmLXBhdGgiPisgQWRkZWQ6ICR7ZGlmZi5wYXRofTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGlmZi12YWx1ZSI+JHtlc2NhcGVIdG1sKGRpZmYudmFsdWUpfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkaWZmLnR5cGUgPT09ICdyZW1vdmVkJykgewogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaWZmLWl0ZW0gZGlmZi1yZW1vdmVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpZmYtcGF0aCI+LSBSZW1vdmVkOiAke2RpZmYucGF0aH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpZmYtdmFsdWUiPiR7ZXNjYXBlSHRtbChkaWZmLnZhbHVlKX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlmZi50eXBlID09PSAnbW9kaWZpZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpZmYtaXRlbSBkaWZmLW1vZGlmaWVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpZmYtcGF0aCI+fiBNb2RpZmllZDogJHtkaWZmLnBhdGh9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaWZmLXZhbHVlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPk9sZDo8L3N0cm9uZz4gJHtlc2NhcGVIdG1sKGRpZmYub2xkVmFsdWUpfTxicj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPk5ldzo8L3N0cm9uZz4gJHtlc2NhcGVIdG1sKGRpZmYubmV3VmFsdWUpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgZGlmZkNvbnRlbnQuaW5uZXJIVE1MID0gaHRtbDsKICAgICAgICAgICAgZGlmZlJlc3VsdHMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBlc2NhcGVIdG1sKHRleHQpIHsKICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGRpdi50ZXh0Q29udGVudCA9IHRleHQ7CiAgICAgICAgICAgIHJldHVybiBkaXYuaW5uZXJIVE1MOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xlYXJDb21wYXJpc29uKCkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNvbjEnKS52YWx1ZSA9ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNvbjInKS52YWx1ZSA9ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlmZlJlc3VsdHMnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlmZkNvbnRlbnQnKS5pbm5lckhUTUwgPSAnJzsKICAgICAgICB9CiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+Cg==

