Test1

PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+UG9saWN5IENvbmZpZ3VyYXRpb24gTWFuYWdlcjwvdGl0bGU+CiAgICA8c3R5bGU+CiAgICAgICAgKiB7CiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICB9CgogICAgICAgIGJvZHkgewogICAgICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmNWY1ZjU7CiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICB9CgogICAgICAgIC5jb250YWluZXIgewogICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDFweCA0cHggcmdiYSgwLDAsMCwwLjEpOwogICAgICAgICAgICBwYWRkaW5nOiAxMnB4OwogICAgICAgIH0KCiAgICAgICAgaDEgewogICAgICAgICAgICBjb2xvcjogIzMzMzsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4OwogICAgICAgICAgICBmb250LXNpemU6IDE4cHg7CiAgICAgICAgfQoKICAgICAgICBoMiB7CiAgICAgICAgICAgIGNvbG9yOiAjNTU1OwogICAgICAgICAgICBtYXJnaW46IDhweCAwIDZweCAwOwogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjNENBRjUwOwogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogM3B4OwogICAgICAgIH0KCiAgICAgICAgaDMgewogICAgICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgICAgICAgbWFyZ2luOiA2cHggMCA0cHggMDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgICAgICBmb250LXdlaWdodDogNjAwOwogICAgICAgIH0KCiAgICAgICAgLmhlYWRlciB7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICAgICAgfQoKICAgICAgICAuYWN0aW9ucyB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGdhcDogNnB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4OwogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7CiAgICAgICAgfQoKICAgICAgICBidXR0b24gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjNENBRjUwOwogICAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgcGFkZGluZzogNnB4IDEycHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICBmb250LXNpemU6IDExcHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgICAgfQoKICAgICAgICBidXR0b246aG92ZXIgewogICAgICAgICAgICBvcGFjaXR5OiAwLjk7CiAgICAgICAgfQoKICAgICAgICBidXR0b24uc2Vjb25kYXJ5IHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzIxOTZGMzsKICAgICAgICB9CgogICAgICAgIGJ1dHRvbi5kYW5nZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjQ0MzM2OwogICAgICAgIH0KCiAgICAgICAgYnV0dG9uLnNtYWxsIHsKICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4OwogICAgICAgIH0KCiAgICAgICAgLmZvcm0tZ3JvdXAgewogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7CiAgICAgICAgfQoKICAgICAgICBsYWJlbCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAycHg7CiAgICAgICAgICAgIGNvbG9yOiAjNTU1OwogICAgICAgICAgICBmb250LXdlaWdodDogNTAwOwogICAgICAgICAgICBmb250LXNpemU6IDExcHg7CiAgICAgICAgfQoKICAgICAgICBsYWJlbC5yZXF1aXJlZDo6YWZ0ZXIgewogICAgICAgICAgICBjb250ZW50OiAiICoiOwogICAgICAgICAgICBjb2xvcjogcmVkOwogICAgICAgIH0KCiAgICAgICAgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEgewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgcGFkZGluZzogNHB4IDZweDsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgICAgICAgICBmb250LXNpemU6IDExcHg7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgICAgICAgICAgY29sb3I6ICMzMzM7CiAgICAgICAgfQoKICAgICAgICBzZWxlY3QgewogICAgICAgICAgICBhcHBlYXJhbmNlOiBub25lOwogICAgICAgICAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7CiAgICAgICAgICAgIC1tb3otYXBwZWFyYW5jZTogbm9uZTsKICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD1VVEYtOCwlM2NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMjQgMjQnIGZpbGw9J25vbmUnIHN0cm9rZT0nY3VycmVudENvbG9yJyBzdHJva2Utd2lkdGg9JzInIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCclM2UlM2Nwb2x5bGluZSBwb2ludHM9JzYgOSAxMiAxNSAxOCA5JyUzZSUzYy9wb2x5bGluZSUzZSUzYy9zdmclM2UiKTsKICAgICAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICAgICAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogcmlnaHQgNHB4IGNlbnRlcjsKICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiAxNnB4OwogICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAyNHB4OwogICAgICAgIH0KCiAgICAgICAgaW5wdXQ6Zm9jdXMsIHNlbGVjdDpmb2N1cywgdGV4dGFyZWE6Zm9jdXMgewogICAgICAgICAgICBvdXRsaW5lOiBub25lOwogICAgICAgICAgICBib3JkZXItY29sb3I6ICM0Q0FGNTA7CiAgICAgICAgfQoKICAgICAgICB0ZXh0YXJlYSB7CiAgICAgICAgICAgIHJlc2l6ZTogdmVydGljYWw7CiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDQwcHg7CiAgICAgICAgfQoKICAgICAgICAuY2hhbm5lbC1zZWN0aW9uIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2Y5ZjlmOTsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2UwZTBlMDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgICBwYWRkaW5nOiAxMHB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4OwogICAgICAgIH0KCiAgICAgICAgLnBvbGljeS1zZWN0aW9uIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgcGFkZGluZzogOHB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7CiAgICAgICAgfQoKICAgICAgICAuYWNjZXNzLXNlY3Rpb24gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmFmYWZhOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZThlOGU4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDhweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4OwogICAgICAgIH0KCiAgICAgICAgLm5vdGlmaWNhdGlvbi1zZWN0aW9uIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZjsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2UwZTBlMDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgICAgICAgICBwYWRkaW5nOiA2cHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDsKICAgICAgICB9CgogICAgICAgIC5ncmlkLTIgewogICAgICAgICAgICBkaXNwbGF5OiBncmlkOwogICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7CiAgICAgICAgICAgIGdhcDogOHB4OwogICAgICAgIH0KCiAgICAgICAgLmdyaWQtMyB7CiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7CiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmciAxZnI7CiAgICAgICAgICAgIGdhcDogOHB4OwogICAgICAgIH0KCiAgICAgICAgLmdyaWQtNCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7CiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmciAxZnIgMWZyOwogICAgICAgICAgICBnYXA6IDhweDsKICAgICAgICB9CgogICAgICAgIC5ncmlkLTUgewogICAgICAgICAgICBkaXNwbGF5OiBncmlkOwogICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCg1LCAxZnIpOwogICAgICAgICAgICBnYXA6IDhweDsKICAgICAgICB9CgogICAgICAgIC5idG4tZ3JvdXAgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBnYXA6IDZweDsKICAgICAgICAgICAgbWFyZ2luLXRvcDogNnB4OwogICAgICAgIH0KCiAgICAgICAgLm91dHB1dC1hcmVhIHsKICAgICAgICAgICAgbWFyZ2luLXRvcDogMTJweDsKICAgICAgICAgICAgYm9yZGVyLXRvcDogMnB4IHNvbGlkICNlZWU7CiAgICAgICAgICAgIHBhZGRpbmctdG9wOiAxMnB4OwogICAgICAgIH0KCiAgICAgICAgLm91dHB1dC1ib3ggewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjRmNGY0OwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDhweDsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsKICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4OwogICAgICAgICAgICBtYXgtaGVpZ2h0OiAzMDBweDsKICAgICAgICAgICAgb3ZlcmZsb3cteTogYXV0bzsKICAgICAgICAgICAgd2hpdGUtc3BhY2U6IHByZS13cmFwOwogICAgICAgICAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7CiAgICAgICAgfQoKICAgICAgICAuZmlsZS1pbnB1dC13cmFwcGVyIHsKICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgfQoKICAgICAgICAuZmlsZS1pbnB1dC13cmFwcGVyIGlucHV0W3R5cGU9ZmlsZV0gewogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgIGxlZnQ6IC05OTk5cHg7CiAgICAgICAgfQoKICAgICAgICAuc2VjdGlvbi1oZWFkZXIgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDZweDsKICAgICAgICB9CgogICAgICAgIC5iYWRnZSB7CiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzIxOTZGMzsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgICAgICBwYWRkaW5nOiAycHggNnB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsKICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDRweDsKICAgICAgICB9CgogICAgICAgIC5hbGVydCB7CiAgICAgICAgICAgIHBhZGRpbmc6IDZweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsKICAgICAgICB9CgogICAgICAgIC5hbGVydC1pbmZvIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2QxZWNmMTsKICAgICAgICAgICAgY29sb3I6ICMwYzU0NjA7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNiZWU1ZWI7CiAgICAgICAgfQoKICAgICAgICAubW9kYWwgewogICAgICAgICAgICBkaXNwbGF5OiBub25lOwogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHotaW5kZXg6IDEwMDA7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHRvcDogMDsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwwLjUpOwogICAgICAgIH0KCiAgICAgICAgLm1vZGFsLWNvbnRlbnQgewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKICAgICAgICAgICAgbWFyZ2luOiA1MHB4IGF1dG87CiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgICAgICAgICAgd2lkdGg6IDgwJTsKICAgICAgICAgICAgbWF4LXdpZHRoOiA4MDBweDsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMjBweCByZ2JhKDAsMCwwLDAuMyk7CiAgICAgICAgfQoKICAgICAgICAubW9kYWwtaGVhZGVyIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4OwogICAgICAgIH0KCiAgICAgICAgLm1vZGFsLWhlYWRlciBoMiB7CiAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICBwYWRkaW5nOiAwOwogICAgICAgIH0KCiAgICAgICAgLmNsb3NlIHsKICAgICAgICAgICAgY29sb3I6ICNhYWE7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjhweDsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDIwcHg7CiAgICAgICAgfQoKICAgICAgICAuY2xvc2U6aG92ZXIgewogICAgICAgICAgICBjb2xvcjogIzAwMDsKICAgICAgICB9CgogICAgICAgICNqc29uSW5wdXQgewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgbWluLWhlaWdodDogMzAwcHg7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnQ291cmllciBOZXcnLCBtb25vc3BhY2U7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICAgICAgcGFkZGluZzogMTBweDsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgIH0KCiAgICAgICAgLnRhYnMgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBnYXA6IDRweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDsKICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNlMGUwZTA7CiAgICAgICAgfQoKICAgICAgICAudGFiIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2YwZjBmMDsKICAgICAgICAgICAgY29sb3I6ICM2NjY7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgcGFkZGluZzogOHB4IDIwcHg7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4OwogICAgICAgICAgICBmb250LXdlaWdodDogNTAwOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHggNHB4IDAgMDsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjNzOwogICAgICAgIH0KCiAgICAgICAgLnRhYjpob3ZlciB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNlMGUwZTA7CiAgICAgICAgfQoKICAgICAgICAudGFiLmFjdGl2ZSB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICM0Q0FGNTA7CiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgICB9CgogICAgICAgIC50YWItY29udGVudCB7CiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICAgICAgfQoKICAgICAgICAudGFiLWNvbnRlbnQuYWN0aXZlIHsKICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgfQoKICAgICAgICAuY29tcGFyZS1jb250YWluZXIgewogICAgICAgICAgICBkaXNwbGF5OiBncmlkOwogICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7CiAgICAgICAgICAgIGdhcDogMTJweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDsKICAgICAgICB9CgogICAgICAgIC5jb21wYXJlLXBhbmVsIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICB9CgogICAgICAgIC5jb21wYXJlLXBhbmVsIGgzIHsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4OwogICAgICAgIH0KCiAgICAgICAgLmNvbXBhcmUtdGV4dGFyZWEgewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgbWluLWhlaWdodDogNDAwcHg7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnQ291cmllciBOZXcnLCBtb25vc3BhY2U7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDsKICAgICAgICAgICAgcGFkZGluZzogOHB4OwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgICAgIHJlc2l6ZTogdmVydGljYWw7CiAgICAgICAgfQoKICAgICAgICAuZGlmZi1yZXN1bHRzIHsKICAgICAgICAgICAgbWFyZ2luLXRvcDogMTJweDsKICAgICAgICAgICAgcGFkZGluZzogMTJweDsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2Y5ZjlmOTsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgICBtYXgtaGVpZ2h0OiA1MDBweDsKICAgICAgICAgICAgb3ZlcmZsb3cteTogYXV0bzsKICAgICAgICB9CgogICAgICAgIC5kaWZmLWl0ZW0gewogICAgICAgICAgICBwYWRkaW5nOiA4cHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgICBmb250LXNpemU6IDExcHg7CiAgICAgICAgfQoKICAgICAgICAuZGlmZi1hZGRlZCB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNkNGVkZGE7CiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiA0cHggc29saWQgIzI4YTc0NTsKICAgICAgICB9CgogICAgICAgIC5kaWZmLXJlbW92ZWQgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjhkN2RhOwogICAgICAgICAgICBib3JkZXItbGVmdDogNHB4IHNvbGlkICNkYzM1NDU7CiAgICAgICAgfQoKICAgICAgICAuZGlmZi1tb2RpZmllZCB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmYzY2Q7CiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiA0cHggc29saWQgI2ZmYzEwNzsKICAgICAgICB9CgogICAgICAgIC5kaWZmLXBhdGggewogICAgICAgICAgICBmb250LXdlaWdodDogNjAwOwogICAgICAgICAgICBjb2xvcjogIzMzMzsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4OwogICAgICAgIH0KCiAgICAgICAgLmRpZmYtdmFsdWUgewogICAgICAgICAgICBmb250LWZhbWlseTogJ0NvdXJpZXIgTmV3JywgbW9ub3NwYWNlOwogICAgICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgICB9CgogICAgICAgIC5pbmZvLWljb24gewogICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgICAgIHdpZHRoOiAxMnB4OwogICAgICAgICAgICBoZWlnaHQ6IDEycHg7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxMnB4OwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogICAgICAgICAgICBjb2xvcjogIzIxOTZGMzsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzIxOTZGMzsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgICAgICBmb250LXNpemU6IDhweDsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgICAgIGN1cnNvcjogaGVscDsKICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDNweDsKICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAgICAgICB9CgogICAgICAgIC5pbmZvLWljb246aG92ZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMjE5NkYzOwogICAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgfQoKICAgICAgICAuZXhwYW5kLWljb24gewogICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgICAgIHdpZHRoOiAxNnB4OwogICAgICAgICAgICBoZWlnaHQ6IDE2cHg7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxNnB4OwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICM0Q0FGNTA7CiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgICAgICAgICBmb250LXNpemU6IDEwcHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA0cHg7CiAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7CiAgICAgICAgfQoKICAgICAgICAuZXhwYW5kLWljb246aG92ZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjNDVhMDQ5OwogICAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7CiAgICAgICAgfQoKICAgICAgICAuaW5wdXQtd2l0aC1leHBhbmQgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBnYXA6IDRweDsKICAgICAgICB9CgogICAgICAgIC5pbnB1dC13aXRoLWV4cGFuZCBpbnB1dCB7CiAgICAgICAgICAgIGZsZXg6IDE7CiAgICAgICAgfQoKICAgICAgICAuZXhwYW5kLW1vZGFsIHsKICAgICAgICAgICAgZGlzcGxheTogbm9uZTsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICB6LWluZGV4OiAxMDAyOwogICAgICAgICAgICBsZWZ0OiAwOwogICAgICAgICAgICB0b3A6IDA7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsMC41KTsKICAgICAgICB9CgogICAgICAgIC5leHBhbmQtbW9kYWwtY29udGVudCB7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogICAgICAgICAgICBtYXJnaW46IDgwcHggYXV0bzsKICAgICAgICAgICAgcGFkZGluZzogMjBweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4OwogICAgICAgICAgICB3aWR0aDogOTAlOwogICAgICAgICAgICBtYXgtd2lkdGg6IDgwMHB4OwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAyMHB4IHJnYmEoMCwwLDAsMC4zKTsKICAgICAgICB9CgogICAgICAgIC5leHBhbmQtbW9kYWwtaGVhZGVyIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4OwogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTBweDsKICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICM0Q0FGNTA7CiAgICAgICAgfQoKICAgICAgICAuZXhwYW5kLW1vZGFsLWhlYWRlciBoMyB7CiAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgY29sb3I6ICMzMzM7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICB9CgogICAgICAgIC5leHBhbmQtdGV4dGFyZWEgewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgbWluLWhlaWdodDogMzAwcHg7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnQ291cmllciBOZXcnLCBtb25vc3BhY2U7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICAgICAgcGFkZGluZzogMTBweDsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgICByZXNpemU6IHZlcnRpY2FsOwogICAgICAgIH0KCiAgICAgICAgLmV4cGFuZC10ZXh0YXJlYTpmb2N1cyB7CiAgICAgICAgICAgIG91dGxpbmU6IG5vbmU7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogIzRDQUY1MDsKICAgICAgICB9CgogICAgICAgIC5pbmZvLW1vZGFsIHsKICAgICAgICAgICAgZGlzcGxheTogbm9uZTsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICB6LWluZGV4OiAxMDAxOwogICAgICAgICAgICBsZWZ0OiAwOwogICAgICAgICAgICB0b3A6IDA7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsMC41KTsKICAgICAgICB9CgogICAgICAgIC5pbmZvLW1vZGFsLWNvbnRlbnQgewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKICAgICAgICAgICAgbWFyZ2luOiAxMDBweCBhdXRvOwogICAgICAgICAgICBwYWRkaW5nOiAyMHB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICAgICAgICAgIHdpZHRoOiA5MCU7CiAgICAgICAgICAgIG1heC13aWR0aDogNjAwcHg7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDIwcHggcmdiYSgwLDAsMCwwLjMpOwogICAgICAgIH0KCiAgICAgICAgLmluZm8tbW9kYWwtaGVhZGVyIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4OwogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTBweDsKICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICM0Q0FGNTA7CiAgICAgICAgfQoKICAgICAgICAuaW5mby1tb2RhbC1oZWFkZXIgaDMgewogICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgIGNvbG9yOiAjMzMzOwogICAgICAgICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgICAgfQoKICAgICAgICAuaW5mby1tb2RhbC1ib2R5IHsKICAgICAgICAgICAgY29sb3I6ICM2NjY7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDsKICAgICAgICB9CgogICAgICAgIC5pbmZvLW1vZGFsLWJvZHkgc3Ryb25nIHsKICAgICAgICAgICAgY29sb3I6ICMzMzM7CiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICAgICAgICBtYXJnaW4tdG9wOiAxMHB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7CiAgICAgICAgfQoKICAgICAgICAuaW5mby1tb2RhbC1ib2R5IGNvZGUgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjRmNGY0OwogICAgICAgICAgICBwYWRkaW5nOiAycHggNnB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnQ291cmllciBOZXcnLCBtb25vc3BhY2U7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICB9CgogICAgICAgIC50d28tY29sLWxheW91dCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7CiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsKICAgICAgICAgICAgZ2FwOiAxMnB4OwogICAgICAgIH0KCiAgICAgICAgLmxlZnQtY29sIHsKICAgICAgICAgICAgb3ZlcmZsb3cteTogYXV0bzsKICAgICAgICAgICAgbWF4LWhlaWdodDogY2FsYygxMDB2aCAtIDEwMHB4KTsKICAgICAgICB9CgogICAgICAgIC5yaWdodC1jb2wgewogICAgICAgICAgICBwb3NpdGlvbjogc3RpY2t5OwogICAgICAgICAgICB0b3A6IDEwcHg7CiAgICAgICAgICAgIGhlaWdodDogY2FsYygxMDB2aCAtIDEwMHB4KTsKICAgICAgICB9CgogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiAxMjAwcHgpIHsKICAgICAgICAgICAgLnR3by1jb2wtbGF5b3V0IHsKICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC5ncmlkLTQsIC5ncmlkLTUgewogICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHsKICAgICAgICAgICAgLmdyaWQtMiwgLmdyaWQtMywgLmdyaWQtNCwgLmdyaWQtNSB7CiAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8ZGl2IGNsYXNzPSJjb250YWluZXIiPgogICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlciI+CiAgICAgICAgICAgIDxoMT5Qb2xpY3kgQ29uZmlnIE1hbmFnZXI8L2gxPgogICAgICAgIDwvZGl2PgoKICAgICAgICA8IS0tIFRhYnMgLS0+CiAgICAgICAgPGRpdiBjbGFzcz0idGFicyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InRhYiBhY3RpdmUiIG9uY2xpY2s9InN3aXRjaFRhYignZWRpdG9yJykiPkVkaXRvcjwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJ0YWIiIG9uY2xpY2s9InN3aXRjaFRhYignY29tcGFyZScpIj5Db21wYXJlIEpTT048L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBFZGl0b3IgVGFiIC0tPgogICAgICAgIDxkaXYgaWQ9ImVkaXRvclRhYiIgY2xhc3M9InRhYi1jb250ZW50IGFjdGl2ZSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbnMiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJvcGVuTG9hZE1vZGFsKCkiPkxvYWQgSlNPTjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJnZW5lcmF0ZUpTT04oKSI+R2VuIEpTT048L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNlY29uZGFyeSIgb25jbGljaz0iZ2VuZXJhdGVTUUwoKSI+R2VuIFNRTDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJkb3dubG9hZE91dHB1dCgpIj5Eb3dubG9hZDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZGFuZ2VyIiBvbmNsaWNrPSJyZXNldEZvcm0oKSI+UmVzZXQ8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgIDwhLS0gTG9hZCBKU09OIE1vZGFsIC0tPgogICAgICAgIDxkaXYgaWQ9ImxvYWRNb2RhbCIgY2xhc3M9Im1vZGFsIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtY29udGVudCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxoMj5Mb2FkIEpTT048L2gyPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJjbG9zZSIgb25jbGljaz0iY2xvc2VMb2FkTW9kYWwoKSI+JnRpbWVzOzwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0iY29sb3I6ICM2NjY7IG1hcmdpbi1ib3R0b206IDEwcHg7Ij5QYXN0ZSB5b3VyIEpTT04gY29udGVudCBiZWxvdzo8L3A+CiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJqc29uSW5wdXQiIHBsYWNlaG9sZGVyPSdQYXN0ZSBKU09OIGhlcmUsIGUuZy4sIHsicG9saWNpZXNNYXBzIjogWy4uLl19Jz48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJ0bi1ncm91cCIgc3R5bGU9Im1hcmdpbi10b3A6IDEwcHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJsb2FkRnJvbVRleHRhcmVhKCkiPkxvYWQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJjbG9zZUxvYWRNb2RhbCgpIj5DYW5jZWw8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBJbmZvIE1vZGFsIC0tPgogICAgICAgIDxkaXYgaWQ9ImluZm9Nb2RhbCIgY2xhc3M9ImluZm8tbW9kYWwiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbmZvLW1vZGFsLWNvbnRlbnQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5mby1tb2RhbC1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxoMyBpZD0iaW5mb1RpdGxlIj5GaWVsZCBJbmZvcm1hdGlvbjwvaDM+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImNsb3NlIiBvbmNsaWNrPSJjbG9zZUluZm9Nb2RhbCgpIj4mdGltZXM7PC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbmZvLW1vZGFsLWJvZHkiIGlkPSJpbmZvQm9keSI+CiAgICAgICAgICAgICAgICAgICAgPCEtLSBEeW5hbWljIGNvbnRlbnQgd2lsbCBiZSBpbnNlcnRlZCBoZXJlIC0tPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8IS0tIEV4cGFuZCBNb2RhbCAtLT4KICAgICAgICA8ZGl2IGlkPSJleHBhbmRNb2RhbCIgY2xhc3M9ImV4cGFuZC1tb2RhbCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImV4cGFuZC1tb2RhbC1jb250ZW50Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImV4cGFuZC1tb2RhbC1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxoMyBpZD0iZXhwYW5kVGl0bGUiPkVkaXQgRmllbGQ8L2gzPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJjbG9zZSIgb25jbGljaz0iY2xvc2VFeHBhbmRNb2RhbCgpIj4mdGltZXM7PC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0iZXhwYW5kVGV4dGFyZWEiIGNsYXNzPSJleHBhbmQtdGV4dGFyZWEiIHBsYWNlaG9sZGVyPSJFbnRlciB5b3VyIHZhbHVlIGhlcmUuLi4iPjwvdGV4dGFyZWE+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYnRuLWdyb3VwIiBzdHlsZT0ibWFyZ2luLXRvcDogMTBweDsiPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InNhdmVFeHBhbmRlZFZhbHVlKCkiPlNhdmU8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJjbG9zZUV4cGFuZE1vZGFsKCkiPkNhbmNlbDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2IGNsYXNzPSJ0d28tY29sLWxheW91dCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxlZnQtY29sIj4KICAgICAgICAgICAgICAgIDxmb3JtIGlkPSJwb2xpY3lGb3JtIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJjaGFubmVsc0NvbnRhaW5lciI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYnRuLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImFkZENoYW5uZWwoKSI+KyBBZGQgQ2hhbm5lbDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9mb3JtPgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJpZ2h0LWNvbCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJvdXRwdXQtYXJlYSI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgICAgICA8aDI+T3V0cHV0PC9oMj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiA2cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNlY29uZGFyeSBzbWFsbCIgb25jbGljaz0iY29weU91dHB1dCgpIiB0aXRsZT0iQ29weSB0byBjbGlwYm9hcmQiPkNvcHk8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9Im91dHB1dFR5cGUiIHN0eWxlPSJ3aWR0aDogYXV0bzsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBtYXJnaW4tcmlnaHQ6IDZweDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ianNvbiI+SlNPTjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ic3FsIj5TUUw8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ib3V0cHV0LWJveCIgaWQ9Im91dHB1dEJveCI+T3V0cHV0IHdpbGwgYXBwZWFyIGhlcmUuLi48L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBDb21wYXJlIFRhYiAtLT4KICAgICAgICA8ZGl2IGlkPSJjb21wYXJlVGFiIiBjbGFzcz0idGFiLWNvbnRlbnQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb21wYXJlLWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb21wYXJlLXBhbmVsIj4KICAgICAgICAgICAgICAgICAgICA8aDM+SlNPTiAxIChMZWZ0KTwvaDM+CiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJqc29uMSIgY2xhc3M9ImNvbXBhcmUtdGV4dGFyZWEiIHBsYWNlaG9sZGVyPSdQYXN0ZSBmaXJzdCBKU09OIGhlcmUuLi4nPjwvdGV4dGFyZWE+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbXBhcmUtcGFuZWwiPgogICAgICAgICAgICAgICAgICAgIDxoMz5KU09OIDIgKFJpZ2h0KTwvaDM+CiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJqc29uMiIgY2xhc3M9ImNvbXBhcmUtdGV4dGFyZWEiIHBsYWNlaG9sZGVyPSdQYXN0ZSBzZWNvbmQgSlNPTiBoZXJlLi4uJz48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWN0aW9ucyI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImNvbXBhcmVKU09OcygpIj5Db21wYXJlPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJzZWNvbmRhcnkiIG9uY2xpY2s9ImNsZWFyQ29tcGFyaXNvbigpIj5DbGVhcjwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgaWQ9ImRpZmZSZXN1bHRzIiBjbGFzcz0iZGlmZi1yZXN1bHRzIiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPgogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxMHB4OyI+RGlmZmVyZW5jZXM6PC9oMz4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImRpZmZDb250ZW50Ij48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8c2NyaXB0PgogICAgICAgIGxldCBjaGFubmVsQ291bnRlciA9IDA7CiAgICAgICAgbGV0IHBvbGljeUNvdW50ZXIgPSAwOwogICAgICAgIGxldCBhY2Nlc3NDb3VudGVyID0gMDsKICAgICAgICBsZXQgbm90aWZpY2F0aW9uQ291bnRlciA9IDA7CiAgICAgICAgbGV0IGN1cnJlbnRPdXRwdXQgPSAnJzsKCiAgICAgICAgLy8gRmllbGQgaW5mb3JtYXRpb24gZGF0YWJhc2UKICAgICAgICBjb25zdCBmaWVsZEluZm8gPSB7CiAgICAgICAgICAgIGNoYW5uZWxJZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJDaGFubmVsIElEIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjaGFubmVsIHRocm91Z2ggd2hpY2ggdGhlIHNlcnZpY2UgaXMgYWNjZXNzZWQuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlNHX01CIiwgIlVTX1dFQiIsICJVS19BUEkiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlcnZpY2VJZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJTZXJ2aWNlIElEIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBzZXJ2aWNlL0FQSSBlbmRwb2ludC4gVGhpcyBzaG91bGQgYmUgdW5pcXVlIGFjcm9zcyBhbGwgcG9saWNpZXMuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlBBWU5PV19VUElfMSIsICJUUkFOU0ZFUl9GVU5EUyIsICJWSUVXX0JBTEFOQ0UiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVuZFBvaW50OiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkVuZCBQb2ludCAoVVJJKSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlRoZSBBUEkgZW5kcG9pbnQgcGF0aCB0aGF0IHRoaXMgcG9saWN5IGFwcGxpZXMgdG8uIFRoaXMgaXMgdGhlIGluY29taW5nIHJlcXVlc3QgcGF0aC4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiL3BheW1lbnRzL3Byb3h5LXRyYW5zZmVyLWZjeS9wYXlub3d1cGkiLCAiL2FwaS90cmFuc2ZlciIsICIvYmFsYW5jZS92aWV3Il0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBodHRwTWV0aG9kOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkhUVFAgTWV0aG9kIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIEhUVFAgbWV0aG9kIHVzZWQgZm9yIHRoaXMgZW5kcG9pbnQuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlBPU1QiLCAiR0VUIiwgIlBVVCIsICJERUxFVEUiLCAiUEFUQ0giXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG91dEVuZFBvaW50OiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIk91dCBFbmQgUG9pbnQiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgb3V0Z29pbmcgZW5kcG9pbnQgcGF0aC4gQ2FuIGJlIHNhbWUgYXMgZW5kcG9pbnQgb3IgZGlmZmVyZW50IGZvciByb3V0aW5nIHB1cnBvc2VzLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyIvcGF5bWVudHMvcHJveHktdHJhbnNmZXItZmN5L3BheW5vd3VwaSIsICIvaW50ZXJuYWwvYXBpL3RyYW5zZmVyIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2VydmljZURlc2M6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiU2VydmljZSBEZXNjcmlwdGlvbiIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIkEgaHVtYW4tcmVhZGFibGUgZGVzY3JpcHRpb24gb2Ygd2hhdCB0aGlzIHNlcnZpY2UgZG9lcy4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiUGF5bm93VVBJKFNHRCB0byBJTlIpIHRyYW5zZmVyIiwgIkZ1bmQgdHJhbnNmZXIgc2VydmljZSIsICJCYWxhbmNlIGlucXVpcnkiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGF1dGhMZXZlbFJlcXVpcmVkOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkF1dGggTGV2ZWwgUmVxdWlyZWQgKExldmVsKSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlRoZSBhdXRoZW50aWNhdGlvbiBsZXZlbCByZXF1aXJlZCB0byBhY2Nlc3MgdGhpcyBzZXJ2aWNlLiBMZXZlbCAwIG1lYW5zIG5vIGF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkLiBIaWdoZXIgbGV2ZWxzIHJlcXVpcmUgc3Ryb25nZXIgYXV0aGVudGljYXRpb24uIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIjAgKE5vIGF1dGgpIiwgIjEgKEJhc2ljKSIsICIyIChTdHJvbmcpIiwgIjMgKE11bHRpLWZhY3RvcikiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICAgICAgbG9naWM6ICJJZiBsZXZlbCA9IDAsIHZhbGlkYXRpb24gPSBmYWxzZSBhbmQgd2hpdGVsaXN0ID0gdHJ1ZS4gSWYgbGV2ZWwgIT0gMCwgdmFsaWRhdGlvbiA9IHRydWUgYW5kIHdoaXRlbGlzdCA9IGZhbHNlLiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2Vzc2lvblZhbFJlcXVpcmVkOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlNlc3Npb24gVmFsaWRhdGlvbiBSZXF1aXJlZCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIldoZXRoZXIgc2Vzc2lvbiB2YWxpZGF0aW9uIGlzIHJlcXVpcmVkIGZvciB0aGlzIHNlcnZpY2UuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbInRydWUiLCAiZmFsc2UiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICAgICAgICAgIGxvZ2ljOiAiQXV0b21hdGljYWxseSBzZXQgYmFzZWQgb24gYXV0aCBsZXZlbC4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHdoaXRlbGlzdGVkOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIldoaXRlbGlzdGVkIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiV2hldGhlciB0aGlzIHNlcnZpY2UgaXMgd2hpdGVsaXN0ZWQgKGFsbG93ZWQgd2l0aG91dCBjZXJ0YWluIGNoZWNrcykuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbInRydWUiLCAiZmFsc2UiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICAgICAgICAgIGxvZ2ljOiAiQXV0b21hdGljYWxseSBzZXQgYmFzZWQgb24gYXV0aCBsZXZlbC4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFsbG93ZWRTY29wZTogewogICAgICAgICAgICAgICAgdGl0bGU6ICJBbGxvd2VkIFNjb3BlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIE9BdXRoL2FjY2VzcyBzY29wZXMgcmVxdWlyZWQgdG8gYWNjZXNzIHRoaXMgc2VydmljZS4gU3BhY2Utc2VwYXJhdGVkIGxpc3QuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbImFjY2Vzc19sZXZlbDIgaWFtX2FjY2VzcyBzZXJ2aWNlX2xldmVsMiIsICJhY2Nlc3NfbGV2ZWwwIiwgImFkbWluX3Njb3BlIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICB0eG5BdXRoQ29uY2VybnM6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiVHJhbnNhY3Rpb24gQXV0aCBDb25jZXJucyAoVHhuIEF1dGgpIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiV2hldGhlciB0aGlzIHNlcnZpY2UgcmVxdWlyZXMgdHJhbnNhY3Rpb24gYXV0aGVudGljYXRpb24vYXV0aG9yaXphdGlvbi4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiWSAoWWVzKSIsICJOIChObykiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICAgICAgbG9naWM6ICJJZiBOLCBvbmx5IDEgYWNjZXNzIHJlY29yZCBpcyBhbGxvd2VkLiBJZiBZLCAxIG9yIG1vcmUgYWNjZXNzIHJlY29yZHMgYWxsb3dlZC4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvb2xpbmdQZXJpb2RDaGVja1JlcXVpcmVkOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkNvb2xpbmcgUGVyaW9kIENoZWNrIFJlcXVpcmVkIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiV2hldGhlciBhIGNvb2xpbmcgcGVyaW9kIGNoZWNrIGlzIHJlcXVpcmVkIGJlZm9yZSBhbGxvd2luZyB0aGlzIHRyYW5zYWN0aW9uLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJ0cnVlIiwgImZhbHNlIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdHhuQXV0aFJlcXVpcmVkOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlRyYW5zYWN0aW9uYWwgQXV0aCBSZXF1aXJlZCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlRoZSBsZXZlbCBvZiB0cmFuc2FjdGlvbiBhdXRob3JpemF0aW9uIHJlcXVpcmVkLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyIwIChOb25lKSIsICIxIChCYXNpYykiLCAiMiAoU3Ryb25nKSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG5vdGlmaWNhdGlvblBhcmFtTWFwOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIk5vdGlmaWNhdGlvbiBQYXJhbWV0ZXIgTWFwIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiTWFwcyByZXF1ZXN0IGZpZWxkcyB0byBub3RpZmljYXRpb24gdGVtcGxhdGUgcGFyYW1ldGVycy4gVXNlZCB0byBwb3B1bGF0ZSBub3RpZmljYXRpb24gbWVzc2FnZXMuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlNIT1JURklFTEQwMT1ycU9iai5yZXF1ZXN0X2JvZHkuYW1vdW50LCBTSE9SVEZJRUxEMDI9cnFPYmoucmVxdWVzdF9ib2R5LmN1cnJlbmN5Il0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2Vzc2lvbkNvbmRpdGlvbk1hcDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJTZXNzaW9uIENvbmRpdGlvbiBNYXAiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJDb25kaXRpb25zIGJhc2VkIG9uIHNlc3Npb24gYXR0cmlidXRlcyB0aGF0IG11c3QgYmUgbWV0LiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJzZXNzaW9uLmxvZ2luVHlwZT1TRUNVUkUiLCAic2Vzc2lvbi5kZXZpY2VWZXJpZmllZD10cnVlIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcHJvZmlsZUNvbmRpdGlvbk1hcDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJQcm9maWxlIENvbmRpdGlvbiBNYXAiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJDb25kaXRpb25zIGJhc2VkIG9uIHVzZXIgcHJvZmlsZSBhdHRyaWJ1dGVzIHRoYXQgbXVzdCBiZSBtZXQuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbInByb2ZpbGUuYWNjb3VudFR5cGU9UFJFTUlVTSIsICJwcm9maWxlLnZlcmlmaWVkPXRydWUiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICByZXF1ZXN0Q29uZGl0aW9uc01hcDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJSZXF1ZXN0IENvbmRpdGlvbnMgTWFwIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiQ3VzdG9tIGNvbmRpdGlvbnMgYmFzZWQgb24gcmVxdWVzdCBkYXRhIHRoYXQgbXVzdCBiZSBtZXQuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbInJxT2JqLnJlcXVlc3RfYm9keS5hbW91bnQ+MTAwMCIsICJycU9iai5yZXF1ZXN0X2JvZHkuY3VycmVuY3k9VVNEIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmlza0luZGljYXRvcjogewogICAgICAgICAgICAgICAgdGl0bGU6ICJSaXNrIEluZGljYXRvciIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlJpc2sgbGV2ZWwgaW5kaWNhdG9yIGZvciB0aGlzIHRyYW5zYWN0aW9uIHR5cGUuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIjAgKExvdykiLCAiMSAoTWVkaXVtKSIsICIyIChIaWdoKSIsICIzIChDcml0aWNhbCkiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBwb3N0YWxDb2RlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlBvc3RhbCBDb2RlIENoZWNrIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiV2hldGhlciBwb3N0YWwgY29kZSB2YWxpZGF0aW9uIGlzIHJlcXVpcmVkLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyIwIChOb3QgcmVxdWlyZWQpIiwgIjEgKFJlcXVpcmVkKSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVwZGF0ZUxpbWl0OiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlVwZGF0ZSBMaW1pdCBDaGVjayIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIldoZXRoZXIgbGltaXQgdXBkYXRlcyBhcmUgYWxsb3dlZC4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiMCAoTm90IGFsbG93ZWQpIiwgIjEgKEFsbG93ZWQpIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWluQW10Q29kZTogewogICAgICAgICAgICAgICAgdGl0bGU6ICJNaW4gQW1vdW50IENvZGUiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJSZWZlcmVuY2UgY29kZSBmb3IgdGhlIG1pbmltdW0gYW1vdW50IGFsbG93ZWQgZm9yIHRoaXMgdHJhbnNhY3Rpb24uIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIkRFRkFVTFRfTUlOX0FNVCIsICJQQVlOT1dfTUlOIiwgIlRSQU5TRkVSX01JTiJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1pbkFtdENvZGVWYWx1ZTogewogICAgICAgICAgICAgICAgdGl0bGU6ICJNaW4gQW1vdW50IFZhbHVlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIGFjdHVhbCBtaW5pbXVtIGFtb3VudCB2YWx1ZS4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiMC4wMDAwIiwgIjEwLjAwMDAiLCAiMTAwLjAwMDAiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBtYXhBbXRDb2RlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIk1heCBBbW91bnQgQ29kZSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlJlZmVyZW5jZSBjb2RlIGZvciB0aGUgbWF4aW11bSBhbW91bnQgYWxsb3dlZCBmb3IgdGhpcyB0cmFuc2FjdGlvbi4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiREVGQVVMVF9NQVhfQU1UIiwgIlBBWU5PV19NQVgiLCAiVFJBTlNGRVJfTUFYIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWF4QW10Q29kZVZhbHVlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIk1heCBBbW91bnQgVmFsdWUiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgYWN0dWFsIG1heGltdW0gYW1vdW50IHZhbHVlLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyI5OTk5OTkuOTk5OSIsICIxMDAwMC4wMDAwIiwgIjUwMDAwLjAwMDAiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBub3RpZmljYXRpb25UeXBlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIk5vdGlmaWNhdGlvbiBUeXBlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIHR5cGUgb2Ygbm90aWZpY2F0aW9uIHRvIHNlbmQgdG8gdGhlIHVzZXIuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlNNUyIsICJFTUFJTCIsICJQVVNIIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXV0aFR5cGU6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiQXV0aCBUeXBlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIGF1dGhlbnRpY2F0aW9uIHR5cGUgcmVxdWlyZWQgZm9yIHRoaXMgbm90aWZpY2F0aW9uL3RyYW5zYWN0aW9uLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJBVVRIX0hBUkRfU0lHTiIsICJBVVRIX1NPRlRfU0lHTiIsICJBVVRIX09UUCJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRlbXBsYXRlSWQ6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiVGVtcGxhdGUgSUQiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgbm90aWZpY2F0aW9uIHRlbXBsYXRlIGlkZW50aWZpZXIgaW5jbHVkaW5nIGxhbmd1YWdlLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJTVEI4OFVQMTA4OkVuZ2xpc2giLCAiVEVNUExBVEVfMDAxOkVuZ2xpc2giLCAiVFhOX0FMRVJUOlNwYW5pc2giXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICB0ZW1wbGF0ZVBhcmFtczogewogICAgICAgICAgICAgICAgdGl0bGU6ICJUZW1wbGF0ZSBQYXJhbWV0ZXJzIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiQ29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgcGFyYW1ldGVycyB1c2VkIGluIHRoZSBub3RpZmljYXRpb24gdGVtcGxhdGUuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlNIT1JURklFTEQwMSxTSE9SVEZJRUxEMDIsU0hPUlRGSUVMRDAzIiwgIkFNT1VOVCxDVVJSRU5DWSxEQVRFIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaXNNYW5kYXRvcnk6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiSXMgTWFuZGF0b3J5IiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiV2hldGhlciB0aGlzIG5vdGlmaWNhdGlvbiBpcyBtYW5kYXRvcnkgZm9yIHRoZSB0cmFuc2FjdGlvbi4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsidHJ1ZSIsICJmYWxzZSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICB3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGFkZENoYW5uZWwoKTsKICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBzaG93SW5mbyhmaWVsZE5hbWUpIHsKICAgICAgICAgICAgY29uc3QgaW5mbyA9IGZpZWxkSW5mb1tmaWVsZE5hbWVdOwogICAgICAgICAgICBpZiAoIWluZm8pIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdObyBpbmZvcm1hdGlvbiBhdmFpbGFibGUgZm9yIHRoaXMgZmllbGQuJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvVGl0bGUnKS50ZXh0Q29udGVudCA9IGluZm8udGl0bGU7CgogICAgICAgICAgICBsZXQgYm9keUhUTUwgPSBgPHA+JHtpbmZvLmRlc2NyaXB0aW9ufTwvcD5gOwoKICAgICAgICAgICAgaWYgKGluZm8ucmVxdWlyZWQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgYm9keUhUTUwgKz0gYDxzdHJvbmc+UmVxdWlyZWQ6PC9zdHJvbmc+ICR7aW5mby5yZXF1aXJlZCA/ICdZZXMnIDogJ05vJ31gOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaW5mby5leGFtcGxlcyAmJiBpbmZvLmV4YW1wbGVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGJvZHlIVE1MICs9IGA8c3Ryb25nPkV4YW1wbGVzOjwvc3Ryb25nPmA7CiAgICAgICAgICAgICAgICBib2R5SFRNTCArPSAnPHVsIHN0eWxlPSJtYXJnaW46IDVweCAwOyBwYWRkaW5nLWxlZnQ6IDIwcHg7Ij4nOwogICAgICAgICAgICAgICAgaW5mby5leGFtcGxlcy5mb3JFYWNoKGV4ID0+IHsKICAgICAgICAgICAgICAgICAgICBib2R5SFRNTCArPSBgPGxpPjxjb2RlPiR7ZXh9PC9jb2RlPjwvbGk+YDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgYm9keUhUTUwgKz0gJzwvdWw+JzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGluZm8ubG9naWMpIHsKICAgICAgICAgICAgICAgIGJvZHlIVE1MICs9IGA8c3Ryb25nPkJ1c2luZXNzIExvZ2ljOjwvc3Ryb25nPjxwIHN0eWxlPSJtYXJnaW46IDVweCAwOyBwYWRkaW5nOiA4cHg7IGJhY2tncm91bmQ6ICNmZmYzY2Q7IGJvcmRlci1sZWZ0OiAzcHggc29saWQgI2ZmYzEwNzsgYm9yZGVyLXJhZGl1czogM3B4OyI+JHtpbmZvLmxvZ2ljfTwvcD5gOwogICAgICAgICAgICB9CgogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mb0JvZHknKS5pbm5lckhUTUwgPSBib2R5SFRNTDsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm9Nb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xvc2VJbmZvTW9kYWwoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIH0KCiAgICAgICAgLy8gQ2xvc2UgaW5mbyBtb2RhbCB3aGVuIGNsaWNraW5nIG91dHNpZGUKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICBjb25zdCBpbmZvTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mb01vZGFsJyk7CiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgPT0gaW5mb01vZGFsKSB7CiAgICAgICAgICAgICAgICBjbG9zZUluZm9Nb2RhbCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zdCBleHBhbmRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBhbmRNb2RhbCcpOwogICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09IGV4cGFuZE1vZGFsKSB7CiAgICAgICAgICAgICAgICBjbG9zZUV4cGFuZE1vZGFsKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgLy8gRXhwYW5kIGZpZWxkIGZ1bmN0aW9uYWxpdHkKICAgICAgICBsZXQgY3VycmVudEV4cGFuZElucHV0ID0gbnVsbDsKCiAgICAgICAgZnVuY3Rpb24gZXhwYW5kRmllbGQoZXhwYW5kSWNvbiwgZmllbGRUaXRsZSkgewogICAgICAgICAgICBjb25zdCBpbnB1dFdyYXBwZXIgPSBleHBhbmRJY29uLnBhcmVudEVsZW1lbnQ7CiAgICAgICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGlucHV0V3JhcHBlci5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpOwoKICAgICAgICAgICAgY3VycmVudEV4cGFuZElucHV0ID0gaW5wdXRFbGVtZW50OwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kVGl0bGUnKS50ZXh0Q29udGVudCA9IGZpZWxkVGl0bGU7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBhbmRUZXh0YXJlYScpLnZhbHVlID0gaW5wdXRFbGVtZW50LnZhbHVlOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGFuZFRleHRhcmVhJykuZm9jdXMoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNsb3NlRXhwYW5kTW9kYWwoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBhbmRNb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIGN1cnJlbnRFeHBhbmRJbnB1dCA9IG51bGw7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzYXZlRXhwYW5kZWRWYWx1ZSgpIHsKICAgICAgICAgICAgaWYgKGN1cnJlbnRFeHBhbmRJbnB1dCkgewogICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kVGV4dGFyZWEnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGN1cnJlbnRFeHBhbmRJbnB1dC52YWx1ZSA9IG5ld1ZhbHVlOwogICAgICAgICAgICAgICAgY2xvc2VFeHBhbmRNb2RhbCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzd2l0Y2hUYWIodGFiTmFtZSkgewogICAgICAgICAgICAvLyBIaWRlIGFsbCB0YWJzCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItY29udGVudCcpLmZvckVhY2godGFiID0+IHsKICAgICAgICAgICAgICAgIHRhYi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBSZW1vdmUgYWN0aXZlIGNsYXNzIGZyb20gYWxsIHRhYiBidXR0b25zCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWInKS5mb3JFYWNoKGJ0biA9PiB7CiAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gU2hvdyBzZWxlY3RlZCB0YWIKICAgICAgICAgICAgaWYgKHRhYk5hbWUgPT09ICdlZGl0b3InKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdG9yVGFiJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiJylbMF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodGFiTmFtZSA9PT0gJ2NvbXBhcmUnKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tcGFyZVRhYicpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYicpWzFdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhZGRDaGFubmVsKCkgewogICAgICAgICAgICBjb25zdCBjaGFubmVsSWQgPSBgY2hhbm5lbF8ke2NoYW5uZWxDb3VudGVyKyt9YDsKICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYW5uZWxzQ29udGFpbmVyJyk7CgogICAgICAgICAgICBjb25zdCBjaGFubmVsRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGNoYW5uZWxEaXYuY2xhc3NOYW1lID0gJ2NoYW5uZWwtc2VjdGlvbic7CiAgICAgICAgICAgIGNoYW5uZWxEaXYuaWQgPSBjaGFubmVsSWQ7CiAgICAgICAgICAgIGNoYW5uZWxEaXYuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxoMj5DaGFubmVsIDxzcGFuIGNsYXNzPSJiYWRnZSI+IyR7Y2hhbm5lbENvdW50ZXJ9PC9zcGFuPjwvaDI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJkYW5nZXIgc21hbGwiIG9uY2xpY2s9InJlbW92ZUNoYW5uZWwoJyR7Y2hhbm5lbElkfScpIj5SZW1vdmU8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJyZXF1aXJlZCI+Q2hhbm5lbCBJRCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnY2hhbm5lbElkJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImNoYW5uZWxJZCIgdmFsdWU9IlNHX01CIiByZXF1aXJlZD4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icG9saWNpZXMtY29udGFpbmVyIiBpZD0icG9saWNpZXNfJHtjaGFubmVsSWR9Ij48L2Rpdj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ic2Vjb25kYXJ5IHNtYWxsIiBvbmNsaWNrPSJhZGRQb2xpY3koJyR7Y2hhbm5lbElkfScpIj4rIFBvbGljeTwvYnV0dG9uPgogICAgICAgICAgICBgOwogICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2hhbm5lbERpdik7CiAgICAgICAgICAgIGFkZFBvbGljeShjaGFubmVsSWQpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQ2hhbm5lbChjaGFubmVsSWQpIHsKICAgICAgICAgICAgaWYgKGNvbmZpcm0oJ1JlbW92ZSB0aGlzIGNoYW5uZWw/JykpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNoYW5uZWxJZCkucmVtb3ZlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFkZFBvbGljeShjaGFubmVsSWQpIHsKICAgICAgICAgICAgY29uc3QgcG9saWN5SWQgPSBgcG9saWN5XyR7cG9saWN5Q291bnRlcisrfWA7CiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwb2xpY2llc18ke2NoYW5uZWxJZH1gKTsKCiAgICAgICAgICAgIGNvbnN0IHBvbGljeURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBwb2xpY3lEaXYuY2xhc3NOYW1lID0gJ3BvbGljeS1zZWN0aW9uJzsKICAgICAgICAgICAgcG9saWN5RGl2LmlkID0gcG9saWN5SWQ7CiAgICAgICAgICAgIHBvbGljeURpdi5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlciI+CiAgICAgICAgICAgICAgICAgICAgPGgzPlBvbGljeSA8c3BhbiBjbGFzcz0iYmFkZ2UiPiMke3BvbGljeUNvdW50ZXJ9PC9zcGFuPjwvaDM+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJkYW5nZXIgc21hbGwiIG9uY2xpY2s9InJlbW92ZVBvbGljeSgnJHtwb2xpY3lJZH0nKSI+UmVtb3ZlPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkLTMiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InJlcXVpcmVkIj5TZXJ2aWNlIElEIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdzZXJ2aWNlSWQnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InNlcnZpY2VJZCIgdmFsdWU9IlNFUlZJQ0VfSURfJHtwb2xpY3lDb3VudGVyfSIgcmVxdWlyZWQ+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0icmVxdWlyZWQiPlVSSSA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnZW5kUG9pbnQnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImVuZFBvaW50IiB2YWx1ZT0iL2FwaS9lbmRwb2ludCIgcmVxdWlyZWQ+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0icmVxdWlyZWQiPk1ldGhvZCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnaHR0cE1ldGhvZCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9Imh0dHBNZXRob2QiIHJlcXVpcmVkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUE9TVCI+UE9TVDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iR0VUIj5HRVQ8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlBVVCI+UFVUPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJERUxFVEUiPkRFTEVURTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQtMiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5PdXQgVVJJIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdvdXRFbmRQb2ludCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0ib3V0RW5kUG9pbnQiIHZhbHVlPSIvYXBpL2VuZHBvaW50Ij4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJyZXF1aXJlZCI+RGVzY3JpcHRpb24gPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3NlcnZpY2VEZXNjJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJzZXJ2aWNlRGVzYyIgdmFsdWU9IlNlcnZpY2UgZGVzY3JpcHRpb24iIHJlcXVpcmVkPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZC01Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJyZXF1aXJlZCI+TGV2ZWwgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ2F1dGhMZXZlbFJlcXVpcmVkJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0iYXV0aExldmVsUmVxdWlyZWQiIG9uY2hhbmdlPSJ1cGRhdGVWYWxpZGF0aW9uRmllbGRzKHRoaXMpIiByZXF1aXJlZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjAiIHNlbGVjdGVkPjA8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjEiPjE8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjIiPjI8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5WYWxpZGF0aW9uIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdzZXNzaW9uVmFsUmVxdWlyZWQnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJzZXNzaW9uVmFsUmVxdWlyZWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZmFsc2UiIHNlbGVjdGVkPmZhbHNlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJ0cnVlIj50cnVlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+V2hpdGVsaXN0IDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCd3aGl0ZWxpc3RlZCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9IndoaXRlbGlzdGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InRydWUiIHNlbGVjdGVkPnRydWU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImZhbHNlIj5mYWxzZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJyZXF1aXJlZCI+VHhuIEF1dGggPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3R4bkF1dGhDb25jZXJucycpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9InR4bkF1dGhDb25jZXJucyIgb25jaGFuZ2U9InVwZGF0ZUFjY2Vzc1Jlc3RyaWN0aW9uKHRoaXMpIiByZXF1aXJlZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ik4iPk48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlkiPlk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0icmVxdWlyZWQiPlNjb3BlIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdhbGxvd2VkU2NvcGUnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImFsbG93ZWRTY29wZSIgdmFsdWU9ImFjY2Vzc19sZXZlbDAiIHJlcXVpcmVkPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWxlcnQgYWxlcnQtaW5mbyBhY2Nlc3MtcmVzdHJpY3Rpb24iIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4KICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPk5vdGU6PC9zdHJvbmc+IFR4biBBdXRoPU4gYWxsb3dzIG9ubHkgMSBhY2Nlc3MgcmVjb3JkLgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW4tdG9wOiA4cHg7Ij5Ob3RpZmljYXRpb25zIChhcHBsaWVkIHRvIGFsbCBhY2Nlc3MgcmVjb3Jkcyk8L2gzPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibm90aWZpY2F0aW9ucy1jb250YWluZXIiIGlkPSJub3RpZmljYXRpb25zXyR7cG9saWN5SWR9Ij48L2Rpdj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ic2Vjb25kYXJ5IHNtYWxsIiBvbmNsaWNrPSJhZGROb3RpZmljYXRpb24oJyR7cG9saWN5SWR9JykiPisgTm90aWZpY2F0aW9uPC9idXR0b24+CgogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW4tdG9wOiA4cHg7Ij5BY2Nlc3MgUmVjb3JkczwvaDM+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhY2Nlc3Nlcy1jb250YWluZXIiIGlkPSJhY2Nlc3Nlc18ke3BvbGljeUlkfSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9InNlY29uZGFyeSBzbWFsbCIgb25jbGljaz0iYWRkQWNjZXNzKCcke3BvbGljeUlkfScpIj4rIEFjY2VzczwvYnV0dG9uPgogICAgICAgICAgICBgOwogICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocG9saWN5RGl2KTsKICAgICAgICAgICAgYWRkTm90aWZpY2F0aW9uKHBvbGljeUlkKTsKICAgICAgICAgICAgYWRkQWNjZXNzKHBvbGljeUlkKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbW92ZVBvbGljeShwb2xpY3lJZCkgewogICAgICAgICAgICBpZiAoY29uZmlybSgnUmVtb3ZlIHRoaXMgcG9saWN5PycpKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb2xpY3lJZCkucmVtb3ZlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVZhbGlkYXRpb25GaWVsZHMoaW5wdXQpIHsKICAgICAgICAgICAgY29uc3QgcG9saWN5U2VjdGlvbiA9IGlucHV0LmNsb3Nlc3QoJy5wb2xpY3ktc2VjdGlvbicpOwogICAgICAgICAgICBjb25zdCBsZXZlbCA9IHBhcnNlSW50KGlucHV0LnZhbHVlKTsKICAgICAgICAgICAgY29uc3QgdmFsaWRhdGlvblNlbGVjdCA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InNlc3Npb25WYWxSZXF1aXJlZCJdJyk7CiAgICAgICAgICAgIGNvbnN0IHdoaXRlbGlzdFNlbGVjdCA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9IndoaXRlbGlzdGVkIl0nKTsKCiAgICAgICAgICAgIGlmIChsZXZlbCA9PT0gMCkgewogICAgICAgICAgICAgICAgdmFsaWRhdGlvblNlbGVjdC52YWx1ZSA9ICdmYWxzZSc7CiAgICAgICAgICAgICAgICB3aGl0ZWxpc3RTZWxlY3QudmFsdWUgPSAndHJ1ZSc7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uU2VsZWN0LnZhbHVlID0gJ3RydWUnOwogICAgICAgICAgICAgICAgd2hpdGVsaXN0U2VsZWN0LnZhbHVlID0gJ2ZhbHNlJzsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlQWNjZXNzUmVzdHJpY3Rpb24oc2VsZWN0KSB7CiAgICAgICAgICAgIGNvbnN0IHBvbGljeVNlY3Rpb24gPSBzZWxlY3QuY2xvc2VzdCgnLnBvbGljeS1zZWN0aW9uJyk7CiAgICAgICAgICAgIGNvbnN0IGFsZXJ0ID0gcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuYWNjZXNzLXJlc3RyaWN0aW9uJyk7CiAgICAgICAgICAgIGNvbnN0IGFjY2Vzc0NvbnRhaW5lciA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignLmFjY2Vzc2VzLWNvbnRhaW5lcicpOwoKICAgICAgICAgICAgaWYgKHNlbGVjdC52YWx1ZSA9PT0gJ04nKSB7CiAgICAgICAgICAgICAgICBhbGVydC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1NlY3Rpb25zID0gYWNjZXNzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5hY2Nlc3Mtc2VjdGlvbicpOwogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBhY2Nlc3NTZWN0aW9ucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb25zW2ldLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYWxlcnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWRkTm90aWZpY2F0aW9uKHBvbGljeUlkKSB7CiAgICAgICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbklkID0gYG5vdGlmaWNhdGlvbl8ke25vdGlmaWNhdGlvbkNvdW50ZXIrK31gOwogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgbm90aWZpY2F0aW9uc18ke3BvbGljeUlkfWApOwoKICAgICAgICAgICAgY29uc3Qgbm90aWZpY2F0aW9uRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIG5vdGlmaWNhdGlvbkRpdi5jbGFzc05hbWUgPSAnbm90aWZpY2F0aW9uLXNlY3Rpb24nOwogICAgICAgICAgICBub3RpZmljYXRpb25EaXYuaWQgPSBub3RpZmljYXRpb25JZDsKICAgICAgICAgICAgbm90aWZpY2F0aW9uRGl2LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyIj4KICAgICAgICAgICAgICAgICAgICA8aDM+Tm90aWYgPHNwYW4gY2xhc3M9ImJhZGdlIj4jJHtub3RpZmljYXRpb25Db3VudGVyfTwvc3Bhbj48L2gzPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iZGFuZ2VyIHNtYWxsIiBvbmNsaWNrPSJyZW1vdmVOb3RpZmljYXRpb24oJyR7bm90aWZpY2F0aW9uSWR9JykiPng8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZC0zIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlR5cGUgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ25vdGlmaWNhdGlvblR5cGUnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJub3RpZmljYXRpb25UeXBlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlNNUyI+U01TPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJFTUFJTCI+RU1BSUw8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlBVU0giPlBVU0g8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5BdXRoIFR5cGUgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ2F1dGhUeXBlJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJhdXRoVHlwZSIgdmFsdWU9IkFVVEhfSEFSRF9TSUdOIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPk1hbmRhdG9yeSA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnaXNNYW5kYXRvcnknKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJpc01hbmRhdG9yeSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJ0cnVlIiBzZWxlY3RlZD50cnVlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJmYWxzZSI+ZmFsc2U8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQtMiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5UZW1wbGF0ZSBJRCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygndGVtcGxhdGVJZCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0idGVtcGxhdGVJZCIgdmFsdWU9IlRFTVBMQVRFXzAwMTpFbmdsaXNoIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlRlbXBsYXRlIFBhcmFtcyA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygndGVtcGxhdGVQYXJhbXMnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InRlbXBsYXRlUGFyYW1zIiB2YWx1ZT0iU0hPUlRGSUVMRDAxLFNIT1JURklFTEQwMiI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYDsKICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG5vdGlmaWNhdGlvbkRpdik7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZW1vdmVOb3RpZmljYXRpb24obm90aWZpY2F0aW9uSWQpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobm90aWZpY2F0aW9uSWQpLnJlbW92ZSgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWRkQWNjZXNzKHBvbGljeUlkKSB7CiAgICAgICAgICAgIGNvbnN0IHBvbGljeVNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb2xpY3lJZCk7CiAgICAgICAgICAgIGNvbnN0IHR4bkF1dGhTZWxlY3QgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ0eG5BdXRoQ29uY2VybnMiXScpOwogICAgICAgICAgICBjb25zdCBhY2Nlc3NDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgYWNjZXNzZXNfJHtwb2xpY3lJZH1gKTsKICAgICAgICAgICAgY29uc3QgY3VycmVudEFjY2Vzc0NvdW50ID0gYWNjZXNzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5hY2Nlc3Mtc2VjdGlvbicpLmxlbmd0aDsKCiAgICAgICAgICAgIGlmICh0eG5BdXRoU2VsZWN0LnZhbHVlID09PSAnTicgJiYgY3VycmVudEFjY2Vzc0NvdW50ID49IDEpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdUeG4gQXV0aD1OIGFsbG93cyBvbmx5IDEgYWNjZXNzIHJlY29yZC4nKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3QgYWNjZXNzSWQgPSBgYWNjZXNzXyR7YWNjZXNzQ291bnRlcisrfWA7CgogICAgICAgICAgICBjb25zdCBhY2Nlc3NEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgYWNjZXNzRGl2LmNsYXNzTmFtZSA9ICdhY2Nlc3Mtc2VjdGlvbic7CiAgICAgICAgICAgIGFjY2Vzc0Rpdi5pZCA9IGFjY2Vzc0lkOwogICAgICAgICAgICBhY2Nlc3NEaXYuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxoMz5BY2Nlc3MgPHNwYW4gY2xhc3M9ImJhZGdlIj4jJHthY2Nlc3NDb3VudGVyfTwvc3Bhbj48L2gzPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iZGFuZ2VyIHNtYWxsIiBvbmNsaWNrPSJyZW1vdmVBY2Nlc3MoJyR7YWNjZXNzSWR9JykiPlJlbW92ZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZC0zIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkNvb2xpbmcgUGVyaW9kIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdjb29saW5nUGVyaW9kQ2hlY2tSZXF1aXJlZCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9ImNvb2xpbmdQZXJpb2RDaGVja1JlcXVpcmVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImZhbHNlIiBzZWxlY3RlZD5mYWxzZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0idHJ1ZSI+dHJ1ZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlR4biBBdXRoIFJlcSA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygndHhuQXV0aFJlcXVpcmVkJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0idHhuQXV0aFJlcXVpcmVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjAiIHNlbGVjdGVkPjA8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjEiPjE8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjIiPjI8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5Ob3RpZiBQYXJhbSBNYXAgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ25vdGlmaWNhdGlvblBhcmFtTWFwJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJub3RpZmljYXRpb25QYXJhbU1hcCIgdmFsdWU9IlNIT1JURklFTEQwMT12YWwxIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQtMyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5TZXNzaW9uIENvbmQgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3Nlc3Npb25Db25kaXRpb25NYXAnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5wdXQtd2l0aC1leHBhbmQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InNlc3Npb25Db25kaXRpb25NYXAiIHZhbHVlPSIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImV4cGFuZC1pY29uIiBvbmNsaWNrPSJleHBhbmRGaWVsZCh0aGlzLCAnU2Vzc2lvbiBDb25kaXRpb24gTWFwJykiIHRpdGxlPSJFeHBhbmQiPuKkojwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5Qcm9maWxlIENvbmQgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3Byb2ZpbGVDb25kaXRpb25NYXAnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5wdXQtd2l0aC1leHBhbmQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InByb2ZpbGVDb25kaXRpb25NYXAiIHZhbHVlPSIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImV4cGFuZC1pY29uIiBvbmNsaWNrPSJleHBhbmRGaWVsZCh0aGlzLCAnUHJvZmlsZSBDb25kaXRpb24gTWFwJykiIHRpdGxlPSJFeHBhbmQiPuKkojwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5SZXF1ZXN0IENvbmQgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3JlcXVlc3RDb25kaXRpb25zTWFwJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImlucHV0LXdpdGgtZXhwYW5kIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJyZXF1ZXN0Q29uZGl0aW9uc01hcCIgdmFsdWU9IiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZXhwYW5kLWljb24iIG9uY2xpY2s9ImV4cGFuZEZpZWxkKHRoaXMsICdSZXF1ZXN0IENvbmRpdGlvbnMgTWFwJykiIHRpdGxlPSJFeHBhbmQiPuKkojwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkLTUiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+UmlzayBJbmQgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3Jpc2tJbmRpY2F0b3InKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InJpc2tJbmRpY2F0b3IiIHZhbHVlPSIwIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlBvc3RhbCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygncG9zdGFsQ29kZScpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0icG9zdGFsQ29kZSIgdmFsdWU9IjAiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+VXBkYXRlIExtdCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygndXBkYXRlTGltaXQnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InVwZGF0ZUxpbWl0IiB2YWx1ZT0iMCI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5NaW4gQW10IENvZGUgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ21pbkFtdENvZGUnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9Im1pbkFtdENvZGUiIHZhbHVlPSJERUZBVUxUX01JTl9BTVQiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+TWluIEFtdCBWYWwgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ21pbkFtdENvZGVWYWx1ZScpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBzdGVwPSIwLjAxIiBuYW1lPSJtaW5BbXRDb2RlVmFsdWUiIHZhbHVlPSIwIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQtMiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5NYXggQW10IENvZGUgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ21heEFtdENvZGUnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9Im1heEFtdENvZGUiIHZhbHVlPSJERUZBVUxUX01BWF9BTVQiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+TWF4IEFtdCBWYWwgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ21heEFtdENvZGVWYWx1ZScpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBzdGVwPSIwLjAxIiBuYW1lPSJtYXhBbXRDb2RlVmFsdWUiIHZhbHVlPSI5OTk5OTkuOTkiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGA7CiAgICAgICAgICAgIGFjY2Vzc0NvbnRhaW5lci5hcHBlbmRDaGlsZChhY2Nlc3NEaXYpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQWNjZXNzKGFjY2Vzc0lkKSB7CiAgICAgICAgICAgIGlmIChjb25maXJtKCdSZW1vdmUgdGhpcyBhY2Nlc3MgcmVjb3JkPycpKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhY2Nlc3NJZCkucmVtb3ZlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNvbGxlY3RGb3JtRGF0YSgpIHsKICAgICAgICAgICAgY29uc3QgY2hhbm5lbHMgPSBbXTsKICAgICAgICAgICAgY29uc3QgY2hhbm5lbFNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYW5uZWwtc2VjdGlvbicpOwoKICAgICAgICAgICAgY2hhbm5lbFNlY3Rpb25zLmZvckVhY2goY2hhbm5lbFNlY3Rpb24gPT4gewogICAgICAgICAgICAgICAgY29uc3QgY2hhbm5lbElkID0gY2hhbm5lbFNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImNoYW5uZWxJZCJdJykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCBwb2xpY2llcyA9IFtdOwoKICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeVNlY3Rpb25zID0gY2hhbm5lbFNlY3Rpb24ucXVlcnlTZWxlY3RvckFsbCgnLnBvbGljeS1zZWN0aW9uJyk7CiAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9ucy5mb3JFYWNoKHBvbGljeVNlY3Rpb24gPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZUlkOiBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJzZXJ2aWNlSWQiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBlbmRQb2ludDogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iZW5kUG9pbnQiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBodHRwTWV0aG9kOiBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJodHRwTWV0aG9kIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgb3V0RW5kUG9pbnQ6IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im91dEVuZFBvaW50Il0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZURlc2M6IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InNlcnZpY2VEZXNjIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgYXV0aExldmVsUmVxdWlyZWQ6IHBhcnNlSW50KHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImF1dGhMZXZlbFJlcXVpcmVkIl0nKS52YWx1ZSksCiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25WYWxSZXF1aXJlZDogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ic2Vzc2lvblZhbFJlcXVpcmVkIl0nKS52YWx1ZSA9PT0gJ3RydWUnLAogICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZWxpc3RlZDogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0id2hpdGVsaXN0ZWQiXScpLnZhbHVlID09PSAndHJ1ZScsCiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93ZWRTY29wZTogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYWxsb3dlZFNjb3BlIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgdHhuQXV0aENvbmNlcm5zOiBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ0eG5BdXRoQ29uY2VybnMiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NlczogW10KICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAvLyBDb2xsZWN0IHBvbGljeS1sZXZlbCBub3RpZmljYXRpb25zCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9saWN5Tm90aWZpY2F0aW9ucyA9IFtdOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeU5vdGlmU2VjdGlvbnMgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub3RpZmljYXRpb25zLWNvbnRhaW5lciAubm90aWZpY2F0aW9uLXNlY3Rpb24nKTsKICAgICAgICAgICAgICAgICAgICBwb2xpY3lOb3RpZlNlY3Rpb25zLmZvckVhY2gobm90aWZpY2F0aW9uU2VjdGlvbiA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblR5cGU6IG5vdGlmaWNhdGlvblNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im5vdGlmaWNhdGlvblR5cGUiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aFR5cGU6IG5vdGlmaWNhdGlvblNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImF1dGhUeXBlIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlSWQ6IG5vdGlmaWNhdGlvblNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InRlbXBsYXRlSWQiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVQYXJhbXM6IG5vdGlmaWNhdGlvblNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InRlbXBsYXRlUGFyYW1zIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTWFuZGF0b3J5OiBub3RpZmljYXRpb25TZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJpc01hbmRhdG9yeSJdJykudmFsdWUKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5Tm90aWZpY2F0aW9ucy5wdXNoKG5vdGlmaWNhdGlvbik7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1NlY3Rpb25zID0gcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yQWxsKCcuYWNjZXNzLXNlY3Rpb24nKTsKICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9ucy5mb3JFYWNoKGFjY2Vzc1NlY3Rpb24gPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY2Nlc3MgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb29saW5nUGVyaW9kQ2hlY2tSZXF1aXJlZDogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iY29vbGluZ1BlcmlvZENoZWNrUmVxdWlyZWQiXScpLnZhbHVlID09PSAndHJ1ZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eG5BdXRoUmVxdWlyZWQ6IGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InR4bkF1dGhSZXF1aXJlZCJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25QYXJhbU1hcDogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibm90aWZpY2F0aW9uUGFyYW1NYXAiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uRGV0bHM6IFsuLi5wb2xpY3lOb3RpZmljYXRpb25zXSwgLy8gQ29weSBwb2xpY3ktbGV2ZWwgbm90aWZpY2F0aW9ucyB0byBlYWNoIGFjY2VzcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbkNvbmRpdGlvbk1hcDogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ic2Vzc2lvbkNvbmRpdGlvbk1hcCJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlQ29uZGl0aW9uTWFwOiBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJwcm9maWxlQ29uZGl0aW9uTWFwIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RDb25kaXRpb25zTWFwOiBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJyZXF1ZXN0Q29uZGl0aW9uc01hcCJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0Q29uZGl0aW9uczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpc2tJbmRpY2F0b3I6IGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InJpc2tJbmRpY2F0b3IiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkFtdDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbXRDb2RlOiBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJtaW5BbXRDb2RlIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW10Q29kZVZhbHVlOiBwYXJzZUZsb2F0KGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im1pbkFtdENvZGVWYWx1ZSJdJykudmFsdWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhBbXQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW10Q29kZTogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibWF4QW10Q29kZSJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtdENvZGVWYWx1ZTogcGFyc2VGbG9hdChhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJtYXhBbXRDb2RlVmFsdWUiXScpLnZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdGFsQ29kZTogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0icG9zdGFsQ29kZSJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlTGltaXQ6IGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InVwZGF0ZUxpbWl0Il0nKS52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5LmFjY2Vzc2VzLnB1c2goYWNjZXNzKTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgcG9saWNpZXMucHVzaChwb2xpY3kpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY2hhbm5lbHMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbElkOiBjaGFubmVsSWQsCiAgICAgICAgICAgICAgICAgICAgcG9saWNpZXM6IHBvbGljaWVzCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICByZXR1cm4geyBwb2xpY2llc01hcHM6IGNoYW5uZWxzIH07CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZUpTT04oKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gY29sbGVjdEZvcm1EYXRhKCk7CiAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMik7CiAgICAgICAgICAgICAgICBjdXJyZW50T3V0cHV0ID0ganNvbjsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdXRwdXRUeXBlJykudmFsdWUgPSAnanNvbic7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3V0cHV0Qm94JykudGV4dENvbnRlbnQgPSBqc29uOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgYWxlcnQoJ0Vycm9yIGdlbmVyYXRpbmcgSlNPTjogJyArIGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZVNRTCgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBjb2xsZWN0Rm9ybURhdGEoKTsKICAgICAgICAgICAgICAgIGxldCBzcWwgPSAnLS0gR2VuZXJhdGVkIFNRTCBJbnNlcnQgU3RhdGVtZW50c1xuJzsKICAgICAgICAgICAgICAgIHNxbCArPSAnLS0gR2VuZXJhdGVkIG9uOiAnICsgbmV3IERhdGUoKS50b0lTT1N0cmluZygpICsgJ1xuXG4nOwoKICAgICAgICAgICAgICAgIGRhdGEucG9saWNpZXNNYXBzLmZvckVhY2goY2hhbm5lbCA9PiB7CiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbC5wb2xpY2llcy5mb3JFYWNoKHBvbGljeSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgLS0gUG9saWN5OiAke3BvbGljeS5zZXJ2aWNlSWR9XG5gOwogICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYElOU0VSVCBJTlRPIHJpc2tfbWF0cml4X3BvbGljeV9tYXN0ZXIKICAgIChQT0xJQ1lfVFlQRSwgTkVYVEdFTl9GTEFHLCBTRVJWSUNFX0lELCBDSEFOTkVMX0lELCBFTkRfUE9JTlQsIEhUVFBfTUVUSE9ELAogICAgIFNFUlZJQ0VfREVTQywgQVVUSF9MRVZFTF9SRVEsIFNFU19WQUxEX1JFUSwgV0hJVEVMSVNURUQsIEFMTE9XRURfU0NPUEUsCiAgICAgVFhOX0FVVEhfQ09OQ0VSTlMsIE9VVF9FTkRfUE9JTlQsIENSRUFURURfQllfVVNFUiwgQ1JFQVRFRF9EQVRFLCBNQUtFUl9VU0VSKQpWQUxVRVMKICAgICgnUE9MSUNZJywgMSwgJyR7cG9saWN5LnNlcnZpY2VJZH0nLCAnJHtjaGFubmVsLmNoYW5uZWxJZH0nLCAnJHtwb2xpY3kuZW5kUG9pbnR9JywKICAgICAnJHtwb2xpY3kuaHR0cE1ldGhvZH0nLCAnJHtwb2xpY3kuc2VydmljZURlc2MucmVwbGFjZSgvJy9nLCAiJyciKX0nLCAke3BvbGljeS5hdXRoTGV2ZWxSZXF1aXJlZH0sCiAgICAgJHtwb2xpY3kuc2Vzc2lvblZhbFJlcXVpcmVkID8gMSA6IDB9LCAke3BvbGljeS53aGl0ZWxpc3RlZCA/IDEgOiAwfSwgJyR7cG9saWN5LmFsbG93ZWRTY29wZX0nLAogICAgICcke3BvbGljeS50eG5BdXRoQ29uY2VybnN9JywgJyR7cG9saWN5Lm91dEVuZFBvaW50fScsICdTWVNURU0nLCBOT1coKSwgJ1NZU1RFTScpO1xuXG5gOwoKICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5LmFjY2Vzc2VzLmZvckVhY2goKGFjY2VzcywgYWNjZXNzSWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYC0tIEFjY2VzcyBSZWNvcmQgJHthY2Nlc3NJZHggKyAxfSAtIFJlcXVlc3QgQ29uZGl0aW9ucyBmb3IgJHtwb2xpY3kuc2VydmljZUlkfVxuYDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgSU5TRVJUIElOVE8gcmlza19tYXRyaXhfcnFjb25kaXRpb25fbWFzdGVyCiAgICAoU0VSVklDRV9JRCwgTUlOX0FNVF9DT0RFLCBNQVhfQU1UX0NPREUsIFBPU1RBTF9DT0RFLCBSSVNLX0lORElDQVRPUiwKICAgICBVUERBVEVfTElNSVQsIENSRUFURURfQllfVVNFUiwgQ1JFQVRFRF9EQVRFLCBNQUtFUl9VU0VSKQpWQUxVRVMKICAgICgnJHtwb2xpY3kuc2VydmljZUlkfScsICcke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5taW5BbXQuYW10Q29kZX0nLAogICAgICcke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5tYXhBbXQuYW10Q29kZX0nLCAnJHthY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMucG9zdGFsQ29kZX0nLAogICAgICcke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5yaXNrSW5kaWNhdG9yfScsICcke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy51cGRhdGVMaW1pdH0nLAogICAgICdTWVNURU0nLCBOT1coKSwgJ1NZU1RFTScpO1xuYDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYFNFVCBAcmVxdWVzdF9jb25kaXRpb25zX2lkID0gTEFTVF9JTlNFUlRfSUQoKTtcblxuYDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYC0tIEFtb3VudCBDb2RlIGZvciBNaW4gQW1vdW50XG5gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGBJTlNFUlQgSU5UTyBhbW91bnRfY29kZV9tYXN0ZXIKICAgIChBTU9VTlRfQ09ERSwgQU1PVU5UX0NPREVfREVTQywgQU1PVU5UX0NPREVfVkFMVUUsIENSRUFURURfQllfVVNFUiwgQ1JFQVRFRF9EQVRFLCBNQUtFUl9VU0VSKQpWQUxVRVMKICAgICgnJHthY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMubWluQW10LmFtdENvZGV9JywgJ01pbiBhbW91bnQgZm9yICR7cG9saWN5LnNlcnZpY2VJZH0nLAogICAgICR7YWNjZXNzLnJlcXVlc3RDb25kaXRpb25zLm1pbkFtdC5hbXRDb2RlVmFsdWV9LCAnU1lTVEVNJywgTk9XKCksICdTWVNURU0nKQpPTiBEVVBMSUNBVEUgS0VZIFVQREFURSBVUERBVEVEX0JZX1VTRVI9J1NZU1RFTScsIFVQREFURURfREFURT1OT1coKTtcblxuYDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYC0tIEFtb3VudCBDb2RlIGZvciBNYXggQW1vdW50XG5gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGBJTlNFUlQgSU5UTyBhbW91bnRfY29kZV9tYXN0ZXIKICAgIChBTU9VTlRfQ09ERSwgQU1PVU5UX0NPREVfREVTQywgQU1PVU5UX0NPREVfVkFMVUUsIENSRUFURURfQllfVVNFUiwgQ1JFQVRFRF9EQVRFLCBNQUtFUl9VU0VSKQpWQUxVRVMKICAgICgnJHthY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMubWF4QW10LmFtdENvZGV9JywgJ01heCBhbW91bnQgZm9yICR7cG9saWN5LnNlcnZpY2VJZH0nLAogICAgICR7YWNjZXNzLnJlcXVlc3RDb25kaXRpb25zLm1heEFtdC5hbXRDb2RlVmFsdWV9LCAnU1lTVEVNJywgTk9XKCksICdTWVNURU0nKQpPTiBEVVBMSUNBVEUgS0VZIFVQREFURSBVUERBVEVEX0JZX1VTRVI9J1NZU1RFTScsIFVQREFURURfREFURT1OT1coKTtcblxuYDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3Mubm90aWZpY2F0aW9uRGV0bHMuZm9yRWFjaCgobm90aWYsIG5vdGlmSWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGAtLSBOb3RpZmljYXRpb24gJHtub3RpZklkeCArIDF9IGZvciBBY2Nlc3MgUmVjb3JkICR7YWNjZXNzSWR4ICsgMX1cbmA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGBJTlNFUlQgSU5UTyByaXNrX21hdHJpeF9ub3RpZmljYWl0b25fbWFzdGVyCiAgICAoU0VSVklDRV9JRCwgTk9USUZJQ0FUSU9OX1RZUEUsIFRFTVBMQVRFX0lELCBURU1QTEFURV9QQVJBTVMsIElTX01BTkRBVE9SWSwKICAgICBBVVRIX1RZUEUsIENSRUFURURfQllfVVNFUiwgQ1JFQVRFRF9EQVRFLCBNQUtFUl9VU0VSKQpWQUxVRVMKICAgICgnJHtwb2xpY3kuc2VydmljZUlkfScsICcke25vdGlmLm5vdGlmaWNhdGlvblR5cGV9JywgJyR7bm90aWYudGVtcGxhdGVJZH0nLAogICAgICcke25vdGlmLnRlbXBsYXRlUGFyYW1zfScsICR7bm90aWYuaXNNYW5kYXRvcnkgPT09ICd0cnVlJyA/IDEgOiAwfSwKICAgICAnJHtub3RpZi5hdXRoVHlwZX0nLCAnU1lTVEVNJywgTk9XKCksICdTWVNURU0nKTtcblxuYDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgLS0gQWNjZXNzIFJlY29yZCBmb3IgJHtwb2xpY3kuc2VydmljZUlkfVxuYDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgSU5TRVJUIElOVE8gcmlza19tYXRyaXhfYWNjZXNzX21hc3RlcgogICAgKFNFUlZJQ0VfSUQsIENPT0xJTkdfUEVSSU9EX0NIRUNLX1JFUSwgVFJBTlNBQ1RJT05BTF9BVVRIX1JFUSwKICAgICBOT1RJRklDQVRJT05fRklFTERTX01BUCwgS0VZX1NFU1NJT05fQ09ORElUSU9OUywgS0VZX1BST0ZJTEVfQ09ORElUSU9OUywKICAgICBLRVlfUkVRVUVTVF9DT05ESVRJT05TLCBSRVFVRVNUX0NPTkRJVElPTlNfSUQsIENSRUFURURfQllfVVNFUiwgQ1JFQVRFRF9EQVRFLCBNQUtFUl9VU0VSKQpWQUxVRVMKICAgICgnJHtwb2xpY3kuc2VydmljZUlkfScsICR7YWNjZXNzLmNvb2xpbmdQZXJpb2RDaGVja1JlcXVpcmVkID8gMSA6IDB9LAogICAgICcke2FjY2Vzcy50eG5BdXRoUmVxdWlyZWR9JywgJyR7YWNjZXNzLm5vdGlmaWNhdGlvblBhcmFtTWFwLnJlcGxhY2UoLycvZywgIicnIil9JywKICAgICAnJHthY2Nlc3Muc2Vzc2lvbkNvbmRpdGlvbk1hcH0nLCAnJHthY2Nlc3MucHJvZmlsZUNvbmRpdGlvbk1hcH0nLAogICAgICcke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9uc01hcH0nLCBAcmVxdWVzdF9jb25kaXRpb25zX2lkLAogICAgICdTWVNURU0nLCBOT1coKSwgJ1NZU1RFTScpO1xuXG5gOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSAnLS0gJyArICctJy5yZXBlYXQoODApICsgJ1xuXG4nOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY3VycmVudE91dHB1dCA9IHNxbDsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdXRwdXRUeXBlJykudmFsdWUgPSAnc3FsJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdXRwdXRCb3gnKS50ZXh0Q29udGVudCA9IHNxbDsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdFcnJvciBnZW5lcmF0aW5nIFNRTDogJyArIGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBvcGVuTG9hZE1vZGFsKCkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZE1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc29uSW5wdXQnKS52YWx1ZSA9ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNvbklucHV0JykuZm9jdXMoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNsb3NlTG9hZE1vZGFsKCkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZE1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGxvYWRGcm9tVGV4dGFyZWEoKSB7CiAgICAgICAgICAgIGNvbnN0IGpzb25UZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzb25JbnB1dCcpLnZhbHVlLnRyaW0oKTsKCiAgICAgICAgICAgIGlmICghanNvblRleHQpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdQbGVhc2UgcGFzdGUgSlNPTiBjb250ZW50IGZpcnN0LicpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QganNvbiA9IEpTT04ucGFyc2UoanNvblRleHQpOwogICAgICAgICAgICAgICAgcG9wdWxhdGVGb3JtKGpzb24pOwogICAgICAgICAgICAgICAgY2xvc2VMb2FkTW9kYWwoKTsKICAgICAgICAgICAgICAgIGFsZXJ0KCdKU09OIGxvYWRlZCBzdWNjZXNzZnVsbHkhJyk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBhbGVydCgnRXJyb3IgcGFyc2luZyBKU09OOiAnICsgZXJyb3IubWVzc2FnZSArICdcblxuUGxlYXNlIGNoZWNrIHlvdXIgSlNPTiBmb3JtYXQuJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIENsb3NlIG1vZGFsIHdoZW4gY2xpY2tpbmcgb3V0c2lkZQogICAgICAgIHdpbmRvdy5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZE1vZGFsJyk7CiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgPT0gbW9kYWwpIHsKICAgICAgICAgICAgICAgIGNsb3NlTG9hZE1vZGFsKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHBvcHVsYXRlRm9ybShkYXRhKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFubmVsc0NvbnRhaW5lcicpLmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICBjaGFubmVsQ291bnRlciA9IDA7CiAgICAgICAgICAgIHBvbGljeUNvdW50ZXIgPSAwOwogICAgICAgICAgICBhY2Nlc3NDb3VudGVyID0gMDsKICAgICAgICAgICAgbm90aWZpY2F0aW9uQ291bnRlciA9IDA7CgogICAgICAgICAgICBpZiAoZGF0YS5wb2xpY2llc01hcHMgJiYgQXJyYXkuaXNBcnJheShkYXRhLnBvbGljaWVzTWFwcykpIHsKICAgICAgICAgICAgICAgIGRhdGEucG9saWNpZXNNYXBzLmZvckVhY2goY2hhbm5lbERhdGEgPT4gewogICAgICAgICAgICAgICAgICAgIGFkZENoYW5uZWwoKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFubmVsU2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhbm5lbC1zZWN0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhbm5lbFNlY3Rpb24gPSBjaGFubmVsU2VjdGlvbnNbY2hhbm5lbFNlY3Rpb25zLmxlbmd0aCAtIDFdOwoKICAgICAgICAgICAgICAgICAgICBjaGFubmVsU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iY2hhbm5lbElkIl0nKS52YWx1ZSA9IGNoYW5uZWxEYXRhLmNoYW5uZWxJZCB8fCAnJzsKCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9saWNpZXNDb250YWluZXIgPSBjaGFubmVsU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcucG9saWNpZXMtY29udGFpbmVyJyk7CiAgICAgICAgICAgICAgICAgICAgcG9saWNpZXNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7CgogICAgICAgICAgICAgICAgICAgIGlmIChjaGFubmVsRGF0YS5wb2xpY2llcyAmJiBBcnJheS5pc0FycmF5KGNoYW5uZWxEYXRhLnBvbGljaWVzKSkgewogICAgICAgICAgICAgICAgICAgICAgICBjaGFubmVsRGF0YS5wb2xpY2llcy5mb3JFYWNoKHBvbGljeURhdGEgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhbm5lbElkID0gY2hhbm5lbFNlY3Rpb24uaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRQb2xpY3koY2hhbm5lbElkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2xpY3lTZWN0aW9ucyA9IHBvbGljaWVzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb2xpY3ktc2VjdGlvbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9saWN5U2VjdGlvbiA9IHBvbGljeVNlY3Rpb25zW3BvbGljeVNlY3Rpb25zLmxlbmd0aCAtIDFdOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InNlcnZpY2VJZCJdJykudmFsdWUgPSBwb2xpY3lEYXRhLnNlcnZpY2VJZCB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImVuZFBvaW50Il0nKS52YWx1ZSA9IHBvbGljeURhdGEuZW5kUG9pbnQgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJodHRwTWV0aG9kIl0nKS52YWx1ZSA9IHBvbGljeURhdGEuaHR0cE1ldGhvZCB8fCAnUE9TVCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJvdXRFbmRQb2ludCJdJykudmFsdWUgPSBwb2xpY3lEYXRhLm91dEVuZFBvaW50IHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ic2VydmljZURlc2MiXScpLnZhbHVlID0gcG9saWN5RGF0YS5zZXJ2aWNlRGVzYyB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImF1dGhMZXZlbFJlcXVpcmVkIl0nKS52YWx1ZSA9IHBvbGljeURhdGEuYXV0aExldmVsUmVxdWlyZWQgfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InNlc3Npb25WYWxSZXF1aXJlZCJdJykudmFsdWUgPSBwb2xpY3lEYXRhLnNlc3Npb25WYWxSZXF1aXJlZCA/ICd0cnVlJyA6ICdmYWxzZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ3aGl0ZWxpc3RlZCJdJykudmFsdWUgPSBwb2xpY3lEYXRhLndoaXRlbGlzdGVkID8gJ3RydWUnIDogJ2ZhbHNlJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImFsbG93ZWRTY29wZSJdJykudmFsdWUgPSBwb2xpY3lEYXRhLmFsbG93ZWRTY29wZSB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InR4bkF1dGhDb25jZXJucyJdJykudmFsdWUgPSBwb2xpY3lEYXRhLnR4bkF1dGhDb25jZXJucyB8fCAnTic7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgZGVmYXVsdCBub3RpZmljYXRpb24gYW5kIHBvcHVsYXRlIGZyb20gZmlyc3QgYWNjZXNzIHJlY29yZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90aWZpY2F0aW9uc0NvbnRhaW5lciA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignLm5vdGlmaWNhdGlvbnMtY29udGFpbmVyJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25zQ29udGFpbmVyLmlubmVySFRNTCA9ICcnOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2xpY3lEYXRhLmFjY2Vzc2VzICYmIHBvbGljeURhdGEuYWNjZXNzZXMubGVuZ3RoID4gMCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeURhdGEuYWNjZXNzZXNbMF0ubm90aWZpY2F0aW9uRGV0bHMgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KHBvbGljeURhdGEuYWNjZXNzZXNbMF0ubm90aWZpY2F0aW9uRGV0bHMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5RGF0YS5hY2Nlc3Nlc1swXS5ub3RpZmljYXRpb25EZXRscy5mb3JFYWNoKG5vdGlmRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeUlkID0gcG9saWN5U2VjdGlvbi5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90aWZpY2F0aW9uKHBvbGljeUlkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGlmU2VjdGlvbnMgPSBub3RpZmljYXRpb25zQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub3RpZmljYXRpb24tc2VjdGlvbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub3RpZlNlY3Rpb24gPSBub3RpZlNlY3Rpb25zW25vdGlmU2VjdGlvbnMubGVuZ3RoIC0gMV07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZlNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im5vdGlmaWNhdGlvblR5cGUiXScpLnZhbHVlID0gbm90aWZEYXRhLm5vdGlmaWNhdGlvblR5cGUgfHwgJ1NNUyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYXV0aFR5cGUiXScpLnZhbHVlID0gbm90aWZEYXRhLmF1dGhUeXBlIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZlNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InRlbXBsYXRlSWQiXScpLnZhbHVlID0gbm90aWZEYXRhLnRlbXBsYXRlSWQgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0idGVtcGxhdGVQYXJhbXMiXScpLnZhbHVlID0gbm90aWZEYXRhLnRlbXBsYXRlUGFyYW1zIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZlNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImlzTWFuZGF0b3J5Il0nKS52YWx1ZSA9IG5vdGlmRGF0YS5pc01hbmRhdG9yeSB8fCAndHJ1ZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzZXNDb250YWluZXIgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5hY2Nlc3Nlcy1jb250YWluZXInKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc2VzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2xpY3lEYXRhLmFjY2Vzc2VzICYmIEFycmF5LmlzQXJyYXkocG9saWN5RGF0YS5hY2Nlc3NlcykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lEYXRhLmFjY2Vzc2VzLmZvckVhY2goYWNjZXNzRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeUlkID0gcG9saWN5U2VjdGlvbi5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkQWNjZXNzKHBvbGljeUlkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1NlY3Rpb25zID0gYWNjZXNzZXNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmFjY2Vzcy1zZWN0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1NlY3Rpb24gPSBhY2Nlc3NTZWN0aW9uc1thY2Nlc3NTZWN0aW9ucy5sZW5ndGggLSAxXTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImNvb2xpbmdQZXJpb2RDaGVja1JlcXVpcmVkIl0nKS52YWx1ZSA9IGFjY2Vzc0RhdGEuY29vbGluZ1BlcmlvZENoZWNrUmVxdWlyZWQgPyAndHJ1ZScgOiAnZmFsc2UnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ0eG5BdXRoUmVxdWlyZWQiXScpLnZhbHVlID0gYWNjZXNzRGF0YS50eG5BdXRoUmVxdWlyZWQgfHwgJzAnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJub3RpZmljYXRpb25QYXJhbU1hcCJdJykudmFsdWUgPSBhY2Nlc3NEYXRhLm5vdGlmaWNhdGlvblBhcmFtTWFwIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJzZXNzaW9uQ29uZGl0aW9uTWFwIl0nKS52YWx1ZSA9IGFjY2Vzc0RhdGEuc2Vzc2lvbkNvbmRpdGlvbk1hcCB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0icHJvZmlsZUNvbmRpdGlvbk1hcCJdJykudmFsdWUgPSBhY2Nlc3NEYXRhLnByb2ZpbGVDb25kaXRpb25NYXAgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InJlcXVlc3RDb25kaXRpb25zTWFwIl0nKS52YWx1ZSA9IGFjY2Vzc0RhdGEucmVxdWVzdENvbmRpdGlvbnNNYXAgfHwgJyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjZXNzRGF0YS5yZXF1ZXN0Q29uZGl0aW9ucykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmMgPSBhY2Nlc3NEYXRhLnJlcXVlc3RDb25kaXRpb25zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0icmlza0luZGljYXRvciJdJykudmFsdWUgPSByYy5yaXNrSW5kaWNhdG9yIHx8ICcwJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InBvc3RhbENvZGUiXScpLnZhbHVlID0gcmMucG9zdGFsQ29kZSB8fCAnMCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ1cGRhdGVMaW1pdCJdJykudmFsdWUgPSByYy51cGRhdGVMaW1pdCB8fCAnMCc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJjLm1pbkFtdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im1pbkFtdENvZGUiXScpLnZhbHVlID0gcmMubWluQW10LmFtdENvZGUgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibWluQW10Q29kZVZhbHVlIl0nKS52YWx1ZSA9IHJjLm1pbkFtdC5hbXRDb2RlVmFsdWUgfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmMubWF4QW10KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibWF4QW10Q29kZSJdJykudmFsdWUgPSByYy5tYXhBbXQuYW10Q29kZSB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJtYXhBbXRDb2RlVmFsdWUiXScpLnZhbHVlID0gcmMubWF4QW10LmFtdENvZGVWYWx1ZSB8fCAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkb3dubG9hZE91dHB1dCgpIHsKICAgICAgICAgICAgaWYgKCFjdXJyZW50T3V0cHV0KSB7CiAgICAgICAgICAgICAgICBhbGVydCgnUGxlYXNlIGdlbmVyYXRlIEpTT04gb3IgU1FMIG91dHB1dCBmaXJzdC4nKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3Qgb3V0cHV0VHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdXRwdXRUeXBlJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IGZpbGVuYW1lID0gb3V0cHV0VHlwZSA9PT0gJ2pzb24nID8gJ3BvbGljeS1jb25maWcuanNvbicgOiAncG9saWN5LWluc2VydC5zcWwnOwogICAgICAgICAgICBjb25zdCBtaW1lVHlwZSA9IG91dHB1dFR5cGUgPT09ICdqc29uJyA/ICdhcHBsaWNhdGlvbi9qc29uJyA6ICd0ZXh0L3BsYWluJzsKCiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY3VycmVudE91dHB1dF0sIHsgdHlwZTogbWltZVR5cGUgfSk7CiAgICAgICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICAgICAgYS5kb3dubG9hZCA9IGZpbGVuYW1lOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7CiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHsKICAgICAgICAgICAgaWYgKGNvbmZpcm0oJ1Jlc2V0IHRoZSBlbnRpcmUgZm9ybT8nKSkgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYW5uZWxzQ29udGFpbmVyJykuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3V0cHV0Qm94JykudGV4dENvbnRlbnQgPSAnT3V0cHV0IHdpbGwgYXBwZWFyIGhlcmUuLi4nOwogICAgICAgICAgICAgICAgY3VycmVudE91dHB1dCA9ICcnOwogICAgICAgICAgICAgICAgY2hhbm5lbENvdW50ZXIgPSAwOwogICAgICAgICAgICAgICAgcG9saWN5Q291bnRlciA9IDA7CiAgICAgICAgICAgICAgICBhY2Nlc3NDb3VudGVyID0gMDsKICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbkNvdW50ZXIgPSAwOwogICAgICAgICAgICAgICAgYWRkQ2hhbm5lbCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjb3B5T3V0cHV0KCkgewogICAgICAgICAgICBpZiAoIWN1cnJlbnRPdXRwdXQpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdQbGVhc2UgZ2VuZXJhdGUgSlNPTiBvciBTUUwgb3V0cHV0IGZpcnN0LicpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBVc2UgbW9kZXJuIGNsaXBib2FyZCBBUEkKICAgICAgICAgICAgaWYgKG5hdmlnYXRvci5jbGlwYm9hcmQgJiYgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQpIHsKICAgICAgICAgICAgICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGN1cnJlbnRPdXRwdXQpLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gVmlzdWFsIGZlZWRiYWNrCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuID0gZXZlbnQudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsVGV4dCA9IGJ0bi50ZXh0Q29udGVudDsKICAgICAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSAnQ29waWVkISc7CiAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLmJhY2tncm91bmQgPSAnIzRDQUY1MCc7CgogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9IG9yaWdpbmFsVGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLmJhY2tncm91bmQgPSAnJzsKICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdGYWlsZWQgdG8gY29weTogJyArIGVycik7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrIGZvciBvbGRlciBicm93c2VycwogICAgICAgICAgICAgICAgY29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpOwogICAgICAgICAgICAgICAgdGV4dGFyZWEudmFsdWUgPSBjdXJyZW50T3V0cHV0OwogICAgICAgICAgICAgICAgdGV4dGFyZWEuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnOwogICAgICAgICAgICAgICAgdGV4dGFyZWEuc3R5bGUub3BhY2l0eSA9ICcwJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dGFyZWEpOwogICAgICAgICAgICAgICAgdGV4dGFyZWEuc2VsZWN0KCk7CgogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGV2ZW50LnRhcmdldDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbFRleHQgPSBidG4udGV4dENvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gJ0NvcGllZCEnOwogICAgICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5iYWNrZ3JvdW5kID0gJyM0Q0FGNTAnOwoKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSBvcmlnaW5hbFRleHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5iYWNrZ3JvdW5kID0gJyc7CiAgICAgICAgICAgICAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBhbGVydCgnRmFpbGVkIHRvIGNvcHk6ICcgKyBlcnIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGV4dGFyZWEpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjb21wYXJlSlNPTnMoKSB7CiAgICAgICAgICAgIGNvbnN0IGpzb24xVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc29uMScpLnZhbHVlLnRyaW0oKTsKICAgICAgICAgICAgY29uc3QganNvbjJUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzb24yJykudmFsdWUudHJpbSgpOwoKICAgICAgICAgICAgaWYgKCFqc29uMVRleHQgfHwgIWpzb24yVGV4dCkgewogICAgICAgICAgICAgICAgYWxlcnQoJ1BsZWFzZSBwYXN0ZSBKU09OIGNvbnRlbnQgaW4gYm90aCB0ZXh0IGFyZWFzLicpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3Qgb2JqMSA9IEpTT04ucGFyc2UoanNvbjFUZXh0KTsKICAgICAgICAgICAgICAgIGNvbnN0IG9iajIgPSBKU09OLnBhcnNlKGpzb24yVGV4dCk7CgogICAgICAgICAgICAgICAgY29uc3QgZGlmZmVyZW5jZXMgPSBbXTsKICAgICAgICAgICAgICAgIGZpbmREaWZmZXJlbmNlcyhvYmoxLCBvYmoyLCAnJywgZGlmZmVyZW5jZXMpOwoKICAgICAgICAgICAgICAgIGRpc3BsYXlEaWZmZXJlbmNlcyhkaWZmZXJlbmNlcyk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBhbGVydCgnRXJyb3IgcGFyc2luZyBKU09OOiAnICsgZXJyb3IubWVzc2FnZSArICdcblxuUGxlYXNlIGNoZWNrIHlvdXIgSlNPTiBmb3JtYXQuJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGZpbmREaWZmZXJlbmNlcyhvYmoxLCBvYmoyLCBwYXRoLCBkaWZmZXJlbmNlcykgewogICAgICAgICAgICAvLyBDaGVjayBpZiBib3RoIGFyZSBvYmplY3RzCiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqMSA9PT0gJ29iamVjdCcgJiYgb2JqMSAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqMiA9PT0gJ29iamVjdCcgJiYgb2JqMiAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgLy8gR2V0IGFsbCB1bmlxdWUga2V5cyBmcm9tIGJvdGggb2JqZWN0cwogICAgICAgICAgICAgICAgY29uc3Qga2V5czEgPSBPYmplY3Qua2V5cyhvYmoxKTsKICAgICAgICAgICAgICAgIGNvbnN0IGtleXMyID0gT2JqZWN0LmtleXMob2JqMik7CiAgICAgICAgICAgICAgICBjb25zdCBhbGxLZXlzID0gWy4uLm5ldyBTZXQoWy4uLmtleXMxLCAuLi5rZXlzMl0pXTsKCiAgICAgICAgICAgICAgICBhbGxLZXlzLmZvckVhY2goa2V5ID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXRoID0gcGF0aCA/IGAke3BhdGh9LiR7a2V5fWAgOiBrZXk7CgogICAgICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBvYmoxKSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBLZXkgZXhpc3RzIGluIG9iajIgYnV0IG5vdCBpbiBvYmoxCiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2FkZGVkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG5ld1BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkob2JqMltrZXldLCBudWxsLCAyKQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCEoa2V5IGluIG9iajIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtleSBleGlzdHMgaW4gb2JqMSBidXQgbm90IGluIG9iajIKICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmVyZW5jZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVtb3ZlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBuZXdQYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KG9iajFba2V5XSwgbnVsbCwgMikKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2V5IGV4aXN0cyBpbiBib3RoLCBjb21wYXJlIHZhbHVlcyByZWN1cnNpdmVseQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmoxW2tleV0pICYmIEFycmF5LmlzQXJyYXkob2JqMltrZXldKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGFyZSBhcnJheXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeShvYmoxW2tleV0pICE9PSBKU09OLnN0cmluZ2lmeShvYmoyW2tleV0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFyZUFycmF5cyhvYmoxW2tleV0sIG9iajJba2V5XSwgbmV3UGF0aCwgZGlmZmVyZW5jZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvYmoxW2tleV0gPT09ICdvYmplY3QnICYmIG9iajFba2V5XSAhPT0gbnVsbCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBvYmoyW2tleV0gPT09ICdvYmplY3QnICYmIG9iajJba2V5XSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5kRGlmZmVyZW5jZXMob2JqMVtrZXldLCBvYmoyW2tleV0sIG5ld1BhdGgsIGRpZmZlcmVuY2VzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvYmoxW2tleV0gIT09IG9iajJba2V5XSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmFsdWVzIGFyZSBkaWZmZXJlbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtb2RpZmllZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogbmV3UGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZTogSlNPTi5zdHJpbmdpZnkob2JqMVtrZXldLCBudWxsLCAyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZTogSlNPTi5zdHJpbmdpZnkob2JqMltrZXldLCBudWxsLCAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChvYmoxICE9PSBvYmoyKSB7CiAgICAgICAgICAgICAgICAvLyBTaW1wbGUgdmFsdWUgY29tcGFyaXNvbgogICAgICAgICAgICAgICAgZGlmZmVyZW5jZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21vZGlmaWVkJywKICAgICAgICAgICAgICAgICAgICBwYXRoOiBwYXRoIHx8ICcocm9vdCknLAogICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlOiBKU09OLnN0cmluZ2lmeShvYmoxLCBudWxsLCAyKSwKICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZTogSlNPTi5zdHJpbmdpZnkob2JqMiwgbnVsbCwgMikKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjb21wYXJlQXJyYXlzKGFycjEsIGFycjIsIHBhdGgsIGRpZmZlcmVuY2VzKSB7CiAgICAgICAgICAgIGNvbnN0IG1heExlbiA9IE1hdGgubWF4KGFycjEubGVuZ3RoLCBhcnIyLmxlbmd0aCk7CgogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heExlbjsgaSsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXRoID0gYCR7cGF0aH1bJHtpfV1gOwoKICAgICAgICAgICAgICAgIGlmIChpID49IGFycjEubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gRWxlbWVudCBleGlzdHMgaW4gYXJyMiBidXQgbm90IGluIGFycjEKICAgICAgICAgICAgICAgICAgICBkaWZmZXJlbmNlcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2FkZGVkJywKICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogbmV3UGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KGFycjJbaV0sIG51bGwsIDIpCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPj0gYXJyMi5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAvLyBFbGVtZW50IGV4aXN0cyBpbiBhcnIxIGJ1dCBub3QgaW4gYXJyMgogICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVtb3ZlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG5ld1BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBKU09OLnN0cmluZ2lmeShhcnIxW2ldLCBudWxsLCAyKQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBFbGVtZW50IGV4aXN0cyBpbiBib3RoIGFycmF5cwogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJyMVtpXSA9PT0gJ29iamVjdCcgJiYgYXJyMVtpXSAhPT0gbnVsbCAmJgogICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgYXJyMltpXSA9PT0gJ29iamVjdCcgJiYgYXJyMltpXSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICBmaW5kRGlmZmVyZW5jZXMoYXJyMVtpXSwgYXJyMltpXSwgbmV3UGF0aCwgZGlmZmVyZW5jZXMpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoSlNPTi5zdHJpbmdpZnkoYXJyMVtpXSkgIT09IEpTT04uc3RyaW5naWZ5KGFycjJbaV0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21vZGlmaWVkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG5ld1BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZTogSlNPTi5zdHJpbmdpZnkoYXJyMVtpXSwgbnVsbCwgMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZTogSlNPTi5zdHJpbmdpZnkoYXJyMltpXSwgbnVsbCwgMikKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkaXNwbGF5RGlmZmVyZW5jZXMoZGlmZmVyZW5jZXMpIHsKICAgICAgICAgICAgY29uc3QgZGlmZlJlc3VsdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlmZlJlc3VsdHMnKTsKICAgICAgICAgICAgY29uc3QgZGlmZkNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlmZkNvbnRlbnQnKTsKCiAgICAgICAgICAgIGlmIChkaWZmZXJlbmNlcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIGRpZmZDb250ZW50LmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJkaWZmLWl0ZW0iIHN0eWxlPSJiYWNrZ3JvdW5kOiAjZDRlZGRhOyBib3JkZXItbGVmdDogNHB4IHNvbGlkICMyOGE3NDU7Ij48c3Ryb25nPk5vIGRpZmZlcmVuY2VzIGZvdW5kITwvc3Ryb25nPiBCb3RoIEpTT05zIGFyZSBpZGVudGljYWwuPC9kaXY+JzsKICAgICAgICAgICAgICAgIGRpZmZSZXN1bHRzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgaHRtbCA9ICcnOwogICAgICAgICAgICBkaWZmZXJlbmNlcy5mb3JFYWNoKGRpZmYgPT4gewogICAgICAgICAgICAgICAgaWYgKGRpZmYudHlwZSA9PT0gJ2FkZGVkJykgewogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaWZmLWl0ZW0gZGlmZi1hZGRlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaWZmLXBhdGgiPisgQWRkZWQ6ICR7ZGlmZi5wYXRofTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGlmZi12YWx1ZSI+JHtlc2NhcGVIdG1sKGRpZmYudmFsdWUpfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkaWZmLnR5cGUgPT09ICdyZW1vdmVkJykgewogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaWZmLWl0ZW0gZGlmZi1yZW1vdmVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpZmYtcGF0aCI+LSBSZW1vdmVkOiAke2RpZmYucGF0aH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpZmYtdmFsdWUiPiR7ZXNjYXBlSHRtbChkaWZmLnZhbHVlKX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlmZi50eXBlID09PSAnbW9kaWZpZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpZmYtaXRlbSBkaWZmLW1vZGlmaWVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpZmYtcGF0aCI+fiBNb2RpZmllZDogJHtkaWZmLnBhdGh9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaWZmLXZhbHVlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPk9sZDo8L3N0cm9uZz4gJHtlc2NhcGVIdG1sKGRpZmYub2xkVmFsdWUpfTxicj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPk5ldzo8L3N0cm9uZz4gJHtlc2NhcGVIdG1sKGRpZmYubmV3VmFsdWUpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgZGlmZkNvbnRlbnQuaW5uZXJIVE1MID0gaHRtbDsKICAgICAgICAgICAgZGlmZlJlc3VsdHMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBlc2NhcGVIdG1sKHRleHQpIHsKICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGRpdi50ZXh0Q29udGVudCA9IHRleHQ7CiAgICAgICAgICAgIHJldHVybiBkaXYuaW5uZXJIVE1MOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xlYXJDb21wYXJpc29uKCkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNvbjEnKS52YWx1ZSA9ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNvbjInKS52YWx1ZSA9ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlmZlJlc3VsdHMnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlmZkNvbnRlbnQnKS5pbm5lckhUTUwgPSAnJzsKICAgICAgICB9CiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+Cg==
