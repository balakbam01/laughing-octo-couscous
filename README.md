Test8

PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+UG9saWN5IENvbmZpZ3VyYXRpb24gTWFuYWdlcjwvdGl0bGU+CiAgICA8c3R5bGU+CiAgICAgICAgKiB7CiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICB9CgogICAgICAgIGJvZHkgewogICAgICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmNWY1ZjU7CiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICB9CgogICAgICAgIC5jb250YWluZXIgewogICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDFweCA0cHggcmdiYSgwLDAsMCwwLjEpOwogICAgICAgICAgICBwYWRkaW5nOiAxMnB4OwogICAgICAgIH0KCiAgICAgICAgaDEgewogICAgICAgICAgICBjb2xvcjogIzMzMzsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4OwogICAgICAgICAgICBmb250LXNpemU6IDE4cHg7CiAgICAgICAgfQoKICAgICAgICBoMiB7CiAgICAgICAgICAgIGNvbG9yOiAjNTU1OwogICAgICAgICAgICBtYXJnaW46IDhweCAwIDZweCAwOwogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjNENBRjUwOwogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogM3B4OwogICAgICAgIH0KCiAgICAgICAgaDMgewogICAgICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgICAgICAgbWFyZ2luOiA2cHggMCA0cHggMDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgICAgICBmb250LXdlaWdodDogNjAwOwogICAgICAgIH0KCiAgICAgICAgLmhlYWRlciB7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICAgICAgfQoKICAgICAgICAuYWN0aW9ucyB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGdhcDogNnB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4OwogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7CiAgICAgICAgfQoKICAgICAgICBidXR0b24gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjNENBRjUwOwogICAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgcGFkZGluZzogNnB4IDEycHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICBmb250LXNpemU6IDExcHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgICAgfQoKICAgICAgICBidXR0b246aG92ZXIgewogICAgICAgICAgICBvcGFjaXR5OiAwLjk7CiAgICAgICAgfQoKICAgICAgICBidXR0b24uc2Vjb25kYXJ5IHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzIxOTZGMzsKICAgICAgICB9CgogICAgICAgIGJ1dHRvbi5kYW5nZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjQ0MzM2OwogICAgICAgIH0KCiAgICAgICAgYnV0dG9uLnNtYWxsIHsKICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4OwogICAgICAgIH0KCiAgICAgICAgLmZvcm0tZ3JvdXAgewogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7CiAgICAgICAgfQoKICAgICAgICBsYWJlbCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAycHg7CiAgICAgICAgICAgIGNvbG9yOiAjNTU1OwogICAgICAgICAgICBmb250LXdlaWdodDogNTAwOwogICAgICAgICAgICBmb250LXNpemU6IDExcHg7CiAgICAgICAgfQoKICAgICAgICBsYWJlbC5yZXF1aXJlZDo6YWZ0ZXIgewogICAgICAgICAgICBjb250ZW50OiAiICoiOwogICAgICAgICAgICBjb2xvcjogcmVkOwogICAgICAgIH0KCiAgICAgICAgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEgewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgcGFkZGluZzogNHB4IDZweDsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgICAgICAgICBmb250LXNpemU6IDExcHg7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgICAgICAgICAgY29sb3I6ICMzMzM7CiAgICAgICAgfQoKICAgICAgICBzZWxlY3QgewogICAgICAgICAgICBhcHBlYXJhbmNlOiBub25lOwogICAgICAgICAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7CiAgICAgICAgICAgIC1tb3otYXBwZWFyYW5jZTogbm9uZTsKICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD1VVEYtOCwlM2NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMjQgMjQnIGZpbGw9J25vbmUnIHN0cm9rZT0nY3VycmVudENvbG9yJyBzdHJva2Utd2lkdGg9JzInIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCclM2UlM2Nwb2x5bGluZSBwb2ludHM9JzYgOSAxMiAxNSAxOCA5JyUzZSUzYy9wb2x5bGluZSUzZSUzYy9zdmclM2UiKTsKICAgICAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICAgICAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogcmlnaHQgNHB4IGNlbnRlcjsKICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiAxNnB4OwogICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAyNHB4OwogICAgICAgIH0KCiAgICAgICAgaW5wdXQ6Zm9jdXMsIHNlbGVjdDpmb2N1cywgdGV4dGFyZWE6Zm9jdXMgewogICAgICAgICAgICBvdXRsaW5lOiBub25lOwogICAgICAgICAgICBib3JkZXItY29sb3I6ICM0Q0FGNTA7CiAgICAgICAgfQoKICAgICAgICB0ZXh0YXJlYSB7CiAgICAgICAgICAgIHJlc2l6ZTogdmVydGljYWw7CiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDQwcHg7CiAgICAgICAgfQoKICAgICAgICAuY2hhbm5lbC1zZWN0aW9uIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2Y5ZjlmOTsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2UwZTBlMDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgICBwYWRkaW5nOiA4cHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDsKICAgICAgICB9CgogICAgICAgIC5wb2xpY3ktc2VjdGlvbiB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDZweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4OwogICAgICAgIH0KCiAgICAgICAgLnBvbGljeS1jb250ZW50IHsKICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgfQoKICAgICAgICAucG9saWN5LWNvbnRlbnQuY29sbGFwc2VkIHsKICAgICAgICAgICAgZGlzcGxheTogbm9uZTsKICAgICAgICB9CgogICAgICAgIC50b2dnbGUtYnRuIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzIxOTZGMzsKICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4OwogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDRweDsKICAgICAgICB9CgogICAgICAgIC50b2dnbGUtYnRuOmhvdmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzE5NzZEMjsKICAgICAgICB9CgogICAgICAgIC5hY2Nlc3Mtc2VjdGlvbiB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmYWZhZmE7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlOGU4ZTg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgcGFkZGluZzogNnB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7CiAgICAgICAgfQoKICAgICAgICAubm90aWZpY2F0aW9uLXNlY3Rpb24gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZTBlMGUwOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDRweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4OwogICAgICAgIH0KCiAgICAgICAgLmdyaWQtMiB7CiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7CiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsKICAgICAgICAgICAgZ2FwOiA2cHg7CiAgICAgICAgfQoKICAgICAgICAuZ3JpZC0zIHsKICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsKICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyIDFmcjsKICAgICAgICAgICAgZ2FwOiA2cHg7CiAgICAgICAgfQoKICAgICAgICAuZ3JpZC00IHsKICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsKICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyIDFmciAxZnI7CiAgICAgICAgICAgIGdhcDogNnB4OwogICAgICAgIH0KCiAgICAgICAgLmdyaWQtNSB7CiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7CiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDUsIDFmcik7CiAgICAgICAgICAgIGdhcDogNnB4OwogICAgICAgIH0KCiAgICAgICAgLmJ0bi1ncm91cCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGdhcDogNnB4OwogICAgICAgICAgICBtYXJnaW4tdG9wOiA2cHg7CiAgICAgICAgfQoKICAgICAgICAub3V0cHV0LWFyZWEgewogICAgICAgICAgICBtYXJnaW4tdG9wOiAxMnB4OwogICAgICAgICAgICBib3JkZXItdG9wOiAycHggc29saWQgI2VlZTsKICAgICAgICAgICAgcGFkZGluZy10b3A6IDEycHg7CiAgICAgICAgfQoKICAgICAgICAub3V0cHV0LWJveCB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmNGY0ZjQ7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgcGFkZGluZzogOHB4OwogICAgICAgICAgICBmb250LWZhbWlseTogJ0NvdXJpZXIgTmV3JywgbW9ub3NwYWNlOwogICAgICAgICAgICBmb250LXNpemU6IDEwcHg7CiAgICAgICAgICAgIG1heC1oZWlnaHQ6IDI1MHB4OwogICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvOwogICAgICAgICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7CiAgICAgICAgICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDsKICAgICAgICB9CgogICAgICAgIC5maWxlLWlucHV0LXdyYXBwZXIgewogICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICB9CgogICAgICAgIC5maWxlLWlucHV0LXdyYXBwZXIgaW5wdXRbdHlwZT1maWxlXSB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgbGVmdDogLTk5OTlweDsKICAgICAgICB9CgogICAgICAgIC5zZWN0aW9uLWhlYWRlciB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4OwogICAgICAgIH0KCiAgICAgICAgLmJhZGdlIHsKICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMjE5NkYzOwogICAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgICAgIHBhZGRpbmc6IDJweCA2cHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4OwogICAgICAgICAgICBtYXJnaW4tbGVmdDogNHB4OwogICAgICAgIH0KCiAgICAgICAgLmFsZXJ0IHsKICAgICAgICAgICAgcGFkZGluZzogNnB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4OwogICAgICAgIH0KCiAgICAgICAgLmFsZXJ0LWluZm8gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZDFlY2YxOwogICAgICAgICAgICBjb2xvcjogIzBjNTQ2MDsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2JlZTVlYjsKICAgICAgICB9CgogICAgICAgIC5tb2RhbCB7CiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgei1pbmRleDogMTAwMDsKICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICAgICAgdG9wOiAwOwogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDAuNSk7CiAgICAgICAgfQoKICAgICAgICAubW9kYWwtY29udGVudCB7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogICAgICAgICAgICBtYXJnaW46IDUwcHggYXV0bzsKICAgICAgICAgICAgcGFkZGluZzogMjBweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4OwogICAgICAgICAgICB3aWR0aDogODAlOwogICAgICAgICAgICBtYXgtd2lkdGg6IDgwMHB4OwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAyMHB4IHJnYmEoMCwwLDAsMC4zKTsKICAgICAgICB9CgogICAgICAgIC5tb2RhbC1oZWFkZXIgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICAgICAgfQoKICAgICAgICAubW9kYWwtaGVhZGVyIGgyIHsKICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgfQoKICAgICAgICAuY2xvc2UgewogICAgICAgICAgICBjb2xvcjogI2FhYTsKICAgICAgICAgICAgZm9udC1zaXplOiAyOHB4OwogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICBsaW5lLWhlaWdodDogMjBweDsKICAgICAgICB9CgogICAgICAgIC5jbG9zZTpob3ZlciB7CiAgICAgICAgICAgIGNvbG9yOiAjMDAwOwogICAgICAgIH0KCiAgICAgICAgI2pzb25JbnB1dCB7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBtaW4taGVpZ2h0OiAzMDBweDsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsKICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgICAgICBwYWRkaW5nOiAxMHB4OwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgfQoKICAgICAgICAudGFicyB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGdhcDogNHB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4OwogICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgI2UwZTBlMDsKICAgICAgICB9CgogICAgICAgIC50YWIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjBmMGYwOwogICAgICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICBwYWRkaW5nOiA4cHggMjBweDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICBmb250LXNpemU6IDEzcHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweCA0cHggMCAwOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuM3M7CiAgICAgICAgfQoKICAgICAgICAudGFiOmhvdmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2UwZTBlMDsKICAgICAgICB9CgogICAgICAgIC50YWIuYWN0aXZlIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzRDQUY1MDsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgIH0KCiAgICAgICAgLnRhYi1jb250ZW50IHsKICAgICAgICAgICAgZGlzcGxheTogbm9uZTsKICAgICAgICB9CgogICAgICAgIC50YWItY29udGVudC5hY3RpdmUgewogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgICB9CgogICAgICAgIC5jb21wYXJlLWNvbnRhaW5lciB7CiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7CiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsKICAgICAgICAgICAgZ2FwOiAxMnB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4OwogICAgICAgIH0KCiAgICAgICAgLmNvbXBhcmUtcGFuZWwgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICAgIH0KCiAgICAgICAgLmNvbXBhcmUtcGFuZWwgaDMgewogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7CiAgICAgICAgfQoKICAgICAgICAuY29tcGFyZS10ZXh0YXJlYSB7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBtaW4taGVpZ2h0OiA0MDBweDsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsKICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4OwogICAgICAgICAgICBwYWRkaW5nOiA4cHg7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICAgICAgcmVzaXplOiB2ZXJ0aWNhbDsKICAgICAgICB9CgogICAgICAgIC5kaWZmLXJlc3VsdHMgewogICAgICAgICAgICBtYXJnaW4tdG9wOiAxMnB4OwogICAgICAgICAgICBwYWRkaW5nOiAxMnB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjlmOWY5OwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgICAgIG1heC1oZWlnaHQ6IDUwMHB4OwogICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvOwogICAgICAgIH0KCiAgICAgICAgLmRpZmYtaXRlbSB7CiAgICAgICAgICAgIHBhZGRpbmc6IDhweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDsKICAgICAgICB9CgogICAgICAgIC5kaWZmLWFkZGVkIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2Q0ZWRkYTsKICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjMjhhNzQ1OwogICAgICAgIH0KCiAgICAgICAgLmRpZmYtcmVtb3ZlZCB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmOGQ3ZGE7CiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiA0cHggc29saWQgI2RjMzU0NTsKICAgICAgICB9CgogICAgICAgIC5kaWZmLW1vZGlmaWVkIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZjNjZDsKICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjZmZjMTA3OwogICAgICAgIH0KCiAgICAgICAgLmRpZmYtcGF0aCB7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICAgICAgICAgIGNvbG9yOiAjMzMzOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7CiAgICAgICAgfQoKICAgICAgICAuZGlmZi12YWx1ZSB7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnQ291cmllciBOZXcnLCBtb25vc3BhY2U7CiAgICAgICAgICAgIGNvbG9yOiAjNjY2OwogICAgICAgIH0KCiAgICAgICAgLmluZm8taWNvbiB7CiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAgICAgd2lkdGg6IDEycHg7CiAgICAgICAgICAgIGhlaWdodDogMTJweDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEycHg7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgICAgICAgICAgIGNvbG9yOiAjMjE5NkYzOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjMjE5NkYzOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogOHB4OwogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICAgICAgY3Vyc29yOiBoZWxwOwogICAgICAgICAgICBtYXJnaW4tbGVmdDogM3B4OwogICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogICAgICAgIH0KCiAgICAgICAgLmluZm8taWNvbjpob3ZlciB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMyMTk2RjM7CiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgICB9CgogICAgICAgIC5leHBhbmQtaWNvbiB7CiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAgICAgd2lkdGg6IDE2cHg7CiAgICAgICAgICAgIGhlaWdodDogMTZweDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDE2cHg7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzRDQUY1MDsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDRweDsKICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTsKICAgICAgICB9CgogICAgICAgIC5leHBhbmQtaWNvbjpob3ZlciB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICM0NWEwNDk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xKTsKICAgICAgICB9CgogICAgICAgIC5pbnB1dC13aXRoLWV4cGFuZCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGdhcDogNHB4OwogICAgICAgIH0KCiAgICAgICAgLmlucHV0LXdpdGgtZXhwYW5kIGlucHV0IHsKICAgICAgICAgICAgZmxleDogMTsKICAgICAgICB9CgogICAgICAgIC5leHBhbmQtbW9kYWwgewogICAgICAgICAgICBkaXNwbGF5OiBub25lOwogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHotaW5kZXg6IDEwMDI7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHRvcDogMDsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwwLjUpOwogICAgICAgIH0KCiAgICAgICAgLmV4cGFuZC1tb2RhbC1jb250ZW50IHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgICAgICAgICAgIG1hcmdpbjogODBweCBhdXRvOwogICAgICAgICAgICBwYWRkaW5nOiAyMHB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICAgICAgICAgIHdpZHRoOiA5MCU7CiAgICAgICAgICAgIG1heC13aWR0aDogODAwcHg7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDIwcHggcmdiYSgwLDAsMCwwLjMpOwogICAgICAgIH0KCiAgICAgICAgLmV4cGFuZC1tb2RhbC1oZWFkZXIgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4OwogICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzRDQUY1MDsKICAgICAgICB9CgogICAgICAgIC5leHBhbmQtbW9kYWwtaGVhZGVyIGgzIHsKICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICBjb2xvcjogIzMzMzsKICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgIH0KCiAgICAgICAgLmV4cGFuZC10ZXh0YXJlYSB7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBtaW4taGVpZ2h0OiAzMDBweDsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsKICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgICAgICBwYWRkaW5nOiAxMHB4OwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgICAgIHJlc2l6ZTogdmVydGljYWw7CiAgICAgICAgfQoKICAgICAgICAuZXhwYW5kLXRleHRhcmVhOmZvY3VzIHsKICAgICAgICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjNENBRjUwOwogICAgICAgIH0KCiAgICAgICAgLmluZm8tbW9kYWwgewogICAgICAgICAgICBkaXNwbGF5OiBub25lOwogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHotaW5kZXg6IDEwMDE7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHRvcDogMDsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwwLjUpOwogICAgICAgIH0KCiAgICAgICAgLmluZm8tbW9kYWwtY29udGVudCB7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogICAgICAgICAgICBtYXJnaW46IDEwMHB4IGF1dG87CiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgICAgICAgICAgd2lkdGg6IDkwJTsKICAgICAgICAgICAgbWF4LXdpZHRoOiA2MDBweDsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMjBweCByZ2JhKDAsMCwwLDAuMyk7CiAgICAgICAgfQoKICAgICAgICAuaW5mby1tb2RhbC1oZWFkZXIgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4OwogICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzRDQUY1MDsKICAgICAgICB9CgogICAgICAgIC5pbmZvLW1vZGFsLWhlYWRlciBoMyB7CiAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgY29sb3I6ICMzMzM7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICB9CgogICAgICAgIC5pbmZvLW1vZGFsLWJvZHkgewogICAgICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjsKICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4OwogICAgICAgIH0KCiAgICAgICAgLmluZm8tbW9kYWwtYm9keSBzdHJvbmcgewogICAgICAgICAgICBjb2xvcjogIzMzMzsKICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDsKICAgICAgICB9CgogICAgICAgIC5pbmZvLW1vZGFsLWJvZHkgY29kZSB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmNGY0ZjQ7CiAgICAgICAgICAgIHBhZGRpbmc6IDJweCA2cHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsKICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgIH0KCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDEyMDBweCkgewogICAgICAgICAgICAuZ3JpZC00LCAuZ3JpZC01IHsKICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7CiAgICAgICAgICAgIC5ncmlkLTIsIC5ncmlkLTMsIC5ncmlkLTQsIC5ncmlkLTUgewogICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiAxMDI0cHgpIHsKICAgICAgICAgICAgI2V4dHJhY3RvclRhYiA+IGRpdltzdHlsZSo9ImdyaWQtdGVtcGxhdGUtY29sdW1ucyJdIHsKICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyICFpbXBvcnRhbnQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGRpdiBjbGFzcz0iY29udGFpbmVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXIiPgogICAgICAgICAgICA8aDE+UG9saWN5IENvbmZpZyBNYW5hZ2VyPC9oMT4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBUYWJzIC0tPgogICAgICAgIDxkaXYgY2xhc3M9InRhYnMiPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJ0YWIgYWN0aXZlIiBvbmNsaWNrPSJzd2l0Y2hUYWIoJ2VkaXRvcicpIj5FZGl0b3I8L2J1dHRvbj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0idGFiIiBvbmNsaWNrPSJzd2l0Y2hUYWIoJ2NvbXBhcmUnKSI+Q29tcGFyZSBKU09OPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InRhYiIgb25jbGljaz0ic3dpdGNoVGFiKCdleHRyYWN0b3InKSI+SlNPTiBFeHRyYWN0b3I8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBFZGl0b3IgVGFiIC0tPgogICAgICAgIDxkaXYgaWQ9ImVkaXRvclRhYiIgY2xhc3M9InRhYi1jb250ZW50IGFjdGl2ZSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbnMiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJvcGVuTG9hZE1vZGFsKCkiPkxvYWQgSlNPTjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJnZW5lcmF0ZUpTT04oKSI+R2VuIEpTT048L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNlY29uZGFyeSIgb25jbGljaz0iZ2VuZXJhdGVTUUwoKSI+R2VuIFNRTDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJkb3dubG9hZE91dHB1dCgpIj5Eb3dubG9hZDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJjb2xsYXBzZUFsbFBvbGljaWVzKCkiPkNvbGxhcHNlIEFsbDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJleHBhbmRBbGxQb2xpY2llcygpIj5FeHBhbmQgQWxsPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJkYW5nZXIiIG9uY2xpY2s9InJlc2V0Rm9ybSgpIj5SZXNldDwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBMb2FkIEpTT04gTW9kYWwgLS0+CiAgICAgICAgPGRpdiBpZD0ibG9hZE1vZGFsIiBjbGFzcz0ibW9kYWwiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1jb250ZW50Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWhlYWRlciI+CiAgICAgICAgICAgICAgICAgICAgPGgyPkxvYWQgSlNPTjwvaDI+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImNsb3NlIiBvbmNsaWNrPSJjbG9zZUxvYWRNb2RhbCgpIj4mdGltZXM7PC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJjb2xvcjogIzY2NjsgbWFyZ2luLWJvdHRvbTogMTBweDsiPlBhc3RlIHlvdXIgSlNPTiBjb250ZW50IGJlbG93OjwvcD4KICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9Impzb25JbnB1dCIgcGxhY2Vob2xkZXI9J1Bhc3RlIEpTT04gaGVyZSwgZS5nLiwgeyJwb2xpY2llc01hcHMiOiBbLi4uXX0nPjwvdGV4dGFyZWE+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYnRuLWdyb3VwIiBzdHlsZT0ibWFyZ2luLXRvcDogMTBweDsiPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImxvYWRGcm9tVGV4dGFyZWEoKSI+TG9hZDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJzZWNvbmRhcnkiIG9uY2xpY2s9ImNsb3NlTG9hZE1vZGFsKCkiPkNhbmNlbDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8IS0tIEluZm8gTW9kYWwgLS0+CiAgICAgICAgPGRpdiBpZD0iaW5mb01vZGFsIiBjbGFzcz0iaW5mby1tb2RhbCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImluZm8tbW9kYWwtY29udGVudCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbmZvLW1vZGFsLWhlYWRlciI+CiAgICAgICAgICAgICAgICAgICAgPGgzIGlkPSJpbmZvVGl0bGUiPkZpZWxkIEluZm9ybWF0aW9uPC9oMz4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iY2xvc2UiIG9uY2xpY2s9ImNsb3NlSW5mb01vZGFsKCkiPiZ0aW1lczs8L3NwYW4+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImluZm8tbW9kYWwtYm9keSIgaWQ9ImluZm9Cb2R5Ij4KICAgICAgICAgICAgICAgICAgICA8IS0tIER5bmFtaWMgY29udGVudCB3aWxsIGJlIGluc2VydGVkIGhlcmUgLS0+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDwhLS0gRXhwYW5kIE1vZGFsIC0tPgogICAgICAgIDxkaXYgaWQ9ImV4cGFuZE1vZGFsIiBjbGFzcz0iZXhwYW5kLW1vZGFsIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZXhwYW5kLW1vZGFsLWNvbnRlbnQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZXhwYW5kLW1vZGFsLWhlYWRlciI+CiAgICAgICAgICAgICAgICAgICAgPGgzIGlkPSJleHBhbmRUaXRsZSI+RWRpdCBGaWVsZDwvaDM+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImNsb3NlIiBvbmNsaWNrPSJjbG9zZUV4cGFuZE1vZGFsKCkiPiZ0aW1lczs8L3NwYW4+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJleHBhbmRUZXh0YXJlYSIgY2xhc3M9ImV4cGFuZC10ZXh0YXJlYSIgcGxhY2Vob2xkZXI9IkVudGVyIHlvdXIgdmFsdWUgaGVyZS4uLiI+PC90ZXh0YXJlYT4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJidG4tZ3JvdXAiIHN0eWxlPSJtYXJnaW4tdG9wOiAxMHB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ic2F2ZUV4cGFuZGVkVmFsdWUoKSI+U2F2ZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJzZWNvbmRhcnkiIG9uY2xpY2s9ImNsb3NlRXhwYW5kTW9kYWwoKSI+Q2FuY2VsPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxmb3JtIGlkPSJwb2xpY3lGb3JtIj4KICAgICAgICAgICAgPGRpdiBpZD0iY2hhbm5lbHNDb250YWluZXIiPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJidG4tZ3JvdXAiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImFkZENoYW5uZWwoKSI+KyBBZGQgQ2hhbm5lbDwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Zvcm0+CgogICAgICAgIDxkaXYgY2xhc3M9Im91dHB1dC1hcmVhIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1oZWFkZXIiPgogICAgICAgICAgICAgICAgPGgyPk91dHB1dDwvaDI+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBnYXA6IDZweDsiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNlY29uZGFyeSBzbWFsbCIgb25jbGljaz0iY29weU91dHB1dCgpIiB0aXRsZT0iQ29weSB0byBjbGlwYm9hcmQiPkNvcHk8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJvdXRwdXRUeXBlIiBzdHlsZT0id2lkdGg6IGF1dG87IGRpc3BsYXk6IGlubGluZS1ibG9jazsgbWFyZ2luLXJpZ2h0OiA2cHg7Ij4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJqc29uIj5KU09OPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ic3FsIj5TUUw8L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ib3V0cHV0LWJveCIgaWQ9Im91dHB1dEJveCI+T3V0cHV0IHdpbGwgYXBwZWFyIGhlcmUuLi48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBDb21wYXJlIFRhYiAtLT4KICAgICAgICA8ZGl2IGlkPSJjb21wYXJlVGFiIiBjbGFzcz0idGFiLWNvbnRlbnQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb21wYXJlLWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb21wYXJlLXBhbmVsIj4KICAgICAgICAgICAgICAgICAgICA8aDM+SlNPTiAxIChMZWZ0KTwvaDM+CiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJqc29uMSIgY2xhc3M9ImNvbXBhcmUtdGV4dGFyZWEiIHBsYWNlaG9sZGVyPSdQYXN0ZSBmaXJzdCBKU09OIGhlcmUuLi4nPjwvdGV4dGFyZWE+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbXBhcmUtcGFuZWwiPgogICAgICAgICAgICAgICAgICAgIDxoMz5KU09OIDIgKFJpZ2h0KTwvaDM+CiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJqc29uMiIgY2xhc3M9ImNvbXBhcmUtdGV4dGFyZWEiIHBsYWNlaG9sZGVyPSdQYXN0ZSBzZWNvbmQgSlNPTiBoZXJlLi4uJz48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWN0aW9ucyI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImNvbXBhcmVKU09OcygpIj5Db21wYXJlPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJzZWNvbmRhcnkiIG9uY2xpY2s9ImNsZWFyQ29tcGFyaXNvbigpIj5DbGVhcjwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgaWQ9ImRpZmZSZXN1bHRzIiBjbGFzcz0iZGlmZi1yZXN1bHRzIiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPgogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxMHB4OyI+RGlmZmVyZW5jZXM6PC9oMz4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImRpZmZDb250ZW50Ij48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDwhLS0gSlNPTiBFeHRyYWN0b3IgVGFiIC0tPgogICAgICAgIDxkaXYgaWQ9ImV4dHJhY3RvclRhYiIgY2xhc3M9InRhYi1jb250ZW50IiBzdHlsZT0ib3ZlcmZsb3cteDogaGlkZGVuOyI+CiAgICAgICAgICAgIDxoMj5KU09OIEV4dHJhY3RvciAtIFNlYXJjaCBQb2xpY3kgYnkgRW5kcG9pbnQ8L2gyPgoKICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMTZweDsgZGlzcGxheTogZmxleDsgZ2FwOiA4cHg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGZsZXgtd3JhcDogd3JhcDsiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJzZWFyY2hFbmRwb2ludCIgcGxhY2Vob2xkZXI9IkVudGVyIGVuZHBvaW50Omh0dHBNZXRob2QgKGUuZy4sIC9hcGkvdHJhbnNmZXI6UE9TVCkiIHN0eWxlPSJmbGV4OiAxOyBtaW4td2lkdGg6IDIwMHB4OyBwYWRkaW5nOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6IDNweDsgYm94LXNpemluZzogYm9yZGVyLWJveDsiIG9ua2V5cHJlc3M9ImlmKGV2ZW50LmtleT09PSdFbnRlcicpIHNlYXJjaFBvbGljaWVzKCkiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJzZWFyY2hQb2xpY2llcygpIiBzdHlsZT0icGFkZGluZzogOHB4IDE2cHg7IHdoaXRlLXNwYWNlOiBub3dyYXA7Ij5TZWFyY2g8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iY29tcGFyZUV4dHJhY3RlZFBvbGljaWVzKCkiIHN0eWxlPSJwYWRkaW5nOiA4cHggMTZweDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsiPkNvbXBhcmUgU2VsZWN0ZWQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNlY29uZGFyeSIgb25jbGljaz0iY2xlYXJFeHRyYWN0b3IoKSIgc3R5bGU9IndoaXRlLXNwYWNlOiBub3dyYXA7Ij5DbGVhciBBbGw8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgzLCBtaW5tYXgoMCwgMWZyKSk7IGdhcDogMTJweDsiPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWluLXdpZHRoOiAwOyI+CiAgICAgICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW4tYm90dG9tOiA4cHg7Ij5KU09OIEZpbGUgMTwvaDM+CiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJleHRyYWN0b3JKc29uMSIgcGxhY2Vob2xkZXI9IlBhc3RlIEpTT04gaGVyZS4uLiIgc3R5bGU9IndpZHRoOiAxMDAlOyBoZWlnaHQ6IDIwMHB4OyBmb250LWZhbWlseTogbW9ub3NwYWNlOyBmb250LXNpemU6IDEwcHg7IHBhZGRpbmc6IDhweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgYm9yZGVyLXJhZGl1czogM3B4OyByZXNpemU6IHZlcnRpY2FsOyB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7IG92ZXJmbG93LXdyYXA6IGJyZWFrLXdvcmQ7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7Ij48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDhweDsiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDRweDsgZmxleC13cmFwOiB3cmFwOyBnYXA6IDRweDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA2cHg7IG1pbi13aWR0aDogMDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBzdHlsZT0iZm9udC1zaXplOiAxMnB4OyBtYXJnaW46IDA7IHdoaXRlLXNwYWNlOiBub3dyYXA7Ij5FeHRyYWN0ZWQgUG9saWN5OjwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDRweDsgZm9udC1zaXplOiAxMHB4OyBjdXJzb3I6IHBvaW50ZXI7IHdoaXRlLXNwYWNlOiBub3dyYXA7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iY29tcGFyZUNoZWNrMSIgdmFsdWU9IjEiIG9uY2hhbmdlPSJoYW5kbGVDb21wYXJlQ2hlY2tib3goMSkiIHN0eWxlPSJjdXJzb3I6IHBvaW50ZXI7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IHNtYWxsIiBvbmNsaWNrPSJjb3B5RXh0cmFjdGVkUG9saWN5KDEpIiB0aXRsZT0iQ29weSB0byBjbGlwYm9hcmQiPkNvcHk8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwcmUgaWQ9ImV4dHJhY3RvclJlc3VsdDEiIHN0eWxlPSJiYWNrZ3JvdW5kOiAjZjRmNGY0OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOiAzcHg7IHBhZGRpbmc6IDhweDsgZm9udC1zaXplOiA5cHg7IG1heC1oZWlnaHQ6IDQwMHB4OyBvdmVyZmxvdy15OiBhdXRvOyBvdmVyZmxvdy14OiBoaWRkZW47IHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsgd29yZC13cmFwOiBicmVhay13b3JkOyBvdmVyZmxvdy13cmFwOiBicmVhay13b3JkOyB3b3JkLWJyZWFrOiBicmVhay13b3JkOyBib3gtc2l6aW5nOiBib3JkZXItYm94OyBtYXJnaW46IDA7Ij48L3ByZT4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1pbi13aWR0aDogMDsiPgogICAgICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luLWJvdHRvbTogOHB4OyI+SlNPTiBGaWxlIDI8L2gzPgogICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0iZXh0cmFjdG9ySnNvbjIiIHBsYWNlaG9sZGVyPSJQYXN0ZSBKU09OIGhlcmUuLi4iIHN0eWxlPSJ3aWR0aDogMTAwJTsgaGVpZ2h0OiAyMDBweDsgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTsgZm9udC1zaXplOiAxMHB4OyBwYWRkaW5nOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6IDNweDsgcmVzaXplOiB2ZXJ0aWNhbDsgd29yZC13cmFwOiBicmVhay13b3JkOyBvdmVyZmxvdy13cmFwOiBicmVhay13b3JkOyBib3gtc2l6aW5nOiBib3JkZXItYm94OyI+PC90ZXh0YXJlYT4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOiA4cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBtYXJnaW4tYm90dG9tOiA0cHg7IGZsZXgtd3JhcDogd3JhcDsgZ2FwOiA0cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogNnB4OyBtaW4td2lkdGg6IDA7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgc3R5bGU9ImZvbnQtc2l6ZTogMTJweDsgbWFyZ2luOiAwOyB3aGl0ZS1zcGFjZTogbm93cmFwOyI+RXh0cmFjdGVkIFBvbGljeTo8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA0cHg7IGZvbnQtc2l6ZTogMTBweDsgY3Vyc29yOiBwb2ludGVyOyB3aGl0ZS1zcGFjZTogbm93cmFwOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImNvbXBhcmVDaGVjazIiIHZhbHVlPSIyIiBvbmNoYW5nZT0iaGFuZGxlQ29tcGFyZUNoZWNrYm94KDIpIiBzdHlsZT0iY3Vyc29yOiBwb2ludGVyOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNlY29uZGFyeSBzbWFsbCIgb25jbGljaz0iY29weUV4dHJhY3RlZFBvbGljeSgyKSIgdGl0bGU9IkNvcHkgdG8gY2xpcGJvYXJkIj5Db3B5PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8cHJlIGlkPSJleHRyYWN0b3JSZXN1bHQyIiBzdHlsZT0iYmFja2dyb3VuZDogI2Y0ZjRmNDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgYm9yZGVyLXJhZGl1czogM3B4OyBwYWRkaW5nOiA4cHg7IGZvbnQtc2l6ZTogOXB4OyBtYXgtaGVpZ2h0OiA0MDBweDsgb3ZlcmZsb3cteTogYXV0bzsgb3ZlcmZsb3cteDogaGlkZGVuOyB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7IHdvcmQtd3JhcDogYnJlYWstd29yZDsgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDsgd29yZC1icmVhazogYnJlYWstd29yZDsgYm94LXNpemluZzogYm9yZGVyLWJveDsgbWFyZ2luOiAwOyI+PC9wcmU+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtaW4td2lkdGg6IDA7Ij4KICAgICAgICAgICAgICAgICAgICA8aDMgc3R5bGU9Im1hcmdpbi1ib3R0b206IDhweDsiPkpTT04gRmlsZSAzPC9oMz4KICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9ImV4dHJhY3Rvckpzb24zIiBwbGFjZWhvbGRlcj0iUGFzdGUgSlNPTiBoZXJlLi4uIiBzdHlsZT0id2lkdGg6IDEwMCU7IGhlaWdodDogMjAwcHg7IGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7IGZvbnQtc2l6ZTogMTBweDsgcGFkZGluZzogOHB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOiAzcHg7IHJlc2l6ZTogdmVydGljYWw7IHdvcmQtd3JhcDogYnJlYWstd29yZDsgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDsgYm94LXNpemluZzogYm9yZGVyLWJveDsiPjwvdGV4dGFyZWE+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogOHB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgbWFyZ2luLWJvdHRvbTogNHB4OyBmbGV4LXdyYXA6IHdyYXA7IGdhcDogNHB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDZweDsgbWluLXdpZHRoOiAwOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IHN0eWxlPSJmb250LXNpemU6IDEycHg7IG1hcmdpbjogMDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsiPkV4dHJhY3RlZCBQb2xpY3k6PC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogNHB4OyBmb250LXNpemU6IDEwcHg7IGN1cnNvcjogcG9pbnRlcjsgd2hpdGUtc3BhY2U6IG5vd3JhcDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJjb21wYXJlQ2hlY2szIiB2YWx1ZT0iMyIgb25jaGFuZ2U9ImhhbmRsZUNvbXBhcmVDaGVja2JveCgzKSIgc3R5bGU9ImN1cnNvcjogcG9pbnRlcjsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWxlY3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJzZWNvbmRhcnkgc21hbGwiIG9uY2xpY2s9ImNvcHlFeHRyYWN0ZWRQb2xpY3koMykiIHRpdGxlPSJDb3B5IHRvIGNsaXBib2FyZCI+Q29weTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPHByZSBpZD0iZXh0cmFjdG9yUmVzdWx0MyIgc3R5bGU9ImJhY2tncm91bmQ6ICNmNGY0ZjQ7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6IDNweDsgcGFkZGluZzogOHB4OyBmb250LXNpemU6IDlweDsgbWF4LWhlaWdodDogNDAwcHg7IG92ZXJmbG93LXk6IGF1dG87IG92ZXJmbG93LXg6IGhpZGRlbjsgd2hpdGUtc3BhY2U6IHByZS13cmFwOyB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7IG92ZXJmbG93LXdyYXA6IGJyZWFrLXdvcmQ7IHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IG1hcmdpbjogMDsiPjwvcHJlPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPCEtLSBDb21wYXJpc29uIFJlc3VsdHMgLS0+CiAgICAgICAgICAgIDxkaXYgaWQ9ImV4dHJhY3RvckNvbXBhcmVSZXN1bHRzIiBzdHlsZT0iZGlzcGxheTogbm9uZTsgbWFyZ2luLXRvcDogMjBweDsgYm9yZGVyLXRvcDogMnB4IHNvbGlkICNkZGQ7IHBhZGRpbmctdG9wOiAyMHB4OyBvdmVyZmxvdy14OiBhdXRvOyI+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDEycHg7Ij4KICAgICAgICAgICAgICAgICAgICA8aDMgc3R5bGU9Im1hcmdpbjogMDsiPkNvbXBhcmlzb24gUmVzdWx0czwvaDM+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IHNtYWxsIiBvbmNsaWNrPSJjbG9zZUV4dHJhY3RvckNvbXBhcmlzb24oKSI+Q2xvc2U8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBpZD0iZXh0cmFjdG9yQ29tcGFyZUNvbnRlbnQiIHN0eWxlPSJvdmVyZmxvdy14OiBhdXRvOyI+PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPHNjcmlwdD4KICAgICAgICBsZXQgY2hhbm5lbENvdW50ZXIgPSAwOwogICAgICAgIGxldCBwb2xpY3lDb3VudGVyID0gMDsKICAgICAgICBsZXQgYWNjZXNzQ291bnRlciA9IDA7CiAgICAgICAgbGV0IG5vdGlmaWNhdGlvbkNvdW50ZXIgPSAwOwogICAgICAgIGxldCBjdXJyZW50T3V0cHV0ID0gJyc7CiAgICAgICAgbGV0IHNlbGVjdGVkUG9saWNpZXNGb3JDb21wYXJlID0gW107CgogICAgICAgIC8vIEZpZWxkIGluZm9ybWF0aW9uIGRhdGFiYXNlCiAgICAgICAgY29uc3QgZmllbGRJbmZvID0gewogICAgICAgICAgICBjaGFubmVsSWQ6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiQ2hhbm5lbCBJRCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY2hhbm5lbCB0aHJvdWdoIHdoaWNoIHRoZSBzZXJ2aWNlIGlzIGFjY2Vzc2VkLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJTR19NQiIsICJVU19XRUIiLCAiVUtfQVBJIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXJ2aWNlSWQ6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiU2VydmljZSBJRCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgc2VydmljZS9BUEkgZW5kcG9pbnQuIFRoaXMgc2hvdWxkIGJlIHVuaXF1ZSBhY3Jvc3MgYWxsIHBvbGljaWVzLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJQQVlOT1dfVVBJXzEiLCAiVFJBTlNGRVJfRlVORFMiLCAiVklFV19CQUxBTkNFIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBlbmRQb2ludDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJFbmQgUG9pbnQgKFVSSSkiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgQVBJIGVuZHBvaW50IHBhdGggdGhhdCB0aGlzIHBvbGljeSBhcHBsaWVzIHRvLiBUaGlzIGlzIHRoZSBpbmNvbWluZyByZXF1ZXN0IHBhdGguIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIi9wYXltZW50cy9wcm94eS10cmFuc2Zlci1mY3kvcGF5bm93dXBpIiwgIi9hcGkvdHJhbnNmZXIiLCAiL2JhbGFuY2UvdmlldyJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaHR0cE1ldGhvZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJIVFRQIE1ldGhvZCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlRoZSBIVFRQIG1ldGhvZCB1c2VkIGZvciB0aGlzIGVuZHBvaW50LiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJQT1NUIiwgIkdFVCIsICJQVVQiLCAiREVMRVRFIiwgIlBBVENIIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBvdXRFbmRQb2ludDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJPdXQgRW5kIFBvaW50IiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIG91dGdvaW5nIGVuZHBvaW50IHBhdGguIENhbiBiZSBzYW1lIGFzIGVuZHBvaW50IG9yIGRpZmZlcmVudCBmb3Igcm91dGluZyBwdXJwb3Nlcy4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiL3BheW1lbnRzL3Byb3h5LXRyYW5zZmVyLWZjeS9wYXlub3d1cGkiLCAiL2ludGVybmFsL2FwaS90cmFuc2ZlciJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlcnZpY2VEZXNjOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlNlcnZpY2UgRGVzY3JpcHRpb24iLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJBIGh1bWFuLXJlYWRhYmxlIGRlc2NyaXB0aW9uIG9mIHdoYXQgdGhpcyBzZXJ2aWNlIGRvZXMuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlBheW5vd1VQSShTR0QgdG8gSU5SKSB0cmFuc2ZlciIsICJGdW5kIHRyYW5zZmVyIHNlcnZpY2UiLCAiQmFsYW5jZSBpbnF1aXJ5Il0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBhdXRoTGV2ZWxSZXF1aXJlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJBdXRoIExldmVsIFJlcXVpcmVkIChMZXZlbCkiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgYXV0aGVudGljYXRpb24gbGV2ZWwgcmVxdWlyZWQgdG8gYWNjZXNzIHRoaXMgc2VydmljZS4gTGV2ZWwgMCBtZWFucyBubyBhdXRoZW50aWNhdGlvbiByZXF1aXJlZC4gSGlnaGVyIGxldmVscyByZXF1aXJlIHN0cm9uZ2VyIGF1dGhlbnRpY2F0aW9uLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyIwIChObyBhdXRoKSIsICIxIChCYXNpYykiLCAiMiAoU3Ryb25nKSIsICIzIChNdWx0aS1mYWN0b3IpIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICAgIGxvZ2ljOiAiSWYgbGV2ZWwgPSAwLCB2YWxpZGF0aW9uID0gZmFsc2UgYW5kIHdoaXRlbGlzdCA9IHRydWUuIElmIGxldmVsICE9IDAsIHZhbGlkYXRpb24gPSB0cnVlIGFuZCB3aGl0ZWxpc3QgPSBmYWxzZS4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlc3Npb25WYWxSZXF1aXJlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJTZXNzaW9uIFZhbGlkYXRpb24gUmVxdWlyZWQiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJXaGV0aGVyIHNlc3Npb24gdmFsaWRhdGlvbiBpcyByZXF1aXJlZCBmb3IgdGhpcyBzZXJ2aWNlLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJ0cnVlIiwgImZhbHNlIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgICAgICAgICBsb2dpYzogIkF1dG9tYXRpY2FsbHkgc2V0IGJhc2VkIG9uIGF1dGggbGV2ZWwuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB3aGl0ZWxpc3RlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJXaGl0ZWxpc3RlZCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIldoZXRoZXIgdGhpcyBzZXJ2aWNlIGlzIHdoaXRlbGlzdGVkIChhbGxvd2VkIHdpdGhvdXQgY2VydGFpbiBjaGVja3MpLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJ0cnVlIiwgImZhbHNlIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgICAgICAgICBsb2dpYzogIkF1dG9tYXRpY2FsbHkgc2V0IGJhc2VkIG9uIGF1dGggbGV2ZWwuIgogICAgICAgICAgICB9LAogICAgICAgICAgICBhbGxvd2VkU2NvcGU6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiQWxsb3dlZCBTY29wZSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlRoZSBPQXV0aC9hY2Nlc3Mgc2NvcGVzIHJlcXVpcmVkIHRvIGFjY2VzcyB0aGlzIHNlcnZpY2UuIFNwYWNlLXNlcGFyYXRlZCBsaXN0LiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJhY2Nlc3NfbGV2ZWwyIGlhbV9hY2Nlc3Mgc2VydmljZV9sZXZlbDIiLCAiYWNjZXNzX2xldmVsMCIsICJhZG1pbl9zY29wZSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdHhuQXV0aENvbmNlcm5zOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlRyYW5zYWN0aW9uIEF1dGggQ29uY2VybnMgKFR4biBBdXRoKSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIldoZXRoZXIgdGhpcyBzZXJ2aWNlIHJlcXVpcmVzIHRyYW5zYWN0aW9uIGF1dGhlbnRpY2F0aW9uL2F1dGhvcml6YXRpb24uIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlkgKFllcykiLCAiTiAoTm8pIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICAgIGxvZ2ljOiAiSWYgTiwgb25seSAxIGFjY2VzcyByZWNvcmQgaXMgYWxsb3dlZC4gSWYgWSwgMSBvciBtb3JlIGFjY2VzcyByZWNvcmRzIGFsbG93ZWQuIgogICAgICAgICAgICB9LAogICAgICAgICAgICBjb29saW5nUGVyaW9kQ2hlY2tSZXF1aXJlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJDb29saW5nIFBlcmlvZCBDaGVjayBSZXF1aXJlZCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIldoZXRoZXIgYSBjb29saW5nIHBlcmlvZCBjaGVjayBpcyByZXF1aXJlZCBiZWZvcmUgYWxsb3dpbmcgdGhpcyB0cmFuc2FjdGlvbi4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsidHJ1ZSIsICJmYWxzZSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHR4bkF1dGhSZXF1aXJlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJUcmFuc2FjdGlvbmFsIEF1dGggUmVxdWlyZWQiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgbGV2ZWwgb2YgdHJhbnNhY3Rpb24gYXV0aG9yaXphdGlvbiByZXF1aXJlZC4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiMCAoTm9uZSkiLCAiMSAoQmFzaWMpIiwgIjIgKFN0cm9uZykiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBub3RpZmljYXRpb25QYXJhbU1hcDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJOb3RpZmljYXRpb24gUGFyYW1ldGVyIE1hcCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIk1hcHMgcmVxdWVzdCBmaWVsZHMgdG8gbm90aWZpY2F0aW9uIHRlbXBsYXRlIHBhcmFtZXRlcnMuIFVzZWQgdG8gcG9wdWxhdGUgbm90aWZpY2F0aW9uIG1lc3NhZ2VzLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJTSE9SVEZJRUxEMDE9cnFPYmoucmVxdWVzdF9ib2R5LmFtb3VudCwgU0hPUlRGSUVMRDAyPXJxT2JqLnJlcXVlc3RfYm9keS5jdXJyZW5jeSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlc3Npb25Db25kaXRpb25NYXA6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiU2Vzc2lvbiBDb25kaXRpb25zIE1hcCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIkNvbmRpdGlvbnMgYmFzZWQgb24gc2Vzc2lvbiBhdHRyaWJ1dGVzIHRoYXQgbXVzdCBiZSBtZXQuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbInNlc3Npb24ubG9naW5UeXBlPVNFQ1VSRSIsICJzZXNzaW9uLmRldmljZVZlcmlmaWVkPXRydWUiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBwcm9maWxlQ29uZGl0aW9uTWFwOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlByb2ZpbGUgQ29uZGl0aW9ucyBNYXAiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJDb25kaXRpb25zIGJhc2VkIG9uIHVzZXIgcHJvZmlsZSBhdHRyaWJ1dGVzIHRoYXQgbXVzdCBiZSBtZXQuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbInByb2ZpbGUuYWNjb3VudFR5cGU9UFJFTUlVTSIsICJwcm9maWxlLnZlcmlmaWVkPXRydWUiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICByZXF1ZXN0Q29uZGl0aW9uc01hcDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJSZXF1ZXN0IENvbmRpdGlvbnMgTWFwIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiQ3VzdG9tIGNvbmRpdGlvbnMgYmFzZWQgb24gcmVxdWVzdCBkYXRhIHRoYXQgbXVzdCBiZSBtZXQuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbInJxT2JqLnJlcXVlc3RfYm9keS5hbW91bnQ+MTAwMCIsICJycU9iai5yZXF1ZXN0X2JvZHkuY3VycmVuY3k9VVNEIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmlza0luZGljYXRvcjogewogICAgICAgICAgICAgICAgdGl0bGU6ICJSaXNrIEluZGljYXRvciIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlJpc2sgbGV2ZWwgaW5kaWNhdG9yIGZvciB0aGlzIHRyYW5zYWN0aW9uIHR5cGUuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIjAgKExvdykiLCAiMSAoTWVkaXVtKSIsICIyIChIaWdoKSIsICIzIChDcml0aWNhbCkiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBwb3N0YWxDb2RlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlBvc3RhbCBDb2RlIENoZWNrIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiV2hldGhlciBwb3N0YWwgY29kZSB2YWxpZGF0aW9uIGlzIHJlcXVpcmVkLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyIwIChOb3QgcmVxdWlyZWQpIiwgIjEgKFJlcXVpcmVkKSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVwZGF0ZUxpbWl0OiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlVwZGF0ZSBMaW1pdCBDaGVjayIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIldoZXRoZXIgbGltaXQgdXBkYXRlcyBhcmUgYWxsb3dlZC4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiMCAoTm90IGFsbG93ZWQpIiwgIjEgKEFsbG93ZWQpIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWluQW10Q29kZTogewogICAgICAgICAgICAgICAgdGl0bGU6ICJNaW4gQW1vdW50IENvZGUiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJSZWZlcmVuY2UgY29kZSBmb3IgdGhlIG1pbmltdW0gYW1vdW50IGFsbG93ZWQgZm9yIHRoaXMgdHJhbnNhY3Rpb24uIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIkRFRkFVTFRfTUlOX0FNVCIsICJQQVlOT1dfTUlOIiwgIlRSQU5TRkVSX01JTiJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1pbkFtdENvZGVWYWx1ZTogewogICAgICAgICAgICAgICAgdGl0bGU6ICJNaW4gQW1vdW50IFZhbHVlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIGFjdHVhbCBtaW5pbXVtIGFtb3VudCB2YWx1ZS4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiMC4wMDAwIiwgIjEwLjAwMDAiLCAiMTAwLjAwMDAiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBtYXhBbXRDb2RlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIk1heCBBbW91bnQgQ29kZSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlJlZmVyZW5jZSBjb2RlIGZvciB0aGUgbWF4aW11bSBhbW91bnQgYWxsb3dlZCBmb3IgdGhpcyB0cmFuc2FjdGlvbi4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiREVGQVVMVF9NQVhfQU1UIiwgIlBBWU5PV19NQVgiLCAiVFJBTlNGRVJfTUFYIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWF4QW10Q29kZVZhbHVlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIk1heCBBbW91bnQgVmFsdWUiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgYWN0dWFsIG1heGltdW0gYW1vdW50IHZhbHVlLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyI5OTk5OTkuOTk5OSIsICIxMDAwMC4wMDAwIiwgIjUwMDAwLjAwMDAiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBub3RpZmljYXRpb25UeXBlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIk5vdGlmaWNhdGlvbiBUeXBlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIHR5cGUgb2Ygbm90aWZpY2F0aW9uIHRvIHNlbmQgdG8gdGhlIHVzZXIuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlNNUyIsICJFTUFJTCIsICJQVVNIIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXV0aFR5cGU6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiQXV0aCBUeXBlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIGF1dGhlbnRpY2F0aW9uIHR5cGUgcmVxdWlyZWQgZm9yIHRoaXMgbm90aWZpY2F0aW9uL3RyYW5zYWN0aW9uLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJBVVRIX0hBUkRfU0lHTiIsICJBVVRIX1NPRlRfU0lHTiIsICJBVVRIX09UUCJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRlbXBsYXRlSWQ6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiVGVtcGxhdGUgSUQiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgbm90aWZpY2F0aW9uIHRlbXBsYXRlIGlkZW50aWZpZXIgaW5jbHVkaW5nIGxhbmd1YWdlLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJTVEI4OFVQMTA4OkVuZ2xpc2giLCAiVEVNUExBVEVfMDAxOkVuZ2xpc2giLCAiVFhOX0FMRVJUOlNwYW5pc2giXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICB0ZW1wbGF0ZVBhcmFtczogewogICAgICAgICAgICAgICAgdGl0bGU6ICJUZW1wbGF0ZSBQYXJhbWV0ZXJzIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiQ29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgcGFyYW1ldGVycyB1c2VkIGluIHRoZSBub3RpZmljYXRpb24gdGVtcGxhdGUuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlNIT1JURklFTEQwMSxTSE9SVEZJRUxEMDIsU0hPUlRGSUVMRDAzIiwgIkFNT1VOVCxDVVJSRU5DWSxEQVRFIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaXNNYW5kYXRvcnk6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiSXMgTWFuZGF0b3J5IiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiV2hldGhlciB0aGlzIG5vdGlmaWNhdGlvbiBpcyBtYW5kYXRvcnkgZm9yIHRoZSB0cmFuc2FjdGlvbi4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsidHJ1ZSIsICJmYWxzZSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFtb3VudENvZGU6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiQW1vdW50IENvZGUiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJDdXN0b20gYW1vdW50IGNvZGUgaWRlbnRpZmllciBmb3IgdGhpcyBwb2xpY3kuIERvIG5vdCB1c2UgREVGQVVMVF9NSU5fQU1UIG9yIERFRkFVTFRfTUFYX0FNVF9ORVhUR0VOIGFzIHRoZXNlIGFyZSBzeXN0ZW0gZGVmYXVsdHMuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlBBWU5PV19NQVgiLCAiVFJBTlNGRVJfTElNSVQiLCAiQ1VTVE9NX1RIUkVTSE9MRCJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFtb3VudENvZGVEZXNjOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkFtb3VudCBDb2RlIERlc2NyaXB0aW9uIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiRGVzY3JpcHRpb24gb2YgdGhlIGFtb3VudCBjb2RlLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJNYXhpbXVtIGFtb3VudCBmb3IgUGF5Tm93IHRyYW5zZmVycyIsICJEYWlseSB0cmFuc2ZlciBsaW1pdCJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFtb3VudENvZGVTdWJEZXNjOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkFtb3VudCBDb2RlIFN1YiBEZXNjcmlwdGlvbiIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIkFkZGl0aW9uYWwgZGVzY3JpcHRpb24gb3IgY29udGV4dCBmb3IgdGhlIGFtb3VudCBjb2RlLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJBcHBsaWVzIHRvIFNHRCB0byBJTlIgdHJhbnNmZXJzIiwgIlBlciB0cmFuc2FjdGlvbiBsaW1pdCJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFtb3VudFNlcnZpY2VEZXNjOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkFtb3VudCBTZXJ2aWNlIERlc2NyaXB0aW9uIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiRGVzY3JpcHRpb24gb2YgdGhlIHNlcnZpY2UgdGhpcyBhbW91bnQgY29kZSBhcHBsaWVzIHRvLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJQYXlOb3cgVVBJIFNlcnZpY2UiLCAiRnVuZCBUcmFuc2ZlciBTZXJ2aWNlIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYW1vdW50Q29kZVZhbHVlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkFtb3VudCBDb2RlIFZhbHVlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIG51bWVyaWMgdmFsdWUgZm9yIHRoaXMgYW1vdW50IGNvZGUuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIjUwMDAuMDAiLCAiMTAwMDAuMDAiLCAiOTk5OTk5Ljk5Il0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIHNlYXJjaFBvbGljaWVzKCkgewogICAgICAgICAgICBjb25zdCBzZWFyY2hJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hFbmRwb2ludCcpLnZhbHVlLnRyaW0oKTsKICAgICAgICAgICAgaWYgKCFzZWFyY2hJbnB1dCkgewogICAgICAgICAgICAgICAgYWxlcnQoJ1BsZWFzZSBlbnRlciBlbmRwb2ludDpodHRwTWV0aG9kIChlLmcuLCAvYXBpL3RyYW5zZmVyOlBPU1QpJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFBhcnNlIHRoZSBzZWFyY2ggaW5wdXQKICAgICAgICAgICAgY29uc3QgcGFydHMgPSBzZWFyY2hJbnB1dC5zcGxpdCgnOicpOwogICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoICE9PSAyKSB7CiAgICAgICAgICAgICAgICBhbGVydCgnSW52YWxpZCBmb3JtYXQuIFVzZSBlbmRwb2ludDpodHRwTWV0aG9kIChlLmcuLCAvYXBpL3RyYW5zZmVyOlBPU1QpJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnN0IHNlYXJjaEVuZHBvaW50ID0gcGFydHNbMF0udHJpbSgpOwogICAgICAgICAgICBjb25zdCBzZWFyY2hNZXRob2QgPSBwYXJ0c1sxXS50cmltKCkudG9VcHBlckNhc2UoKTsKCiAgICAgICAgICAgIC8vIENsZWFyIHByZXZpb3VzIHNlbGVjdGlvbnMgYW5kIGNvbXBhcmlzb24gcmVzdWx0cwogICAgICAgICAgICBzZWxlY3RlZFBvbGljaWVzRm9yQ29tcGFyZSA9IFtdOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSAzOyBpKyspIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21wYXJlQ2hlY2snICsgaSkuY2hlY2tlZCA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNsb3NlRXh0cmFjdG9yQ29tcGFyaXNvbigpOwoKICAgICAgICAgICAgLy8gU2VhcmNoIGluIGFsbCB0aHJlZSBKU09OIGlucHV0cwogICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSAzOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IGpzb25UZXh0YXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHRyYWN0b3JKc29uJyArIGkpOwogICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0UHJlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4dHJhY3RvclJlc3VsdCcgKyBpKTsKCiAgICAgICAgICAgICAgICBpZiAoIWpzb25UZXh0YXJlYS52YWx1ZS50cmltKCkpIHsKICAgICAgICAgICAgICAgICAgICByZXN1bHRQcmUudGV4dENvbnRlbnQgPSAnTm8gSlNPTiBsb2FkZWQnOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoanNvblRleHRhcmVhLnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICBsZXQgZm91bmRQb2xpY3kgPSBudWxsOwoKICAgICAgICAgICAgICAgICAgICAvLyBTZWFyY2ggdGhyb3VnaCBwb2xpY2llc01hcHMKICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5wb2xpY2llc01hcHMgJiYgQXJyYXkuaXNBcnJheShkYXRhLnBvbGljaWVzTWFwcykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjaGFubmVsTWFwIG9mIGRhdGEucG9saWNpZXNNYXBzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbm5lbE1hcC5wb2xpY2llcyAmJiBBcnJheS5pc0FycmF5KGNoYW5uZWxNYXAucG9saWNpZXMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBwb2xpY3kgb2YgY2hhbm5lbE1hcC5wb2xpY2llcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9saWN5LmVuZFBvaW50ID09PSBzZWFyY2hFbmRwb2ludCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5Lmh0dHBNZXRob2QgPT09IHNlYXJjaE1ldGhvZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRQb2xpY3kgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbElkOiBjaGFubmVsTWFwLmNoYW5uZWxJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3k6IHBvbGljeQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kUG9saWN5KSBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kUG9saWN5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBvdXRwdXQgd2l0aCBjaGFubmVsIGluZm8KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbElkOiBmb3VuZFBvbGljeS5jaGFubmVsSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5mb3VuZFBvbGljeS5wb2xpY3kKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0UHJlLnRleHRDb250ZW50ID0gSlNPTi5zdHJpbmdpZnkob3V0cHV0LCBudWxsLCAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0UHJlLnN0eWxlLmNvbG9yID0gJyMwMDAnOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFByZS50ZXh0Q29udGVudCA9IGBObyBwb2xpY3kgZm91bmQgZm9yICR7c2VhcmNoRW5kcG9pbnR9OiR7c2VhcmNoTWV0aG9kfWA7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFByZS5zdHlsZS5jb2xvciA9ICcjOTk5JzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdFByZS50ZXh0Q29udGVudCA9ICdJbnZhbGlkIEpTT046ICcgKyBlcnJvci5tZXNzYWdlOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdFByZS5zdHlsZS5jb2xvciA9ICcjZDMyZjJmJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xlYXJFeHRyYWN0b3IoKSB7CiAgICAgICAgICAgIC8vIENsZWFyIGFsbCB0ZXh0YXJlYXMgYW5kIHJlc3VsdHMKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMzsgaSsrKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXh0cmFjdG9ySnNvbicgKyBpKS52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4dHJhY3RvclJlc3VsdCcgKyBpKS50ZXh0Q29udGVudCA9ICcnOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbXBhcmVDaGVjaycgKyBpKS5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaEVuZHBvaW50JykudmFsdWUgPSAnJzsKICAgICAgICAgICAgc2VsZWN0ZWRQb2xpY2llc0ZvckNvbXBhcmUgPSBbXTsKICAgICAgICAgICAgY2xvc2VFeHRyYWN0b3JDb21wYXJpc29uKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjb3B5RXh0cmFjdGVkUG9saWN5KGluZGV4KSB7CiAgICAgICAgICAgIGNvbnN0IHJlc3VsdFByZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHRyYWN0b3JSZXN1bHQnICsgaW5kZXgpOwogICAgICAgICAgICBjb25zdCB0ZXh0ID0gcmVzdWx0UHJlLnRleHRDb250ZW50OwoKICAgICAgICAgICAgaWYgKCF0ZXh0IHx8IHRleHQgPT09ICdObyBKU09OIGxvYWRlZCcgfHwgdGV4dC5zdGFydHNXaXRoKCdObyBwb2xpY3kgZm91bmQnKSB8fCB0ZXh0LnN0YXJ0c1dpdGgoJ0ludmFsaWQgSlNPTicpKSB7CiAgICAgICAgICAgICAgICBhbGVydCgnTm8gdmFsaWQgcG9saWN5IHRvIGNvcHknKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dCkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBWaXN1YWwgZmVlZGJhY2sKICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsVGV4dCA9IHJlc3VsdFByZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7CiAgICAgICAgICAgICAgICByZXN1bHRQcmUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNjOGU2YzknOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0UHJlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG9yaWdpbmFsVGV4dDsKICAgICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICBhbGVydCgnRmFpbGVkIHRvIGNvcHk6ICcgKyBlcnIpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGhhbmRsZUNvbXBhcmVDaGVja2JveChpbmRleCkgewogICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21wYXJlQ2hlY2snICsgaW5kZXgpOwoKICAgICAgICAgICAgaWYgKGNoZWNrYm94LmNoZWNrZWQpIHsKICAgICAgICAgICAgICAgIC8vIEFkZCB0byBzZWxlY3RlZCBhcnJheQogICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkUG9saWNpZXNGb3JDb21wYXJlLmxlbmd0aCA+PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gVW5jaGVjayB0aGUgb2xkZXN0IHNlbGVjdGlvbgogICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZGVzdEluZGV4ID0gc2VsZWN0ZWRQb2xpY2llc0ZvckNvbXBhcmUuc2hpZnQoKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tcGFyZUNoZWNrJyArIG9sZGVzdEluZGV4KS5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzZWxlY3RlZFBvbGljaWVzRm9yQ29tcGFyZS5wdXNoKGluZGV4KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBmcm9tIHNlbGVjdGVkIGFycmF5CiAgICAgICAgICAgICAgICBzZWxlY3RlZFBvbGljaWVzRm9yQ29tcGFyZSA9IHNlbGVjdGVkUG9saWNpZXNGb3JDb21wYXJlLmZpbHRlcihpID0+IGkgIT09IGluZGV4KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY29tcGFyZUV4dHJhY3RlZFBvbGljaWVzKCkgewogICAgICAgICAgICBpZiAoc2VsZWN0ZWRQb2xpY2llc0ZvckNvbXBhcmUubGVuZ3RoICE9PSAyKSB7CiAgICAgICAgICAgICAgICBhbGVydCgnUGxlYXNlIHNlbGVjdCBleGFjdGx5IDIgcG9saWNpZXMgdG8gY29tcGFyZScpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zdCBpbmRleDEgPSBzZWxlY3RlZFBvbGljaWVzRm9yQ29tcGFyZVswXTsKICAgICAgICAgICAgY29uc3QgaW5kZXgyID0gc2VsZWN0ZWRQb2xpY2llc0ZvckNvbXBhcmVbMV07CgogICAgICAgICAgICBjb25zdCByZXN1bHQxID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4dHJhY3RvclJlc3VsdCcgKyBpbmRleDEpLnRleHRDb250ZW50OwogICAgICAgICAgICBjb25zdCByZXN1bHQyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4dHJhY3RvclJlc3VsdCcgKyBpbmRleDIpLnRleHRDb250ZW50OwoKICAgICAgICAgICAgLy8gVmFsaWRhdGUgdGhhdCBib3RoIGhhdmUgdmFsaWQgcG9saWNpZXMKICAgICAgICAgICAgaWYgKCFyZXN1bHQxIHx8IHJlc3VsdDEgPT09ICdObyBKU09OIGxvYWRlZCcgfHwgcmVzdWx0MS5zdGFydHNXaXRoKCdObyBwb2xpY3kgZm91bmQnKSB8fCByZXN1bHQxLnN0YXJ0c1dpdGgoJ0ludmFsaWQgSlNPTicpKSB7CiAgICAgICAgICAgICAgICBhbGVydCgnUG9saWN5ICcgKyBpbmRleDEgKyAnIGlzIG5vdCB2YWxpZCBmb3IgY29tcGFyaXNvbicpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIXJlc3VsdDIgfHwgcmVzdWx0MiA9PT0gJ05vIEpTT04gbG9hZGVkJyB8fCByZXN1bHQyLnN0YXJ0c1dpdGgoJ05vIHBvbGljeSBmb3VuZCcpIHx8IHJlc3VsdDIuc3RhcnRzV2l0aCgnSW52YWxpZCBKU09OJykpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdQb2xpY3kgJyArIGluZGV4MiArICcgaXMgbm90IHZhbGlkIGZvciBjb21wYXJpc29uJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBwb2xpY3kxID0gSlNPTi5wYXJzZShyZXN1bHQxKTsKICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeTIgPSBKU09OLnBhcnNlKHJlc3VsdDIpOwoKICAgICAgICAgICAgICAgIC8vIEZpbmQgZGlmZmVyZW5jZXMKICAgICAgICAgICAgICAgIGNvbnN0IGRpZmZlcmVuY2VzID0gW107CiAgICAgICAgICAgICAgICBmaW5kRGlmZmVyZW5jZXMocG9saWN5MSwgcG9saWN5MiwgJycsIGRpZmZlcmVuY2VzKTsKCiAgICAgICAgICAgICAgICAvLyBEaXNwbGF5IHJlc3VsdHMKICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHNEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXh0cmFjdG9yQ29tcGFyZVJlc3VsdHMnKTsKICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnREaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXh0cmFjdG9yQ29tcGFyZUNvbnRlbnQnKTsKCiAgICAgICAgICAgICAgICBpZiAoZGlmZmVyZW5jZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgY29udGVudERpdi5pbm5lckhUTUwgPSAnPHAgc3R5bGU9ImNvbG9yOiAjNENBRjUwOyBmb250LXdlaWdodDogYm9sZDsiPk5vIGRpZmZlcmVuY2VzIGZvdW5kIC0gcG9saWNpZXMgYXJlIGlkZW50aWNhbCE8L3A+JzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGh0bWwgPSAnPGRpdiBzdHlsZT0iYmFja2dyb3VuZDogI2ZmZjsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgYm9yZGVyLXJhZGl1czogNHB4OyBwYWRkaW5nOiAxMnB4OyBvdmVyZmxvdy14OiBhdXRvOyI+JzsKICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8cCBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMTJweDsiPjxzdHJvbmc+Rm91bmQgJHtkaWZmZXJlbmNlcy5sZW5ndGh9IGRpZmZlcmVuY2UocykgYmV0d2VlbiBKU09OIEZpbGUgJHtpbmRleDF9IGFuZCBKU09OIEZpbGUgJHtpbmRleDJ9Ojwvc3Ryb25nPjwvcD5gOwogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7IG1pbi13aWR0aDogODAwcHg7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IGZvbnQtc2l6ZTogMTBweDsgdGFibGUtbGF5b3V0OiBmaXhlZDsiPic7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPHRoZWFkPjx0ciBzdHlsZT0iYmFja2dyb3VuZDogI2Y1ZjVmNTsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNkZGQ7Ij48dGggc3R5bGU9InBhZGRpbmc6IDZweDsgdGV4dC1hbGlnbjogbGVmdDsgd2lkdGg6IDI1JTsiPkZpZWxkIFBhdGg8L3RoPjx0aCBzdHlsZT0icGFkZGluZzogNnB4OyB0ZXh0LWFsaWduOiBsZWZ0OyB3aWR0aDogMTAlOyI+VHlwZTwvdGg+PHRoIHN0eWxlPSJwYWRkaW5nOiA2cHg7IHRleHQtYWxpZ246IGxlZnQ7IHdpZHRoOiAzMi41JTsiPkpTT04gRmlsZSAnICsgaW5kZXgxICsgJzwvdGg+PHRoIHN0eWxlPSJwYWRkaW5nOiA2cHg7IHRleHQtYWxpZ246IGxlZnQ7IHdpZHRoOiAzMi41JTsiPkpTT04gRmlsZSAnICsgaW5kZXgyICsgJzwvdGg+PC90cj48L3RoZWFkPic7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPHRib2R5Pic7CgogICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLmZvckVhY2goKGRpZmYsIGlkeCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiZ0NvbG9yID0gaWR4ICUgMiA9PT0gMCA/ICcjZmFmYWZhJyA6ICcjZmZmJzsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHR5cGVDb2xvciA9ICcjNjY2JzsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpZmYudHlwZSA9PT0gJ2FkZGVkJykgdHlwZUNvbG9yID0gJyM0Q0FGNTAnOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlmZi50eXBlID09PSAncmVtb3ZlZCcpIHR5cGVDb2xvciA9ICcjZjQ0MzM2JzsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpZmYudHlwZSA9PT0gJ21vZGlmaWVkJykgdHlwZUNvbG9yID0gJyNmZjk4MDAnOwoKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlMSwgdmFsdWUyOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlmZi50eXBlID09PSAnYWRkZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTEgPSAnLSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTIgPSBkaWZmLnZhbHVlIHx8IGRpZmYubmV3VmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlmZi50eXBlID09PSAncmVtb3ZlZCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlMSA9IGRpZmYudmFsdWUgfHwgZGlmZi5vbGRWYWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlMiA9ICctJzsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkaWZmLnR5cGUgPT09ICdtb2RpZmllZCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlMSA9IGRpZmYub2xkVmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTIgPSBkaWZmLm5ld1ZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8dHIgc3R5bGU9ImJhY2tncm91bmQ6ICR7YmdDb2xvcn07IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlOyI+YDsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPHRkIHN0eWxlPSJwYWRkaW5nOiA2cHg7IGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7IHdvcmQtd3JhcDogYnJlYWstd29yZDsgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDsgd29yZC1icmVhazogYnJlYWstYWxsOyI+JHtkaWZmLnBhdGh9PC90ZD5gOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8dGQgc3R5bGU9InBhZGRpbmc6IDZweDsgY29sb3I6ICR7dHlwZUNvbG9yfTsgZm9udC13ZWlnaHQ6IGJvbGQ7IHdoaXRlLXNwYWNlOiBub3dyYXA7Ij4ke2RpZmYudHlwZS50b1VwcGVyQ2FzZSgpfTwvdGQ+YDsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPHRkIHN0eWxlPSJwYWRkaW5nOiA2cHg7IGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7IGNvbG9yOiAjMzMzOyB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7IHdvcmQtd3JhcDogYnJlYWstd29yZDsgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDsgd29yZC1icmVhazogYnJlYWstd29yZDsiPiR7dmFsdWUxIHx8ICctJ308L3RkPmA7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYDx0ZCBzdHlsZT0icGFkZGluZzogNnB4OyBmb250LWZhbWlseTogbW9ub3NwYWNlOyBjb2xvcjogIzMzMzsgd2hpdGUtc3BhY2U6IHByZS13cmFwOyB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7IG92ZXJmbG93LXdyYXA6IGJyZWFrLXdvcmQ7IHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7Ij4ke3ZhbHVlMiB8fCAnLSd9PC90ZD5gOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8L3RyPic7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvdGJvZHk+PC90YWJsZT48L2Rpdj4nOwogICAgICAgICAgICAgICAgICAgIGNvbnRlbnREaXYuaW5uZXJIVE1MID0gaHRtbDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXN1bHRzRGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgLy8gU2Nyb2xsIHRvIHJlc3VsdHMKICAgICAgICAgICAgICAgIHJlc3VsdHNEaXYuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnbmVhcmVzdCcgfSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBhbGVydCgnRXJyb3IgY29tcGFyaW5nIHBvbGljaWVzOiAnICsgZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNsb3NlRXh0cmFjdG9yQ29tcGFyaXNvbigpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4dHJhY3RvckNvbXBhcmVSZXN1bHRzJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB9CgogICAgICAgIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgYWRkQ2hhbm5lbCgpOwogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIHNob3dJbmZvKGZpZWxkTmFtZSkgewogICAgICAgICAgICBjb25zdCBpbmZvID0gZmllbGRJbmZvW2ZpZWxkTmFtZV07CiAgICAgICAgICAgIGlmICghaW5mbykgewogICAgICAgICAgICAgICAgYWxlcnQoJ05vIGluZm9ybWF0aW9uIGF2YWlsYWJsZSBmb3IgdGhpcyBmaWVsZC4nKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm9UaXRsZScpLnRleHRDb250ZW50ID0gaW5mby50aXRsZTsKCiAgICAgICAgICAgIGxldCBib2R5SFRNTCA9IGA8cD4ke2luZm8uZGVzY3JpcHRpb259PC9wPmA7CgogICAgICAgICAgICBpZiAoaW5mby5yZXF1aXJlZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBib2R5SFRNTCArPSBgPHN0cm9uZz5SZXF1aXJlZDo8L3N0cm9uZz4gJHtpbmZvLnJlcXVpcmVkID8gJ1llcycgOiAnTm8nfWA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpbmZvLmV4YW1wbGVzICYmIGluZm8uZXhhbXBsZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgYm9keUhUTUwgKz0gYDxzdHJvbmc+RXhhbXBsZXM6PC9zdHJvbmc+YDsKICAgICAgICAgICAgICAgIGJvZHlIVE1MICs9ICc8dWwgc3R5bGU9Im1hcmdpbjogNXB4IDA7IHBhZGRpbmctbGVmdDogMjBweDsiPic7CiAgICAgICAgICAgICAgICBpbmZvLmV4YW1wbGVzLmZvckVhY2goZXggPT4gewogICAgICAgICAgICAgICAgICAgIGJvZHlIVE1MICs9IGA8bGk+PGNvZGU+JHtleH08L2NvZGU+PC9saT5gOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBib2R5SFRNTCArPSAnPC91bD4nOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaW5mby5sb2dpYykgewogICAgICAgICAgICAgICAgYm9keUhUTUwgKz0gYDxzdHJvbmc+QnVzaW5lc3MgTG9naWM6PC9zdHJvbmc+PHAgc3R5bGU9Im1hcmdpbjogNXB4IDA7IHBhZGRpbmc6IDhweDsgYmFja2dyb3VuZDogI2ZmZjNjZDsgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCAjZmZjMTA3OyBib3JkZXItcmFkaXVzOiAzcHg7Ij4ke2luZm8ubG9naWN9PC9wPmA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvQm9keScpLmlubmVySFRNTCA9IGJvZHlIVE1MOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mb01vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjbG9zZUluZm9Nb2RhbCgpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm9Nb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgfQoKICAgICAgICAvLyBDbG9zZSBpbmZvIG1vZGFsIHdoZW4gY2xpY2tpbmcgb3V0c2lkZQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIGNvbnN0IGluZm9Nb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvTW9kYWwnKTsKICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PSBpbmZvTW9kYWwpIHsKICAgICAgICAgICAgICAgIGNsb3NlSW5mb01vZGFsKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnN0IGV4cGFuZE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGFuZE1vZGFsJyk7CiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgPT0gZXhwYW5kTW9kYWwpIHsKICAgICAgICAgICAgICAgIGNsb3NlRXhwYW5kTW9kYWwoKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICAvLyBFeHBhbmQgZmllbGQgZnVuY3Rpb25hbGl0eQogICAgICAgIGxldCBjdXJyZW50RXhwYW5kSW5wdXQgPSBudWxsOwoKICAgICAgICBmdW5jdGlvbiBleHBhbmRGaWVsZChleHBhbmRJY29uLCBmaWVsZFRpdGxlKSB7CiAgICAgICAgICAgIGNvbnN0IGlucHV0V3JhcHBlciA9IGV4cGFuZEljb24ucGFyZW50RWxlbWVudDsKICAgICAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gaW5wdXRXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7CgogICAgICAgICAgICBjdXJyZW50RXhwYW5kSW5wdXQgPSBpbnB1dEVsZW1lbnQ7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBhbmRUaXRsZScpLnRleHRDb250ZW50ID0gZmllbGRUaXRsZTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGFuZFRleHRhcmVhJykudmFsdWUgPSBpbnB1dEVsZW1lbnQudmFsdWU7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBhbmRNb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kVGV4dGFyZWEnKS5mb2N1cygpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xvc2VFeHBhbmRNb2RhbCgpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGFuZE1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgY3VycmVudEV4cGFuZElucHV0ID0gbnVsbDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNhdmVFeHBhbmRlZFZhbHVlKCkgewogICAgICAgICAgICBpZiAoY3VycmVudEV4cGFuZElucHV0KSB7CiAgICAgICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBhbmRUZXh0YXJlYScpLnZhbHVlOwogICAgICAgICAgICAgICAgY3VycmVudEV4cGFuZElucHV0LnZhbHVlID0gbmV3VmFsdWU7CiAgICAgICAgICAgICAgICBjbG9zZUV4cGFuZE1vZGFsKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHN3aXRjaFRhYih0YWJOYW1lKSB7CiAgICAgICAgICAgIC8vIEhpZGUgYWxsIHRhYnMKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYi1jb250ZW50JykuZm9yRWFjaCh0YWIgPT4gewogICAgICAgICAgICAgICAgdGFiLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIFJlbW92ZSBhY3RpdmUgY2xhc3MgZnJvbSBhbGwgdGFiIGJ1dHRvbnMKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYicpLmZvckVhY2goYnRuID0+IHsKICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBTaG93IHNlbGVjdGVkIHRhYgogICAgICAgICAgICBpZiAodGFiTmFtZSA9PT0gJ2VkaXRvcicpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0b3JUYWInKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWInKVswXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICAgICAgfSBlbHNlIGlmICh0YWJOYW1lID09PSAnY29tcGFyZScpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21wYXJlVGFiJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiJylbMV0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CgogICAgICAgICAgICAgICAgLy8gUG9wdWxhdGUgZGVmYXVsdCB2YWx1ZSBpbiBib3RoIHRleHRhcmVhcyBpZiBlbXB0eQogICAgICAgICAgICAgICAgY29uc3QgZGVmYXVsdEpzb25TdHJpbmcgPSBgewogICJwb2xpY2llc01hcHMiOiBbCiAgICB7CiAgICAgICJjaGFubmVsSWQiOiAiU0dfTUIiLAogICAgICAicG9saWNpZXMiOiBbCgogICAgICBdCiAgICB9CiAgXQp9YDsKCiAgICAgICAgICAgICAgICBjb25zdCBqc29uMVRleHRhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzb24xJyk7CiAgICAgICAgICAgICAgICBpZiAoIWpzb24xVGV4dGFyZWEudmFsdWUudHJpbSgpKSB7CiAgICAgICAgICAgICAgICAgICAganNvbjFUZXh0YXJlYS52YWx1ZSA9IGRlZmF1bHRKc29uU3RyaW5nOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnN0IGpzb24yVGV4dGFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNvbjInKTsKICAgICAgICAgICAgICAgIGlmICghanNvbjJUZXh0YXJlYS52YWx1ZS50cmltKCkpIHsKICAgICAgICAgICAgICAgICAgICBqc29uMlRleHRhcmVhLnZhbHVlID0gZGVmYXVsdEpzb25TdHJpbmc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAodGFiTmFtZSA9PT0gJ2V4dHJhY3RvcicpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHRyYWN0b3JUYWInKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWInKVsyXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWRkQ2hhbm5lbCgpIHsKICAgICAgICAgICAgY29uc3QgY2hhbm5lbElkID0gYGNoYW5uZWxfJHtjaGFubmVsQ291bnRlcisrfWA7CiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFubmVsc0NvbnRhaW5lcicpOwoKICAgICAgICAgICAgY29uc3QgY2hhbm5lbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBjaGFubmVsRGl2LmNsYXNzTmFtZSA9ICdjaGFubmVsLXNlY3Rpb24nOwogICAgICAgICAgICBjaGFubmVsRGl2LmlkID0gY2hhbm5lbElkOwogICAgICAgICAgICBjaGFubmVsRGl2LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyIj4KICAgICAgICAgICAgICAgICAgICA8aDI+Q2hhbm5lbCA8c3BhbiBjbGFzcz0iYmFkZ2UiPiMke2NoYW5uZWxDb3VudGVyfTwvc3Bhbj48L2gyPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iZGFuZ2VyIHNtYWxsIiBvbmNsaWNrPSJyZW1vdmVDaGFubmVsKCcke2NoYW5uZWxJZH0nKSI+UmVtb3ZlPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0icmVxdWlyZWQiPkNoYW5uZWwgSUQgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ2NoYW5uZWxJZCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJjaGFubmVsSWQiIHZhbHVlPSJTR19NQiIgcmVxdWlyZWQ+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBvbGljaWVzLWNvbnRhaW5lciIgaWQ9InBvbGljaWVzXyR7Y2hhbm5lbElkfSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9InNlY29uZGFyeSBzbWFsbCIgb25jbGljaz0iYWRkUG9saWN5KCcke2NoYW5uZWxJZH0nKSI+KyBQb2xpY3k8L2J1dHRvbj4KICAgICAgICAgICAgYDsKICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNoYW5uZWxEaXYpOwogICAgICAgICAgICBhZGRQb2xpY3koY2hhbm5lbElkKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbW92ZUNoYW5uZWwoY2hhbm5lbElkKSB7CiAgICAgICAgICAgIGlmIChjb25maXJtKCdSZW1vdmUgdGhpcyBjaGFubmVsPycpKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjaGFubmVsSWQpLnJlbW92ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhZGRQb2xpY3koY2hhbm5lbElkKSB7CiAgICAgICAgICAgIGNvbnN0IHBvbGljeUlkID0gYHBvbGljeV8ke3BvbGljeUNvdW50ZXIrK31gOwogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcG9saWNpZXNfJHtjaGFubmVsSWR9YCk7CgogICAgICAgICAgICBjb25zdCBwb2xpY3lEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgcG9saWN5RGl2LmNsYXNzTmFtZSA9ICdwb2xpY3ktc2VjdGlvbic7CiAgICAgICAgICAgIHBvbGljeURpdi5pZCA9IHBvbGljeUlkOwogICAgICAgICAgICBwb2xpY3lEaXYuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxoMz4KICAgICAgICAgICAgICAgICAgICAgICAgUG9saWN5IDxzcGFuIGNsYXNzPSJiYWRnZSI+IyR7cG9saWN5Q291bnRlcn08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXdlaWdodDogbm9ybWFsOyBjb2xvcjogIzY2NjsgZm9udC1zaXplOiAxMXB4OyBtYXJnaW4tbGVmdDogOHB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0icG9saWN5LW1ldGhvZCIgaWQ9Im1ldGhvZF8ke3BvbGljeUlkfSI+UE9TVDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJwb2xpY3ktdXJpIiBpZD0idXJpXyR7cG9saWN5SWR9Ij4vYXBpL2VuZHBvaW50PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPC9oMz4KICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9InRvZ2dsZS1idG4gc21hbGwiIG9uY2xpY2s9InRvZ2dsZVBvbGljeSgnJHtwb2xpY3lJZH0nKSI+4oiSPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iZGFuZ2VyIHNtYWxsIiBvbmNsaWNrPSJyZW1vdmVQb2xpY3koJyR7cG9saWN5SWR9JykiPlJlbW92ZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icG9saWN5LWNvbnRlbnQiIGlkPSJjb250ZW50XyR7cG9saWN5SWR9Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQtNSI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0icmVxdWlyZWQiPlNlcnZpY2UgSUQgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3NlcnZpY2VJZCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0ic2VydmljZUlkIiB2YWx1ZT0iU0VSVklDRV9JRF8ke3BvbGljeUNvdW50ZXJ9IiByZXF1aXJlZD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJyZXF1aXJlZCI+VVJJIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdlbmRQb2ludCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iZW5kUG9pbnQiIHZhbHVlPSIvYXBpL2VuZHBvaW50IiByZXF1aXJlZCBvbmlucHV0PSJ1cGRhdGVQb2xpY3lIZWFkZXIoJyR7cG9saWN5SWR9JykiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InJlcXVpcmVkIj5NZXRob2QgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ2h0dHBNZXRob2QnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJodHRwTWV0aG9kIiByZXF1aXJlZCBvbmNoYW5nZT0idXBkYXRlUG9saWN5SGVhZGVyKCcke3BvbGljeUlkfScpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlBPU1QiPlBPU1Q8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkdFVCI+R0VUPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQVVQiPlBVVDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iREVMRVRFIj5ERUxFVEU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5PdXQgVVJJIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdvdXRFbmRQb2ludCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0ib3V0RW5kUG9pbnQiIHZhbHVlPSIvYXBpL2VuZHBvaW50Ij4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJyZXF1aXJlZCI+RGVzY3JpcHRpb24gPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3NlcnZpY2VEZXNjJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJzZXJ2aWNlRGVzYyIgdmFsdWU9IlNlcnZpY2UgZGVzY3JpcHRpb24iIHJlcXVpcmVkPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZC01Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJyZXF1aXJlZCI+TGV2ZWwgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ2F1dGhMZXZlbFJlcXVpcmVkJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0iYXV0aExldmVsUmVxdWlyZWQiIG9uY2hhbmdlPSJ1cGRhdGVWYWxpZGF0aW9uRmllbGRzKHRoaXMpIiByZXF1aXJlZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjAiIHNlbGVjdGVkPjA8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjEiPjE8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjIiPjI8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5WYWxpZGF0aW9uIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdzZXNzaW9uVmFsUmVxdWlyZWQnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJzZXNzaW9uVmFsUmVxdWlyZWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZmFsc2UiIHNlbGVjdGVkPmZhbHNlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJ0cnVlIj50cnVlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+V2hpdGVsaXN0IDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCd3aGl0ZWxpc3RlZCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9IndoaXRlbGlzdGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InRydWUiIHNlbGVjdGVkPnRydWU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImZhbHNlIj5mYWxzZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJyZXF1aXJlZCI+VHhuIEF1dGggPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3R4bkF1dGhDb25jZXJucycpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9InR4bkF1dGhDb25jZXJucyIgb25jaGFuZ2U9InVwZGF0ZUFjY2Vzc1Jlc3RyaWN0aW9uKHRoaXMpIiByZXF1aXJlZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ik4iPk48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlkiPlk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0icmVxdWlyZWQiPlNjb3BlIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdhbGxvd2VkU2NvcGUnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImFsbG93ZWRTY29wZSIgdmFsdWU9ImFjY2Vzc19sZXZlbDAiIHJlcXVpcmVkPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWxlcnQgYWxlcnQtaW5mbyBhY2Nlc3MtcmVzdHJpY3Rpb24iIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4KICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPk5vdGU6PC9zdHJvbmc+IFR4biBBdXRoPU4gYWxsb3dzIG9ubHkgMSBhY2Nlc3MgcmVjb3JkLgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW4tdG9wOiA4cHg7Ij5BbW91bnQgQ29kZSBDb25maWcgKFBvbGljeS1TcGVjaWZpYyk8L2gzPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYW1vdW50LWNvZGUtc2VjdGlvbiIgaWQ9ImFtb3VudGNvZGVfJHtwb2xpY3lJZH0iIHN0eWxlPSJiYWNrZ3JvdW5kOiAjZmZmOWU2OyBib3JkZXI6IDFweCBzb2xpZCAjZmZlMDY2OyBib3JkZXItcmFkaXVzOiAzcHg7IHBhZGRpbmc6IDZweDsgbWFyZ2luLWJvdHRvbTogNnB4OyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBtYXJnaW4tYm90dG9tOiA0cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHNtYWxsIHN0eWxlPSJjb2xvcjogIzY2NjsgZm9udC1zaXplOiAxMHB4OyI+TGVhdmUgZW1wdHkgdG8gdXNlIG9ubHkgc3lzdGVtIGRlZmF1bHRzPC9zbWFsbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJzZWNvbmRhcnkgc21hbGwiIG9uY2xpY2s9InRvZ2dsZUFtb3VudENvZGUoJyR7cG9saWN5SWR9JykiIGlkPSJhbXRjb2RlYnRuXyR7cG9saWN5SWR9Ij4rIEFkZCBBbW91bnQgQ29kZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFtb3VudC1jb2RlLWZvcm0iIGlkPSJhbXRjb2RlZm9ybV8ke3BvbGljeUlkfSIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZC01Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5BbXQgQ29kZSA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnYW1vdW50Q29kZScpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJhbW91bnRDb2RlIiB2YWx1ZT0iIiBwbGFjZWhvbGRlcj0iZS5nLiBQQVlOT1dfTUFYIiBvbmlucHV0PSJ2YWxpZGF0ZUFtb3VudENvZGUodGhpcywgJyR7cG9saWN5SWR9JykiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+QW10IENvZGUgRGVzYyA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnYW1vdW50Q29kZURlc2MnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iYW1vdW50Q29kZURlc2MiIHZhbHVlPSIiIHBsYWNlaG9sZGVyPSJEZXNjcmlwdGlvbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5BbXQgQ29kZSBTdWIgRGVzYyA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnYW1vdW50Q29kZVN1YkRlc2MnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iYW1vdW50Q29kZVN1YkRlc2MiIHZhbHVlPSIiIHBsYWNlaG9sZGVyPSJTdWIgRGVzY3JpcHRpb24iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+U2VydmljZSBEZXNjIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdhbW91bnRTZXJ2aWNlRGVzYycpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJhbW91bnRTZXJ2aWNlRGVzYyIgdmFsdWU9IiIgcGxhY2Vob2xkZXI9IlNlcnZpY2UgRGVzY3JpcHRpb24iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+QW10IENvZGUgVmFsdWUgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ2Ftb3VudENvZGVWYWx1ZScpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIHN0ZXA9IjAuMDEiIG5hbWU9ImFtb3VudENvZGVWYWx1ZSIgdmFsdWU9IiIgcGxhY2Vob2xkZXI9ImUuZy4gNTAwMC4wMCIgb25pbnB1dD0idXBkYXRlQW1vdW50Q29kZURyb3Bkb3ducygnJHtwb2xpY3lJZH0nKSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8aDMgc3R5bGU9Im1hcmdpbi10b3A6IDhweDsiPk5vdGlmaWNhdGlvbnMgKGFwcGxpZWQgdG8gYWxsIGFjY2VzcyByZWNvcmRzKTwvaDM+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJub3RpZmljYXRpb25zLWNvbnRhaW5lciIgaWQ9Im5vdGlmaWNhdGlvbnNfJHtwb2xpY3lJZH0iPjwvZGl2PgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJzZWNvbmRhcnkgc21hbGwiIG9uY2xpY2s9ImFkZE5vdGlmaWNhdGlvbignJHtwb2xpY3lJZH0nKSI+KyBOb3RpZmljYXRpb248L2J1dHRvbj4KCiAgICAgICAgICAgICAgICA8aDMgc3R5bGU9Im1hcmdpbi10b3A6IDhweDsiPkFjY2VzcyBSZWNvcmRzPC9oMz4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjY2Vzc2VzLWNvbnRhaW5lciIgaWQ9ImFjY2Vzc2VzXyR7cG9saWN5SWR9Ij48L2Rpdj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ic2Vjb25kYXJ5IHNtYWxsIiBvbmNsaWNrPSJhZGRBY2Nlc3MoJyR7cG9saWN5SWR9JykiPisgQWNjZXNzPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYDsKICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHBvbGljeURpdik7CiAgICAgICAgICAgIGFkZE5vdGlmaWNhdGlvbihwb2xpY3lJZCk7CiAgICAgICAgICAgIGFkZEFjY2Vzcyhwb2xpY3lJZCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZW1vdmVQb2xpY3kocG9saWN5SWQpIHsKICAgICAgICAgICAgaWYgKGNvbmZpcm0oJ1JlbW92ZSB0aGlzIHBvbGljeT8nKSkgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9saWN5SWQpLnJlbW92ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB0b2dnbGVQb2xpY3kocG9saWN5SWQpIHsKICAgICAgICAgICAgY29uc3QgY29udGVudERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50XycgKyBwb2xpY3lJZCk7CiAgICAgICAgICAgIGNvbnN0IHBvbGljeVNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb2xpY3lJZCk7CiAgICAgICAgICAgIGNvbnN0IHRvZ2dsZUJ0biA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnRvZ2dsZS1idG4nKTsKCiAgICAgICAgICAgIGlmIChjb250ZW50RGl2LmNsYXNzTGlzdC5jb250YWlucygnY29sbGFwc2VkJykpIHsKICAgICAgICAgICAgICAgIGNvbnRlbnREaXYuY2xhc3NMaXN0LnJlbW92ZSgnY29sbGFwc2VkJyk7CiAgICAgICAgICAgICAgICB0b2dnbGVCdG4udGV4dENvbnRlbnQgPSAn4oiSJzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnRlbnREaXYuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2VkJyk7CiAgICAgICAgICAgICAgICB0b2dnbGVCdG4udGV4dENvbnRlbnQgPSAnKyc7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNvbGxhcHNlQWxsUG9saWNpZXMoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb2xpY3ktY29udGVudCcpLmZvckVhY2goY29udGVudCA9PiB7CiAgICAgICAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoJ2NvbGxhcHNlZCcpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvZ2dsZS1idG4nKS5mb3JFYWNoKGJ0biA9PiB7CiAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSAnKyc7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZXhwYW5kQWxsUG9saWNpZXMoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb2xpY3ktY29udGVudCcpLmZvckVhY2goY29udGVudCA9PiB7CiAgICAgICAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbGxhcHNlZCcpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvZ2dsZS1idG4nKS5mb3JFYWNoKGJ0biA9PiB7CiAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSAn4oiSJzsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB0b2dnbGVBbW91bnRDb2RlKHBvbGljeUlkKSB7CiAgICAgICAgICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW10Y29kZWZvcm1fJyArIHBvbGljeUlkKTsKICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FtdGNvZGVidG5fJyArIHBvbGljeUlkKTsKCiAgICAgICAgICAgIGlmIChmb3JtLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykgewogICAgICAgICAgICAgICAgZm9ybS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9ICfiiJIgUmVtb3ZlIEFtb3VudCBDb2RlJzsKICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdzZWNvbmRhcnknKTsKICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdkYW5nZXInKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9ICcrIEFkZCBBbW91bnQgQ29kZSc7CiAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnZGFuZ2VyJyk7CiAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgnc2Vjb25kYXJ5Jyk7CiAgICAgICAgICAgICAgICAvLyBDbGVhciB0aGUgZm9ybQogICAgICAgICAgICAgICAgY29uc3QgcG9saWN5U2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBvbGljeUlkKTsKICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImFtb3VudENvZGUiXScpLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhbW91bnRDb2RlRGVzYyJdJykudmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImFtb3VudENvZGVTdWJEZXNjIl0nKS52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYW1vdW50U2VydmljZURlc2MiXScpLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhbW91bnRDb2RlVmFsdWUiXScpLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZHJvcGRvd25zIHRvIHJlbW92ZSBjdXN0b20gYW1vdW50IGNvZGUKICAgICAgICAgICAgICAgIHVwZGF0ZUFtb3VudENvZGVEcm9wZG93bnMocG9saWN5SWQpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVBbW91bnRDb2RlRHJvcGRvd25zKHBvbGljeUlkKSB7CiAgICAgICAgICAgIGNvbnN0IHBvbGljeVNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb2xpY3lJZCk7CiAgICAgICAgICAgIGNvbnN0IGFtb3VudENvZGVJbnB1dCA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImFtb3VudENvZGUiXScpOwogICAgICAgICAgICBjb25zdCBhbW91bnRDb2RlVmFsdWVJbnB1dCA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImFtb3VudENvZGVWYWx1ZSJdJyk7CgogICAgICAgICAgICBjb25zdCBjdXN0b21Db2RlID0gYW1vdW50Q29kZUlucHV0ID8gYW1vdW50Q29kZUlucHV0LnZhbHVlLnRyaW0oKSA6ICcnOwogICAgICAgICAgICBjb25zdCBjdXN0b21WYWx1ZSA9IGFtb3VudENvZGVWYWx1ZUlucHV0ID8gYW1vdW50Q29kZVZhbHVlSW5wdXQudmFsdWUgOiAnJzsKCiAgICAgICAgICAgIC8vIFVwZGF0ZSBhbGwgbWluIGFtb3VudCBjb2RlIGRyb3Bkb3ducyBpbiB0aGlzIHBvbGljeSdzIGFjY2VzcyByZWNvcmRzCiAgICAgICAgICAgIGNvbnN0IG1pbkRyb3Bkb3ducyA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvckFsbCgnLm1pbkFtdENvZGVEcm9wZG93bicpOwogICAgICAgICAgICBtaW5Ecm9wZG93bnMuZm9yRWFjaChkcm9wZG93biA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBkcm9wZG93bi52YWx1ZTsKICAgICAgICAgICAgICAgIC8vIENsZWFyIG9wdGlvbnMKICAgICAgICAgICAgICAgIGRyb3Bkb3duLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSJERUZBVUxUX01JTl9BTVQiIGRhdGEtdmFsdWU9IjAiPkRFRkFVTFRfTUlOX0FNVDwvb3B0aW9uPic7CgogICAgICAgICAgICAgICAgLy8gQWRkIGN1c3RvbSBhbW91bnQgY29kZSBpZiBleGlzdHMKICAgICAgICAgICAgICAgIGlmIChjdXN0b21Db2RlICYmIGN1c3RvbVZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gY3VzdG9tQ29kZTsKICAgICAgICAgICAgICAgICAgICBvcHRpb24uc2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJywgY3VzdG9tVmFsdWUpOwogICAgICAgICAgICAgICAgICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IGN1c3RvbUNvZGU7CiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYXBwZW5kQ2hpbGQob3B0aW9uKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gUmVzdG9yZSBzZWxlY3Rpb24gaWYgaXQgd2FzIHRoZSBjdXN0b20gY29kZQogICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VmFsdWUgPT09IGN1c3RvbUNvZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24udmFsdWUgPSBjdXN0b21Db2RlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgZmllbGQKICAgICAgICAgICAgICAgIHVwZGF0ZUFtb3VudFZhbHVlKGRyb3Bkb3duKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBVcGRhdGUgYWxsIG1heCBhbW91bnQgY29kZSBkcm9wZG93bnMgaW4gdGhpcyBwb2xpY3kncyBhY2Nlc3MgcmVjb3JkcwogICAgICAgICAgICBjb25zdCBtYXhEcm9wZG93bnMgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tYXhBbXRDb2RlRHJvcGRvd24nKTsKICAgICAgICAgICAgbWF4RHJvcGRvd25zLmZvckVhY2goZHJvcGRvd24gPT4gewogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gZHJvcGRvd24udmFsdWU7CiAgICAgICAgICAgICAgICAvLyBDbGVhciBvcHRpb25zCiAgICAgICAgICAgICAgICBkcm9wZG93bi5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iREVGQVVMVF9NQVhfQU1UX05FWFRHRU4iIGRhdGEtdmFsdWU9Ijk5OTk5OTk5OTk5OS45OSI+REVGQVVMVF9NQVhfQU1UX05FWFRHRU48L29wdGlvbj4nOwoKICAgICAgICAgICAgICAgIC8vIEFkZCBjdXN0b20gYW1vdW50IGNvZGUgaWYgZXhpc3RzCiAgICAgICAgICAgICAgICBpZiAoY3VzdG9tQ29kZSAmJiBjdXN0b21WYWx1ZSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOwogICAgICAgICAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IGN1c3RvbUNvZGU7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnNldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScsIGN1c3RvbVZhbHVlKTsKICAgICAgICAgICAgICAgICAgICBvcHRpb24udGV4dENvbnRlbnQgPSBjdXN0b21Db2RlOwogICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmluc2VydEJlZm9yZShvcHRpb24sIGRyb3Bkb3duLmZpcnN0Q2hpbGQpOwoKICAgICAgICAgICAgICAgICAgICAvLyBSZXN0b3JlIHNlbGVjdGlvbiBpZiBpdCB3YXMgdGhlIGN1c3RvbSBjb2RlCiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRWYWx1ZSA9PT0gY3VzdG9tQ29kZSkgewogICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi52YWx1ZSA9IGN1c3RvbUNvZGU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSBmaWVsZAogICAgICAgICAgICAgICAgdXBkYXRlQW1vdW50VmFsdWUoZHJvcGRvd24pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUFtb3VudFZhbHVlKHNlbGVjdEVsZW1lbnQpIHsKICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRPcHRpb24gPSBzZWxlY3RFbGVtZW50Lm9wdGlvbnNbc2VsZWN0RWxlbWVudC5zZWxlY3RlZEluZGV4XTsKICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBzZWxlY3RlZE9wdGlvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnKTsKICAgICAgICAgICAgY29uc3QgYWNjZXNzU2VjdGlvbiA9IHNlbGVjdEVsZW1lbnQuY2xvc2VzdCgnLmFjY2Vzcy1zZWN0aW9uJyk7CgogICAgICAgICAgICBpZiAoc2VsZWN0RWxlbWVudC5uYW1lID09PSAnbWluQW10Q29kZScpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlSW5wdXQgPSBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJtaW5BbXRDb2RlVmFsdWUiXScpOwogICAgICAgICAgICAgICAgaWYgKHZhbHVlSW5wdXQpIHZhbHVlSW5wdXQudmFsdWUgPSB2YWx1ZTsKICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RFbGVtZW50Lm5hbWUgPT09ICdtYXhBbXRDb2RlJykgewogICAgICAgICAgICAgICAgY29uc3QgdmFsdWVJbnB1dCA9IGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im1heEFtdENvZGVWYWx1ZSJdJyk7CiAgICAgICAgICAgICAgICBpZiAodmFsdWVJbnB1dCkgdmFsdWVJbnB1dC52YWx1ZSA9IHZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZUFtb3VudENvZGUoaW5wdXQsIHBvbGljeUlkKSB7CiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gaW5wdXQudmFsdWUudHJpbSgpLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICAgIGNvbnN0IHJlc2VydmVkQ29kZXMgPSBbJ0RFRkFVTFRfTUlOX0FNVCcsICdERUZBVUxUX01BWF9BTVRfTkVYVEdFTiddOwoKICAgICAgICAgICAgaWYgKHJlc2VydmVkQ29kZXMuaW5jbHVkZXModmFsdWUpKSB7CiAgICAgICAgICAgICAgICBhbGVydCgnQW1vdW50IGNvZGUgIicgKyB2YWx1ZSArICciIGlzIHJlc2VydmVkIGFuZCBjYW5ub3QgYmUgdXNlZC4gUGxlYXNlIGNob29zZSBhIGRpZmZlcmVudCBjb2RlLicpOwogICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdXBkYXRlQW1vdW50Q29kZURyb3Bkb3ducyhwb2xpY3lJZCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVQb2xpY3lIZWFkZXIocG9saWN5SWQpIHsKICAgICAgICAgICAgY29uc3QgcG9saWN5U2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBvbGljeUlkKTsKICAgICAgICAgICAgY29uc3QgdXJpSW5wdXQgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJlbmRQb2ludCJdJyk7CiAgICAgICAgICAgIGNvbnN0IG1ldGhvZFNlbGVjdCA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Imh0dHBNZXRob2QiXScpOwoKICAgICAgICAgICAgY29uc3QgdXJpRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cmlfJyArIHBvbGljeUlkKTsKICAgICAgICAgICAgY29uc3QgbWV0aG9kRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZXRob2RfJyArIHBvbGljeUlkKTsKCiAgICAgICAgICAgIGlmICh1cmlEaXNwbGF5ICYmIHVyaUlucHV0KSB7CiAgICAgICAgICAgICAgICB1cmlEaXNwbGF5LnRleHRDb250ZW50ID0gdXJpSW5wdXQudmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1ldGhvZERpc3BsYXkgJiYgbWV0aG9kU2VsZWN0KSB7CiAgICAgICAgICAgICAgICBtZXRob2REaXNwbGF5LnRleHRDb250ZW50ID0gbWV0aG9kU2VsZWN0LnZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVWYWxpZGF0aW9uRmllbGRzKGlucHV0KSB7CiAgICAgICAgICAgIGNvbnN0IHBvbGljeVNlY3Rpb24gPSBpbnB1dC5jbG9zZXN0KCcucG9saWN5LXNlY3Rpb24nKTsKICAgICAgICAgICAgY29uc3QgbGV2ZWwgPSBwYXJzZUludChpbnB1dC52YWx1ZSk7CiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb25TZWxlY3QgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJzZXNzaW9uVmFsUmVxdWlyZWQiXScpOwogICAgICAgICAgICBjb25zdCB3aGl0ZWxpc3RTZWxlY3QgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ3aGl0ZWxpc3RlZCJdJyk7CgogICAgICAgICAgICBpZiAobGV2ZWwgPT09IDApIHsKICAgICAgICAgICAgICAgIHZhbGlkYXRpb25TZWxlY3QudmFsdWUgPSAnZmFsc2UnOwogICAgICAgICAgICAgICAgd2hpdGVsaXN0U2VsZWN0LnZhbHVlID0gJ3RydWUnOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdmFsaWRhdGlvblNlbGVjdC52YWx1ZSA9ICd0cnVlJzsKICAgICAgICAgICAgICAgIHdoaXRlbGlzdFNlbGVjdC52YWx1ZSA9ICdmYWxzZSc7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUFjY2Vzc1Jlc3RyaWN0aW9uKHNlbGVjdCkgewogICAgICAgICAgICBjb25zdCBwb2xpY3lTZWN0aW9uID0gc2VsZWN0LmNsb3Nlc3QoJy5wb2xpY3ktc2VjdGlvbicpOwogICAgICAgICAgICBjb25zdCBhbGVydCA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignLmFjY2Vzcy1yZXN0cmljdGlvbicpOwogICAgICAgICAgICBjb25zdCBhY2Nlc3NDb250YWluZXIgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5hY2Nlc3Nlcy1jb250YWluZXInKTsKCiAgICAgICAgICAgIGlmIChzZWxlY3QudmFsdWUgPT09ICdOJykgewogICAgICAgICAgICAgICAgYWxlcnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICBjb25zdCBhY2Nlc3NTZWN0aW9ucyA9IGFjY2Vzc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuYWNjZXNzLXNlY3Rpb24nKTsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgYWNjZXNzU2VjdGlvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uc1tpXS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGFsZXJ0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFkZE5vdGlmaWNhdGlvbihwb2xpY3lJZCkgewogICAgICAgICAgICBjb25zdCBub3RpZmljYXRpb25JZCA9IGBub3RpZmljYXRpb25fJHtub3RpZmljYXRpb25Db3VudGVyKyt9YDsKICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYG5vdGlmaWNhdGlvbnNfJHtwb2xpY3lJZH1gKTsKCiAgICAgICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBub3RpZmljYXRpb25EaXYuY2xhc3NOYW1lID0gJ25vdGlmaWNhdGlvbi1zZWN0aW9uJzsKICAgICAgICAgICAgbm90aWZpY2F0aW9uRGl2LmlkID0gbm90aWZpY2F0aW9uSWQ7CiAgICAgICAgICAgIG5vdGlmaWNhdGlvbkRpdi5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlciI+CiAgICAgICAgICAgICAgICAgICAgPGgzPk5vdGlmIDxzcGFuIGNsYXNzPSJiYWRnZSI+IyR7bm90aWZpY2F0aW9uQ291bnRlcn08L3NwYW4+PC9oMz4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImRhbmdlciBzbWFsbCIgb25jbGljaz0icmVtb3ZlTm90aWZpY2F0aW9uKCcke25vdGlmaWNhdGlvbklkfScpIj54PC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQtNSI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5UeXBlIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdub3RpZmljYXRpb25UeXBlJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0ibm90aWZpY2F0aW9uVHlwZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJTTVMiPlNNUzwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRU1BSUwiPkVNQUlMPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQVVNIIj5QVVNIPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+QXV0aCBUeXBlIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdhdXRoVHlwZScpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iYXV0aFR5cGUiIHZhbHVlPSJBVVRIX0hBUkRfU0lHTiI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5NYW5kYXRvcnkgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ2lzTWFuZGF0b3J5JykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0iaXNNYW5kYXRvcnkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0idHJ1ZSIgc2VsZWN0ZWQ+dHJ1ZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZmFsc2UiPmZhbHNlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+VGVtcGxhdGUgSUQgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3RlbXBsYXRlSWQnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InRlbXBsYXRlSWQiIHZhbHVlPSJURU1QTEFURV8wMDE6RW5nbGlzaCI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5UZW1wbGF0ZSBQYXJhbXMgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3RlbXBsYXRlUGFyYW1zJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJ0ZW1wbGF0ZVBhcmFtcyIgdmFsdWU9IlNIT1JURklFTEQwMSxTSE9SVEZJRUxEMDIiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGA7CiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChub3RpZmljYXRpb25EaXYpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbklkKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG5vdGlmaWNhdGlvbklkKS5yZW1vdmUoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFkZEFjY2Vzcyhwb2xpY3lJZCkgewogICAgICAgICAgICBjb25zdCBwb2xpY3lTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9saWN5SWQpOwogICAgICAgICAgICBjb25zdCB0eG5BdXRoU2VsZWN0ID0gcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0idHhuQXV0aENvbmNlcm5zIl0nKTsKICAgICAgICAgICAgY29uc3QgYWNjZXNzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGFjY2Vzc2VzXyR7cG9saWN5SWR9YCk7CiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRBY2Nlc3NDb3VudCA9IGFjY2Vzc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuYWNjZXNzLXNlY3Rpb24nKS5sZW5ndGg7CgogICAgICAgICAgICBpZiAodHhuQXV0aFNlbGVjdC52YWx1ZSA9PT0gJ04nICYmIGN1cnJlbnRBY2Nlc3NDb3VudCA+PSAxKSB7CiAgICAgICAgICAgICAgICBhbGVydCgnVHhuIEF1dGg9TiBhbGxvd3Mgb25seSAxIGFjY2VzcyByZWNvcmQuJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnN0IGFjY2Vzc0lkID0gYGFjY2Vzc18ke2FjY2Vzc0NvdW50ZXIrK31gOwoKICAgICAgICAgICAgY29uc3QgYWNjZXNzRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGFjY2Vzc0Rpdi5jbGFzc05hbWUgPSAnYWNjZXNzLXNlY3Rpb24nOwogICAgICAgICAgICBhY2Nlc3NEaXYuaWQgPSBhY2Nlc3NJZDsKICAgICAgICAgICAgYWNjZXNzRGl2LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyIj4KICAgICAgICAgICAgICAgICAgICA8aDM+QWNjZXNzIDxzcGFuIGNsYXNzPSJiYWRnZSI+IyR7YWNjZXNzQ291bnRlcn08L3NwYW4+PC9oMz4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImRhbmdlciBzbWFsbCIgb25jbGljaz0icmVtb3ZlQWNjZXNzKCcke2FjY2Vzc0lkfScpIj5SZW1vdmU8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQtMyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5Db29saW5nIFBlcmlvZCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnY29vbGluZ1BlcmlvZENoZWNrUmVxdWlyZWQnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJjb29saW5nUGVyaW9kQ2hlY2tSZXF1aXJlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJmYWxzZSIgc2VsZWN0ZWQ+ZmFsc2U8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InRydWUiPnRydWU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5UeG4gQXV0aCBSZXEgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3R4bkF1dGhSZXF1aXJlZCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9InR4bkF1dGhSZXF1aXJlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIwIiBzZWxlY3RlZD4wPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIxIj4xPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIyIj4yPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+Tm90aWYgUGFyYW0gTWFwIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdub3RpZmljYXRpb25QYXJhbU1hcCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0ibm90aWZpY2F0aW9uUGFyYW1NYXAiIHZhbHVlPSJTSE9SVEZJRUxEMDE9dmFsMSI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkLTMiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+U2Vzc2lvbiBDb25kIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdzZXNzaW9uQ29uZGl0aW9uTWFwJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImlucHV0LXdpdGgtZXhwYW5kIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJzZXNzaW9uQ29uZGl0aW9uc01hcCIgdmFsdWU9IiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZXhwYW5kLWljb24iIG9uY2xpY2s9ImV4cGFuZEZpZWxkKHRoaXMsICdTZXNzaW9uIENvbmRpdGlvbnMgTWFwJykiIHRpdGxlPSJFeHBhbmQiPuKkojwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5Qcm9maWxlIENvbmQgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3Byb2ZpbGVDb25kaXRpb25NYXAnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5wdXQtd2l0aC1leHBhbmQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InByb2ZpbGVDb25kaXRpb25zTWFwIiB2YWx1ZT0iIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJleHBhbmQtaWNvbiIgb25jbGljaz0iZXhwYW5kRmllbGQodGhpcywgJ1Byb2ZpbGUgQ29uZGl0aW9ucyBNYXAnKSIgdGl0bGU9IkV4cGFuZCI+4qSiPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlJlcXVlc3QgQ29uZCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygncmVxdWVzdENvbmRpdGlvbnNNYXAnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5wdXQtd2l0aC1leHBhbmQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InJlcXVlc3RDb25kaXRpb25zTWFwIiB2YWx1ZT0iIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJleHBhbmQtaWNvbiIgb25jbGljaz0iZXhwYW5kRmllbGQodGhpcywgJ1JlcXVlc3QgQ29uZGl0aW9ucyBNYXAnKSIgdGl0bGU9IkV4cGFuZCI+4qSiPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQtMyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5SaXNrIEluZCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygncmlza0luZGljYXRvcicpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0icmlza0luZGljYXRvciIgdmFsdWU9IjAiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+UG9zdGFsIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdwb3N0YWxDb2RlJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJwb3N0YWxDb2RlIiB2YWx1ZT0iMCI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5VcGRhdGUgTG10IDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCd1cGRhdGVMaW1pdCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0idXBkYXRlTGltaXQiIHZhbHVlPSIwIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQtNCI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5NaW4gQW10IENvZGUgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ21pbkFtdENvZGUnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJtaW5BbXRDb2RlIiBjbGFzcz0ibWluQW10Q29kZURyb3Bkb3duIiBvbmNoYW5nZT0idXBkYXRlQW1vdW50VmFsdWUodGhpcykiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iREVGQVVMVF9NSU5fQU1UIiBkYXRhLXZhbHVlPSIwIj5ERUZBVUxUX01JTl9BTVQ8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5NaW4gQW10IFZhbCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnbWluQW10Q29kZVZhbHVlJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIHN0ZXA9IjAuMDEiIG5hbWU9Im1pbkFtdENvZGVWYWx1ZSIgdmFsdWU9IjAiIHJlYWRvbmx5IHN0eWxlPSJiYWNrZ3JvdW5kOiAjZjBmMGYwOyI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5NYXggQW10IENvZGUgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ21heEFtdENvZGUnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJtYXhBbXRDb2RlIiBjbGFzcz0ibWF4QW10Q29kZURyb3Bkb3duIiBvbmNoYW5nZT0idXBkYXRlQW1vdW50VmFsdWUodGhpcykiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iREVGQVVMVF9NQVhfQU1UX05FWFRHRU4iIGRhdGEtdmFsdWU9Ijk5OTk5OTk5OTk5OS45OSI+REVGQVVMVF9NQVhfQU1UX05FWFRHRU48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5NYXggQW10IFZhbCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnbWF4QW10Q29kZVZhbHVlJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIHN0ZXA9IjAuMDEiIG5hbWU9Im1heEFtdENvZGVWYWx1ZSIgdmFsdWU9Ijk5OTk5OTk5OTk5OS45OSIgcmVhZG9ubHkgc3R5bGU9ImJhY2tncm91bmQ6ICNmMGYwZjA7Ij4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICBgOwogICAgICAgICAgICBhY2Nlc3NDb250YWluZXIuYXBwZW5kQ2hpbGQoYWNjZXNzRGl2KTsKCiAgICAgICAgICAgIC8vIFVwZGF0ZSBkcm9wZG93bnMgd2l0aCBwb2xpY3ktc3BlY2lmaWMgYW1vdW50IGNvZGUgaWYgZXhpc3RzCiAgICAgICAgICAgIHVwZGF0ZUFtb3VudENvZGVEcm9wZG93bnMocG9saWN5SWQpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQWNjZXNzKGFjY2Vzc0lkKSB7CiAgICAgICAgICAgIGlmIChjb25maXJtKCdSZW1vdmUgdGhpcyBhY2Nlc3MgcmVjb3JkPycpKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhY2Nlc3NJZCkucmVtb3ZlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNvbGxlY3RGb3JtRGF0YSgpIHsKICAgICAgICAgICAgY29uc3QgY2hhbm5lbHMgPSBbXTsKICAgICAgICAgICAgY29uc3QgY2hhbm5lbFNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYW5uZWwtc2VjdGlvbicpOwoKICAgICAgICAgICAgY2hhbm5lbFNlY3Rpb25zLmZvckVhY2goY2hhbm5lbFNlY3Rpb24gPT4gewogICAgICAgICAgICAgICAgY29uc3QgY2hhbm5lbElkID0gY2hhbm5lbFNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImNoYW5uZWxJZCJdJykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCBwb2xpY2llcyA9IFtdOwoKICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeVNlY3Rpb25zID0gY2hhbm5lbFNlY3Rpb24ucXVlcnlTZWxlY3RvckFsbCgnLnBvbGljeS1zZWN0aW9uJyk7CiAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9ucy5mb3JFYWNoKHBvbGljeVNlY3Rpb24gPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZUlkOiBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJzZXJ2aWNlSWQiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBlbmRQb2ludDogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iZW5kUG9pbnQiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBodHRwTWV0aG9kOiBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJodHRwTWV0aG9kIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgb3V0RW5kUG9pbnQ6IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im91dEVuZFBvaW50Il0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZURlc2M6IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InNlcnZpY2VEZXNjIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgYXV0aExldmVsUmVxdWlyZWQ6IHBhcnNlSW50KHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImF1dGhMZXZlbFJlcXVpcmVkIl0nKS52YWx1ZSksCiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25WYWxSZXF1aXJlZDogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ic2Vzc2lvblZhbFJlcXVpcmVkIl0nKS52YWx1ZSA9PT0gJ3RydWUnLAogICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZWxpc3RlZDogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0id2hpdGVsaXN0ZWQiXScpLnZhbHVlID09PSAndHJ1ZScsCiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93ZWRTY29wZTogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYWxsb3dlZFNjb3BlIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgdHhuQXV0aENvbmNlcm5zOiBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ0eG5BdXRoQ29uY2VybnMiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NlczogW10KICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYW1vdW50IGNvZGUgY29uZmlnIGlmIHByZXNlbnQKICAgICAgICAgICAgICAgICAgICBjb25zdCBhbW91bnRDb2RlSW5wdXQgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhbW91bnRDb2RlIl0nKTsKICAgICAgICAgICAgICAgICAgICBpZiAoYW1vdW50Q29kZUlucHV0ICYmIGFtb3VudENvZGVJbnB1dC52YWx1ZS50cmltKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5LmFtb3VudENvZGVDb25maWcgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnRDb2RlOiBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhbW91bnRDb2RlIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudENvZGVEZXNjOiBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhbW91bnRDb2RlRGVzYyJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnRDb2RlU3ViRGVzYzogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYW1vdW50Q29kZVN1YkRlc2MiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZURlc2M6IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImFtb3VudFNlcnZpY2VEZXNjIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudENvZGVWYWx1ZTogcGFyc2VGbG9hdChwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhbW91bnRDb2RlVmFsdWUiXScpLnZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gQ29sbGVjdCBwb2xpY3ktbGV2ZWwgbm90aWZpY2F0aW9ucwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeU5vdGlmaWNhdGlvbnMgPSBbXTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2xpY3lOb3RpZlNlY3Rpb25zID0gcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yQWxsKCcubm90aWZpY2F0aW9ucy1jb250YWluZXIgLm5vdGlmaWNhdGlvbi1zZWN0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgcG9saWN5Tm90aWZTZWN0aW9ucy5mb3JFYWNoKG5vdGlmaWNhdGlvblNlY3Rpb24gPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub3RpZmljYXRpb24gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25UeXBlOiBub3RpZmljYXRpb25TZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJub3RpZmljYXRpb25UeXBlIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhUeXBlOiBub3RpZmljYXRpb25TZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhdXRoVHlwZSJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZUlkOiBub3RpZmljYXRpb25TZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ0ZW1wbGF0ZUlkIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUGFyYW1zOiBub3RpZmljYXRpb25TZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ0ZW1wbGF0ZVBhcmFtcyJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc01hbmRhdG9yeTogbm90aWZpY2F0aW9uU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iaXNNYW5kYXRvcnkiXScpLnZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeU5vdGlmaWNhdGlvbnMucHVzaChub3RpZmljYXRpb24pOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBjb25zdCBhY2Nlc3NTZWN0aW9ucyA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvckFsbCgnLmFjY2Vzcy1zZWN0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgYWNjZXNzU2VjdGlvbnMuZm9yRWFjaChhY2Nlc3NTZWN0aW9uID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29vbGluZ1BlcmlvZENoZWNrUmVxdWlyZWQ6IGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImNvb2xpbmdQZXJpb2RDaGVja1JlcXVpcmVkIl0nKS52YWx1ZSA9PT0gJ3RydWUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHhuQXV0aFJlcXVpcmVkOiBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ0eG5BdXRoUmVxdWlyZWQiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uUGFyYW1NYXA6IGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im5vdGlmaWNhdGlvblBhcmFtTWFwIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbkRldGxzOiBbLi4ucG9saWN5Tm90aWZpY2F0aW9uc10sIC8vIENvcHkgcG9saWN5LWxldmVsIG5vdGlmaWNhdGlvbnMgdG8gZWFjaCBhY2Nlc3MKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25Db25kaXRpb25zTWFwOiBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJzZXNzaW9uQ29uZGl0aW9uc01hcCJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlQ29uZGl0aW9uc01hcDogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0icHJvZmlsZUNvbmRpdGlvbnNNYXAiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdENvbmRpdGlvbnNNYXA6IGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InJlcXVlc3RDb25kaXRpb25zTWFwIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RDb25kaXRpb25zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlza0luZGljYXRvcjogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0icmlza0luZGljYXRvciJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluQW10OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtdENvZGU6IGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im1pbkFtdENvZGUiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbXRDb2RlVmFsdWU6IHBhcnNlRmxvYXQoYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibWluQW10Q29kZVZhbHVlIl0nKS52YWx1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEFtdDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbXRDb2RlOiBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJtYXhBbXRDb2RlIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW10Q29kZVZhbHVlOiBwYXJzZUZsb2F0KGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im1heEFtdENvZGVWYWx1ZSJdJykudmFsdWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0YWxDb2RlOiBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJwb3N0YWxDb2RlIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVMaW1pdDogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0idXBkYXRlTGltaXQiXScpLnZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3kuYWNjZXNzZXMucHVzaChhY2Nlc3MpOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBwb2xpY2llcy5wdXNoKHBvbGljeSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjaGFubmVscy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBjaGFubmVsSWQ6IGNoYW5uZWxJZCwKICAgICAgICAgICAgICAgICAgICBwb2xpY2llczogcG9saWNpZXMKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHJldHVybiB7IHBvbGljaWVzTWFwczogY2hhbm5lbHMgfTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlSlNPTigpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBjb2xsZWN0Rm9ybURhdGEoKTsKICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKTsKICAgICAgICAgICAgICAgIGN1cnJlbnRPdXRwdXQgPSBqc29uOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ291dHB1dFR5cGUnKS52YWx1ZSA9ICdqc29uJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdXRwdXRCb3gnKS50ZXh0Q29udGVudCA9IGpzb247CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBhbGVydCgnRXJyb3IgZ2VuZXJhdGluZyBKU09OOiAnICsgZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlU1FMKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGNvbGxlY3RGb3JtRGF0YSgpOwogICAgICAgICAgICAgICAgbGV0IHNxbCA9ICctLSBHZW5lcmF0ZWQgU1FMIEluc2VydCBTdGF0ZW1lbnRzXG4nOwogICAgICAgICAgICAgICAgc3FsICs9ICctLSBHZW5lcmF0ZWQgb246ICcgKyBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgKyAnXG5cbic7CgogICAgICAgICAgICAgICAgZGF0YS5wb2xpY2llc01hcHMuZm9yRWFjaChjaGFubmVsID0+IHsKICAgICAgICAgICAgICAgICAgICBjaGFubmVsLnBvbGljaWVzLmZvckVhY2gocG9saWN5ID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGAtLSBQb2xpY3k6ICR7cG9saWN5LnNlcnZpY2VJZH1cbmA7CiAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgLS0gYCArICctJy5yZXBlYXQoODApICsgJ1xuXG4nOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gMS4gSW5zZXJ0IHBvbGljeS1zcGVjaWZpYyBhbW91bnQgY29kZSBmaXJzdCAoaWYgcHJlc2VudCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvbGljeS5hbW91bnRDb2RlQ29uZmlnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYC0tIFBvbGljeS1TcGVjaWZpYyBBbW91bnQgQ29kZSBmb3IgJHtwb2xpY3kuc2VydmljZUlkfVxuYDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgSU5TRVJUIElHTk9SRSBJTlRPIFxgYW1vdW50X2NvZGVfbWFzdGVyXGAgKFxgQU1PVU5UX0NPREVcYCwgXGBBTU9VTlRfQ09ERV9ERVNDXGAsIFxgQU1PVU5UX0NPREVfU1VCX0RFU0NcYCwgXGBTRVJWSUNFX0RFU0NcYCwgXGBBTU9VTlRfQ09ERV9WQUxVRVxgLCBcYENSRUFURURfQllfVVNFUlxgLCBcYENSRUFURURfREFURVxgLCBcYFVQREFURURfQllfVVNFUlxgLCBcYFVQREFURURfREFURVxgLCBcYE1BS0VSX1VTRVJcYCwgXGBBTU9VTlRfREZMVF9WQUxVRVxgLCBcYEFNT1VOVF9BQ0xfVkFMVUVcYCwgXGBBTU9VTlRfQUNMX0ZMQUdcYClcbmA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYFZBTFVFUyAoJyR7cG9saWN5LmFtb3VudENvZGVDb25maWcuYW1vdW50Q29kZX0nLCAnJHtwb2xpY3kuYW1vdW50Q29kZUNvbmZpZy5hbW91bnRDb2RlRGVzYy5yZXBsYWNlKC8nL2csICInJyIpfScsICcke3BvbGljeS5hbW91bnRDb2RlQ29uZmlnLmFtb3VudENvZGVTdWJEZXNjLnJlcGxhY2UoLycvZywgIicnIil9JywgJyR7cG9saWN5LmFtb3VudENvZGVDb25maWcuc2VydmljZURlc2MucmVwbGFjZSgvJy9nLCAiJyciKX0nLCAke3BvbGljeS5hbW91bnRDb2RlQ29uZmlnLmFtb3VudENvZGVWYWx1ZX0sICdTWVNURU0nLCBDVVJSRU5UX1RJTUVTVEFNUCwgJ1NZU1RFTScsIENVUlJFTlRfVElNRVNUQU1QLCAnU1lTVEVNJywgJHtwb2xpY3kuYW1vdW50Q29kZUNvbmZpZy5hbW91bnRDb2RlVmFsdWV9LCAke3BvbGljeS5hbW91bnRDb2RlQ29uZmlnLmFtb3VudENvZGVWYWx1ZX0sIDEpO1xuXG5gOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAvLyAyLiBHZXQgb3IgY3JlYXRlIG5vdGlmaWNhdGlvbiBJRAogICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9saWN5LmFjY2Vzc2VzICYmIHBvbGljeS5hY2Nlc3Nlcy5sZW5ndGggPiAwICYmIHBvbGljeS5hY2Nlc3Nlc1swXS5ub3RpZmljYXRpb25EZXRscyAmJiBwb2xpY3kuYWNjZXNzZXNbMF0ubm90aWZpY2F0aW9uRGV0bHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGBTRVQgQExJTUlUX05PVElGSUNBVElPTl9JRCA9IChTRUxFQ1QgTUFYKE5PVElGSUNBVElPTl9JRCkrMSBGUk9NIFJJU0tfTUFUUklYX05PVElGSUNBVElPTl9NQVNURVIpO1xuXG5gOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDMuIEluc2VydCBub3RpZmljYXRpb25zCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3kuYWNjZXNzZXNbMF0ubm90aWZpY2F0aW9uRGV0bHMuZm9yRWFjaCgobm90aWYsIG5vdGlmSWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGBJTlNFUlQgSU5UTyBcYHJpc2tfbWF0cml4X25vdGlmaWNhdGlvbl9tYXN0ZXJcYCAoXGBOT1RJRklDQVRJT05fSURcYCwgXGBTRVJWSUNFX0lEXGAsIFxgTk9USUZJQ0FUSU9OX1RZUEVcYCwgXGBURU1QTEFURV9JRFxgLCBcYFRFTVBMQVRFX1BBUkFNU1xgLCBcYElTX01BTkRBVE9SWVxgLCBcYENSRUFURURfQllfVVNFUlxgLCBcYENSRUFURURfREFURVxgLCBcYFVQREFURURfQllfVVNFUlxgLCBcYFVQREFURURfREFURVxgLCBcYEFVVEhfVFlQRVxgLCBcYE1BS0VSX1VTRVJcYClcbmA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGBWQUxVRVMgKEBMSU1JVF9OT1RJRklDQVRJT05fSUQsICcke3BvbGljeS5zZXJ2aWNlSWR9JywgJyR7bm90aWYubm90aWZpY2F0aW9uVHlwZX0nLCAnJHtub3RpZi50ZW1wbGF0ZUlkfScsICcke25vdGlmLnRlbXBsYXRlUGFyYW1zfScsICR7bm90aWYuaXNNYW5kYXRvcnkgPT09ICd0cnVlJyA/IDEgOiAwfSwgJ1NZU1RFTScsIENVUlJFTlRfVElNRVNUQU1QLCAnU1lTVEVNJywgQ1VSUkVOVF9USU1FU1RBTVAsICcke25vdGlmLmF1dGhUeXBlfScsICdTWVNURU0nKTtcblxuYDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAvLyA0LiBJbnNlcnQgcmVxdWVzdCBjb25kaXRpb25zIGFuZCBhY2Nlc3MgcmVjb3JkcyBmb3IgZWFjaCBhY2Nlc3MKICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5LmFjY2Vzc2VzLmZvckVhY2goKGFjY2VzcywgYWNjZXNzSWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnNlcnQgcmVxdWVzdCBjb25kaXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgSU5TRVJUIElOVE8gXGByaXNrX21hdHJpeF9ycWNvbmRpdGlvbl9tYXN0ZXJcYCAoXGBTRVJWSUNFX0lEXGAsIFxgTUlOX0FNVF9DT0RFXGAsIFxgTUFYX0FNVF9DT0RFXGAsIFxgUE9TVEFMX0NPREVcYCwgXGBSSVNLX0lORElDQVRPUlxgLCBcYFVQREFURV9MSU1JVFxgLCBcYENSRUFURURfQllfVVNFUlxgLCBcYENSRUFURURfREFURVxgLCBcYFVQREFURURfQllfVVNFUlxgLCBcYFVQREFURURfREFURVxgLCBcYE1BS0VSX1VTRVJcYClcbmA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYFZBTFVFUyAoJyR7cG9saWN5LnNlcnZpY2VJZH0nLCAnJHthY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMubWluQW10LmFtdENvZGV9JywgJyR7YWNjZXNzLnJlcXVlc3RDb25kaXRpb25zLm1heEFtdC5hbXRDb2RlfScsICcke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5wb3N0YWxDb2RlfScsICcke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5yaXNrSW5kaWNhdG9yfScsICcke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy51cGRhdGVMaW1pdH0nLCAnU1lTVEVNJywgQ1VSUkVOVF9USU1FU1RBTVAsICdTWVNURU0nLCBDVVJSRU5UX1RJTUVTVEFNUCwgJ1NZU1RFTScpO1xuXG5gOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluc2VydCBhY2Nlc3MgcmVjb3JkIHdpdGggbmVzdGVkIFNFTEVDVCBxdWVyaWVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYElOU0VSVCBJTlRPIFxgcmlza19tYXRyaXhfYWNjZXNzX21hc3RlclxgIChcYFNFUlZJQ0VfSURcYCwgXGBDT09MSU5HX1BFUklPRF9DSEVDS19SRVFcYCwgXGBUUkFOU0FDVElPTkFMX0FVVEhfUkVRXGAsIFxgTk9USUZJQ0FUSU9OX0lEXGAsIFxgTk9USUZJQ0FUSU9OX0ZJRUxEU19NQVBcYCwgXGBLRVlfU0VTU0lPTl9DT05ESVRJT05TXGAsIFxgS0VZX1BST0ZJTEVfQ09ORElUSU9OU1xgLCBcYEtFWV9SRVFVRVNUX0NPTkRJVElPTlNcYCwgXGBSRVFVRVNUX0NPTkRJVElPTlNfSURcYCwgXGBDUkVBVEVEX0JZX1VTRVJcYCwgXGBDUkVBVEVEX0RBVEVcYCwgXGBVUERBVEVEX0JZX1VTRVJcYCwgXGBVUERBVEVEX0RBVEVcYCwgXGBNQUtFUl9VU0VSXGApXG5gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGBWQUxVRVMgKCcke3BvbGljeS5zZXJ2aWNlSWR9JywgJHthY2Nlc3MuY29vbGluZ1BlcmlvZENoZWNrUmVxdWlyZWQgPyAxIDogMH0sICcke2FjY2Vzcy50eG5BdXRoUmVxdWlyZWR9JywgYDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2UgbmVzdGVkIFNFTEVDVCBmb3IgTk9USUZJQ0FUSU9OX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYChzZWxlY3QgTk9USUZJQ0FUSU9OX0lEIGZyb20gcmlza19tYXRyaXhfbm90aWZpY2F0aW9uX21hc3RlciB3aGVyZSBTRVJWSUNFX0lEPScke3BvbGljeS5zZXJ2aWNlSWR9JyBsaW1pdCAxKSwgYDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYCcke2FjY2Vzcy5ub3RpZmljYXRpb25QYXJhbU1hcC5yZXBsYWNlKC8nL2csICInJyIpfScsICcke2FjY2Vzcy5zZXNzaW9uQ29uZGl0aW9uc01hcH0nLCAnJHthY2Nlc3MucHJvZmlsZUNvbmRpdGlvbnNNYXB9JywgJyR7YWNjZXNzLnJlcXVlc3RDb25kaXRpb25zTWFwfScsIGA7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXNlIG5lc3RlZCBTRUxFQ1QgZm9yIFJFUVVFU1RfQ09ORElUSU9OU19JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGAoc2VsZWN0IFJFUVVFU1RfQ09ORElUSU9OU19JRCBmcm9tIHJpc2tfbWF0cml4X3JxY29uZGl0aW9uX21hc3RlciB3aGVyZSBzZXJ2aWNlX2lkPScke3BvbGljeS5zZXJ2aWNlSWR9JyBhbmQgbWluX2FtdF9jb2RlPScke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5taW5BbXQuYW10Q29kZX0nIGFuZCBtYXhfYW10X2NvZGU9JyR7YWNjZXNzLnJlcXVlc3RDb25kaXRpb25zLm1heEFtdC5hbXRDb2RlfScpLCBgOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgJ1NZU1RFTScsIENVUlJFTlRfVElNRVNUQU1QLCAnU1lTVEVNJywgQ1VSUkVOVF9USU1FU1RBTVAsICdTWVNURU0nKTtcblxuYDsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyA1LiBJbnNlcnQgcG9saWN5IG1hc3RlciBsYXN0CiAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgSU5TRVJUIElOVE8gXGByaXNrX21hdHJpeF9wb2xpY3lfbWFzdGVyXGAgKFxgUE9MSUNZX1RZUEVcYCwgXGBORVhUR0VOX0ZMQUdcYCwgXGBTRVJWSUNFX0lEXGAsIFxgQ0hBTk5FTF9JRFxgLCBcYEVORF9QT0lOVFxgLCBcYEhUVFBfTUVUSE9EXGAsIFxgU0VSVklDRV9ERVNDXGAsIFxgQVVUSF9MRVZFTF9SRVFcYCwgXGBTRVNfVkFMRF9SRVFcYCwgXGBXSElURUxJU1RFRFxgLCBcYEFMTE9XRURfU0NPUEVcYCwgXGBUWE5fQVVUSF9DT05DRVJOU1xgLCBcYENSRUFURURfQllfVVNFUlxgLCBcYENSRUFURURfREFURVxgLCBcYFVQREFURURfQllfVVNFUlxgLCBcYFVQREFURURfREFURVxgLCBcYE9VVF9FTkRfUE9JTlRcYCwgXGBNQUtFUl9VU0VSXGApXG5gOwogICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYFZBTFVFUyAoJzk3JywgMSwgJyR7cG9saWN5LnNlcnZpY2VJZH0nLCAnJHtjaGFubmVsLmNoYW5uZWxJZH0nLCAnJHtwb2xpY3kuZW5kUG9pbnR9JywgJyR7cG9saWN5Lmh0dHBNZXRob2R9JywgJyR7cG9saWN5LnNlcnZpY2VEZXNjLnJlcGxhY2UoLycvZywgIicnIil9JywgJHtwb2xpY3kuYXV0aExldmVsUmVxdWlyZWR9LCAke3BvbGljeS5zZXNzaW9uVmFsUmVxdWlyZWQgPyAxIDogMH0sICR7cG9saWN5LndoaXRlbGlzdGVkID8gMSA6IDB9LCAnJHtwb2xpY3kuYWxsb3dlZFNjb3BlfScsICcke3BvbGljeS50eG5BdXRoQ29uY2VybnN9JywgJ1NZU1RFTScsIENVUlJFTlRfVElNRVNUQU1QLCAnU1lTVEVNJywgQ1VSUkVOVF9USU1FU1RBTVAsICcke3BvbGljeS5vdXRFbmRQb2ludH0nLCAnU1lTVEVNJyk7XG5cbmA7CgogICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gJy0tICcgKyAnLScucmVwZWF0KDgwKSArICdcblxuJzsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGN1cnJlbnRPdXRwdXQgPSBzcWw7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3V0cHV0VHlwZScpLnZhbHVlID0gJ3NxbCc7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3V0cHV0Qm94JykudGV4dENvbnRlbnQgPSBzcWw7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBhbGVydCgnRXJyb3IgZ2VuZXJhdGluZyBTUUw6ICcgKyBlcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gb3BlbkxvYWRNb2RhbCgpIHsKICAgICAgICAgICAgY29uc3QgZGVmYXVsdEpzb25TdHJpbmcgPSBgewogICJwb2xpY2llc01hcHMiOiBbCiAgICB7CiAgICAgICJjaGFubmVsSWQiOiAiU0dfTUIiLAogICAgICAicG9saWNpZXMiOiBbCgogICAgICBdCiAgICB9CiAgXQp9YDsKCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgY29uc3QganNvbklucHV0VGV4dGFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNvbklucHV0Jyk7CiAgICAgICAgICAgIGlmICghanNvbklucHV0VGV4dGFyZWEudmFsdWUudHJpbSgpKSB7CiAgICAgICAgICAgICAgICBqc29uSW5wdXRUZXh0YXJlYS52YWx1ZSA9IGRlZmF1bHRKc29uU3RyaW5nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGpzb25JbnB1dFRleHRhcmVhLmZvY3VzKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjbG9zZUxvYWRNb2RhbCgpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRNb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBsb2FkRnJvbVRleHRhcmVhKCkgewogICAgICAgICAgICBjb25zdCBqc29uVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc29uSW5wdXQnKS52YWx1ZS50cmltKCk7CgogICAgICAgICAgICBpZiAoIWpzb25UZXh0KSB7CiAgICAgICAgICAgICAgICBhbGVydCgnUGxlYXNlIHBhc3RlIEpTT04gY29udGVudCBmaXJzdC4nKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKGpzb25UZXh0KTsKICAgICAgICAgICAgICAgIHBvcHVsYXRlRm9ybShqc29uKTsKICAgICAgICAgICAgICAgIGNsb3NlTG9hZE1vZGFsKCk7CiAgICAgICAgICAgICAgICBhbGVydCgnSlNPTiBsb2FkZWQgc3VjY2Vzc2Z1bGx5IScpOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgYWxlcnQoJ0Vycm9yIHBhcnNpbmcgSlNPTjogJyArIGVycm9yLm1lc3NhZ2UgKyAnXG5cblBsZWFzZSBjaGVjayB5b3VyIEpTT04gZm9ybWF0LicpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBDbG9zZSBtb2RhbCB3aGVuIGNsaWNraW5nIG91dHNpZGUKICAgICAgICB3aW5kb3cub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRNb2RhbCcpOwogICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09IG1vZGFsKSB7CiAgICAgICAgICAgICAgICBjbG9zZUxvYWRNb2RhbCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwb3B1bGF0ZUZvcm0oZGF0YSkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhbm5lbHNDb250YWluZXInKS5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgY2hhbm5lbENvdW50ZXIgPSAwOwogICAgICAgICAgICBwb2xpY3lDb3VudGVyID0gMDsKICAgICAgICAgICAgYWNjZXNzQ291bnRlciA9IDA7CiAgICAgICAgICAgIG5vdGlmaWNhdGlvbkNvdW50ZXIgPSAwOwoKICAgICAgICAgICAgaWYgKGRhdGEucG9saWNpZXNNYXBzICYmIEFycmF5LmlzQXJyYXkoZGF0YS5wb2xpY2llc01hcHMpKSB7CiAgICAgICAgICAgICAgICBkYXRhLnBvbGljaWVzTWFwcy5mb3JFYWNoKGNoYW5uZWxEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICBhZGRDaGFubmVsKCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhbm5lbFNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYW5uZWwtc2VjdGlvbicpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYW5uZWxTZWN0aW9uID0gY2hhbm5lbFNlY3Rpb25zW2NoYW5uZWxTZWN0aW9ucy5sZW5ndGggLSAxXTsKCiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbFNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImNoYW5uZWxJZCJdJykudmFsdWUgPSBjaGFubmVsRGF0YS5jaGFubmVsSWQgfHwgJyc7CgogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljaWVzQ29udGFpbmVyID0gY2hhbm5lbFNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnBvbGljaWVzLWNvbnRhaW5lcicpOwogICAgICAgICAgICAgICAgICAgIHBvbGljaWVzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnOwoKICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbm5lbERhdGEucG9saWNpZXMgJiYgQXJyYXkuaXNBcnJheShjaGFubmVsRGF0YS5wb2xpY2llcykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbERhdGEucG9saWNpZXMuZm9yRWFjaChwb2xpY3lEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYW5uZWxJZCA9IGNoYW5uZWxTZWN0aW9uLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkUG9saWN5KGNoYW5uZWxJZCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9saWN5U2VjdGlvbnMgPSBwb2xpY2llc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcucG9saWN5LXNlY3Rpb24nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeVNlY3Rpb24gPSBwb2xpY3lTZWN0aW9uc1twb2xpY3lTZWN0aW9ucy5sZW5ndGggLSAxXTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJzZXJ2aWNlSWQiXScpLnZhbHVlID0gcG9saWN5RGF0YS5zZXJ2aWNlSWQgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJlbmRQb2ludCJdJykudmFsdWUgPSBwb2xpY3lEYXRhLmVuZFBvaW50IHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iaHR0cE1ldGhvZCJdJykudmFsdWUgPSBwb2xpY3lEYXRhLmh0dHBNZXRob2QgfHwgJ1BPU1QnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ib3V0RW5kUG9pbnQiXScpLnZhbHVlID0gcG9saWN5RGF0YS5vdXRFbmRQb2ludCB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InNlcnZpY2VEZXNjIl0nKS52YWx1ZSA9IHBvbGljeURhdGEuc2VydmljZURlc2MgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhdXRoTGV2ZWxSZXF1aXJlZCJdJykudmFsdWUgPSBwb2xpY3lEYXRhLmF1dGhMZXZlbFJlcXVpcmVkIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJzZXNzaW9uVmFsUmVxdWlyZWQiXScpLnZhbHVlID0gcG9saWN5RGF0YS5zZXNzaW9uVmFsUmVxdWlyZWQgPyAndHJ1ZScgOiAnZmFsc2UnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0id2hpdGVsaXN0ZWQiXScpLnZhbHVlID0gcG9saWN5RGF0YS53aGl0ZWxpc3RlZCA/ICd0cnVlJyA6ICdmYWxzZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhbGxvd2VkU2NvcGUiXScpLnZhbHVlID0gcG9saWN5RGF0YS5hbGxvd2VkU2NvcGUgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ0eG5BdXRoQ29uY2VybnMiXScpLnZhbHVlID0gcG9saWN5RGF0YS50eG5BdXRoQ29uY2VybnMgfHwgJ04nOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBwb2xpY3kgaGVhZGVyIHdpdGggbG9hZGVkIHZhbHVlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUG9saWN5SGVhZGVyKHBvbGljeVNlY3Rpb24uaWQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExvYWQgYW1vdW50IGNvZGUgY29uZmlnIGlmIHByZXNlbnQgb3IgaW5mZXIgZnJvbSBhY2Nlc3MgcmVjb3JkcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9saWN5SWQgPSBwb2xpY3lTZWN0aW9uLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1c3RvbUFtb3VudENvZGUgPSBudWxsOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGFtb3VudENvZGVDb25maWcgaXMgZXhwbGljaXRseSBwcm92aWRlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvbGljeURhdGEuYW1vdW50Q29kZUNvbmZpZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbUFtb3VudENvZGUgPSBwb2xpY3lEYXRhLmFtb3VudENvZGVDb25maWc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluZmVyIGZyb20gYWNjZXNzIHJlY29yZHMgLSBjaGVjayBpZiBhbnkgY3VzdG9tIGNvZGVzIGFyZSB1c2VkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvbGljeURhdGEuYWNjZXNzZXMgJiYgcG9saWN5RGF0YS5hY2Nlc3Nlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYWNjZXNzIG9mIHBvbGljeURhdGEuYWNjZXNzZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBtaW5BbXQgY29kZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMubWluQW10ICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5taW5BbXQuYW10Q29kZSAhPT0gJ0RFRkFVTFRfTUlOX0FNVCcgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzLnJlcXVlc3RDb25kaXRpb25zLm1pbkFtdC5hbXRDb2RlICE9PSAnREVGQVVMVF9NQVhfQU1UX05FWFRHRU4nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbUFtb3VudENvZGUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnRDb2RlOiBhY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMubWluQW10LmFtdENvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnRDb2RlVmFsdWU6IGFjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5taW5BbXQuYW10Q29kZVZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50Q29kZURlc2M6ICdQb2xpY3ktc3BlY2lmaWMgYW1vdW50IGNvZGUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50Q29kZVN1YkRlc2M6ICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZURlc2M6IHBvbGljeURhdGEuc2VydmljZURlc2MgfHwgJycKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIG1heEFtdCBjb2RlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5tYXhBbXQgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzLnJlcXVlc3RDb25kaXRpb25zLm1heEFtdC5hbXRDb2RlICE9PSAnREVGQVVMVF9NSU5fQU1UJyAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMubWF4QW10LmFtdENvZGUgIT09ICdERUZBVUxUX01BWF9BTVRfTkVYVEdFTicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tQW1vdW50Q29kZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudENvZGU6IGFjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5tYXhBbXQuYW10Q29kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudENvZGVWYWx1ZTogYWNjZXNzLnJlcXVlc3RDb25kaXRpb25zLm1heEFtdC5hbXRDb2RlVmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnRDb2RlRGVzYzogJ1BvbGljeS1zcGVjaWZpYyBhbW91bnQgY29kZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnRDb2RlU3ViRGVzYzogJycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlRGVzYzogcG9saWN5RGF0YS5zZXJ2aWNlRGVzYyB8fCAnJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgY3VzdG9tIGFtb3VudCBjb2RlIGZvdW5kLCBzaG93IGFuZCBwb3B1bGF0ZSB0aGUgZm9ybQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1c3RvbUFtb3VudENvZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FtdGNvZGVmb3JtXycgKyBwb2xpY3lJZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FtdGNvZGVidG5fJyArIHBvbGljeUlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9ICfiiJIgUmVtb3ZlIEFtb3VudCBDb2RlJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnc2Vjb25kYXJ5Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2RhbmdlcicpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQb3B1bGF0ZSBhbW91bnQgY29kZSBmaWVsZHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhbW91bnRDb2RlIl0nKS52YWx1ZSA9IGN1c3RvbUFtb3VudENvZGUuYW1vdW50Q29kZSB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhbW91bnRDb2RlRGVzYyJdJykudmFsdWUgPSBjdXN0b21BbW91bnRDb2RlLmFtb3VudENvZGVEZXNjIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImFtb3VudENvZGVTdWJEZXNjIl0nKS52YWx1ZSA9IGN1c3RvbUFtb3VudENvZGUuYW1vdW50Q29kZVN1YkRlc2MgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYW1vdW50U2VydmljZURlc2MiXScpLnZhbHVlID0gY3VzdG9tQW1vdW50Q29kZS5zZXJ2aWNlRGVzYyB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhbW91bnRDb2RlVmFsdWUiXScpLnZhbHVlID0gY3VzdG9tQW1vdW50Q29kZS5hbW91bnRDb2RlVmFsdWUgfHwgJyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBkcm9wZG93bnMgaW1tZWRpYXRlbHkgYWZ0ZXIgbG9hZGluZyBhbW91bnQgY29kZSBjb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVBbW91bnRDb2RlRHJvcGRvd25zKHBvbGljeUlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGVhciBkZWZhdWx0IG5vdGlmaWNhdGlvbiBhbmQgcG9wdWxhdGUgZnJvbSBmaXJzdCBhY2Nlc3MgcmVjb3JkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub3RpZmljYXRpb25zQ29udGFpbmVyID0gcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcubm90aWZpY2F0aW9ucy1jb250YWluZXInKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbnNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvbGljeURhdGEuYWNjZXNzZXMgJiYgcG9saWN5RGF0YS5hY2Nlc3Nlcy5sZW5ndGggPiAwICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5RGF0YS5hY2Nlc3Nlc1swXS5ub3RpZmljYXRpb25EZXRscyAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkocG9saWN5RGF0YS5hY2Nlc3Nlc1swXS5ub3RpZmljYXRpb25EZXRscykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lEYXRhLmFjY2Vzc2VzWzBdLm5vdGlmaWNhdGlvbkRldGxzLmZvckVhY2gobm90aWZEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9saWN5SWQgPSBwb2xpY3lTZWN0aW9uLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGROb3RpZmljYXRpb24ocG9saWN5SWQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90aWZTZWN0aW9ucyA9IG5vdGlmaWNhdGlvbnNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLm5vdGlmaWNhdGlvbi1zZWN0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGlmU2VjdGlvbiA9IG5vdGlmU2VjdGlvbnNbbm90aWZTZWN0aW9ucy5sZW5ndGggLSAxXTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibm90aWZpY2F0aW9uVHlwZSJdJykudmFsdWUgPSBub3RpZkRhdGEubm90aWZpY2F0aW9uVHlwZSB8fCAnU01TJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhdXRoVHlwZSJdJykudmFsdWUgPSBub3RpZkRhdGEuYXV0aFR5cGUgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0idGVtcGxhdGVJZCJdJykudmFsdWUgPSBub3RpZkRhdGEudGVtcGxhdGVJZCB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ0ZW1wbGF0ZVBhcmFtcyJdJykudmFsdWUgPSBub3RpZkRhdGEudGVtcGxhdGVQYXJhbXMgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iaXNNYW5kYXRvcnkiXScpLnZhbHVlID0gbm90aWZEYXRhLmlzTWFuZGF0b3J5IHx8ICd0cnVlJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY2Nlc3Nlc0NvbnRhaW5lciA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignLmFjY2Vzc2VzLWNvbnRhaW5lcicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzZXNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvbGljeURhdGEuYWNjZXNzZXMgJiYgQXJyYXkuaXNBcnJheShwb2xpY3lEYXRhLmFjY2Vzc2VzKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeURhdGEuYWNjZXNzZXMuZm9yRWFjaChhY2Nlc3NEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9saWN5SWQgPSBwb2xpY3lTZWN0aW9uLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRBY2Nlc3MocG9saWN5SWQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzU2VjdGlvbnMgPSBhY2Nlc3Nlc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuYWNjZXNzLXNlY3Rpb24nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzU2VjdGlvbiA9IGFjY2Vzc1NlY3Rpb25zW2FjY2Vzc1NlY3Rpb25zLmxlbmd0aCAtIDFdOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iY29vbGluZ1BlcmlvZENoZWNrUmVxdWlyZWQiXScpLnZhbHVlID0gYWNjZXNzRGF0YS5jb29saW5nUGVyaW9kQ2hlY2tSZXF1aXJlZCA/ICd0cnVlJyA6ICdmYWxzZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InR4bkF1dGhSZXF1aXJlZCJdJykudmFsdWUgPSBhY2Nlc3NEYXRhLnR4bkF1dGhSZXF1aXJlZCB8fCAnMCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im5vdGlmaWNhdGlvblBhcmFtTWFwIl0nKS52YWx1ZSA9IGFjY2Vzc0RhdGEubm90aWZpY2F0aW9uUGFyYW1NYXAgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InNlc3Npb25Db25kaXRpb25zTWFwIl0nKS52YWx1ZSA9IGFjY2Vzc0RhdGEuc2Vzc2lvbkNvbmRpdGlvbnNNYXAgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InByb2ZpbGVDb25kaXRpb25zTWFwIl0nKS52YWx1ZSA9IGFjY2Vzc0RhdGEucHJvZmlsZUNvbmRpdGlvbnNNYXAgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InJlcXVlc3RDb25kaXRpb25zTWFwIl0nKS52YWx1ZSA9IGFjY2Vzc0RhdGEucmVxdWVzdENvbmRpdGlvbnNNYXAgfHwgJyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjZXNzRGF0YS5yZXF1ZXN0Q29uZGl0aW9ucykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmMgPSBhY2Nlc3NEYXRhLnJlcXVlc3RDb25kaXRpb25zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0icmlza0luZGljYXRvciJdJykudmFsdWUgPSByYy5yaXNrSW5kaWNhdG9yIHx8ICcwJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InBvc3RhbENvZGUiXScpLnZhbHVlID0gcmMucG9zdGFsQ29kZSB8fCAnMCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ1cGRhdGVMaW1pdCJdJykudmFsdWUgPSByYy51cGRhdGVMaW1pdCB8fCAnMCc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJjLm1pbkFtdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pbkRyb3Bkb3duID0gYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibWluQW10Q29kZSJdJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWluQ29kZSA9IHJjLm1pbkFtdC5hbXRDb2RlIHx8ICdERUZBVUxUX01JTl9BTVQnOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBvcHRpb24gZXhpc3RzLCBpZiBub3QgYWRkIGl0IChmb3IgY3VzdG9tIGNvZGVzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvcHRpb25FeGlzdHMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1pbkRyb3Bkb3duLm9wdGlvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pbkRyb3Bkb3duLm9wdGlvbnNbaV0udmFsdWUgPT09IG1pbkNvZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbkV4aXN0cyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpb25FeGlzdHMgJiYgbWluQ29kZSAhPT0gJ0RFRkFVTFRfTUlOX0FNVCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IG1pbkNvZGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnLCByYy5taW5BbXQuYW10Q29kZVZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gbWluQ29kZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluRHJvcGRvd24uYXBwZW5kQ2hpbGQob3B0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkRyb3Bkb3duLnZhbHVlID0gbWluQ29kZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVBbW91bnRWYWx1ZShtaW5Ecm9wZG93bik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJjLm1heEFtdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heERyb3Bkb3duID0gYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibWF4QW10Q29kZSJdJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF4Q29kZSA9IHJjLm1heEFtdC5hbXRDb2RlIHx8ICdERUZBVUxUX01BWF9BTVRfTkVYVEdFTic7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIG9wdGlvbiBleGlzdHMsIGlmIG5vdCBhZGQgaXQgKGZvciBjdXN0b20gY29kZXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9wdGlvbkV4aXN0cyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4RHJvcGRvd24ub3B0aW9ucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF4RHJvcGRvd24ub3B0aW9uc1tpXS52YWx1ZSA9PT0gbWF4Q29kZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uRXhpc3RzID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbkV4aXN0cyAmJiBtYXhDb2RlICE9PSAnREVGQVVMVF9NQVhfQU1UX05FWFRHRU4nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSBtYXhDb2RlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24uc2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJywgcmMubWF4QW10LmFtdENvZGVWYWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IG1heENvZGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heERyb3Bkb3duLmluc2VydEJlZm9yZShvcHRpb24sIG1heERyb3Bkb3duLmZpcnN0Q2hpbGQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4RHJvcGRvd24udmFsdWUgPSBtYXhDb2RlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUFtb3VudFZhbHVlKG1heERyb3Bkb3duKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZG93bmxvYWRPdXRwdXQoKSB7CiAgICAgICAgICAgIGlmICghY3VycmVudE91dHB1dCkgewogICAgICAgICAgICAgICAgYWxlcnQoJ1BsZWFzZSBnZW5lcmF0ZSBKU09OIG9yIFNRTCBvdXRwdXQgZmlyc3QuJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnN0IG91dHB1dFR5cGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3V0cHV0VHlwZScpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBmaWxlbmFtZSA9IG91dHB1dFR5cGUgPT09ICdqc29uJyA/ICdwb2xpY3ktY29uZmlnLmpzb24nIDogJ3BvbGljeS1pbnNlcnQuc3FsJzsKICAgICAgICAgICAgY29uc3QgbWltZVR5cGUgPSBvdXRwdXRUeXBlID09PSAnanNvbicgPyAnYXBwbGljYXRpb24vanNvbicgOiAndGV4dC9wbGFpbic7CgogICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2N1cnJlbnRPdXRwdXRdLCB7IHR5cGU6IG1pbWVUeXBlIH0pOwogICAgICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICBhLmhyZWYgPSB1cmw7CiAgICAgICAgICAgIGEuZG93bmxvYWQgPSBmaWxlbmFtZTsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgICAgICAgYS5jbGljaygpOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpOwogICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZXNldEZvcm0oKSB7CiAgICAgICAgICAgIGlmIChjb25maXJtKCdSZXNldCB0aGUgZW50aXJlIGZvcm0/JykpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFubmVsc0NvbnRhaW5lcicpLmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ291dHB1dEJveCcpLnRleHRDb250ZW50ID0gJ091dHB1dCB3aWxsIGFwcGVhciBoZXJlLi4uJzsKICAgICAgICAgICAgICAgIGN1cnJlbnRPdXRwdXQgPSAnJzsKICAgICAgICAgICAgICAgIGNoYW5uZWxDb3VudGVyID0gMDsKICAgICAgICAgICAgICAgIHBvbGljeUNvdW50ZXIgPSAwOwogICAgICAgICAgICAgICAgYWNjZXNzQ291bnRlciA9IDA7CiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25Db3VudGVyID0gMDsKICAgICAgICAgICAgICAgIGFkZENoYW5uZWwoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY29weU91dHB1dCgpIHsKICAgICAgICAgICAgaWYgKCFjdXJyZW50T3V0cHV0KSB7CiAgICAgICAgICAgICAgICBhbGVydCgnUGxlYXNlIGdlbmVyYXRlIEpTT04gb3IgU1FMIG91dHB1dCBmaXJzdC4nKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gVXNlIG1vZGVybiBjbGlwYm9hcmQgQVBJCiAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IuY2xpcGJvYXJkICYmIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KSB7CiAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChjdXJyZW50T3V0cHV0KS50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIC8vIFZpc3VhbCBmZWVkYmFjawogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGV2ZW50LnRhcmdldDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbFRleHQgPSBidG4udGV4dENvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gJ0NvcGllZCEnOwogICAgICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5iYWNrZ3JvdW5kID0gJyM0Q0FGNTAnOwoKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSBvcmlnaW5hbFRleHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5iYWNrZ3JvdW5kID0gJyc7CiAgICAgICAgICAgICAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHsKICAgICAgICAgICAgICAgICAgICBhbGVydCgnRmFpbGVkIHRvIGNvcHk6ICcgKyBlcnIpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayBmb3Igb2xkZXIgYnJvd3NlcnMKICAgICAgICAgICAgICAgIGNvbnN0IHRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTsKICAgICAgICAgICAgICAgIHRleHRhcmVhLnZhbHVlID0gY3VycmVudE91dHB1dDsKICAgICAgICAgICAgICAgIHRleHRhcmVhLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJzsKICAgICAgICAgICAgICAgIHRleHRhcmVhLnN0eWxlLm9wYWNpdHkgPSAnMCc7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRleHRhcmVhKTsKICAgICAgICAgICAgICAgIHRleHRhcmVhLnNlbGVjdCgpOwoKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBidG4gPSBldmVudC50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gYnRuLnRleHRDb250ZW50OwogICAgICAgICAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9ICdDb3BpZWQhJzsKICAgICAgICAgICAgICAgICAgICBidG4uc3R5bGUuYmFja2dyb3VuZCA9ICcjNENBRjUwJzsKCiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gb3JpZ2luYWxUZXh0OwogICAgICAgICAgICAgICAgICAgICAgICBidG4uc3R5bGUuYmFja2dyb3VuZCA9ICcnOwogICAgICAgICAgICAgICAgICAgIH0sIDIwMDApOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0ZhaWxlZCB0byBjb3B5OiAnICsgZXJyKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRleHRhcmVhKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY29tcGFyZUpTT05zKCkgewogICAgICAgICAgICBjb25zdCBqc29uMVRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNvbjEnKS52YWx1ZS50cmltKCk7CiAgICAgICAgICAgIGNvbnN0IGpzb24yVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc29uMicpLnZhbHVlLnRyaW0oKTsKCiAgICAgICAgICAgIGlmICghanNvbjFUZXh0IHx8ICFqc29uMlRleHQpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdQbGVhc2UgcGFzdGUgSlNPTiBjb250ZW50IGluIGJvdGggdGV4dCBhcmVhcy4nKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IG9iajEgPSBKU09OLnBhcnNlKGpzb24xVGV4dCk7CiAgICAgICAgICAgICAgICBjb25zdCBvYmoyID0gSlNPTi5wYXJzZShqc29uMlRleHQpOwoKICAgICAgICAgICAgICAgIGNvbnN0IGRpZmZlcmVuY2VzID0gW107CiAgICAgICAgICAgICAgICBmaW5kRGlmZmVyZW5jZXMob2JqMSwgb2JqMiwgJycsIGRpZmZlcmVuY2VzKTsKCiAgICAgICAgICAgICAgICBkaXNwbGF5RGlmZmVyZW5jZXMoZGlmZmVyZW5jZXMpOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgYWxlcnQoJ0Vycm9yIHBhcnNpbmcgSlNPTjogJyArIGVycm9yLm1lc3NhZ2UgKyAnXG5cblBsZWFzZSBjaGVjayB5b3VyIEpTT04gZm9ybWF0LicpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBmaW5kRGlmZmVyZW5jZXMob2JqMSwgb2JqMiwgcGF0aCwgZGlmZmVyZW5jZXMpIHsKICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYm90aCBhcmUgb2JqZWN0cwogICAgICAgICAgICBpZiAodHlwZW9mIG9iajEgPT09ICdvYmplY3QnICYmIG9iajEgIT09IG51bGwgJiYgdHlwZW9mIG9iajIgPT09ICdvYmplY3QnICYmIG9iajIgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIC8vIEdldCBhbGwgdW5pcXVlIGtleXMgZnJvbSBib3RoIG9iamVjdHMKICAgICAgICAgICAgICAgIGNvbnN0IGtleXMxID0gT2JqZWN0LmtleXMob2JqMSk7CiAgICAgICAgICAgICAgICBjb25zdCBrZXlzMiA9IE9iamVjdC5rZXlzKG9iajIpOwogICAgICAgICAgICAgICAgY29uc3QgYWxsS2V5cyA9IFsuLi5uZXcgU2V0KFsuLi5rZXlzMSwgLi4ua2V5czJdKV07CgogICAgICAgICAgICAgICAgYWxsS2V5cy5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UGF0aCA9IHBhdGggPyBgJHtwYXRofS4ke2tleX1gIDoga2V5OwoKICAgICAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gb2JqMSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2V5IGV4aXN0cyBpbiBvYmoyIGJ1dCBub3QgaW4gb2JqMQogICAgICAgICAgICAgICAgICAgICAgICBkaWZmZXJlbmNlcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhZGRlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBuZXdQYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KG9iajJba2V5XSwgbnVsbCwgMikKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghKGtleSBpbiBvYmoyKSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBLZXkgZXhpc3RzIGluIG9iajEgYnV0IG5vdCBpbiBvYmoyCiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3JlbW92ZWQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogbmV3UGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBKU09OLnN0cmluZ2lmeShvYmoxW2tleV0sIG51bGwsIDIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtleSBleGlzdHMgaW4gYm90aCwgY29tcGFyZSB2YWx1ZXMgcmVjdXJzaXZlbHkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqMVtrZXldKSAmJiBBcnJheS5pc0FycmF5KG9iajJba2V5XSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBhcmUgYXJyYXlzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkob2JqMVtrZXldKSAhPT0gSlNPTi5zdHJpbmdpZnkob2JqMltrZXldKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBhcmVBcnJheXMob2JqMVtrZXldLCBvYmoyW2tleV0sIG5ld1BhdGgsIGRpZmZlcmVuY2VzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqMVtrZXldID09PSAnb2JqZWN0JyAmJiBvYmoxW2tleV0gIT09IG51bGwgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygb2JqMltrZXldID09PSAnb2JqZWN0JyAmJiBvYmoyW2tleV0gIT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluZERpZmZlcmVuY2VzKG9iajFba2V5XSwgb2JqMltrZXldLCBuZXdQYXRoLCBkaWZmZXJlbmNlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqMVtrZXldICE9PSBvYmoyW2tleV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZhbHVlcyBhcmUgZGlmZmVyZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmZXJlbmNlcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbW9kaWZpZWQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG5ld1BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWU6IEpTT04uc3RyaW5naWZ5KG9iajFba2V5XSwgbnVsbCwgMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWU6IEpTT04uc3RyaW5naWZ5KG9iajJba2V5XSwgbnVsbCwgMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqMSAhPT0gb2JqMikgewogICAgICAgICAgICAgICAgLy8gU2ltcGxlIHZhbHVlIGNvbXBhcmlzb24KICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtb2RpZmllZCcsCiAgICAgICAgICAgICAgICAgICAgcGF0aDogcGF0aCB8fCAnKHJvb3QpJywKICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZTogSlNPTi5zdHJpbmdpZnkob2JqMSwgbnVsbCwgMiksCiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWU6IEpTT04uc3RyaW5naWZ5KG9iajIsIG51bGwsIDIpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY29tcGFyZUFycmF5cyhhcnIxLCBhcnIyLCBwYXRoLCBkaWZmZXJlbmNlcykgewogICAgICAgICAgICBjb25zdCBtYXhMZW4gPSBNYXRoLm1heChhcnIxLmxlbmd0aCwgYXJyMi5sZW5ndGgpOwoKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhMZW47IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgbmV3UGF0aCA9IGAke3BhdGh9WyR7aX1dYDsKCiAgICAgICAgICAgICAgICBpZiAoaSA+PSBhcnIxLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIC8vIEVsZW1lbnQgZXhpc3RzIGluIGFycjIgYnV0IG5vdCBpbiBhcnIxCiAgICAgICAgICAgICAgICAgICAgZGlmZmVyZW5jZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhZGRlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG5ld1BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBKU09OLnN0cmluZ2lmeShhcnIyW2ldLCBudWxsLCAyKQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpID49IGFycjIubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gRWxlbWVudCBleGlzdHMgaW4gYXJyMSBidXQgbm90IGluIGFycjIKICAgICAgICAgICAgICAgICAgICBkaWZmZXJlbmNlcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3JlbW92ZWQnLAogICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBuZXdQYXRoLAogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkoYXJyMVtpXSwgbnVsbCwgMikKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8gRWxlbWVudCBleGlzdHMgaW4gYm90aCBhcnJheXMKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFycjFbaV0gPT09ICdvYmplY3QnICYmIGFycjFbaV0gIT09IG51bGwgJiYKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGFycjJbaV0gPT09ICdvYmplY3QnICYmIGFycjJbaV0gIT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZmluZERpZmZlcmVuY2VzKGFycjFbaV0sIGFycjJbaV0sIG5ld1BhdGgsIGRpZmZlcmVuY2VzKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKEpTT04uc3RyaW5naWZ5KGFycjFbaV0pICE9PSBKU09OLnN0cmluZ2lmeShhcnIyW2ldKSkgewogICAgICAgICAgICAgICAgICAgICAgICBkaWZmZXJlbmNlcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtb2RpZmllZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBuZXdQYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWU6IEpTT04uc3RyaW5naWZ5KGFycjFbaV0sIG51bGwsIDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWU6IEpTT04uc3RyaW5naWZ5KGFycjJbaV0sIG51bGwsIDIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZGlzcGxheURpZmZlcmVuY2VzKGRpZmZlcmVuY2VzKSB7CiAgICAgICAgICAgIGNvbnN0IGRpZmZSZXN1bHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RpZmZSZXN1bHRzJyk7CiAgICAgICAgICAgIGNvbnN0IGRpZmZDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RpZmZDb250ZW50Jyk7CgogICAgICAgICAgICBpZiAoZGlmZmVyZW5jZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICBkaWZmQ29udGVudC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0iZGlmZi1pdGVtIiBzdHlsZT0iYmFja2dyb3VuZDogI2Q0ZWRkYTsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjMjhhNzQ1OyI+PHN0cm9uZz5ObyBkaWZmZXJlbmNlcyBmb3VuZCE8L3N0cm9uZz4gQm90aCBKU09OcyBhcmUgaWRlbnRpY2FsLjwvZGl2Pic7CiAgICAgICAgICAgICAgICBkaWZmUmVzdWx0cy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IGh0bWwgPSAnJzsKICAgICAgICAgICAgZGlmZmVyZW5jZXMuZm9yRWFjaChkaWZmID0+IHsKICAgICAgICAgICAgICAgIGlmIChkaWZmLnR5cGUgPT09ICdhZGRlZCcpIHsKICAgICAgICAgICAgICAgICAgICBodG1sICs9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGlmZi1pdGVtIGRpZmYtYWRkZWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGlmZi1wYXRoIj4rIEFkZGVkOiAke2RpZmYucGF0aH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpZmYtdmFsdWUiPiR7ZXNjYXBlSHRtbChkaWZmLnZhbHVlKX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlmZi50eXBlID09PSAncmVtb3ZlZCcpIHsKICAgICAgICAgICAgICAgICAgICBodG1sICs9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGlmZi1pdGVtIGRpZmYtcmVtb3ZlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaWZmLXBhdGgiPi0gUmVtb3ZlZDogJHtkaWZmLnBhdGh9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaWZmLXZhbHVlIj4ke2VzY2FwZUh0bWwoZGlmZi52YWx1ZSl9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRpZmYudHlwZSA9PT0gJ21vZGlmaWVkJykgewogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaWZmLWl0ZW0gZGlmZi1tb2RpZmllZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaWZmLXBhdGgiPn4gTW9kaWZpZWQ6ICR7ZGlmZi5wYXRofTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGlmZi12YWx1ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5PbGQ6PC9zdHJvbmc+ICR7ZXNjYXBlSHRtbChkaWZmLm9sZFZhbHVlKX08YnI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5OZXc6PC9zdHJvbmc+ICR7ZXNjYXBlSHRtbChkaWZmLm5ld1ZhbHVlKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGRpZmZDb250ZW50LmlubmVySFRNTCA9IGh0bWw7CiAgICAgICAgICAgIGRpZmZSZXN1bHRzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZXNjYXBlSHRtbCh0ZXh0KSB7CiAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBkaXYudGV4dENvbnRlbnQgPSB0ZXh0OwogICAgICAgICAgICByZXR1cm4gZGl2LmlubmVySFRNTDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNsZWFyQ29tcGFyaXNvbigpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzb24xJykudmFsdWUgPSAnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzb24yJykudmFsdWUgPSAnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RpZmZSZXN1bHRzJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RpZmZDb250ZW50JykuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgfQogICAgPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPgo=


Test8
