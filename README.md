Test 3

PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+UG9saWN5IENvbmZpZ3VyYXRpb24gTWFuYWdlcjwvdGl0bGU+CiAgICA8c3R5bGU+CiAgICAgICAgKiB7CiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICB9CgogICAgICAgIGJvZHkgewogICAgICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmNWY1ZjU7CiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICB9CgogICAgICAgIC5jb250YWluZXIgewogICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDFweCA0cHggcmdiYSgwLDAsMCwwLjEpOwogICAgICAgICAgICBwYWRkaW5nOiAxMnB4OwogICAgICAgIH0KCiAgICAgICAgaDEgewogICAgICAgICAgICBjb2xvcjogIzMzMzsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4OwogICAgICAgICAgICBmb250LXNpemU6IDE4cHg7CiAgICAgICAgfQoKICAgICAgICBoMiB7CiAgICAgICAgICAgIGNvbG9yOiAjNTU1OwogICAgICAgICAgICBtYXJnaW46IDhweCAwIDZweCAwOwogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjNENBRjUwOwogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogM3B4OwogICAgICAgIH0KCiAgICAgICAgaDMgewogICAgICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgICAgICAgbWFyZ2luOiA2cHggMCA0cHggMDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgICAgICBmb250LXdlaWdodDogNjAwOwogICAgICAgIH0KCiAgICAgICAgLmhlYWRlciB7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICAgICAgfQoKICAgICAgICAuYWN0aW9ucyB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGdhcDogNnB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4OwogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7CiAgICAgICAgfQoKICAgICAgICBidXR0b24gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjNENBRjUwOwogICAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgcGFkZGluZzogNnB4IDEycHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICBmb250LXNpemU6IDExcHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgICAgfQoKICAgICAgICBidXR0b246aG92ZXIgewogICAgICAgICAgICBvcGFjaXR5OiAwLjk7CiAgICAgICAgfQoKICAgICAgICBidXR0b24uc2Vjb25kYXJ5IHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzIxOTZGMzsKICAgICAgICB9CgogICAgICAgIGJ1dHRvbi5kYW5nZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjQ0MzM2OwogICAgICAgIH0KCiAgICAgICAgYnV0dG9uLnNtYWxsIHsKICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4OwogICAgICAgIH0KCiAgICAgICAgLmZvcm0tZ3JvdXAgewogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7CiAgICAgICAgfQoKICAgICAgICBsYWJlbCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAycHg7CiAgICAgICAgICAgIGNvbG9yOiAjNTU1OwogICAgICAgICAgICBmb250LXdlaWdodDogNTAwOwogICAgICAgICAgICBmb250LXNpemU6IDExcHg7CiAgICAgICAgfQoKICAgICAgICBsYWJlbC5yZXF1aXJlZDo6YWZ0ZXIgewogICAgICAgICAgICBjb250ZW50OiAiICoiOwogICAgICAgICAgICBjb2xvcjogcmVkOwogICAgICAgIH0KCiAgICAgICAgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEgewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgcGFkZGluZzogNHB4IDZweDsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgICAgICAgICBmb250LXNpemU6IDExcHg7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgICAgICAgICAgY29sb3I6ICMzMzM7CiAgICAgICAgfQoKICAgICAgICBzZWxlY3QgewogICAgICAgICAgICBhcHBlYXJhbmNlOiBub25lOwogICAgICAgICAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7CiAgICAgICAgICAgIC1tb3otYXBwZWFyYW5jZTogbm9uZTsKICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD1VVEYtOCwlM2NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMjQgMjQnIGZpbGw9J25vbmUnIHN0cm9rZT0nY3VycmVudENvbG9yJyBzdHJva2Utd2lkdGg9JzInIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCclM2UlM2Nwb2x5bGluZSBwb2ludHM9JzYgOSAxMiAxNSAxOCA5JyUzZSUzYy9wb2x5bGluZSUzZSUzYy9zdmclM2UiKTsKICAgICAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICAgICAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogcmlnaHQgNHB4IGNlbnRlcjsKICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiAxNnB4OwogICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAyNHB4OwogICAgICAgIH0KCiAgICAgICAgaW5wdXQ6Zm9jdXMsIHNlbGVjdDpmb2N1cywgdGV4dGFyZWE6Zm9jdXMgewogICAgICAgICAgICBvdXRsaW5lOiBub25lOwogICAgICAgICAgICBib3JkZXItY29sb3I6ICM0Q0FGNTA7CiAgICAgICAgfQoKICAgICAgICB0ZXh0YXJlYSB7CiAgICAgICAgICAgIHJlc2l6ZTogdmVydGljYWw7CiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDQwcHg7CiAgICAgICAgfQoKICAgICAgICAuY2hhbm5lbC1zZWN0aW9uIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2Y5ZjlmOTsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2UwZTBlMDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgICBwYWRkaW5nOiA4cHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDsKICAgICAgICB9CgogICAgICAgIC5wb2xpY3ktc2VjdGlvbiB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDZweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4OwogICAgICAgIH0KCiAgICAgICAgLmFjY2Vzcy1zZWN0aW9uIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZhZmFmYTsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2U4ZThlODsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgICAgICAgICBwYWRkaW5nOiA2cHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDsKICAgICAgICB9CgogICAgICAgIC5ub3RpZmljYXRpb24tc2VjdGlvbiB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmY7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlMGUwZTA7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgcGFkZGluZzogNHB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7CiAgICAgICAgfQoKICAgICAgICAuZ3JpZC0yIHsKICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsKICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyOwogICAgICAgICAgICBnYXA6IDZweDsKICAgICAgICB9CgogICAgICAgIC5ncmlkLTMgewogICAgICAgICAgICBkaXNwbGF5OiBncmlkOwogICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnIgMWZyOwogICAgICAgICAgICBnYXA6IDZweDsKICAgICAgICB9CgogICAgICAgIC5ncmlkLTQgewogICAgICAgICAgICBkaXNwbGF5OiBncmlkOwogICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnIgMWZyIDFmcjsKICAgICAgICAgICAgZ2FwOiA2cHg7CiAgICAgICAgfQoKICAgICAgICAuZ3JpZC01IHsKICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsKICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoNSwgMWZyKTsKICAgICAgICAgICAgZ2FwOiA2cHg7CiAgICAgICAgfQoKICAgICAgICAuYnRuLWdyb3VwIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZ2FwOiA2cHg7CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDZweDsKICAgICAgICB9CgogICAgICAgIC5vdXRwdXQtYXJlYSB7CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEycHg7CiAgICAgICAgICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCAjZWVlOwogICAgICAgICAgICBwYWRkaW5nLXRvcDogMTJweDsKICAgICAgICB9CgogICAgICAgIC5vdXRwdXQtYm94IHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2Y0ZjRmNDsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgICAgICAgICBwYWRkaW5nOiA4cHg7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnQ291cmllciBOZXcnLCBtb25vc3BhY2U7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsKICAgICAgICAgICAgbWF4LWhlaWdodDogMjUwcHg7CiAgICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87CiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsKICAgICAgICAgICAgd29yZC13cmFwOiBicmVhay13b3JkOwogICAgICAgIH0KCiAgICAgICAgLmZpbGUtaW5wdXQtd3JhcHBlciB7CiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgIH0KCiAgICAgICAgLmZpbGUtaW5wdXQtd3JhcHBlciBpbnB1dFt0eXBlPWZpbGVdIHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICBsZWZ0OiAtOTk5OXB4OwogICAgICAgIH0KCiAgICAgICAgLnNlY3Rpb24taGVhZGVyIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7CiAgICAgICAgfQoKICAgICAgICAuYmFkZ2UgewogICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMyMTk2RjM7CiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgICAgICAgcGFkZGluZzogMnB4IDZweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4OwogICAgICAgICAgICBmb250LXNpemU6IDEwcHg7CiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA0cHg7CiAgICAgICAgfQoKICAgICAgICAuYWxlcnQgewogICAgICAgICAgICBwYWRkaW5nOiA2cHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDZweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgICAgICAgICBmb250LXNpemU6IDEwcHg7CiAgICAgICAgfQoKICAgICAgICAuYWxlcnQtaW5mbyB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNkMWVjZjE7CiAgICAgICAgICAgIGNvbG9yOiAjMGM1NDYwOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjYmVlNWViOwogICAgICAgIH0KCiAgICAgICAgLm1vZGFsIHsKICAgICAgICAgICAgZGlzcGxheTogbm9uZTsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICB6LWluZGV4OiAxMDAwOwogICAgICAgICAgICBsZWZ0OiAwOwogICAgICAgICAgICB0b3A6IDA7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsMC41KTsKICAgICAgICB9CgogICAgICAgIC5tb2RhbC1jb250ZW50IHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgICAgICAgICAgIG1hcmdpbjogNTBweCBhdXRvOwogICAgICAgICAgICBwYWRkaW5nOiAyMHB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICAgICAgICAgIHdpZHRoOiA4MCU7CiAgICAgICAgICAgIG1heC13aWR0aDogODAwcHg7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDIwcHggcmdiYSgwLDAsMCwwLjMpOwogICAgICAgIH0KCiAgICAgICAgLm1vZGFsLWhlYWRlciB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDsKICAgICAgICB9CgogICAgICAgIC5tb2RhbC1oZWFkZXIgaDIgewogICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICB9CgogICAgICAgIC5jbG9zZSB7CiAgICAgICAgICAgIGNvbG9yOiAjYWFhOwogICAgICAgICAgICBmb250LXNpemU6IDI4cHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyMHB4OwogICAgICAgIH0KCiAgICAgICAgLmNsb3NlOmhvdmVyIHsKICAgICAgICAgICAgY29sb3I6ICMwMDA7CiAgICAgICAgfQoKICAgICAgICAjanNvbklucHV0IHsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDMwMHB4OwogICAgICAgICAgICBmb250LWZhbWlseTogJ0NvdXJpZXIgTmV3JywgbW9ub3NwYWNlOwogICAgICAgICAgICBmb250LXNpemU6IDEycHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICB9CgogICAgICAgIC50YWJzIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZ2FwOiA0cHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZTBlMGUwOwogICAgICAgIH0KCiAgICAgICAgLnRhYiB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmMGYwZjA7CiAgICAgICAgICAgIGNvbG9yOiAjNjY2OwogICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgIHBhZGRpbmc6IDhweCAyMHB4OwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4IDRweCAwIDA7CiAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4zczsKICAgICAgICB9CgogICAgICAgIC50YWI6aG92ZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZTBlMGUwOwogICAgICAgIH0KCiAgICAgICAgLnRhYi5hY3RpdmUgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjNENBRjUwOwogICAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgfQoKICAgICAgICAudGFiLWNvbnRlbnQgewogICAgICAgICAgICBkaXNwbGF5OiBub25lOwogICAgICAgIH0KCiAgICAgICAgLnRhYi1jb250ZW50LmFjdGl2ZSB7CiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICAgIH0KCiAgICAgICAgLmNvbXBhcmUtY29udGFpbmVyIHsKICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsKICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyOwogICAgICAgICAgICBnYXA6IDEycHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7CiAgICAgICAgfQoKICAgICAgICAuY29tcGFyZS1wYW5lbCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgfQoKICAgICAgICAuY29tcGFyZS1wYW5lbCBoMyB7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDsKICAgICAgICB9CgogICAgICAgIC5jb21wYXJlLXRleHRhcmVhIHsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDQwMHB4OwogICAgICAgICAgICBmb250LWZhbWlseTogJ0NvdXJpZXIgTmV3JywgbW9ub3NwYWNlOwogICAgICAgICAgICBmb250LXNpemU6IDExcHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDhweDsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgICByZXNpemU6IHZlcnRpY2FsOwogICAgICAgIH0KCiAgICAgICAgLmRpZmYtcmVzdWx0cyB7CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEycHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDEycHg7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmOWY5Zjk7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICAgICAgbWF4LWhlaWdodDogNTAwcHg7CiAgICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87CiAgICAgICAgfQoKICAgICAgICAuZGlmZi1pdGVtIHsKICAgICAgICAgICAgcGFkZGluZzogOHB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4OwogICAgICAgIH0KCiAgICAgICAgLmRpZmYtYWRkZWQgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZDRlZGRhOwogICAgICAgICAgICBib3JkZXItbGVmdDogNHB4IHNvbGlkICMyOGE3NDU7CiAgICAgICAgfQoKICAgICAgICAuZGlmZi1yZW1vdmVkIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2Y4ZDdkYTsKICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjZGMzNTQ1OwogICAgICAgIH0KCiAgICAgICAgLmRpZmYtbW9kaWZpZWQgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmM2NkOwogICAgICAgICAgICBib3JkZXItbGVmdDogNHB4IHNvbGlkICNmZmMxMDc7CiAgICAgICAgfQoKICAgICAgICAuZGlmZi1wYXRoIHsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgICAgICAgICAgY29sb3I6ICMzMzM7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDsKICAgICAgICB9CgogICAgICAgIC5kaWZmLXZhbHVlIHsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsKICAgICAgICAgICAgY29sb3I6ICM2NjY7CiAgICAgICAgfQoKICAgICAgICAuaW5mby1pY29uIHsKICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgICAgICB3aWR0aDogMTJweDsKICAgICAgICAgICAgaGVpZ2h0OiAxMnB4OwogICAgICAgICAgICBsaW5lLWhlaWdodDogMTJweDsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICAgICAgICAgICAgY29sb3I6ICMyMTk2RjM7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICMyMTk2RjM7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICAgICAgZm9udC1zaXplOiA4cHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgICAgICAgICBjdXJzb3I6IGhlbHA7CiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAzcHg7CiAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgICAgICAgfQoKICAgICAgICAuaW5mby1pY29uOmhvdmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzIxOTZGMzsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgIH0KCiAgICAgICAgLmV4cGFuZC1pY29uIHsKICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgICAgICB3aWR0aDogMTZweDsKICAgICAgICAgICAgaGVpZ2h0OiAxNnB4OwogICAgICAgICAgICBsaW5lLWhlaWdodDogMTZweDsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjNENBRjUwOwogICAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4OwogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICBtYXJnaW4tbGVmdDogNHB4OwogICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlOwogICAgICAgIH0KCiAgICAgICAgLmV4cGFuZC1pY29uOmhvdmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzQ1YTA0OTsKICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjEpOwogICAgICAgIH0KCiAgICAgICAgLmlucHV0LXdpdGgtZXhwYW5kIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgZ2FwOiA0cHg7CiAgICAgICAgfQoKICAgICAgICAuaW5wdXQtd2l0aC1leHBhbmQgaW5wdXQgewogICAgICAgICAgICBmbGV4OiAxOwogICAgICAgIH0KCiAgICAgICAgLmV4cGFuZC1tb2RhbCB7CiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgei1pbmRleDogMTAwMjsKICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICAgICAgdG9wOiAwOwogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDAuNSk7CiAgICAgICAgfQoKICAgICAgICAuZXhwYW5kLW1vZGFsLWNvbnRlbnQgewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKICAgICAgICAgICAgbWFyZ2luOiA4MHB4IGF1dG87CiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgICAgICAgICAgd2lkdGg6IDkwJTsKICAgICAgICAgICAgbWF4LXdpZHRoOiA4MDBweDsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMjBweCByZ2JhKDAsMCwwLDAuMyk7CiAgICAgICAgfQoKICAgICAgICAuZXhwYW5kLW1vZGFsLWhlYWRlciB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDsKICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDEwcHg7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjNENBRjUwOwogICAgICAgIH0KCiAgICAgICAgLmV4cGFuZC1tb2RhbC1oZWFkZXIgaDMgewogICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgIGNvbG9yOiAjMzMzOwogICAgICAgICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgICAgfQoKICAgICAgICAuZXhwYW5kLXRleHRhcmVhIHsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDMwMHB4OwogICAgICAgICAgICBmb250LWZhbWlseTogJ0NvdXJpZXIgTmV3JywgbW9ub3NwYWNlOwogICAgICAgICAgICBmb250LXNpemU6IDEycHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICAgICAgcmVzaXplOiB2ZXJ0aWNhbDsKICAgICAgICB9CgogICAgICAgIC5leHBhbmQtdGV4dGFyZWE6Zm9jdXMgewogICAgICAgICAgICBvdXRsaW5lOiBub25lOwogICAgICAgICAgICBib3JkZXItY29sb3I6ICM0Q0FGNTA7CiAgICAgICAgfQoKICAgICAgICAuaW5mby1tb2RhbCB7CiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgei1pbmRleDogMTAwMTsKICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICAgICAgdG9wOiAwOwogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDAuNSk7CiAgICAgICAgfQoKICAgICAgICAuaW5mby1tb2RhbC1jb250ZW50IHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgICAgICAgICAgIG1hcmdpbjogMTAwcHggYXV0bzsKICAgICAgICAgICAgcGFkZGluZzogMjBweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4OwogICAgICAgICAgICB3aWR0aDogOTAlOwogICAgICAgICAgICBtYXgtd2lkdGg6IDYwMHB4OwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAyMHB4IHJnYmEoMCwwLDAsMC4zKTsKICAgICAgICB9CgogICAgICAgIC5pbmZvLW1vZGFsLWhlYWRlciB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDsKICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDEwcHg7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjNENBRjUwOwogICAgICAgIH0KCiAgICAgICAgLmluZm8tbW9kYWwtaGVhZGVyIGgzIHsKICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICBjb2xvcjogIzMzMzsKICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgIH0KCiAgICAgICAgLmluZm8tbW9kYWwtYm9keSB7CiAgICAgICAgICAgIGNvbG9yOiAjNjY2OwogICAgICAgICAgICBsaW5lLWhlaWdodDogMS42OwogICAgICAgICAgICBmb250LXNpemU6IDEzcHg7CiAgICAgICAgfQoKICAgICAgICAuaW5mby1tb2RhbC1ib2R5IHN0cm9uZyB7CiAgICAgICAgICAgIGNvbG9yOiAjMzMzOwogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4OwogICAgICAgIH0KCiAgICAgICAgLmluZm8tbW9kYWwtYm9keSBjb2RlIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2Y0ZjRmNDsKICAgICAgICAgICAgcGFkZGluZzogMnB4IDZweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgICAgICAgICBmb250LWZhbWlseTogJ0NvdXJpZXIgTmV3JywgbW9ub3NwYWNlOwogICAgICAgICAgICBmb250LXNpemU6IDEycHg7CiAgICAgICAgfQoKICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogMTIwMHB4KSB7CiAgICAgICAgICAgIC5ncmlkLTQsIC5ncmlkLTUgewogICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHsKICAgICAgICAgICAgLmdyaWQtMiwgLmdyaWQtMywgLmdyaWQtNCwgLmdyaWQtNSB7CiAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8ZGl2IGNsYXNzPSJjb250YWluZXIiPgogICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlciI+CiAgICAgICAgICAgIDxoMT5Qb2xpY3kgQ29uZmlnIE1hbmFnZXI8L2gxPgogICAgICAgIDwvZGl2PgoKICAgICAgICA8IS0tIFRhYnMgLS0+CiAgICAgICAgPGRpdiBjbGFzcz0idGFicyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InRhYiBhY3RpdmUiIG9uY2xpY2s9InN3aXRjaFRhYignZWRpdG9yJykiPkVkaXRvcjwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJ0YWIiIG9uY2xpY2s9InN3aXRjaFRhYignY29tcGFyZScpIj5Db21wYXJlIEpTT048L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBFZGl0b3IgVGFiIC0tPgogICAgICAgIDxkaXYgaWQ9ImVkaXRvclRhYiIgY2xhc3M9InRhYi1jb250ZW50IGFjdGl2ZSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbnMiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJvcGVuTG9hZE1vZGFsKCkiPkxvYWQgSlNPTjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJnZW5lcmF0ZUpTT04oKSI+R2VuIEpTT048L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNlY29uZGFyeSIgb25jbGljaz0iZ2VuZXJhdGVTUUwoKSI+R2VuIFNRTDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJkb3dubG9hZE91dHB1dCgpIj5Eb3dubG9hZDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZGFuZ2VyIiBvbmNsaWNrPSJyZXNldEZvcm0oKSI+UmVzZXQ8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgIDwhLS0gTG9hZCBKU09OIE1vZGFsIC0tPgogICAgICAgIDxkaXYgaWQ9ImxvYWRNb2RhbCIgY2xhc3M9Im1vZGFsIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtY29udGVudCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxoMj5Mb2FkIEpTT048L2gyPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJjbG9zZSIgb25jbGljaz0iY2xvc2VMb2FkTW9kYWwoKSI+JnRpbWVzOzwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0iY29sb3I6ICM2NjY7IG1hcmdpbi1ib3R0b206IDEwcHg7Ij5QYXN0ZSB5b3VyIEpTT04gY29udGVudCBiZWxvdzo8L3A+CiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJqc29uSW5wdXQiIHBsYWNlaG9sZGVyPSdQYXN0ZSBKU09OIGhlcmUsIGUuZy4sIHsicG9saWNpZXNNYXBzIjogWy4uLl19Jz48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJ0bi1ncm91cCIgc3R5bGU9Im1hcmdpbi10b3A6IDEwcHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJsb2FkRnJvbVRleHRhcmVhKCkiPkxvYWQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJjbG9zZUxvYWRNb2RhbCgpIj5DYW5jZWw8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBJbmZvIE1vZGFsIC0tPgogICAgICAgIDxkaXYgaWQ9ImluZm9Nb2RhbCIgY2xhc3M9ImluZm8tbW9kYWwiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbmZvLW1vZGFsLWNvbnRlbnQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5mby1tb2RhbC1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxoMyBpZD0iaW5mb1RpdGxlIj5GaWVsZCBJbmZvcm1hdGlvbjwvaDM+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImNsb3NlIiBvbmNsaWNrPSJjbG9zZUluZm9Nb2RhbCgpIj4mdGltZXM7PC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbmZvLW1vZGFsLWJvZHkiIGlkPSJpbmZvQm9keSI+CiAgICAgICAgICAgICAgICAgICAgPCEtLSBEeW5hbWljIGNvbnRlbnQgd2lsbCBiZSBpbnNlcnRlZCBoZXJlIC0tPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8IS0tIEV4cGFuZCBNb2RhbCAtLT4KICAgICAgICA8ZGl2IGlkPSJleHBhbmRNb2RhbCIgY2xhc3M9ImV4cGFuZC1tb2RhbCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImV4cGFuZC1tb2RhbC1jb250ZW50Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImV4cGFuZC1tb2RhbC1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxoMyBpZD0iZXhwYW5kVGl0bGUiPkVkaXQgRmllbGQ8L2gzPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJjbG9zZSIgb25jbGljaz0iY2xvc2VFeHBhbmRNb2RhbCgpIj4mdGltZXM7PC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0iZXhwYW5kVGV4dGFyZWEiIGNsYXNzPSJleHBhbmQtdGV4dGFyZWEiIHBsYWNlaG9sZGVyPSJFbnRlciB5b3VyIHZhbHVlIGhlcmUuLi4iPjwvdGV4dGFyZWE+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYnRuLWdyb3VwIiBzdHlsZT0ibWFyZ2luLXRvcDogMTBweDsiPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InNhdmVFeHBhbmRlZFZhbHVlKCkiPlNhdmU8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJjbG9zZUV4cGFuZE1vZGFsKCkiPkNhbmNlbDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8Zm9ybSBpZD0icG9saWN5Rm9ybSI+CiAgICAgICAgICAgIDxkaXYgaWQ9ImNoYW5uZWxzQ29udGFpbmVyIj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYnRuLWdyb3VwIj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJhZGRDaGFubmVsKCkiPisgQWRkIENoYW5uZWw8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9mb3JtPgoKICAgICAgICA8ZGl2IGNsYXNzPSJvdXRwdXQtYXJlYSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyIj4KICAgICAgICAgICAgICAgIDxoMj5PdXRwdXQ8L2gyPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiA2cHg7Ij4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJzZWNvbmRhcnkgc21hbGwiIG9uY2xpY2s9ImNvcHlPdXRwdXQoKSIgdGl0bGU9IkNvcHkgdG8gY2xpcGJvYXJkIj5Db3B5PC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ib3V0cHV0VHlwZSIgc3R5bGU9IndpZHRoOiBhdXRvOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IG1hcmdpbi1yaWdodDogNnB4OyI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ianNvbiI+SlNPTjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InNxbCI+U1FMPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im91dHB1dC1ib3giIGlkPSJvdXRwdXRCb3giPk91dHB1dCB3aWxsIGFwcGVhciBoZXJlLi4uPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDwhLS0gQ29tcGFyZSBUYWIgLS0+CiAgICAgICAgPGRpdiBpZD0iY29tcGFyZVRhYiIgY2xhc3M9InRhYi1jb250ZW50Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29tcGFyZS1jb250YWluZXIiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29tcGFyZS1wYW5lbCI+CiAgICAgICAgICAgICAgICAgICAgPGgzPkpTT04gMSAoTGVmdCk8L2gzPgogICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0ianNvbjEiIGNsYXNzPSJjb21wYXJlLXRleHRhcmVhIiBwbGFjZWhvbGRlcj0nUGFzdGUgZmlyc3QgSlNPTiBoZXJlLi4uJz48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb21wYXJlLXBhbmVsIj4KICAgICAgICAgICAgICAgICAgICA8aDM+SlNPTiAyIChSaWdodCk8L2gzPgogICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0ianNvbjIiIGNsYXNzPSJjb21wYXJlLXRleHRhcmVhIiBwbGFjZWhvbGRlcj0nUGFzdGUgc2Vjb25kIEpTT04gaGVyZS4uLic+PC90ZXh0YXJlYT4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbnMiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJjb21wYXJlSlNPTnMoKSI+Q29tcGFyZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJjbGVhckNvbXBhcmlzb24oKSI+Q2xlYXI8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGlkPSJkaWZmUmVzdWx0cyIgY2xhc3M9ImRpZmYtcmVzdWx0cyIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4KICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMTBweDsiPkRpZmZlcmVuY2VzOjwvaDM+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJkaWZmQ29udGVudCI+PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPHNjcmlwdD4KICAgICAgICBsZXQgY2hhbm5lbENvdW50ZXIgPSAwOwogICAgICAgIGxldCBwb2xpY3lDb3VudGVyID0gMDsKICAgICAgICBsZXQgYWNjZXNzQ291bnRlciA9IDA7CiAgICAgICAgbGV0IG5vdGlmaWNhdGlvbkNvdW50ZXIgPSAwOwogICAgICAgIGxldCBjdXJyZW50T3V0cHV0ID0gJyc7CgogICAgICAgIC8vIEZpZWxkIGluZm9ybWF0aW9uIGRhdGFiYXNlCiAgICAgICAgY29uc3QgZmllbGRJbmZvID0gewogICAgICAgICAgICBjaGFubmVsSWQ6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiQ2hhbm5lbCBJRCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY2hhbm5lbCB0aHJvdWdoIHdoaWNoIHRoZSBzZXJ2aWNlIGlzIGFjY2Vzc2VkLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJTR19NQiIsICJVU19XRUIiLCAiVUtfQVBJIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXJ2aWNlSWQ6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiU2VydmljZSBJRCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgc2VydmljZS9BUEkgZW5kcG9pbnQuIFRoaXMgc2hvdWxkIGJlIHVuaXF1ZSBhY3Jvc3MgYWxsIHBvbGljaWVzLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJQQVlOT1dfVVBJXzEiLCAiVFJBTlNGRVJfRlVORFMiLCAiVklFV19CQUxBTkNFIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBlbmRQb2ludDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJFbmQgUG9pbnQgKFVSSSkiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgQVBJIGVuZHBvaW50IHBhdGggdGhhdCB0aGlzIHBvbGljeSBhcHBsaWVzIHRvLiBUaGlzIGlzIHRoZSBpbmNvbWluZyByZXF1ZXN0IHBhdGguIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIi9wYXltZW50cy9wcm94eS10cmFuc2Zlci1mY3kvcGF5bm93dXBpIiwgIi9hcGkvdHJhbnNmZXIiLCAiL2JhbGFuY2UvdmlldyJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaHR0cE1ldGhvZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJIVFRQIE1ldGhvZCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlRoZSBIVFRQIG1ldGhvZCB1c2VkIGZvciB0aGlzIGVuZHBvaW50LiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJQT1NUIiwgIkdFVCIsICJQVVQiLCAiREVMRVRFIiwgIlBBVENIIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBvdXRFbmRQb2ludDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJPdXQgRW5kIFBvaW50IiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIG91dGdvaW5nIGVuZHBvaW50IHBhdGguIENhbiBiZSBzYW1lIGFzIGVuZHBvaW50IG9yIGRpZmZlcmVudCBmb3Igcm91dGluZyBwdXJwb3Nlcy4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiL3BheW1lbnRzL3Byb3h5LXRyYW5zZmVyLWZjeS9wYXlub3d1cGkiLCAiL2ludGVybmFsL2FwaS90cmFuc2ZlciJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlcnZpY2VEZXNjOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlNlcnZpY2UgRGVzY3JpcHRpb24iLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJBIGh1bWFuLXJlYWRhYmxlIGRlc2NyaXB0aW9uIG9mIHdoYXQgdGhpcyBzZXJ2aWNlIGRvZXMuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlBheW5vd1VQSShTR0QgdG8gSU5SKSB0cmFuc2ZlciIsICJGdW5kIHRyYW5zZmVyIHNlcnZpY2UiLCAiQmFsYW5jZSBpbnF1aXJ5Il0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBhdXRoTGV2ZWxSZXF1aXJlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJBdXRoIExldmVsIFJlcXVpcmVkIChMZXZlbCkiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgYXV0aGVudGljYXRpb24gbGV2ZWwgcmVxdWlyZWQgdG8gYWNjZXNzIHRoaXMgc2VydmljZS4gTGV2ZWwgMCBtZWFucyBubyBhdXRoZW50aWNhdGlvbiByZXF1aXJlZC4gSGlnaGVyIGxldmVscyByZXF1aXJlIHN0cm9uZ2VyIGF1dGhlbnRpY2F0aW9uLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyIwIChObyBhdXRoKSIsICIxIChCYXNpYykiLCAiMiAoU3Ryb25nKSIsICIzIChNdWx0aS1mYWN0b3IpIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICAgIGxvZ2ljOiAiSWYgbGV2ZWwgPSAwLCB2YWxpZGF0aW9uID0gZmFsc2UgYW5kIHdoaXRlbGlzdCA9IHRydWUuIElmIGxldmVsICE9IDAsIHZhbGlkYXRpb24gPSB0cnVlIGFuZCB3aGl0ZWxpc3QgPSBmYWxzZS4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlc3Npb25WYWxSZXF1aXJlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJTZXNzaW9uIFZhbGlkYXRpb24gUmVxdWlyZWQiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJXaGV0aGVyIHNlc3Npb24gdmFsaWRhdGlvbiBpcyByZXF1aXJlZCBmb3IgdGhpcyBzZXJ2aWNlLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJ0cnVlIiwgImZhbHNlIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgICAgICAgICBsb2dpYzogIkF1dG9tYXRpY2FsbHkgc2V0IGJhc2VkIG9uIGF1dGggbGV2ZWwuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB3aGl0ZWxpc3RlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJXaGl0ZWxpc3RlZCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIldoZXRoZXIgdGhpcyBzZXJ2aWNlIGlzIHdoaXRlbGlzdGVkIChhbGxvd2VkIHdpdGhvdXQgY2VydGFpbiBjaGVja3MpLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJ0cnVlIiwgImZhbHNlIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgICAgICAgICBsb2dpYzogIkF1dG9tYXRpY2FsbHkgc2V0IGJhc2VkIG9uIGF1dGggbGV2ZWwuIgogICAgICAgICAgICB9LAogICAgICAgICAgICBhbGxvd2VkU2NvcGU6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiQWxsb3dlZCBTY29wZSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlRoZSBPQXV0aC9hY2Nlc3Mgc2NvcGVzIHJlcXVpcmVkIHRvIGFjY2VzcyB0aGlzIHNlcnZpY2UuIFNwYWNlLXNlcGFyYXRlZCBsaXN0LiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJhY2Nlc3NfbGV2ZWwyIGlhbV9hY2Nlc3Mgc2VydmljZV9sZXZlbDIiLCAiYWNjZXNzX2xldmVsMCIsICJhZG1pbl9zY29wZSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdHhuQXV0aENvbmNlcm5zOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlRyYW5zYWN0aW9uIEF1dGggQ29uY2VybnMgKFR4biBBdXRoKSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIldoZXRoZXIgdGhpcyBzZXJ2aWNlIHJlcXVpcmVzIHRyYW5zYWN0aW9uIGF1dGhlbnRpY2F0aW9uL2F1dGhvcml6YXRpb24uIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlkgKFllcykiLCAiTiAoTm8pIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICAgIGxvZ2ljOiAiSWYgTiwgb25seSAxIGFjY2VzcyByZWNvcmQgaXMgYWxsb3dlZC4gSWYgWSwgMSBvciBtb3JlIGFjY2VzcyByZWNvcmRzIGFsbG93ZWQuIgogICAgICAgICAgICB9LAogICAgICAgICAgICBjb29saW5nUGVyaW9kQ2hlY2tSZXF1aXJlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJDb29saW5nIFBlcmlvZCBDaGVjayBSZXF1aXJlZCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIldoZXRoZXIgYSBjb29saW5nIHBlcmlvZCBjaGVjayBpcyByZXF1aXJlZCBiZWZvcmUgYWxsb3dpbmcgdGhpcyB0cmFuc2FjdGlvbi4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsidHJ1ZSIsICJmYWxzZSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHR4bkF1dGhSZXF1aXJlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJUcmFuc2FjdGlvbmFsIEF1dGggUmVxdWlyZWQiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgbGV2ZWwgb2YgdHJhbnNhY3Rpb24gYXV0aG9yaXphdGlvbiByZXF1aXJlZC4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiMCAoTm9uZSkiLCAiMSAoQmFzaWMpIiwgIjIgKFN0cm9uZykiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBub3RpZmljYXRpb25QYXJhbU1hcDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJOb3RpZmljYXRpb24gUGFyYW1ldGVyIE1hcCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIk1hcHMgcmVxdWVzdCBmaWVsZHMgdG8gbm90aWZpY2F0aW9uIHRlbXBsYXRlIHBhcmFtZXRlcnMuIFVzZWQgdG8gcG9wdWxhdGUgbm90aWZpY2F0aW9uIG1lc3NhZ2VzLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJTSE9SVEZJRUxEMDE9cnFPYmoucmVxdWVzdF9ib2R5LmFtb3VudCwgU0hPUlRGSUVMRDAyPXJxT2JqLnJlcXVlc3RfYm9keS5jdXJyZW5jeSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlc3Npb25Db25kaXRpb25NYXA6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiU2Vzc2lvbiBDb25kaXRpb24gTWFwIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiQ29uZGl0aW9ucyBiYXNlZCBvbiBzZXNzaW9uIGF0dHJpYnV0ZXMgdGhhdCBtdXN0IGJlIG1ldC4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsic2Vzc2lvbi5sb2dpblR5cGU9U0VDVVJFIiwgInNlc3Npb24uZGV2aWNlVmVyaWZpZWQ9dHJ1ZSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHByb2ZpbGVDb25kaXRpb25NYXA6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiUHJvZmlsZSBDb25kaXRpb24gTWFwIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiQ29uZGl0aW9ucyBiYXNlZCBvbiB1c2VyIHByb2ZpbGUgYXR0cmlidXRlcyB0aGF0IG11c3QgYmUgbWV0LiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJwcm9maWxlLmFjY291bnRUeXBlPVBSRU1JVU0iLCAicHJvZmlsZS52ZXJpZmllZD10cnVlIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVxdWVzdENvbmRpdGlvbnNNYXA6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiUmVxdWVzdCBDb25kaXRpb25zIE1hcCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIkN1c3RvbSBjb25kaXRpb25zIGJhc2VkIG9uIHJlcXVlc3QgZGF0YSB0aGF0IG11c3QgYmUgbWV0LiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJycU9iai5yZXF1ZXN0X2JvZHkuYW1vdW50PjEwMDAiLCAicnFPYmoucmVxdWVzdF9ib2R5LmN1cnJlbmN5PVVTRCJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJpc2tJbmRpY2F0b3I6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiUmlzayBJbmRpY2F0b3IiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJSaXNrIGxldmVsIGluZGljYXRvciBmb3IgdGhpcyB0cmFuc2FjdGlvbiB0eXBlLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyIwIChMb3cpIiwgIjEgKE1lZGl1bSkiLCAiMiAoSGlnaCkiLCAiMyAoQ3JpdGljYWwpIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcG9zdGFsQ29kZTogewogICAgICAgICAgICAgICAgdGl0bGU6ICJQb3N0YWwgQ29kZSBDaGVjayIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIldoZXRoZXIgcG9zdGFsIGNvZGUgdmFsaWRhdGlvbiBpcyByZXF1aXJlZC4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiMCAoTm90IHJlcXVpcmVkKSIsICIxIChSZXF1aXJlZCkiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICB1cGRhdGVMaW1pdDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJVcGRhdGUgTGltaXQgQ2hlY2siLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJXaGV0aGVyIGxpbWl0IHVwZGF0ZXMgYXJlIGFsbG93ZWQuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIjAgKE5vdCBhbGxvd2VkKSIsICIxIChBbGxvd2VkKSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1pbkFtdENvZGU6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiTWluIEFtb3VudCBDb2RlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiUmVmZXJlbmNlIGNvZGUgZm9yIHRoZSBtaW5pbXVtIGFtb3VudCBhbGxvd2VkIGZvciB0aGlzIHRyYW5zYWN0aW9uLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJERUZBVUxUX01JTl9BTVQiLCAiUEFZTk9XX01JTiIsICJUUkFOU0ZFUl9NSU4iXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBtaW5BbXRDb2RlVmFsdWU6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiTWluIEFtb3VudCBWYWx1ZSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlRoZSBhY3R1YWwgbWluaW11bSBhbW91bnQgdmFsdWUuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIjAuMDAwMCIsICIxMC4wMDAwIiwgIjEwMC4wMDAwIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWF4QW10Q29kZTogewogICAgICAgICAgICAgICAgdGl0bGU6ICJNYXggQW1vdW50IENvZGUiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJSZWZlcmVuY2UgY29kZSBmb3IgdGhlIG1heGltdW0gYW1vdW50IGFsbG93ZWQgZm9yIHRoaXMgdHJhbnNhY3Rpb24uIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIkRFRkFVTFRfTUFYX0FNVCIsICJQQVlOT1dfTUFYIiwgIlRSQU5TRkVSX01BWCJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1heEFtdENvZGVWYWx1ZTogewogICAgICAgICAgICAgICAgdGl0bGU6ICJNYXggQW1vdW50IFZhbHVlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIGFjdHVhbCBtYXhpbXVtIGFtb3VudCB2YWx1ZS4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiOTk5OTk5Ljk5OTkiLCAiMTAwMDAuMDAwMCIsICI1MDAwMC4wMDAwIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbm90aWZpY2F0aW9uVHlwZTogewogICAgICAgICAgICAgICAgdGl0bGU6ICJOb3RpZmljYXRpb24gVHlwZSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlRoZSB0eXBlIG9mIG5vdGlmaWNhdGlvbiB0byBzZW5kIHRvIHRoZSB1c2VyLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJTTVMiLCAiRU1BSUwiLCAiUFVTSCJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGF1dGhUeXBlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkF1dGggVHlwZSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlRoZSBhdXRoZW50aWNhdGlvbiB0eXBlIHJlcXVpcmVkIGZvciB0aGlzIG5vdGlmaWNhdGlvbi90cmFuc2FjdGlvbi4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiQVVUSF9IQVJEX1NJR04iLCAiQVVUSF9TT0ZUX1NJR04iLCAiQVVUSF9PVFAiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICB0ZW1wbGF0ZUlkOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlRlbXBsYXRlIElEIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIG5vdGlmaWNhdGlvbiB0ZW1wbGF0ZSBpZGVudGlmaWVyIGluY2x1ZGluZyBsYW5ndWFnZS4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiU1RCODhVUDEwODpFbmdsaXNoIiwgIlRFTVBMQVRFXzAwMTpFbmdsaXNoIiwgIlRYTl9BTEVSVDpTcGFuaXNoIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdGVtcGxhdGVQYXJhbXM6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiVGVtcGxhdGUgUGFyYW1ldGVycyIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIkNvbW1hLXNlcGFyYXRlZCBsaXN0IG9mIHBhcmFtZXRlcnMgdXNlZCBpbiB0aGUgbm90aWZpY2F0aW9uIHRlbXBsYXRlLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJTSE9SVEZJRUxEMDEsU0hPUlRGSUVMRDAyLFNIT1JURklFTEQwMyIsICJBTU9VTlQsQ1VSUkVOQ1ksREFURSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGlzTWFuZGF0b3J5OiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIklzIE1hbmRhdG9yeSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIldoZXRoZXIgdGhpcyBub3RpZmljYXRpb24gaXMgbWFuZGF0b3J5IGZvciB0aGUgdHJhbnNhY3Rpb24uIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbInRydWUiLCAiZmFsc2UiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBhZGRDaGFubmVsKCk7CiAgICAgICAgfTsKCiAgICAgICAgZnVuY3Rpb24gc2hvd0luZm8oZmllbGROYW1lKSB7CiAgICAgICAgICAgIGNvbnN0IGluZm8gPSBmaWVsZEluZm9bZmllbGROYW1lXTsKICAgICAgICAgICAgaWYgKCFpbmZvKSB7CiAgICAgICAgICAgICAgICBhbGVydCgnTm8gaW5mb3JtYXRpb24gYXZhaWxhYmxlIGZvciB0aGlzIGZpZWxkLicpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mb1RpdGxlJykudGV4dENvbnRlbnQgPSBpbmZvLnRpdGxlOwoKICAgICAgICAgICAgbGV0IGJvZHlIVE1MID0gYDxwPiR7aW5mby5kZXNjcmlwdGlvbn08L3A+YDsKCiAgICAgICAgICAgIGlmIChpbmZvLnJlcXVpcmVkICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIGJvZHlIVE1MICs9IGA8c3Ryb25nPlJlcXVpcmVkOjwvc3Ryb25nPiAke2luZm8ucmVxdWlyZWQgPyAnWWVzJyA6ICdObyd9YDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGluZm8uZXhhbXBsZXMgJiYgaW5mby5leGFtcGxlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBib2R5SFRNTCArPSBgPHN0cm9uZz5FeGFtcGxlczo8L3N0cm9uZz5gOwogICAgICAgICAgICAgICAgYm9keUhUTUwgKz0gJzx1bCBzdHlsZT0ibWFyZ2luOiA1cHggMDsgcGFkZGluZy1sZWZ0OiAyMHB4OyI+JzsKICAgICAgICAgICAgICAgIGluZm8uZXhhbXBsZXMuZm9yRWFjaChleCA9PiB7CiAgICAgICAgICAgICAgICAgICAgYm9keUhUTUwgKz0gYDxsaT48Y29kZT4ke2V4fTwvY29kZT48L2xpPmA7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGJvZHlIVE1MICs9ICc8L3VsPic7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpbmZvLmxvZ2ljKSB7CiAgICAgICAgICAgICAgICBib2R5SFRNTCArPSBgPHN0cm9uZz5CdXNpbmVzcyBMb2dpYzo8L3N0cm9uZz48cCBzdHlsZT0ibWFyZ2luOiA1cHggMDsgcGFkZGluZzogOHB4OyBiYWNrZ3JvdW5kOiAjZmZmM2NkOyBib3JkZXItbGVmdDogM3B4IHNvbGlkICNmZmMxMDc7IGJvcmRlci1yYWRpdXM6IDNweDsiPiR7aW5mby5sb2dpY308L3A+YDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm9Cb2R5JykuaW5uZXJIVE1MID0gYm9keUhUTUw7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNsb3NlSW5mb01vZGFsKCkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mb01vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB9CgogICAgICAgIC8vIENsb3NlIGluZm8gbW9kYWwgd2hlbiBjbGlja2luZyBvdXRzaWRlCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgY29uc3QgaW5mb01vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm9Nb2RhbCcpOwogICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09IGluZm9Nb2RhbCkgewogICAgICAgICAgICAgICAgY2xvc2VJbmZvTW9kYWwoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3QgZXhwYW5kTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kTW9kYWwnKTsKICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PSBleHBhbmRNb2RhbCkgewogICAgICAgICAgICAgICAgY2xvc2VFeHBhbmRNb2RhbCgpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8vIEV4cGFuZCBmaWVsZCBmdW5jdGlvbmFsaXR5CiAgICAgICAgbGV0IGN1cnJlbnRFeHBhbmRJbnB1dCA9IG51bGw7CgogICAgICAgIGZ1bmN0aW9uIGV4cGFuZEZpZWxkKGV4cGFuZEljb24sIGZpZWxkVGl0bGUpIHsKICAgICAgICAgICAgY29uc3QgaW5wdXRXcmFwcGVyID0gZXhwYW5kSWNvbi5wYXJlbnRFbGVtZW50OwogICAgICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBpbnB1dFdyYXBwZXIucXVlcnlTZWxlY3RvcignaW5wdXQnKTsKCiAgICAgICAgICAgIGN1cnJlbnRFeHBhbmRJbnB1dCA9IGlucHV0RWxlbWVudDsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGFuZFRpdGxlJykudGV4dENvbnRlbnQgPSBmaWVsZFRpdGxlOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kVGV4dGFyZWEnKS52YWx1ZSA9IGlucHV0RWxlbWVudC52YWx1ZTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGFuZE1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBhbmRUZXh0YXJlYScpLmZvY3VzKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjbG9zZUV4cGFuZE1vZGFsKCkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICBjdXJyZW50RXhwYW5kSW5wdXQgPSBudWxsOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2F2ZUV4cGFuZGVkVmFsdWUoKSB7CiAgICAgICAgICAgIGlmIChjdXJyZW50RXhwYW5kSW5wdXQpIHsKICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGFuZFRleHRhcmVhJykudmFsdWU7CiAgICAgICAgICAgICAgICBjdXJyZW50RXhwYW5kSW5wdXQudmFsdWUgPSBuZXdWYWx1ZTsKICAgICAgICAgICAgICAgIGNsb3NlRXhwYW5kTW9kYWwoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc3dpdGNoVGFiKHRhYk5hbWUpIHsKICAgICAgICAgICAgLy8gSGlkZSBhbGwgdGFicwogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiLWNvbnRlbnQnKS5mb3JFYWNoKHRhYiA9PiB7CiAgICAgICAgICAgICAgICB0YWIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gUmVtb3ZlIGFjdGl2ZSBjbGFzcyBmcm9tIGFsbCB0YWIgYnV0dG9ucwogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiJykuZm9yRWFjaChidG4gPT4gewogICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIFNob3cgc2VsZWN0ZWQgdGFiCiAgICAgICAgICAgIGlmICh0YWJOYW1lID09PSAnZWRpdG9yJykgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRvclRhYicpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYicpWzBdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHRhYk5hbWUgPT09ICdjb21wYXJlJykgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbXBhcmVUYWInKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWInKVsxXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKCiAgICAgICAgICAgICAgICAvLyBQb3B1bGF0ZSBkZWZhdWx0IHZhbHVlIGluIGJvdGggdGV4dGFyZWFzIGlmIGVtcHR5CiAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0SnNvblN0cmluZyA9IGB7CiAgInBvbGljaWVzTWFwcyI6IFsKICAgIHsKICAgICAgImNoYW5uZWxJZCI6ICJTR19NQiIsCiAgICAgICJwb2xpY2llcyI6IFsKCiAgICAgIF0KICAgIH0KICBdCn1gOwoKICAgICAgICAgICAgICAgIGNvbnN0IGpzb24xVGV4dGFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNvbjEnKTsKICAgICAgICAgICAgICAgIGlmICghanNvbjFUZXh0YXJlYS52YWx1ZS50cmltKCkpIHsKICAgICAgICAgICAgICAgICAgICBqc29uMVRleHRhcmVhLnZhbHVlID0gZGVmYXVsdEpzb25TdHJpbmc7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc3QganNvbjJUZXh0YXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc29uMicpOwogICAgICAgICAgICAgICAgaWYgKCFqc29uMlRleHRhcmVhLnZhbHVlLnRyaW0oKSkgewogICAgICAgICAgICAgICAgICAgIGpzb24yVGV4dGFyZWEudmFsdWUgPSBkZWZhdWx0SnNvblN0cmluZzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWRkQ2hhbm5lbCgpIHsKICAgICAgICAgICAgY29uc3QgY2hhbm5lbElkID0gYGNoYW5uZWxfJHtjaGFubmVsQ291bnRlcisrfWA7CiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFubmVsc0NvbnRhaW5lcicpOwoKICAgICAgICAgICAgY29uc3QgY2hhbm5lbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBjaGFubmVsRGl2LmNsYXNzTmFtZSA9ICdjaGFubmVsLXNlY3Rpb24nOwogICAgICAgICAgICBjaGFubmVsRGl2LmlkID0gY2hhbm5lbElkOwogICAgICAgICAgICBjaGFubmVsRGl2LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyIj4KICAgICAgICAgICAgICAgICAgICA8aDI+Q2hhbm5lbCA8c3BhbiBjbGFzcz0iYmFkZ2UiPiMke2NoYW5uZWxDb3VudGVyfTwvc3Bhbj48L2gyPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iZGFuZ2VyIHNtYWxsIiBvbmNsaWNrPSJyZW1vdmVDaGFubmVsKCcke2NoYW5uZWxJZH0nKSI+UmVtb3ZlPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0icmVxdWlyZWQiPkNoYW5uZWwgSUQgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ2NoYW5uZWxJZCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJjaGFubmVsSWQiIHZhbHVlPSJTR19NQiIgcmVxdWlyZWQ+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBvbGljaWVzLWNvbnRhaW5lciIgaWQ9InBvbGljaWVzXyR7Y2hhbm5lbElkfSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9InNlY29uZGFyeSBzbWFsbCIgb25jbGljaz0iYWRkUG9saWN5KCcke2NoYW5uZWxJZH0nKSI+KyBQb2xpY3k8L2J1dHRvbj4KICAgICAgICAgICAgYDsKICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNoYW5uZWxEaXYpOwogICAgICAgICAgICBhZGRQb2xpY3koY2hhbm5lbElkKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbW92ZUNoYW5uZWwoY2hhbm5lbElkKSB7CiAgICAgICAgICAgIGlmIChjb25maXJtKCdSZW1vdmUgdGhpcyBjaGFubmVsPycpKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjaGFubmVsSWQpLnJlbW92ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhZGRQb2xpY3koY2hhbm5lbElkKSB7CiAgICAgICAgICAgIGNvbnN0IHBvbGljeUlkID0gYHBvbGljeV8ke3BvbGljeUNvdW50ZXIrK31gOwogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcG9saWNpZXNfJHtjaGFubmVsSWR9YCk7CgogICAgICAgICAgICBjb25zdCBwb2xpY3lEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgcG9saWN5RGl2LmNsYXNzTmFtZSA9ICdwb2xpY3ktc2VjdGlvbic7CiAgICAgICAgICAgIHBvbGljeURpdi5pZCA9IHBvbGljeUlkOwogICAgICAgICAgICBwb2xpY3lEaXYuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxoMz5Qb2xpY3kgPHNwYW4gY2xhc3M9ImJhZGdlIj4jJHtwb2xpY3lDb3VudGVyfTwvc3Bhbj48L2gzPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iZGFuZ2VyIHNtYWxsIiBvbmNsaWNrPSJyZW1vdmVQb2xpY3koJyR7cG9saWN5SWR9JykiPlJlbW92ZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZC01Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJyZXF1aXJlZCI+U2VydmljZSBJRCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnc2VydmljZUlkJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJzZXJ2aWNlSWQiIHZhbHVlPSJTRVJWSUNFX0lEXyR7cG9saWN5Q291bnRlcn0iIHJlcXVpcmVkPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InJlcXVpcmVkIj5VUkkgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ2VuZFBvaW50JykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJlbmRQb2ludCIgdmFsdWU9Ii9hcGkvZW5kcG9pbnQiIHJlcXVpcmVkPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InJlcXVpcmVkIj5NZXRob2QgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ2h0dHBNZXRob2QnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJodHRwTWV0aG9kIiByZXF1aXJlZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlBPU1QiPlBPU1Q8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkdFVCI+R0VUPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQVVQiPlBVVDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iREVMRVRFIj5ERUxFVEU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5PdXQgVVJJIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdvdXRFbmRQb2ludCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0ib3V0RW5kUG9pbnQiIHZhbHVlPSIvYXBpL2VuZHBvaW50Ij4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJyZXF1aXJlZCI+RGVzY3JpcHRpb24gPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3NlcnZpY2VEZXNjJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJzZXJ2aWNlRGVzYyIgdmFsdWU9IlNlcnZpY2UgZGVzY3JpcHRpb24iIHJlcXVpcmVkPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZC01Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJyZXF1aXJlZCI+TGV2ZWwgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ2F1dGhMZXZlbFJlcXVpcmVkJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0iYXV0aExldmVsUmVxdWlyZWQiIG9uY2hhbmdlPSJ1cGRhdGVWYWxpZGF0aW9uRmllbGRzKHRoaXMpIiByZXF1aXJlZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjAiIHNlbGVjdGVkPjA8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjEiPjE8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjIiPjI8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5WYWxpZGF0aW9uIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdzZXNzaW9uVmFsUmVxdWlyZWQnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJzZXNzaW9uVmFsUmVxdWlyZWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZmFsc2UiIHNlbGVjdGVkPmZhbHNlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJ0cnVlIj50cnVlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+V2hpdGVsaXN0IDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCd3aGl0ZWxpc3RlZCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9IndoaXRlbGlzdGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InRydWUiIHNlbGVjdGVkPnRydWU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImZhbHNlIj5mYWxzZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJyZXF1aXJlZCI+VHhuIEF1dGggPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3R4bkF1dGhDb25jZXJucycpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9InR4bkF1dGhDb25jZXJucyIgb25jaGFuZ2U9InVwZGF0ZUFjY2Vzc1Jlc3RyaWN0aW9uKHRoaXMpIiByZXF1aXJlZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ik4iPk48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlkiPlk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0icmVxdWlyZWQiPlNjb3BlIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdhbGxvd2VkU2NvcGUnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImFsbG93ZWRTY29wZSIgdmFsdWU9ImFjY2Vzc19sZXZlbDAiIHJlcXVpcmVkPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWxlcnQgYWxlcnQtaW5mbyBhY2Nlc3MtcmVzdHJpY3Rpb24iIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4KICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPk5vdGU6PC9zdHJvbmc+IFR4biBBdXRoPU4gYWxsb3dzIG9ubHkgMSBhY2Nlc3MgcmVjb3JkLgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW4tdG9wOiA4cHg7Ij5Ob3RpZmljYXRpb25zIChhcHBsaWVkIHRvIGFsbCBhY2Nlc3MgcmVjb3Jkcyk8L2gzPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibm90aWZpY2F0aW9ucy1jb250YWluZXIiIGlkPSJub3RpZmljYXRpb25zXyR7cG9saWN5SWR9Ij48L2Rpdj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ic2Vjb25kYXJ5IHNtYWxsIiBvbmNsaWNrPSJhZGROb3RpZmljYXRpb24oJyR7cG9saWN5SWR9JykiPisgTm90aWZpY2F0aW9uPC9idXR0b24+CgogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW4tdG9wOiA4cHg7Ij5BY2Nlc3MgUmVjb3JkczwvaDM+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhY2Nlc3Nlcy1jb250YWluZXIiIGlkPSJhY2Nlc3Nlc18ke3BvbGljeUlkfSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9InNlY29uZGFyeSBzbWFsbCIgb25jbGljaz0iYWRkQWNjZXNzKCcke3BvbGljeUlkfScpIj4rIEFjY2VzczwvYnV0dG9uPgogICAgICAgICAgICBgOwogICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocG9saWN5RGl2KTsKICAgICAgICAgICAgYWRkTm90aWZpY2F0aW9uKHBvbGljeUlkKTsKICAgICAgICAgICAgYWRkQWNjZXNzKHBvbGljeUlkKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbW92ZVBvbGljeShwb2xpY3lJZCkgewogICAgICAgICAgICBpZiAoY29uZmlybSgnUmVtb3ZlIHRoaXMgcG9saWN5PycpKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb2xpY3lJZCkucmVtb3ZlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVZhbGlkYXRpb25GaWVsZHMoaW5wdXQpIHsKICAgICAgICAgICAgY29uc3QgcG9saWN5U2VjdGlvbiA9IGlucHV0LmNsb3Nlc3QoJy5wb2xpY3ktc2VjdGlvbicpOwogICAgICAgICAgICBjb25zdCBsZXZlbCA9IHBhcnNlSW50KGlucHV0LnZhbHVlKTsKICAgICAgICAgICAgY29uc3QgdmFsaWRhdGlvblNlbGVjdCA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InNlc3Npb25WYWxSZXF1aXJlZCJdJyk7CiAgICAgICAgICAgIGNvbnN0IHdoaXRlbGlzdFNlbGVjdCA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9IndoaXRlbGlzdGVkIl0nKTsKCiAgICAgICAgICAgIGlmIChsZXZlbCA9PT0gMCkgewogICAgICAgICAgICAgICAgdmFsaWRhdGlvblNlbGVjdC52YWx1ZSA9ICdmYWxzZSc7CiAgICAgICAgICAgICAgICB3aGl0ZWxpc3RTZWxlY3QudmFsdWUgPSAndHJ1ZSc7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uU2VsZWN0LnZhbHVlID0gJ3RydWUnOwogICAgICAgICAgICAgICAgd2hpdGVsaXN0U2VsZWN0LnZhbHVlID0gJ2ZhbHNlJzsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlQWNjZXNzUmVzdHJpY3Rpb24oc2VsZWN0KSB7CiAgICAgICAgICAgIGNvbnN0IHBvbGljeVNlY3Rpb24gPSBzZWxlY3QuY2xvc2VzdCgnLnBvbGljeS1zZWN0aW9uJyk7CiAgICAgICAgICAgIGNvbnN0IGFsZXJ0ID0gcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuYWNjZXNzLXJlc3RyaWN0aW9uJyk7CiAgICAgICAgICAgIGNvbnN0IGFjY2Vzc0NvbnRhaW5lciA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignLmFjY2Vzc2VzLWNvbnRhaW5lcicpOwoKICAgICAgICAgICAgaWYgKHNlbGVjdC52YWx1ZSA9PT0gJ04nKSB7CiAgICAgICAgICAgICAgICBhbGVydC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1NlY3Rpb25zID0gYWNjZXNzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5hY2Nlc3Mtc2VjdGlvbicpOwogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBhY2Nlc3NTZWN0aW9ucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb25zW2ldLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYWxlcnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWRkTm90aWZpY2F0aW9uKHBvbGljeUlkKSB7CiAgICAgICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbklkID0gYG5vdGlmaWNhdGlvbl8ke25vdGlmaWNhdGlvbkNvdW50ZXIrK31gOwogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgbm90aWZpY2F0aW9uc18ke3BvbGljeUlkfWApOwoKICAgICAgICAgICAgY29uc3Qgbm90aWZpY2F0aW9uRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIG5vdGlmaWNhdGlvbkRpdi5jbGFzc05hbWUgPSAnbm90aWZpY2F0aW9uLXNlY3Rpb24nOwogICAgICAgICAgICBub3RpZmljYXRpb25EaXYuaWQgPSBub3RpZmljYXRpb25JZDsKICAgICAgICAgICAgbm90aWZpY2F0aW9uRGl2LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyIj4KICAgICAgICAgICAgICAgICAgICA8aDM+Tm90aWYgPHNwYW4gY2xhc3M9ImJhZGdlIj4jJHtub3RpZmljYXRpb25Db3VudGVyfTwvc3Bhbj48L2gzPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iZGFuZ2VyIHNtYWxsIiBvbmNsaWNrPSJyZW1vdmVOb3RpZmljYXRpb24oJyR7bm90aWZpY2F0aW9uSWR9JykiPng8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZC01Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlR5cGUgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ25vdGlmaWNhdGlvblR5cGUnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJub3RpZmljYXRpb25UeXBlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlNNUyI+U01TPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJFTUFJTCI+RU1BSUw8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlBVU0giPlBVU0g8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5BdXRoIFR5cGUgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ2F1dGhUeXBlJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJhdXRoVHlwZSIgdmFsdWU9IkFVVEhfSEFSRF9TSUdOIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPk1hbmRhdG9yeSA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnaXNNYW5kYXRvcnknKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJpc01hbmRhdG9yeSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJ0cnVlIiBzZWxlY3RlZD50cnVlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJmYWxzZSI+ZmFsc2U8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5UZW1wbGF0ZSBJRCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygndGVtcGxhdGVJZCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0idGVtcGxhdGVJZCIgdmFsdWU9IlRFTVBMQVRFXzAwMTpFbmdsaXNoIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlRlbXBsYXRlIFBhcmFtcyA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygndGVtcGxhdGVQYXJhbXMnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InRlbXBsYXRlUGFyYW1zIiB2YWx1ZT0iU0hPUlRGSUVMRDAxLFNIT1JURklFTEQwMiI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYDsKICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG5vdGlmaWNhdGlvbkRpdik7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZW1vdmVOb3RpZmljYXRpb24obm90aWZpY2F0aW9uSWQpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobm90aWZpY2F0aW9uSWQpLnJlbW92ZSgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWRkQWNjZXNzKHBvbGljeUlkKSB7CiAgICAgICAgICAgIGNvbnN0IHBvbGljeVNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb2xpY3lJZCk7CiAgICAgICAgICAgIGNvbnN0IHR4bkF1dGhTZWxlY3QgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ0eG5BdXRoQ29uY2VybnMiXScpOwogICAgICAgICAgICBjb25zdCBhY2Nlc3NDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgYWNjZXNzZXNfJHtwb2xpY3lJZH1gKTsKICAgICAgICAgICAgY29uc3QgY3VycmVudEFjY2Vzc0NvdW50ID0gYWNjZXNzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5hY2Nlc3Mtc2VjdGlvbicpLmxlbmd0aDsKCiAgICAgICAgICAgIGlmICh0eG5BdXRoU2VsZWN0LnZhbHVlID09PSAnTicgJiYgY3VycmVudEFjY2Vzc0NvdW50ID49IDEpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdUeG4gQXV0aD1OIGFsbG93cyBvbmx5IDEgYWNjZXNzIHJlY29yZC4nKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3QgYWNjZXNzSWQgPSBgYWNjZXNzXyR7YWNjZXNzQ291bnRlcisrfWA7CgogICAgICAgICAgICBjb25zdCBhY2Nlc3NEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgYWNjZXNzRGl2LmNsYXNzTmFtZSA9ICdhY2Nlc3Mtc2VjdGlvbic7CiAgICAgICAgICAgIGFjY2Vzc0Rpdi5pZCA9IGFjY2Vzc0lkOwogICAgICAgICAgICBhY2Nlc3NEaXYuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxoMz5BY2Nlc3MgPHNwYW4gY2xhc3M9ImJhZGdlIj4jJHthY2Nlc3NDb3VudGVyfTwvc3Bhbj48L2gzPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iZGFuZ2VyIHNtYWxsIiBvbmNsaWNrPSJyZW1vdmVBY2Nlc3MoJyR7YWNjZXNzSWR9JykiPlJlbW92ZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZC0zIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkNvb2xpbmcgUGVyaW9kIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdjb29saW5nUGVyaW9kQ2hlY2tSZXF1aXJlZCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9ImNvb2xpbmdQZXJpb2RDaGVja1JlcXVpcmVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImZhbHNlIiBzZWxlY3RlZD5mYWxzZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0idHJ1ZSI+dHJ1ZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlR4biBBdXRoIFJlcSA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygndHhuQXV0aFJlcXVpcmVkJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0idHhuQXV0aFJlcXVpcmVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjAiIHNlbGVjdGVkPjA8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjEiPjE8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjIiPjI8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5Ob3RpZiBQYXJhbSBNYXAgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ25vdGlmaWNhdGlvblBhcmFtTWFwJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJub3RpZmljYXRpb25QYXJhbU1hcCIgdmFsdWU9IlNIT1JURklFTEQwMT12YWwxIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQtMyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5TZXNzaW9uIENvbmQgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3Nlc3Npb25Db25kaXRpb25NYXAnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5wdXQtd2l0aC1leHBhbmQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InNlc3Npb25Db25kaXRpb25NYXAiIHZhbHVlPSIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImV4cGFuZC1pY29uIiBvbmNsaWNrPSJleHBhbmRGaWVsZCh0aGlzLCAnU2Vzc2lvbiBDb25kaXRpb24gTWFwJykiIHRpdGxlPSJFeHBhbmQiPuKkojwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5Qcm9maWxlIENvbmQgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3Byb2ZpbGVDb25kaXRpb25NYXAnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5wdXQtd2l0aC1leHBhbmQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InByb2ZpbGVDb25kaXRpb25NYXAiIHZhbHVlPSIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImV4cGFuZC1pY29uIiBvbmNsaWNrPSJleHBhbmRGaWVsZCh0aGlzLCAnUHJvZmlsZSBDb25kaXRpb24gTWFwJykiIHRpdGxlPSJFeHBhbmQiPuKkojwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5SZXF1ZXN0IENvbmQgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3JlcXVlc3RDb25kaXRpb25zTWFwJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImlucHV0LXdpdGgtZXhwYW5kIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJyZXF1ZXN0Q29uZGl0aW9uc01hcCIgdmFsdWU9IiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZXhwYW5kLWljb24iIG9uY2xpY2s9ImV4cGFuZEZpZWxkKHRoaXMsICdSZXF1ZXN0IENvbmRpdGlvbnMgTWFwJykiIHRpdGxlPSJFeHBhbmQiPuKkojwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkLTMiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+UmlzayBJbmQgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3Jpc2tJbmRpY2F0b3InKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InJpc2tJbmRpY2F0b3IiIHZhbHVlPSIwIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlBvc3RhbCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygncG9zdGFsQ29kZScpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0icG9zdGFsQ29kZSIgdmFsdWU9IjAiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+VXBkYXRlIExtdCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygndXBkYXRlTGltaXQnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InVwZGF0ZUxpbWl0IiB2YWx1ZT0iMCI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkLTQiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+TWluIEFtdCBDb2RlIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdtaW5BbXRDb2RlJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJtaW5BbXRDb2RlIiB2YWx1ZT0iREVGQVVMVF9NSU5fQU1UIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPk1pbiBBbXQgVmFsIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdtaW5BbXRDb2RlVmFsdWUnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgc3RlcD0iMC4wMSIgbmFtZT0ibWluQW10Q29kZVZhbHVlIiB2YWx1ZT0iMCI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5NYXggQW10IENvZGUgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ21heEFtdENvZGUnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9Im1heEFtdENvZGUiIHZhbHVlPSJERUZBVUxUX01BWF9BTVQiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+TWF4IEFtdCBWYWwgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ21heEFtdENvZGVWYWx1ZScpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBzdGVwPSIwLjAxIiBuYW1lPSJtYXhBbXRDb2RlVmFsdWUiIHZhbHVlPSI5OTk5OTkuOTkiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGA7CiAgICAgICAgICAgIGFjY2Vzc0NvbnRhaW5lci5hcHBlbmRDaGlsZChhY2Nlc3NEaXYpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQWNjZXNzKGFjY2Vzc0lkKSB7CiAgICAgICAgICAgIGlmIChjb25maXJtKCdSZW1vdmUgdGhpcyBhY2Nlc3MgcmVjb3JkPycpKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhY2Nlc3NJZCkucmVtb3ZlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNvbGxlY3RGb3JtRGF0YSgpIHsKICAgICAgICAgICAgY29uc3QgY2hhbm5lbHMgPSBbXTsKICAgICAgICAgICAgY29uc3QgY2hhbm5lbFNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYW5uZWwtc2VjdGlvbicpOwoKICAgICAgICAgICAgY2hhbm5lbFNlY3Rpb25zLmZvckVhY2goY2hhbm5lbFNlY3Rpb24gPT4gewogICAgICAgICAgICAgICAgY29uc3QgY2hhbm5lbElkID0gY2hhbm5lbFNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImNoYW5uZWxJZCJdJykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCBwb2xpY2llcyA9IFtdOwoKICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeVNlY3Rpb25zID0gY2hhbm5lbFNlY3Rpb24ucXVlcnlTZWxlY3RvckFsbCgnLnBvbGljeS1zZWN0aW9uJyk7CiAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9ucy5mb3JFYWNoKHBvbGljeVNlY3Rpb24gPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZUlkOiBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJzZXJ2aWNlSWQiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBlbmRQb2ludDogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iZW5kUG9pbnQiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBodHRwTWV0aG9kOiBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJodHRwTWV0aG9kIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgb3V0RW5kUG9pbnQ6IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im91dEVuZFBvaW50Il0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZURlc2M6IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InNlcnZpY2VEZXNjIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgYXV0aExldmVsUmVxdWlyZWQ6IHBhcnNlSW50KHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImF1dGhMZXZlbFJlcXVpcmVkIl0nKS52YWx1ZSksCiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25WYWxSZXF1aXJlZDogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ic2Vzc2lvblZhbFJlcXVpcmVkIl0nKS52YWx1ZSA9PT0gJ3RydWUnLAogICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZWxpc3RlZDogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0id2hpdGVsaXN0ZWQiXScpLnZhbHVlID09PSAndHJ1ZScsCiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93ZWRTY29wZTogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYWxsb3dlZFNjb3BlIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgdHhuQXV0aENvbmNlcm5zOiBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ0eG5BdXRoQ29uY2VybnMiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NlczogW10KICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAvLyBDb2xsZWN0IHBvbGljeS1sZXZlbCBub3RpZmljYXRpb25zCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9saWN5Tm90aWZpY2F0aW9ucyA9IFtdOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeU5vdGlmU2VjdGlvbnMgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub3RpZmljYXRpb25zLWNvbnRhaW5lciAubm90aWZpY2F0aW9uLXNlY3Rpb24nKTsKICAgICAgICAgICAgICAgICAgICBwb2xpY3lOb3RpZlNlY3Rpb25zLmZvckVhY2gobm90aWZpY2F0aW9uU2VjdGlvbiA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblR5cGU6IG5vdGlmaWNhdGlvblNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im5vdGlmaWNhdGlvblR5cGUiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aFR5cGU6IG5vdGlmaWNhdGlvblNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImF1dGhUeXBlIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlSWQ6IG5vdGlmaWNhdGlvblNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InRlbXBsYXRlSWQiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVQYXJhbXM6IG5vdGlmaWNhdGlvblNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InRlbXBsYXRlUGFyYW1zIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTWFuZGF0b3J5OiBub3RpZmljYXRpb25TZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJpc01hbmRhdG9yeSJdJykudmFsdWUKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5Tm90aWZpY2F0aW9ucy5wdXNoKG5vdGlmaWNhdGlvbik7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1NlY3Rpb25zID0gcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yQWxsKCcuYWNjZXNzLXNlY3Rpb24nKTsKICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9ucy5mb3JFYWNoKGFjY2Vzc1NlY3Rpb24gPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY2Nlc3MgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb29saW5nUGVyaW9kQ2hlY2tSZXF1aXJlZDogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iY29vbGluZ1BlcmlvZENoZWNrUmVxdWlyZWQiXScpLnZhbHVlID09PSAndHJ1ZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eG5BdXRoUmVxdWlyZWQ6IGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InR4bkF1dGhSZXF1aXJlZCJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25QYXJhbU1hcDogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibm90aWZpY2F0aW9uUGFyYW1NYXAiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uRGV0bHM6IFsuLi5wb2xpY3lOb3RpZmljYXRpb25zXSwgLy8gQ29weSBwb2xpY3ktbGV2ZWwgbm90aWZpY2F0aW9ucyB0byBlYWNoIGFjY2VzcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbkNvbmRpdGlvbk1hcDogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ic2Vzc2lvbkNvbmRpdGlvbk1hcCJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlQ29uZGl0aW9uTWFwOiBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJwcm9maWxlQ29uZGl0aW9uTWFwIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RDb25kaXRpb25zTWFwOiBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJyZXF1ZXN0Q29uZGl0aW9uc01hcCJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0Q29uZGl0aW9uczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpc2tJbmRpY2F0b3I6IGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InJpc2tJbmRpY2F0b3IiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkFtdDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbXRDb2RlOiBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJtaW5BbXRDb2RlIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW10Q29kZVZhbHVlOiBwYXJzZUZsb2F0KGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im1pbkFtdENvZGVWYWx1ZSJdJykudmFsdWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhBbXQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW10Q29kZTogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibWF4QW10Q29kZSJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtdENvZGVWYWx1ZTogcGFyc2VGbG9hdChhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJtYXhBbXRDb2RlVmFsdWUiXScpLnZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdGFsQ29kZTogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0icG9zdGFsQ29kZSJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlTGltaXQ6IGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InVwZGF0ZUxpbWl0Il0nKS52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5LmFjY2Vzc2VzLnB1c2goYWNjZXNzKTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgcG9saWNpZXMucHVzaChwb2xpY3kpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY2hhbm5lbHMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbElkOiBjaGFubmVsSWQsCiAgICAgICAgICAgICAgICAgICAgcG9saWNpZXM6IHBvbGljaWVzCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICByZXR1cm4geyBwb2xpY2llc01hcHM6IGNoYW5uZWxzIH07CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZUpTT04oKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gY29sbGVjdEZvcm1EYXRhKCk7CiAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMik7CiAgICAgICAgICAgICAgICBjdXJyZW50T3V0cHV0ID0ganNvbjsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdXRwdXRUeXBlJykudmFsdWUgPSAnanNvbic7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3V0cHV0Qm94JykudGV4dENvbnRlbnQgPSBqc29uOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgYWxlcnQoJ0Vycm9yIGdlbmVyYXRpbmcgSlNPTjogJyArIGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZVNRTCgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBjb2xsZWN0Rm9ybURhdGEoKTsKICAgICAgICAgICAgICAgIGxldCBzcWwgPSAnLS0gR2VuZXJhdGVkIFNRTCBJbnNlcnQgU3RhdGVtZW50c1xuJzsKICAgICAgICAgICAgICAgIHNxbCArPSAnLS0gR2VuZXJhdGVkIG9uOiAnICsgbmV3IERhdGUoKS50b0lTT1N0cmluZygpICsgJ1xuXG4nOwoKICAgICAgICAgICAgICAgIGRhdGEucG9saWNpZXNNYXBzLmZvckVhY2goY2hhbm5lbCA9PiB7CiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbC5wb2xpY2llcy5mb3JFYWNoKHBvbGljeSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgLS0gUG9saWN5OiAke3BvbGljeS5zZXJ2aWNlSWR9XG5gOwogICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYElOU0VSVCBJTlRPIHJpc2tfbWF0cml4X3BvbGljeV9tYXN0ZXIKICAgIChQT0xJQ1lfVFlQRSwgTkVYVEdFTl9GTEFHLCBTRVJWSUNFX0lELCBDSEFOTkVMX0lELCBFTkRfUE9JTlQsIEhUVFBfTUVUSE9ELAogICAgIFNFUlZJQ0VfREVTQywgQVVUSF9MRVZFTF9SRVEsIFNFU19WQUxEX1JFUSwgV0hJVEVMSVNURUQsIEFMTE9XRURfU0NPUEUsCiAgICAgVFhOX0FVVEhfQ09OQ0VSTlMsIE9VVF9FTkRfUE9JTlQsIENSRUFURURfQllfVVNFUiwgQ1JFQVRFRF9EQVRFLCBNQUtFUl9VU0VSKQpWQUxVRVMKICAgICgnUE9MSUNZJywgMSwgJyR7cG9saWN5LnNlcnZpY2VJZH0nLCAnJHtjaGFubmVsLmNoYW5uZWxJZH0nLCAnJHtwb2xpY3kuZW5kUG9pbnR9JywKICAgICAnJHtwb2xpY3kuaHR0cE1ldGhvZH0nLCAnJHtwb2xpY3kuc2VydmljZURlc2MucmVwbGFjZSgvJy9nLCAiJyciKX0nLCAke3BvbGljeS5hdXRoTGV2ZWxSZXF1aXJlZH0sCiAgICAgJHtwb2xpY3kuc2Vzc2lvblZhbFJlcXVpcmVkID8gMSA6IDB9LCAke3BvbGljeS53aGl0ZWxpc3RlZCA/IDEgOiAwfSwgJyR7cG9saWN5LmFsbG93ZWRTY29wZX0nLAogICAgICcke3BvbGljeS50eG5BdXRoQ29uY2VybnN9JywgJyR7cG9saWN5Lm91dEVuZFBvaW50fScsICdTWVNURU0nLCBOT1coKSwgJ1NZU1RFTScpO1xuXG5gOwoKICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5LmFjY2Vzc2VzLmZvckVhY2goKGFjY2VzcywgYWNjZXNzSWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYC0tIEFjY2VzcyBSZWNvcmQgJHthY2Nlc3NJZHggKyAxfSAtIFJlcXVlc3QgQ29uZGl0aW9ucyBmb3IgJHtwb2xpY3kuc2VydmljZUlkfVxuYDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgSU5TRVJUIElOVE8gcmlza19tYXRyaXhfcnFjb25kaXRpb25fbWFzdGVyCiAgICAoU0VSVklDRV9JRCwgTUlOX0FNVF9DT0RFLCBNQVhfQU1UX0NPREUsIFBPU1RBTF9DT0RFLCBSSVNLX0lORElDQVRPUiwKICAgICBVUERBVEVfTElNSVQsIENSRUFURURfQllfVVNFUiwgQ1JFQVRFRF9EQVRFLCBNQUtFUl9VU0VSKQpWQUxVRVMKICAgICgnJHtwb2xpY3kuc2VydmljZUlkfScsICcke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5taW5BbXQuYW10Q29kZX0nLAogICAgICcke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5tYXhBbXQuYW10Q29kZX0nLCAnJHthY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMucG9zdGFsQ29kZX0nLAogICAgICcke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5yaXNrSW5kaWNhdG9yfScsICcke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy51cGRhdGVMaW1pdH0nLAogICAgICdTWVNURU0nLCBOT1coKSwgJ1NZU1RFTScpO1xuYDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYFNFVCBAcmVxdWVzdF9jb25kaXRpb25zX2lkID0gTEFTVF9JTlNFUlRfSUQoKTtcblxuYDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYC0tIEFtb3VudCBDb2RlIGZvciBNaW4gQW1vdW50XG5gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGBJTlNFUlQgSU5UTyBhbW91bnRfY29kZV9tYXN0ZXIKICAgIChBTU9VTlRfQ09ERSwgQU1PVU5UX0NPREVfREVTQywgQU1PVU5UX0NPREVfVkFMVUUsIENSRUFURURfQllfVVNFUiwgQ1JFQVRFRF9EQVRFLCBNQUtFUl9VU0VSKQpWQUxVRVMKICAgICgnJHthY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMubWluQW10LmFtdENvZGV9JywgJ01pbiBhbW91bnQgZm9yICR7cG9saWN5LnNlcnZpY2VJZH0nLAogICAgICR7YWNjZXNzLnJlcXVlc3RDb25kaXRpb25zLm1pbkFtdC5hbXRDb2RlVmFsdWV9LCAnU1lTVEVNJywgTk9XKCksICdTWVNURU0nKQpPTiBEVVBMSUNBVEUgS0VZIFVQREFURSBVUERBVEVEX0JZX1VTRVI9J1NZU1RFTScsIFVQREFURURfREFURT1OT1coKTtcblxuYDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYC0tIEFtb3VudCBDb2RlIGZvciBNYXggQW1vdW50XG5gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGBJTlNFUlQgSU5UTyBhbW91bnRfY29kZV9tYXN0ZXIKICAgIChBTU9VTlRfQ09ERSwgQU1PVU5UX0NPREVfREVTQywgQU1PVU5UX0NPREVfVkFMVUUsIENSRUFURURfQllfVVNFUiwgQ1JFQVRFRF9EQVRFLCBNQUtFUl9VU0VSKQpWQUxVRVMKICAgICgnJHthY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMubWF4QW10LmFtdENvZGV9JywgJ01heCBhbW91bnQgZm9yICR7cG9saWN5LnNlcnZpY2VJZH0nLAogICAgICR7YWNjZXNzLnJlcXVlc3RDb25kaXRpb25zLm1heEFtdC5hbXRDb2RlVmFsdWV9LCAnU1lTVEVNJywgTk9XKCksICdTWVNURU0nKQpPTiBEVVBMSUNBVEUgS0VZIFVQREFURSBVUERBVEVEX0JZX1VTRVI9J1NZU1RFTScsIFVQREFURURfREFURT1OT1coKTtcblxuYDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3Mubm90aWZpY2F0aW9uRGV0bHMuZm9yRWFjaCgobm90aWYsIG5vdGlmSWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGAtLSBOb3RpZmljYXRpb24gJHtub3RpZklkeCArIDF9IGZvciBBY2Nlc3MgUmVjb3JkICR7YWNjZXNzSWR4ICsgMX1cbmA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGBJTlNFUlQgSU5UTyByaXNrX21hdHJpeF9ub3RpZmljYWl0b25fbWFzdGVyCiAgICAoU0VSVklDRV9JRCwgTk9USUZJQ0FUSU9OX1RZUEUsIFRFTVBMQVRFX0lELCBURU1QTEFURV9QQVJBTVMsIElTX01BTkRBVE9SWSwKICAgICBBVVRIX1RZUEUsIENSRUFURURfQllfVVNFUiwgQ1JFQVRFRF9EQVRFLCBNQUtFUl9VU0VSKQpWQUxVRVMKICAgICgnJHtwb2xpY3kuc2VydmljZUlkfScsICcke25vdGlmLm5vdGlmaWNhdGlvblR5cGV9JywgJyR7bm90aWYudGVtcGxhdGVJZH0nLAogICAgICcke25vdGlmLnRlbXBsYXRlUGFyYW1zfScsICR7bm90aWYuaXNNYW5kYXRvcnkgPT09ICd0cnVlJyA/IDEgOiAwfSwKICAgICAnJHtub3RpZi5hdXRoVHlwZX0nLCAnU1lTVEVNJywgTk9XKCksICdTWVNURU0nKTtcblxuYDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgLS0gQWNjZXNzIFJlY29yZCBmb3IgJHtwb2xpY3kuc2VydmljZUlkfVxuYDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgSU5TRVJUIElOVE8gcmlza19tYXRyaXhfYWNjZXNzX21hc3RlcgogICAgKFNFUlZJQ0VfSUQsIENPT0xJTkdfUEVSSU9EX0NIRUNLX1JFUSwgVFJBTlNBQ1RJT05BTF9BVVRIX1JFUSwKICAgICBOT1RJRklDQVRJT05fRklFTERTX01BUCwgS0VZX1NFU1NJT05fQ09ORElUSU9OUywgS0VZX1BST0ZJTEVfQ09ORElUSU9OUywKICAgICBLRVlfUkVRVUVTVF9DT05ESVRJT05TLCBSRVFVRVNUX0NPTkRJVElPTlNfSUQsIENSRUFURURfQllfVVNFUiwgQ1JFQVRFRF9EQVRFLCBNQUtFUl9VU0VSKQpWQUxVRVMKICAgICgnJHtwb2xpY3kuc2VydmljZUlkfScsICR7YWNjZXNzLmNvb2xpbmdQZXJpb2RDaGVja1JlcXVpcmVkID8gMSA6IDB9LAogICAgICcke2FjY2Vzcy50eG5BdXRoUmVxdWlyZWR9JywgJyR7YWNjZXNzLm5vdGlmaWNhdGlvblBhcmFtTWFwLnJlcGxhY2UoLycvZywgIicnIil9JywKICAgICAnJHthY2Nlc3Muc2Vzc2lvbkNvbmRpdGlvbk1hcH0nLCAnJHthY2Nlc3MucHJvZmlsZUNvbmRpdGlvbk1hcH0nLAogICAgICcke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9uc01hcH0nLCBAcmVxdWVzdF9jb25kaXRpb25zX2lkLAogICAgICdTWVNURU0nLCBOT1coKSwgJ1NZU1RFTScpO1xuXG5gOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSAnLS0gJyArICctJy5yZXBlYXQoODApICsgJ1xuXG4nOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY3VycmVudE91dHB1dCA9IHNxbDsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdXRwdXRUeXBlJykudmFsdWUgPSAnc3FsJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdXRwdXRCb3gnKS50ZXh0Q29udGVudCA9IHNxbDsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdFcnJvciBnZW5lcmF0aW5nIFNRTDogJyArIGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBvcGVuTG9hZE1vZGFsKCkgewogICAgICAgICAgICBjb25zdCBkZWZhdWx0SnNvblN0cmluZyA9IGB7CiAgInBvbGljaWVzTWFwcyI6IFsKICAgIHsKICAgICAgImNoYW5uZWxJZCI6ICJTR19NQiIsCiAgICAgICJwb2xpY2llcyI6IFsKCiAgICAgIF0KICAgIH0KICBdCn1gOwoKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRNb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICBjb25zdCBqc29uSW5wdXRUZXh0YXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc29uSW5wdXQnKTsKICAgICAgICAgICAgaWYgKCFqc29uSW5wdXRUZXh0YXJlYS52YWx1ZS50cmltKCkpIHsKICAgICAgICAgICAgICAgIGpzb25JbnB1dFRleHRhcmVhLnZhbHVlID0gZGVmYXVsdEpzb25TdHJpbmc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAganNvbklucHV0VGV4dGFyZWEuZm9jdXMoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNsb3NlTG9hZE1vZGFsKCkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZE1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGxvYWRGcm9tVGV4dGFyZWEoKSB7CiAgICAgICAgICAgIGNvbnN0IGpzb25UZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzb25JbnB1dCcpLnZhbHVlLnRyaW0oKTsKCiAgICAgICAgICAgIGlmICghanNvblRleHQpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdQbGVhc2UgcGFzdGUgSlNPTiBjb250ZW50IGZpcnN0LicpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QganNvbiA9IEpTT04ucGFyc2UoanNvblRleHQpOwogICAgICAgICAgICAgICAgcG9wdWxhdGVGb3JtKGpzb24pOwogICAgICAgICAgICAgICAgY2xvc2VMb2FkTW9kYWwoKTsKICAgICAgICAgICAgICAgIGFsZXJ0KCdKU09OIGxvYWRlZCBzdWNjZXNzZnVsbHkhJyk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBhbGVydCgnRXJyb3IgcGFyc2luZyBKU09OOiAnICsgZXJyb3IubWVzc2FnZSArICdcblxuUGxlYXNlIGNoZWNrIHlvdXIgSlNPTiBmb3JtYXQuJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIENsb3NlIG1vZGFsIHdoZW4gY2xpY2tpbmcgb3V0c2lkZQogICAgICAgIHdpbmRvdy5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZE1vZGFsJyk7CiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgPT0gbW9kYWwpIHsKICAgICAgICAgICAgICAgIGNsb3NlTG9hZE1vZGFsKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHBvcHVsYXRlRm9ybShkYXRhKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFubmVsc0NvbnRhaW5lcicpLmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICBjaGFubmVsQ291bnRlciA9IDA7CiAgICAgICAgICAgIHBvbGljeUNvdW50ZXIgPSAwOwogICAgICAgICAgICBhY2Nlc3NDb3VudGVyID0gMDsKICAgICAgICAgICAgbm90aWZpY2F0aW9uQ291bnRlciA9IDA7CgogICAgICAgICAgICBpZiAoZGF0YS5wb2xpY2llc01hcHMgJiYgQXJyYXkuaXNBcnJheShkYXRhLnBvbGljaWVzTWFwcykpIHsKICAgICAgICAgICAgICAgIGRhdGEucG9saWNpZXNNYXBzLmZvckVhY2goY2hhbm5lbERhdGEgPT4gewogICAgICAgICAgICAgICAgICAgIGFkZENoYW5uZWwoKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFubmVsU2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhbm5lbC1zZWN0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhbm5lbFNlY3Rpb24gPSBjaGFubmVsU2VjdGlvbnNbY2hhbm5lbFNlY3Rpb25zLmxlbmd0aCAtIDFdOwoKICAgICAgICAgICAgICAgICAgICBjaGFubmVsU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iY2hhbm5lbElkIl0nKS52YWx1ZSA9IGNoYW5uZWxEYXRhLmNoYW5uZWxJZCB8fCAnJzsKCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9saWNpZXNDb250YWluZXIgPSBjaGFubmVsU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcucG9saWNpZXMtY29udGFpbmVyJyk7CiAgICAgICAgICAgICAgICAgICAgcG9saWNpZXNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7CgogICAgICAgICAgICAgICAgICAgIGlmIChjaGFubmVsRGF0YS5wb2xpY2llcyAmJiBBcnJheS5pc0FycmF5KGNoYW5uZWxEYXRhLnBvbGljaWVzKSkgewogICAgICAgICAgICAgICAgICAgICAgICBjaGFubmVsRGF0YS5wb2xpY2llcy5mb3JFYWNoKHBvbGljeURhdGEgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhbm5lbElkID0gY2hhbm5lbFNlY3Rpb24uaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRQb2xpY3koY2hhbm5lbElkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2xpY3lTZWN0aW9ucyA9IHBvbGljaWVzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb2xpY3ktc2VjdGlvbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9saWN5U2VjdGlvbiA9IHBvbGljeVNlY3Rpb25zW3BvbGljeVNlY3Rpb25zLmxlbmd0aCAtIDFdOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InNlcnZpY2VJZCJdJykudmFsdWUgPSBwb2xpY3lEYXRhLnNlcnZpY2VJZCB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImVuZFBvaW50Il0nKS52YWx1ZSA9IHBvbGljeURhdGEuZW5kUG9pbnQgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJodHRwTWV0aG9kIl0nKS52YWx1ZSA9IHBvbGljeURhdGEuaHR0cE1ldGhvZCB8fCAnUE9TVCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJvdXRFbmRQb2ludCJdJykudmFsdWUgPSBwb2xpY3lEYXRhLm91dEVuZFBvaW50IHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ic2VydmljZURlc2MiXScpLnZhbHVlID0gcG9saWN5RGF0YS5zZXJ2aWNlRGVzYyB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImF1dGhMZXZlbFJlcXVpcmVkIl0nKS52YWx1ZSA9IHBvbGljeURhdGEuYXV0aExldmVsUmVxdWlyZWQgfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InNlc3Npb25WYWxSZXF1aXJlZCJdJykudmFsdWUgPSBwb2xpY3lEYXRhLnNlc3Npb25WYWxSZXF1aXJlZCA/ICd0cnVlJyA6ICdmYWxzZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ3aGl0ZWxpc3RlZCJdJykudmFsdWUgPSBwb2xpY3lEYXRhLndoaXRlbGlzdGVkID8gJ3RydWUnIDogJ2ZhbHNlJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImFsbG93ZWRTY29wZSJdJykudmFsdWUgPSBwb2xpY3lEYXRhLmFsbG93ZWRTY29wZSB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InR4bkF1dGhDb25jZXJucyJdJykudmFsdWUgPSBwb2xpY3lEYXRhLnR4bkF1dGhDb25jZXJucyB8fCAnTic7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgZGVmYXVsdCBub3RpZmljYXRpb24gYW5kIHBvcHVsYXRlIGZyb20gZmlyc3QgYWNjZXNzIHJlY29yZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90aWZpY2F0aW9uc0NvbnRhaW5lciA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignLm5vdGlmaWNhdGlvbnMtY29udGFpbmVyJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25zQ29udGFpbmVyLmlubmVySFRNTCA9ICcnOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2xpY3lEYXRhLmFjY2Vzc2VzICYmIHBvbGljeURhdGEuYWNjZXNzZXMubGVuZ3RoID4gMCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeURhdGEuYWNjZXNzZXNbMF0ubm90aWZpY2F0aW9uRGV0bHMgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KHBvbGljeURhdGEuYWNjZXNzZXNbMF0ubm90aWZpY2F0aW9uRGV0bHMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5RGF0YS5hY2Nlc3Nlc1swXS5ub3RpZmljYXRpb25EZXRscy5mb3JFYWNoKG5vdGlmRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeUlkID0gcG9saWN5U2VjdGlvbi5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90aWZpY2F0aW9uKHBvbGljeUlkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGlmU2VjdGlvbnMgPSBub3RpZmljYXRpb25zQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub3RpZmljYXRpb24tc2VjdGlvbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub3RpZlNlY3Rpb24gPSBub3RpZlNlY3Rpb25zW25vdGlmU2VjdGlvbnMubGVuZ3RoIC0gMV07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZlNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im5vdGlmaWNhdGlvblR5cGUiXScpLnZhbHVlID0gbm90aWZEYXRhLm5vdGlmaWNhdGlvblR5cGUgfHwgJ1NNUyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYXV0aFR5cGUiXScpLnZhbHVlID0gbm90aWZEYXRhLmF1dGhUeXBlIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZlNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InRlbXBsYXRlSWQiXScpLnZhbHVlID0gbm90aWZEYXRhLnRlbXBsYXRlSWQgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0idGVtcGxhdGVQYXJhbXMiXScpLnZhbHVlID0gbm90aWZEYXRhLnRlbXBsYXRlUGFyYW1zIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZlNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImlzTWFuZGF0b3J5Il0nKS52YWx1ZSA9IG5vdGlmRGF0YS5pc01hbmRhdG9yeSB8fCAndHJ1ZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzZXNDb250YWluZXIgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5hY2Nlc3Nlcy1jb250YWluZXInKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc2VzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2xpY3lEYXRhLmFjY2Vzc2VzICYmIEFycmF5LmlzQXJyYXkocG9saWN5RGF0YS5hY2Nlc3NlcykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lEYXRhLmFjY2Vzc2VzLmZvckVhY2goYWNjZXNzRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeUlkID0gcG9saWN5U2VjdGlvbi5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkQWNjZXNzKHBvbGljeUlkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1NlY3Rpb25zID0gYWNjZXNzZXNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmFjY2Vzcy1zZWN0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1NlY3Rpb24gPSBhY2Nlc3NTZWN0aW9uc1thY2Nlc3NTZWN0aW9ucy5sZW5ndGggLSAxXTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImNvb2xpbmdQZXJpb2RDaGVja1JlcXVpcmVkIl0nKS52YWx1ZSA9IGFjY2Vzc0RhdGEuY29vbGluZ1BlcmlvZENoZWNrUmVxdWlyZWQgPyAndHJ1ZScgOiAnZmFsc2UnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ0eG5BdXRoUmVxdWlyZWQiXScpLnZhbHVlID0gYWNjZXNzRGF0YS50eG5BdXRoUmVxdWlyZWQgfHwgJzAnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJub3RpZmljYXRpb25QYXJhbU1hcCJdJykudmFsdWUgPSBhY2Nlc3NEYXRhLm5vdGlmaWNhdGlvblBhcmFtTWFwIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJzZXNzaW9uQ29uZGl0aW9uTWFwIl0nKS52YWx1ZSA9IGFjY2Vzc0RhdGEuc2Vzc2lvbkNvbmRpdGlvbk1hcCB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0icHJvZmlsZUNvbmRpdGlvbk1hcCJdJykudmFsdWUgPSBhY2Nlc3NEYXRhLnByb2ZpbGVDb25kaXRpb25NYXAgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InJlcXVlc3RDb25kaXRpb25zTWFwIl0nKS52YWx1ZSA9IGFjY2Vzc0RhdGEucmVxdWVzdENvbmRpdGlvbnNNYXAgfHwgJyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjZXNzRGF0YS5yZXF1ZXN0Q29uZGl0aW9ucykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmMgPSBhY2Nlc3NEYXRhLnJlcXVlc3RDb25kaXRpb25zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0icmlza0luZGljYXRvciJdJykudmFsdWUgPSByYy5yaXNrSW5kaWNhdG9yIHx8ICcwJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InBvc3RhbENvZGUiXScpLnZhbHVlID0gcmMucG9zdGFsQ29kZSB8fCAnMCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ1cGRhdGVMaW1pdCJdJykudmFsdWUgPSByYy51cGRhdGVMaW1pdCB8fCAnMCc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJjLm1pbkFtdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im1pbkFtdENvZGUiXScpLnZhbHVlID0gcmMubWluQW10LmFtdENvZGUgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibWluQW10Q29kZVZhbHVlIl0nKS52YWx1ZSA9IHJjLm1pbkFtdC5hbXRDb2RlVmFsdWUgfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmMubWF4QW10KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibWF4QW10Q29kZSJdJykudmFsdWUgPSByYy5tYXhBbXQuYW10Q29kZSB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJtYXhBbXRDb2RlVmFsdWUiXScpLnZhbHVlID0gcmMubWF4QW10LmFtdENvZGVWYWx1ZSB8fCAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkb3dubG9hZE91dHB1dCgpIHsKICAgICAgICAgICAgaWYgKCFjdXJyZW50T3V0cHV0KSB7CiAgICAgICAgICAgICAgICBhbGVydCgnUGxlYXNlIGdlbmVyYXRlIEpTT04gb3IgU1FMIG91dHB1dCBmaXJzdC4nKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3Qgb3V0cHV0VHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdXRwdXRUeXBlJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IGZpbGVuYW1lID0gb3V0cHV0VHlwZSA9PT0gJ2pzb24nID8gJ3BvbGljeS1jb25maWcuanNvbicgOiAncG9saWN5LWluc2VydC5zcWwnOwogICAgICAgICAgICBjb25zdCBtaW1lVHlwZSA9IG91dHB1dFR5cGUgPT09ICdqc29uJyA/ICdhcHBsaWNhdGlvbi9qc29uJyA6ICd0ZXh0L3BsYWluJzsKCiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY3VycmVudE91dHB1dF0sIHsgdHlwZTogbWltZVR5cGUgfSk7CiAgICAgICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICAgICAgYS5kb3dubG9hZCA9IGZpbGVuYW1lOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7CiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHsKICAgICAgICAgICAgaWYgKGNvbmZpcm0oJ1Jlc2V0IHRoZSBlbnRpcmUgZm9ybT8nKSkgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYW5uZWxzQ29udGFpbmVyJykuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3V0cHV0Qm94JykudGV4dENvbnRlbnQgPSAnT3V0cHV0IHdpbGwgYXBwZWFyIGhlcmUuLi4nOwogICAgICAgICAgICAgICAgY3VycmVudE91dHB1dCA9ICcnOwogICAgICAgICAgICAgICAgY2hhbm5lbENvdW50ZXIgPSAwOwogICAgICAgICAgICAgICAgcG9saWN5Q291bnRlciA9IDA7CiAgICAgICAgICAgICAgICBhY2Nlc3NDb3VudGVyID0gMDsKICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbkNvdW50ZXIgPSAwOwogICAgICAgICAgICAgICAgYWRkQ2hhbm5lbCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjb3B5T3V0cHV0KCkgewogICAgICAgICAgICBpZiAoIWN1cnJlbnRPdXRwdXQpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdQbGVhc2UgZ2VuZXJhdGUgSlNPTiBvciBTUUwgb3V0cHV0IGZpcnN0LicpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBVc2UgbW9kZXJuIGNsaXBib2FyZCBBUEkKICAgICAgICAgICAgaWYgKG5hdmlnYXRvci5jbGlwYm9hcmQgJiYgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQpIHsKICAgICAgICAgICAgICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGN1cnJlbnRPdXRwdXQpLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gVmlzdWFsIGZlZWRiYWNrCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuID0gZXZlbnQudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsVGV4dCA9IGJ0bi50ZXh0Q29udGVudDsKICAgICAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSAnQ29waWVkISc7CiAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLmJhY2tncm91bmQgPSAnIzRDQUY1MCc7CgogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9IG9yaWdpbmFsVGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLmJhY2tncm91bmQgPSAnJzsKICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdGYWlsZWQgdG8gY29weTogJyArIGVycik7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrIGZvciBvbGRlciBicm93c2VycwogICAgICAgICAgICAgICAgY29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpOwogICAgICAgICAgICAgICAgdGV4dGFyZWEudmFsdWUgPSBjdXJyZW50T3V0cHV0OwogICAgICAgICAgICAgICAgdGV4dGFyZWEuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnOwogICAgICAgICAgICAgICAgdGV4dGFyZWEuc3R5bGUub3BhY2l0eSA9ICcwJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dGFyZWEpOwogICAgICAgICAgICAgICAgdGV4dGFyZWEuc2VsZWN0KCk7CgogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGV2ZW50LnRhcmdldDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbFRleHQgPSBidG4udGV4dENvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gJ0NvcGllZCEnOwogICAgICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5iYWNrZ3JvdW5kID0gJyM0Q0FGNTAnOwoKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSBvcmlnaW5hbFRleHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5iYWNrZ3JvdW5kID0gJyc7CiAgICAgICAgICAgICAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBhbGVydCgnRmFpbGVkIHRvIGNvcHk6ICcgKyBlcnIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGV4dGFyZWEpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjb21wYXJlSlNPTnMoKSB7CiAgICAgICAgICAgIGNvbnN0IGpzb24xVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc29uMScpLnZhbHVlLnRyaW0oKTsKICAgICAgICAgICAgY29uc3QganNvbjJUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzb24yJykudmFsdWUudHJpbSgpOwoKICAgICAgICAgICAgaWYgKCFqc29uMVRleHQgfHwgIWpzb24yVGV4dCkgewogICAgICAgICAgICAgICAgYWxlcnQoJ1BsZWFzZSBwYXN0ZSBKU09OIGNvbnRlbnQgaW4gYm90aCB0ZXh0IGFyZWFzLicpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3Qgb2JqMSA9IEpTT04ucGFyc2UoanNvbjFUZXh0KTsKICAgICAgICAgICAgICAgIGNvbnN0IG9iajIgPSBKU09OLnBhcnNlKGpzb24yVGV4dCk7CgogICAgICAgICAgICAgICAgY29uc3QgZGlmZmVyZW5jZXMgPSBbXTsKICAgICAgICAgICAgICAgIGZpbmREaWZmZXJlbmNlcyhvYmoxLCBvYmoyLCAnJywgZGlmZmVyZW5jZXMpOwoKICAgICAgICAgICAgICAgIGRpc3BsYXlEaWZmZXJlbmNlcyhkaWZmZXJlbmNlcyk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBhbGVydCgnRXJyb3IgcGFyc2luZyBKU09OOiAnICsgZXJyb3IubWVzc2FnZSArICdcblxuUGxlYXNlIGNoZWNrIHlvdXIgSlNPTiBmb3JtYXQuJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGZpbmREaWZmZXJlbmNlcyhvYmoxLCBvYmoyLCBwYXRoLCBkaWZmZXJlbmNlcykgewogICAgICAgICAgICAvLyBDaGVjayBpZiBib3RoIGFyZSBvYmplY3RzCiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqMSA9PT0gJ29iamVjdCcgJiYgb2JqMSAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqMiA9PT0gJ29iamVjdCcgJiYgb2JqMiAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgLy8gR2V0IGFsbCB1bmlxdWUga2V5cyBmcm9tIGJvdGggb2JqZWN0cwogICAgICAgICAgICAgICAgY29uc3Qga2V5czEgPSBPYmplY3Qua2V5cyhvYmoxKTsKICAgICAgICAgICAgICAgIGNvbnN0IGtleXMyID0gT2JqZWN0LmtleXMob2JqMik7CiAgICAgICAgICAgICAgICBjb25zdCBhbGxLZXlzID0gWy4uLm5ldyBTZXQoWy4uLmtleXMxLCAuLi5rZXlzMl0pXTsKCiAgICAgICAgICAgICAgICBhbGxLZXlzLmZvckVhY2goa2V5ID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXRoID0gcGF0aCA/IGAke3BhdGh9LiR7a2V5fWAgOiBrZXk7CgogICAgICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBvYmoxKSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBLZXkgZXhpc3RzIGluIG9iajIgYnV0IG5vdCBpbiBvYmoxCiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2FkZGVkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG5ld1BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkob2JqMltrZXldLCBudWxsLCAyKQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCEoa2V5IGluIG9iajIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtleSBleGlzdHMgaW4gb2JqMSBidXQgbm90IGluIG9iajIKICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmVyZW5jZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVtb3ZlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBuZXdQYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KG9iajFba2V5XSwgbnVsbCwgMikKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2V5IGV4aXN0cyBpbiBib3RoLCBjb21wYXJlIHZhbHVlcyByZWN1cnNpdmVseQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmoxW2tleV0pICYmIEFycmF5LmlzQXJyYXkob2JqMltrZXldKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGFyZSBhcnJheXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeShvYmoxW2tleV0pICE9PSBKU09OLnN0cmluZ2lmeShvYmoyW2tleV0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFyZUFycmF5cyhvYmoxW2tleV0sIG9iajJba2V5XSwgbmV3UGF0aCwgZGlmZmVyZW5jZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvYmoxW2tleV0gPT09ICdvYmplY3QnICYmIG9iajFba2V5XSAhPT0gbnVsbCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBvYmoyW2tleV0gPT09ICdvYmplY3QnICYmIG9iajJba2V5XSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5kRGlmZmVyZW5jZXMob2JqMVtrZXldLCBvYmoyW2tleV0sIG5ld1BhdGgsIGRpZmZlcmVuY2VzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvYmoxW2tleV0gIT09IG9iajJba2V5XSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmFsdWVzIGFyZSBkaWZmZXJlbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtb2RpZmllZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogbmV3UGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZTogSlNPTi5zdHJpbmdpZnkob2JqMVtrZXldLCBudWxsLCAyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZTogSlNPTi5zdHJpbmdpZnkob2JqMltrZXldLCBudWxsLCAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChvYmoxICE9PSBvYmoyKSB7CiAgICAgICAgICAgICAgICAvLyBTaW1wbGUgdmFsdWUgY29tcGFyaXNvbgogICAgICAgICAgICAgICAgZGlmZmVyZW5jZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21vZGlmaWVkJywKICAgICAgICAgICAgICAgICAgICBwYXRoOiBwYXRoIHx8ICcocm9vdCknLAogICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlOiBKU09OLnN0cmluZ2lmeShvYmoxLCBudWxsLCAyKSwKICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZTogSlNPTi5zdHJpbmdpZnkob2JqMiwgbnVsbCwgMikKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjb21wYXJlQXJyYXlzKGFycjEsIGFycjIsIHBhdGgsIGRpZmZlcmVuY2VzKSB7CiAgICAgICAgICAgIGNvbnN0IG1heExlbiA9IE1hdGgubWF4KGFycjEubGVuZ3RoLCBhcnIyLmxlbmd0aCk7CgogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heExlbjsgaSsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXRoID0gYCR7cGF0aH1bJHtpfV1gOwoKICAgICAgICAgICAgICAgIGlmIChpID49IGFycjEubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gRWxlbWVudCBleGlzdHMgaW4gYXJyMiBidXQgbm90IGluIGFycjEKICAgICAgICAgICAgICAgICAgICBkaWZmZXJlbmNlcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2FkZGVkJywKICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogbmV3UGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KGFycjJbaV0sIG51bGwsIDIpCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPj0gYXJyMi5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAvLyBFbGVtZW50IGV4aXN0cyBpbiBhcnIxIGJ1dCBub3QgaW4gYXJyMgogICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVtb3ZlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG5ld1BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBKU09OLnN0cmluZ2lmeShhcnIxW2ldLCBudWxsLCAyKQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBFbGVtZW50IGV4aXN0cyBpbiBib3RoIGFycmF5cwogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJyMVtpXSA9PT0gJ29iamVjdCcgJiYgYXJyMVtpXSAhPT0gbnVsbCAmJgogICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgYXJyMltpXSA9PT0gJ29iamVjdCcgJiYgYXJyMltpXSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICBmaW5kRGlmZmVyZW5jZXMoYXJyMVtpXSwgYXJyMltpXSwgbmV3UGF0aCwgZGlmZmVyZW5jZXMpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoSlNPTi5zdHJpbmdpZnkoYXJyMVtpXSkgIT09IEpTT04uc3RyaW5naWZ5KGFycjJbaV0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21vZGlmaWVkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG5ld1BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZTogSlNPTi5zdHJpbmdpZnkoYXJyMVtpXSwgbnVsbCwgMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZTogSlNPTi5zdHJpbmdpZnkoYXJyMltpXSwgbnVsbCwgMikKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkaXNwbGF5RGlmZmVyZW5jZXMoZGlmZmVyZW5jZXMpIHsKICAgICAgICAgICAgY29uc3QgZGlmZlJlc3VsdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlmZlJlc3VsdHMnKTsKICAgICAgICAgICAgY29uc3QgZGlmZkNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlmZkNvbnRlbnQnKTsKCiAgICAgICAgICAgIGlmIChkaWZmZXJlbmNlcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIGRpZmZDb250ZW50LmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJkaWZmLWl0ZW0iIHN0eWxlPSJiYWNrZ3JvdW5kOiAjZDRlZGRhOyBib3JkZXItbGVmdDogNHB4IHNvbGlkICMyOGE3NDU7Ij48c3Ryb25nPk5vIGRpZmZlcmVuY2VzIGZvdW5kITwvc3Ryb25nPiBCb3RoIEpTT05zIGFyZSBpZGVudGljYWwuPC9kaXY+JzsKICAgICAgICAgICAgICAgIGRpZmZSZXN1bHRzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgaHRtbCA9ICcnOwogICAgICAgICAgICBkaWZmZXJlbmNlcy5mb3JFYWNoKGRpZmYgPT4gewogICAgICAgICAgICAgICAgaWYgKGRpZmYudHlwZSA9PT0gJ2FkZGVkJykgewogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaWZmLWl0ZW0gZGlmZi1hZGRlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaWZmLXBhdGgiPisgQWRkZWQ6ICR7ZGlmZi5wYXRofTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGlmZi12YWx1ZSI+JHtlc2NhcGVIdG1sKGRpZmYudmFsdWUpfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkaWZmLnR5cGUgPT09ICdyZW1vdmVkJykgewogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaWZmLWl0ZW0gZGlmZi1yZW1vdmVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpZmYtcGF0aCI+LSBSZW1vdmVkOiAke2RpZmYucGF0aH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpZmYtdmFsdWUiPiR7ZXNjYXBlSHRtbChkaWZmLnZhbHVlKX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlmZi50eXBlID09PSAnbW9kaWZpZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpZmYtaXRlbSBkaWZmLW1vZGlmaWVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpZmYtcGF0aCI+fiBNb2RpZmllZDogJHtkaWZmLnBhdGh9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaWZmLXZhbHVlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPk9sZDo8L3N0cm9uZz4gJHtlc2NhcGVIdG1sKGRpZmYub2xkVmFsdWUpfTxicj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPk5ldzo8L3N0cm9uZz4gJHtlc2NhcGVIdG1sKGRpZmYubmV3VmFsdWUpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgZGlmZkNvbnRlbnQuaW5uZXJIVE1MID0gaHRtbDsKICAgICAgICAgICAgZGlmZlJlc3VsdHMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBlc2NhcGVIdG1sKHRleHQpIHsKICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGRpdi50ZXh0Q29udGVudCA9IHRleHQ7CiAgICAgICAgICAgIHJldHVybiBkaXYuaW5uZXJIVE1MOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xlYXJDb21wYXJpc29uKCkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNvbjEnKS52YWx1ZSA9ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNvbjInKS52YWx1ZSA9ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlmZlJlc3VsdHMnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlmZkNvbnRlbnQnKS5pbm5lckhUTUwgPSAnJzsKICAgICAgICB9CiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+Cg==
