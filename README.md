Test6

PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+UG9saWN5IENvbmZpZ3VyYXRpb24gTWFuYWdlcjwvdGl0bGU+CiAgICA8c3R5bGU+CiAgICAgICAgKiB7CiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICB9CgogICAgICAgIGJvZHkgewogICAgICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmNWY1ZjU7CiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICB9CgogICAgICAgIC5jb250YWluZXIgewogICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDFweCA0cHggcmdiYSgwLDAsMCwwLjEpOwogICAgICAgICAgICBwYWRkaW5nOiAxMnB4OwogICAgICAgIH0KCiAgICAgICAgaDEgewogICAgICAgICAgICBjb2xvcjogIzMzMzsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4OwogICAgICAgICAgICBmb250LXNpemU6IDE4cHg7CiAgICAgICAgfQoKICAgICAgICBoMiB7CiAgICAgICAgICAgIGNvbG9yOiAjNTU1OwogICAgICAgICAgICBtYXJnaW46IDhweCAwIDZweCAwOwogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjNENBRjUwOwogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogM3B4OwogICAgICAgIH0KCiAgICAgICAgaDMgewogICAgICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgICAgICAgbWFyZ2luOiA2cHggMCA0cHggMDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgICAgICBmb250LXdlaWdodDogNjAwOwogICAgICAgIH0KCiAgICAgICAgLmhlYWRlciB7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICAgICAgfQoKICAgICAgICAuYWN0aW9ucyB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGdhcDogNnB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4OwogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7CiAgICAgICAgfQoKICAgICAgICBidXR0b24gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjNENBRjUwOwogICAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgcGFkZGluZzogNnB4IDEycHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICBmb250LXNpemU6IDExcHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgICAgfQoKICAgICAgICBidXR0b246aG92ZXIgewogICAgICAgICAgICBvcGFjaXR5OiAwLjk7CiAgICAgICAgfQoKICAgICAgICBidXR0b24uc2Vjb25kYXJ5IHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzIxOTZGMzsKICAgICAgICB9CgogICAgICAgIGJ1dHRvbi5kYW5nZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjQ0MzM2OwogICAgICAgIH0KCiAgICAgICAgYnV0dG9uLnNtYWxsIHsKICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4OwogICAgICAgIH0KCiAgICAgICAgLmZvcm0tZ3JvdXAgewogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7CiAgICAgICAgfQoKICAgICAgICBsYWJlbCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAycHg7CiAgICAgICAgICAgIGNvbG9yOiAjNTU1OwogICAgICAgICAgICBmb250LXdlaWdodDogNTAwOwogICAgICAgICAgICBmb250LXNpemU6IDExcHg7CiAgICAgICAgfQoKICAgICAgICBsYWJlbC5yZXF1aXJlZDo6YWZ0ZXIgewogICAgICAgICAgICBjb250ZW50OiAiICoiOwogICAgICAgICAgICBjb2xvcjogcmVkOwogICAgICAgIH0KCiAgICAgICAgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEgewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgcGFkZGluZzogNHB4IDZweDsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgICAgICAgICBmb250LXNpemU6IDExcHg7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgICAgICAgICAgY29sb3I6ICMzMzM7CiAgICAgICAgfQoKICAgICAgICBzZWxlY3QgewogICAgICAgICAgICBhcHBlYXJhbmNlOiBub25lOwogICAgICAgICAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7CiAgICAgICAgICAgIC1tb3otYXBwZWFyYW5jZTogbm9uZTsKICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD1VVEYtOCwlM2NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMjQgMjQnIGZpbGw9J25vbmUnIHN0cm9rZT0nY3VycmVudENvbG9yJyBzdHJva2Utd2lkdGg9JzInIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCclM2UlM2Nwb2x5bGluZSBwb2ludHM9JzYgOSAxMiAxNSAxOCA5JyUzZSUzYy9wb2x5bGluZSUzZSUzYy9zdmclM2UiKTsKICAgICAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICAgICAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogcmlnaHQgNHB4IGNlbnRlcjsKICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiAxNnB4OwogICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAyNHB4OwogICAgICAgIH0KCiAgICAgICAgaW5wdXQ6Zm9jdXMsIHNlbGVjdDpmb2N1cywgdGV4dGFyZWE6Zm9jdXMgewogICAgICAgICAgICBvdXRsaW5lOiBub25lOwogICAgICAgICAgICBib3JkZXItY29sb3I6ICM0Q0FGNTA7CiAgICAgICAgfQoKICAgICAgICB0ZXh0YXJlYSB7CiAgICAgICAgICAgIHJlc2l6ZTogdmVydGljYWw7CiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDQwcHg7CiAgICAgICAgfQoKICAgICAgICAuY2hhbm5lbC1zZWN0aW9uIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2Y5ZjlmOTsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2UwZTBlMDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgICBwYWRkaW5nOiA4cHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDsKICAgICAgICB9CgogICAgICAgIC5wb2xpY3ktc2VjdGlvbiB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDZweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4OwogICAgICAgIH0KCiAgICAgICAgLnBvbGljeS1jb250ZW50IHsKICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgfQoKICAgICAgICAucG9saWN5LWNvbnRlbnQuY29sbGFwc2VkIHsKICAgICAgICAgICAgZGlzcGxheTogbm9uZTsKICAgICAgICB9CgogICAgICAgIC50b2dnbGUtYnRuIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzIxOTZGMzsKICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4OwogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDRweDsKICAgICAgICB9CgogICAgICAgIC50b2dnbGUtYnRuOmhvdmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzE5NzZEMjsKICAgICAgICB9CgogICAgICAgIC5hY2Nlc3Mtc2VjdGlvbiB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmYWZhZmE7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlOGU4ZTg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgcGFkZGluZzogNnB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7CiAgICAgICAgfQoKICAgICAgICAubm90aWZpY2F0aW9uLXNlY3Rpb24gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZTBlMGUwOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDRweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4OwogICAgICAgIH0KCiAgICAgICAgLmdyaWQtMiB7CiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7CiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsKICAgICAgICAgICAgZ2FwOiA2cHg7CiAgICAgICAgfQoKICAgICAgICAuZ3JpZC0zIHsKICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsKICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyIDFmcjsKICAgICAgICAgICAgZ2FwOiA2cHg7CiAgICAgICAgfQoKICAgICAgICAuZ3JpZC00IHsKICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsKICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyIDFmciAxZnI7CiAgICAgICAgICAgIGdhcDogNnB4OwogICAgICAgIH0KCiAgICAgICAgLmdyaWQtNSB7CiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7CiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDUsIDFmcik7CiAgICAgICAgICAgIGdhcDogNnB4OwogICAgICAgIH0KCiAgICAgICAgLmJ0bi1ncm91cCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGdhcDogNnB4OwogICAgICAgICAgICBtYXJnaW4tdG9wOiA2cHg7CiAgICAgICAgfQoKICAgICAgICAub3V0cHV0LWFyZWEgewogICAgICAgICAgICBtYXJnaW4tdG9wOiAxMnB4OwogICAgICAgICAgICBib3JkZXItdG9wOiAycHggc29saWQgI2VlZTsKICAgICAgICAgICAgcGFkZGluZy10b3A6IDEycHg7CiAgICAgICAgfQoKICAgICAgICAub3V0cHV0LWJveCB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmNGY0ZjQ7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgcGFkZGluZzogOHB4OwogICAgICAgICAgICBmb250LWZhbWlseTogJ0NvdXJpZXIgTmV3JywgbW9ub3NwYWNlOwogICAgICAgICAgICBmb250LXNpemU6IDEwcHg7CiAgICAgICAgICAgIG1heC1oZWlnaHQ6IDI1MHB4OwogICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvOwogICAgICAgICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7CiAgICAgICAgICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDsKICAgICAgICB9CgogICAgICAgIC5maWxlLWlucHV0LXdyYXBwZXIgewogICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICB9CgogICAgICAgIC5maWxlLWlucHV0LXdyYXBwZXIgaW5wdXRbdHlwZT1maWxlXSB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgbGVmdDogLTk5OTlweDsKICAgICAgICB9CgogICAgICAgIC5zZWN0aW9uLWhlYWRlciB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4OwogICAgICAgIH0KCiAgICAgICAgLmJhZGdlIHsKICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMjE5NkYzOwogICAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgICAgIHBhZGRpbmc6IDJweCA2cHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4OwogICAgICAgICAgICBtYXJnaW4tbGVmdDogNHB4OwogICAgICAgIH0KCiAgICAgICAgLmFsZXJ0IHsKICAgICAgICAgICAgcGFkZGluZzogNnB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4OwogICAgICAgIH0KCiAgICAgICAgLmFsZXJ0LWluZm8gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZDFlY2YxOwogICAgICAgICAgICBjb2xvcjogIzBjNTQ2MDsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2JlZTVlYjsKICAgICAgICB9CgogICAgICAgIC5tb2RhbCB7CiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgei1pbmRleDogMTAwMDsKICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICAgICAgdG9wOiAwOwogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDAuNSk7CiAgICAgICAgfQoKICAgICAgICAubW9kYWwtY29udGVudCB7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogICAgICAgICAgICBtYXJnaW46IDUwcHggYXV0bzsKICAgICAgICAgICAgcGFkZGluZzogMjBweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4OwogICAgICAgICAgICB3aWR0aDogODAlOwogICAgICAgICAgICBtYXgtd2lkdGg6IDgwMHB4OwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAyMHB4IHJnYmEoMCwwLDAsMC4zKTsKICAgICAgICB9CgogICAgICAgIC5tb2RhbC1oZWFkZXIgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICAgICAgfQoKICAgICAgICAubW9kYWwtaGVhZGVyIGgyIHsKICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgfQoKICAgICAgICAuY2xvc2UgewogICAgICAgICAgICBjb2xvcjogI2FhYTsKICAgICAgICAgICAgZm9udC1zaXplOiAyOHB4OwogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICBsaW5lLWhlaWdodDogMjBweDsKICAgICAgICB9CgogICAgICAgIC5jbG9zZTpob3ZlciB7CiAgICAgICAgICAgIGNvbG9yOiAjMDAwOwogICAgICAgIH0KCiAgICAgICAgI2pzb25JbnB1dCB7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBtaW4taGVpZ2h0OiAzMDBweDsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsKICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgICAgICBwYWRkaW5nOiAxMHB4OwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgfQoKICAgICAgICAudGFicyB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGdhcDogNHB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4OwogICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgI2UwZTBlMDsKICAgICAgICB9CgogICAgICAgIC50YWIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjBmMGYwOwogICAgICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICBwYWRkaW5nOiA4cHggMjBweDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICBmb250LXNpemU6IDEzcHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweCA0cHggMCAwOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuM3M7CiAgICAgICAgfQoKICAgICAgICAudGFiOmhvdmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2UwZTBlMDsKICAgICAgICB9CgogICAgICAgIC50YWIuYWN0aXZlIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzRDQUY1MDsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgIH0KCiAgICAgICAgLnRhYi1jb250ZW50IHsKICAgICAgICAgICAgZGlzcGxheTogbm9uZTsKICAgICAgICB9CgogICAgICAgIC50YWItY29udGVudC5hY3RpdmUgewogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgICB9CgogICAgICAgIC5jb21wYXJlLWNvbnRhaW5lciB7CiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7CiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsKICAgICAgICAgICAgZ2FwOiAxMnB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4OwogICAgICAgIH0KCiAgICAgICAgLmNvbXBhcmUtcGFuZWwgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICAgIH0KCiAgICAgICAgLmNvbXBhcmUtcGFuZWwgaDMgewogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7CiAgICAgICAgfQoKICAgICAgICAuY29tcGFyZS10ZXh0YXJlYSB7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBtaW4taGVpZ2h0OiA0MDBweDsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsKICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4OwogICAgICAgICAgICBwYWRkaW5nOiA4cHg7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICAgICAgcmVzaXplOiB2ZXJ0aWNhbDsKICAgICAgICB9CgogICAgICAgIC5kaWZmLXJlc3VsdHMgewogICAgICAgICAgICBtYXJnaW4tdG9wOiAxMnB4OwogICAgICAgICAgICBwYWRkaW5nOiAxMnB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjlmOWY5OwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgICAgIG1heC1oZWlnaHQ6IDUwMHB4OwogICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvOwogICAgICAgIH0KCiAgICAgICAgLmRpZmYtaXRlbSB7CiAgICAgICAgICAgIHBhZGRpbmc6IDhweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDsKICAgICAgICB9CgogICAgICAgIC5kaWZmLWFkZGVkIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2Q0ZWRkYTsKICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjMjhhNzQ1OwogICAgICAgIH0KCiAgICAgICAgLmRpZmYtcmVtb3ZlZCB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmOGQ3ZGE7CiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiA0cHggc29saWQgI2RjMzU0NTsKICAgICAgICB9CgogICAgICAgIC5kaWZmLW1vZGlmaWVkIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZjNjZDsKICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjZmZjMTA3OwogICAgICAgIH0KCiAgICAgICAgLmRpZmYtcGF0aCB7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICAgICAgICAgIGNvbG9yOiAjMzMzOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7CiAgICAgICAgfQoKICAgICAgICAuZGlmZi12YWx1ZSB7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnQ291cmllciBOZXcnLCBtb25vc3BhY2U7CiAgICAgICAgICAgIGNvbG9yOiAjNjY2OwogICAgICAgIH0KCiAgICAgICAgLmluZm8taWNvbiB7CiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAgICAgd2lkdGg6IDEycHg7CiAgICAgICAgICAgIGhlaWdodDogMTJweDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEycHg7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgICAgICAgICAgIGNvbG9yOiAjMjE5NkYzOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjMjE5NkYzOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogOHB4OwogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICAgICAgY3Vyc29yOiBoZWxwOwogICAgICAgICAgICBtYXJnaW4tbGVmdDogM3B4OwogICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogICAgICAgIH0KCiAgICAgICAgLmluZm8taWNvbjpob3ZlciB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMyMTk2RjM7CiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgICB9CgogICAgICAgIC5leHBhbmQtaWNvbiB7CiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAgICAgd2lkdGg6IDE2cHg7CiAgICAgICAgICAgIGhlaWdodDogMTZweDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDE2cHg7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzRDQUY1MDsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDRweDsKICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTsKICAgICAgICB9CgogICAgICAgIC5leHBhbmQtaWNvbjpob3ZlciB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICM0NWEwNDk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xKTsKICAgICAgICB9CgogICAgICAgIC5pbnB1dC13aXRoLWV4cGFuZCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGdhcDogNHB4OwogICAgICAgIH0KCiAgICAgICAgLmlucHV0LXdpdGgtZXhwYW5kIGlucHV0IHsKICAgICAgICAgICAgZmxleDogMTsKICAgICAgICB9CgogICAgICAgIC5leHBhbmQtbW9kYWwgewogICAgICAgICAgICBkaXNwbGF5OiBub25lOwogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHotaW5kZXg6IDEwMDI7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHRvcDogMDsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwwLjUpOwogICAgICAgIH0KCiAgICAgICAgLmV4cGFuZC1tb2RhbC1jb250ZW50IHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgICAgICAgICAgIG1hcmdpbjogODBweCBhdXRvOwogICAgICAgICAgICBwYWRkaW5nOiAyMHB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICAgICAgICAgIHdpZHRoOiA5MCU7CiAgICAgICAgICAgIG1heC13aWR0aDogODAwcHg7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDIwcHggcmdiYSgwLDAsMCwwLjMpOwogICAgICAgIH0KCiAgICAgICAgLmV4cGFuZC1tb2RhbC1oZWFkZXIgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4OwogICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzRDQUY1MDsKICAgICAgICB9CgogICAgICAgIC5leHBhbmQtbW9kYWwtaGVhZGVyIGgzIHsKICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICBjb2xvcjogIzMzMzsKICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgIH0KCiAgICAgICAgLmV4cGFuZC10ZXh0YXJlYSB7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBtaW4taGVpZ2h0OiAzMDBweDsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsKICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgICAgICBwYWRkaW5nOiAxMHB4OwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgICAgIHJlc2l6ZTogdmVydGljYWw7CiAgICAgICAgfQoKICAgICAgICAuZXhwYW5kLXRleHRhcmVhOmZvY3VzIHsKICAgICAgICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjNENBRjUwOwogICAgICAgIH0KCiAgICAgICAgLmluZm8tbW9kYWwgewogICAgICAgICAgICBkaXNwbGF5OiBub25lOwogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHotaW5kZXg6IDEwMDE7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHRvcDogMDsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwwLjUpOwogICAgICAgIH0KCiAgICAgICAgLmluZm8tbW9kYWwtY29udGVudCB7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogICAgICAgICAgICBtYXJnaW46IDEwMHB4IGF1dG87CiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgICAgICAgICAgd2lkdGg6IDkwJTsKICAgICAgICAgICAgbWF4LXdpZHRoOiA2MDBweDsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMjBweCByZ2JhKDAsMCwwLDAuMyk7CiAgICAgICAgfQoKICAgICAgICAuaW5mby1tb2RhbC1oZWFkZXIgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4OwogICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzRDQUY1MDsKICAgICAgICB9CgogICAgICAgIC5pbmZvLW1vZGFsLWhlYWRlciBoMyB7CiAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgY29sb3I6ICMzMzM7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICB9CgogICAgICAgIC5pbmZvLW1vZGFsLWJvZHkgewogICAgICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjsKICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4OwogICAgICAgIH0KCiAgICAgICAgLmluZm8tbW9kYWwtYm9keSBzdHJvbmcgewogICAgICAgICAgICBjb2xvcjogIzMzMzsKICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDsKICAgICAgICB9CgogICAgICAgIC5pbmZvLW1vZGFsLWJvZHkgY29kZSB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmNGY0ZjQ7CiAgICAgICAgICAgIHBhZGRpbmc6IDJweCA2cHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsKICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgIH0KCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDEyMDBweCkgewogICAgICAgICAgICAuZ3JpZC00LCAuZ3JpZC01IHsKICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7CiAgICAgICAgICAgIC5ncmlkLTIsIC5ncmlkLTMsIC5ncmlkLTQsIC5ncmlkLTUgewogICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGRpdiBjbGFzcz0iY29udGFpbmVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXIiPgogICAgICAgICAgICA8aDE+UG9saWN5IENvbmZpZyBNYW5hZ2VyPC9oMT4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBUYWJzIC0tPgogICAgICAgIDxkaXYgY2xhc3M9InRhYnMiPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJ0YWIgYWN0aXZlIiBvbmNsaWNrPSJzd2l0Y2hUYWIoJ2VkaXRvcicpIj5FZGl0b3I8L2J1dHRvbj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0idGFiIiBvbmNsaWNrPSJzd2l0Y2hUYWIoJ2NvbXBhcmUnKSI+Q29tcGFyZSBKU09OPC9idXR0b24+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDwhLS0gRWRpdG9yIFRhYiAtLT4KICAgICAgICA8ZGl2IGlkPSJlZGl0b3JUYWIiIGNsYXNzPSJ0YWItY29udGVudCBhY3RpdmUiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJhY3Rpb25zIj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNlY29uZGFyeSIgb25jbGljaz0ib3BlbkxvYWRNb2RhbCgpIj5Mb2FkIEpTT048L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNlY29uZGFyeSIgb25jbGljaz0iZ2VuZXJhdGVKU09OKCkiPkdlbiBKU09OPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJzZWNvbmRhcnkiIG9uY2xpY2s9ImdlbmVyYXRlU1FMKCkiPkdlbiBTUUw8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNlY29uZGFyeSIgb25jbGljaz0iZG93bmxvYWRPdXRwdXQoKSI+RG93bmxvYWQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNlY29uZGFyeSIgb25jbGljaz0iY29sbGFwc2VBbGxQb2xpY2llcygpIj5Db2xsYXBzZSBBbGw8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNlY29uZGFyeSIgb25jbGljaz0iZXhwYW5kQWxsUG9saWNpZXMoKSI+RXhwYW5kIEFsbDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZGFuZ2VyIiBvbmNsaWNrPSJyZXNldEZvcm0oKSI+UmVzZXQ8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgIDwhLS0gTG9hZCBKU09OIE1vZGFsIC0tPgogICAgICAgIDxkaXYgaWQ9ImxvYWRNb2RhbCIgY2xhc3M9Im1vZGFsIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtY29udGVudCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxoMj5Mb2FkIEpTT048L2gyPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJjbG9zZSIgb25jbGljaz0iY2xvc2VMb2FkTW9kYWwoKSI+JnRpbWVzOzwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0iY29sb3I6ICM2NjY7IG1hcmdpbi1ib3R0b206IDEwcHg7Ij5QYXN0ZSB5b3VyIEpTT04gY29udGVudCBiZWxvdzo8L3A+CiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJqc29uSW5wdXQiIHBsYWNlaG9sZGVyPSdQYXN0ZSBKU09OIGhlcmUsIGUuZy4sIHsicG9saWNpZXNNYXBzIjogWy4uLl19Jz48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJ0bi1ncm91cCIgc3R5bGU9Im1hcmdpbi10b3A6IDEwcHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJsb2FkRnJvbVRleHRhcmVhKCkiPkxvYWQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJjbG9zZUxvYWRNb2RhbCgpIj5DYW5jZWw8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBJbmZvIE1vZGFsIC0tPgogICAgICAgIDxkaXYgaWQ9ImluZm9Nb2RhbCIgY2xhc3M9ImluZm8tbW9kYWwiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbmZvLW1vZGFsLWNvbnRlbnQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5mby1tb2RhbC1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxoMyBpZD0iaW5mb1RpdGxlIj5GaWVsZCBJbmZvcm1hdGlvbjwvaDM+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImNsb3NlIiBvbmNsaWNrPSJjbG9zZUluZm9Nb2RhbCgpIj4mdGltZXM7PC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbmZvLW1vZGFsLWJvZHkiIGlkPSJpbmZvQm9keSI+CiAgICAgICAgICAgICAgICAgICAgPCEtLSBEeW5hbWljIGNvbnRlbnQgd2lsbCBiZSBpbnNlcnRlZCBoZXJlIC0tPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8IS0tIEV4cGFuZCBNb2RhbCAtLT4KICAgICAgICA8ZGl2IGlkPSJleHBhbmRNb2RhbCIgY2xhc3M9ImV4cGFuZC1tb2RhbCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImV4cGFuZC1tb2RhbC1jb250ZW50Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImV4cGFuZC1tb2RhbC1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxoMyBpZD0iZXhwYW5kVGl0bGUiPkVkaXQgRmllbGQ8L2gzPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJjbG9zZSIgb25jbGljaz0iY2xvc2VFeHBhbmRNb2RhbCgpIj4mdGltZXM7PC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0iZXhwYW5kVGV4dGFyZWEiIGNsYXNzPSJleHBhbmQtdGV4dGFyZWEiIHBsYWNlaG9sZGVyPSJFbnRlciB5b3VyIHZhbHVlIGhlcmUuLi4iPjwvdGV4dGFyZWE+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYnRuLWdyb3VwIiBzdHlsZT0ibWFyZ2luLXRvcDogMTBweDsiPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InNhdmVFeHBhbmRlZFZhbHVlKCkiPlNhdmU8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJjbG9zZUV4cGFuZE1vZGFsKCkiPkNhbmNlbDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8Zm9ybSBpZD0icG9saWN5Rm9ybSI+CiAgICAgICAgICAgIDxkaXYgaWQ9ImNoYW5uZWxzQ29udGFpbmVyIj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYnRuLWdyb3VwIj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJhZGRDaGFubmVsKCkiPisgQWRkIENoYW5uZWw8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9mb3JtPgoKICAgICAgICA8ZGl2IGNsYXNzPSJvdXRwdXQtYXJlYSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyIj4KICAgICAgICAgICAgICAgIDxoMj5PdXRwdXQ8L2gyPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiA2cHg7Ij4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJzZWNvbmRhcnkgc21hbGwiIG9uY2xpY2s9ImNvcHlPdXRwdXQoKSIgdGl0bGU9IkNvcHkgdG8gY2xpcGJvYXJkIj5Db3B5PC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ib3V0cHV0VHlwZSIgc3R5bGU9IndpZHRoOiBhdXRvOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IG1hcmdpbi1yaWdodDogNnB4OyI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ianNvbiI+SlNPTjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InNxbCI+U1FMPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im91dHB1dC1ib3giIGlkPSJvdXRwdXRCb3giPk91dHB1dCB3aWxsIGFwcGVhciBoZXJlLi4uPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDwhLS0gQ29tcGFyZSBUYWIgLS0+CiAgICAgICAgPGRpdiBpZD0iY29tcGFyZVRhYiIgY2xhc3M9InRhYi1jb250ZW50Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29tcGFyZS1jb250YWluZXIiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29tcGFyZS1wYW5lbCI+CiAgICAgICAgICAgICAgICAgICAgPGgzPkpTT04gMSAoTGVmdCk8L2gzPgogICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0ianNvbjEiIGNsYXNzPSJjb21wYXJlLXRleHRhcmVhIiBwbGFjZWhvbGRlcj0nUGFzdGUgZmlyc3QgSlNPTiBoZXJlLi4uJz48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb21wYXJlLXBhbmVsIj4KICAgICAgICAgICAgICAgICAgICA8aDM+SlNPTiAyIChSaWdodCk8L2gzPgogICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0ianNvbjIiIGNsYXNzPSJjb21wYXJlLXRleHRhcmVhIiBwbGFjZWhvbGRlcj0nUGFzdGUgc2Vjb25kIEpTT04gaGVyZS4uLic+PC90ZXh0YXJlYT4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbnMiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJjb21wYXJlSlNPTnMoKSI+Q29tcGFyZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2Vjb25kYXJ5IiBvbmNsaWNrPSJjbGVhckNvbXBhcmlzb24oKSI+Q2xlYXI8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGlkPSJkaWZmUmVzdWx0cyIgY2xhc3M9ImRpZmYtcmVzdWx0cyIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4KICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMTBweDsiPkRpZmZlcmVuY2VzOjwvaDM+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJkaWZmQ29udGVudCI+PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPHNjcmlwdD4KICAgICAgICBsZXQgY2hhbm5lbENvdW50ZXIgPSAwOwogICAgICAgIGxldCBwb2xpY3lDb3VudGVyID0gMDsKICAgICAgICBsZXQgYWNjZXNzQ291bnRlciA9IDA7CiAgICAgICAgbGV0IG5vdGlmaWNhdGlvbkNvdW50ZXIgPSAwOwogICAgICAgIGxldCBjdXJyZW50T3V0cHV0ID0gJyc7CgogICAgICAgIC8vIEZpZWxkIGluZm9ybWF0aW9uIGRhdGFiYXNlCiAgICAgICAgY29uc3QgZmllbGRJbmZvID0gewogICAgICAgICAgICBjaGFubmVsSWQ6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiQ2hhbm5lbCBJRCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY2hhbm5lbCB0aHJvdWdoIHdoaWNoIHRoZSBzZXJ2aWNlIGlzIGFjY2Vzc2VkLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJTR19NQiIsICJVU19XRUIiLCAiVUtfQVBJIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXJ2aWNlSWQ6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiU2VydmljZSBJRCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgc2VydmljZS9BUEkgZW5kcG9pbnQuIFRoaXMgc2hvdWxkIGJlIHVuaXF1ZSBhY3Jvc3MgYWxsIHBvbGljaWVzLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJQQVlOT1dfVVBJXzEiLCAiVFJBTlNGRVJfRlVORFMiLCAiVklFV19CQUxBTkNFIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBlbmRQb2ludDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJFbmQgUG9pbnQgKFVSSSkiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgQVBJIGVuZHBvaW50IHBhdGggdGhhdCB0aGlzIHBvbGljeSBhcHBsaWVzIHRvLiBUaGlzIGlzIHRoZSBpbmNvbWluZyByZXF1ZXN0IHBhdGguIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIi9wYXltZW50cy9wcm94eS10cmFuc2Zlci1mY3kvcGF5bm93dXBpIiwgIi9hcGkvdHJhbnNmZXIiLCAiL2JhbGFuY2UvdmlldyJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaHR0cE1ldGhvZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJIVFRQIE1ldGhvZCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlRoZSBIVFRQIG1ldGhvZCB1c2VkIGZvciB0aGlzIGVuZHBvaW50LiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJQT1NUIiwgIkdFVCIsICJQVVQiLCAiREVMRVRFIiwgIlBBVENIIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBvdXRFbmRQb2ludDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJPdXQgRW5kIFBvaW50IiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIG91dGdvaW5nIGVuZHBvaW50IHBhdGguIENhbiBiZSBzYW1lIGFzIGVuZHBvaW50IG9yIGRpZmZlcmVudCBmb3Igcm91dGluZyBwdXJwb3Nlcy4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiL3BheW1lbnRzL3Byb3h5LXRyYW5zZmVyLWZjeS9wYXlub3d1cGkiLCAiL2ludGVybmFsL2FwaS90cmFuc2ZlciJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlcnZpY2VEZXNjOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlNlcnZpY2UgRGVzY3JpcHRpb24iLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJBIGh1bWFuLXJlYWRhYmxlIGRlc2NyaXB0aW9uIG9mIHdoYXQgdGhpcyBzZXJ2aWNlIGRvZXMuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlBheW5vd1VQSShTR0QgdG8gSU5SKSB0cmFuc2ZlciIsICJGdW5kIHRyYW5zZmVyIHNlcnZpY2UiLCAiQmFsYW5jZSBpbnF1aXJ5Il0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBhdXRoTGV2ZWxSZXF1aXJlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJBdXRoIExldmVsIFJlcXVpcmVkIChMZXZlbCkiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgYXV0aGVudGljYXRpb24gbGV2ZWwgcmVxdWlyZWQgdG8gYWNjZXNzIHRoaXMgc2VydmljZS4gTGV2ZWwgMCBtZWFucyBubyBhdXRoZW50aWNhdGlvbiByZXF1aXJlZC4gSGlnaGVyIGxldmVscyByZXF1aXJlIHN0cm9uZ2VyIGF1dGhlbnRpY2F0aW9uLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyIwIChObyBhdXRoKSIsICIxIChCYXNpYykiLCAiMiAoU3Ryb25nKSIsICIzIChNdWx0aS1mYWN0b3IpIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICAgIGxvZ2ljOiAiSWYgbGV2ZWwgPSAwLCB2YWxpZGF0aW9uID0gZmFsc2UgYW5kIHdoaXRlbGlzdCA9IHRydWUuIElmIGxldmVsICE9IDAsIHZhbGlkYXRpb24gPSB0cnVlIGFuZCB3aGl0ZWxpc3QgPSBmYWxzZS4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlc3Npb25WYWxSZXF1aXJlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJTZXNzaW9uIFZhbGlkYXRpb24gUmVxdWlyZWQiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJXaGV0aGVyIHNlc3Npb24gdmFsaWRhdGlvbiBpcyByZXF1aXJlZCBmb3IgdGhpcyBzZXJ2aWNlLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJ0cnVlIiwgImZhbHNlIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgICAgICAgICBsb2dpYzogIkF1dG9tYXRpY2FsbHkgc2V0IGJhc2VkIG9uIGF1dGggbGV2ZWwuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB3aGl0ZWxpc3RlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJXaGl0ZWxpc3RlZCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIldoZXRoZXIgdGhpcyBzZXJ2aWNlIGlzIHdoaXRlbGlzdGVkIChhbGxvd2VkIHdpdGhvdXQgY2VydGFpbiBjaGVja3MpLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJ0cnVlIiwgImZhbHNlIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgICAgICAgICBsb2dpYzogIkF1dG9tYXRpY2FsbHkgc2V0IGJhc2VkIG9uIGF1dGggbGV2ZWwuIgogICAgICAgICAgICB9LAogICAgICAgICAgICBhbGxvd2VkU2NvcGU6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiQWxsb3dlZCBTY29wZSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlRoZSBPQXV0aC9hY2Nlc3Mgc2NvcGVzIHJlcXVpcmVkIHRvIGFjY2VzcyB0aGlzIHNlcnZpY2UuIFNwYWNlLXNlcGFyYXRlZCBsaXN0LiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJhY2Nlc3NfbGV2ZWwyIGlhbV9hY2Nlc3Mgc2VydmljZV9sZXZlbDIiLCAiYWNjZXNzX2xldmVsMCIsICJhZG1pbl9zY29wZSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdHhuQXV0aENvbmNlcm5zOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlRyYW5zYWN0aW9uIEF1dGggQ29uY2VybnMgKFR4biBBdXRoKSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIldoZXRoZXIgdGhpcyBzZXJ2aWNlIHJlcXVpcmVzIHRyYW5zYWN0aW9uIGF1dGhlbnRpY2F0aW9uL2F1dGhvcml6YXRpb24uIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlkgKFllcykiLCAiTiAoTm8pIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICAgIGxvZ2ljOiAiSWYgTiwgb25seSAxIGFjY2VzcyByZWNvcmQgaXMgYWxsb3dlZC4gSWYgWSwgMSBvciBtb3JlIGFjY2VzcyByZWNvcmRzIGFsbG93ZWQuIgogICAgICAgICAgICB9LAogICAgICAgICAgICBjb29saW5nUGVyaW9kQ2hlY2tSZXF1aXJlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJDb29saW5nIFBlcmlvZCBDaGVjayBSZXF1aXJlZCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIldoZXRoZXIgYSBjb29saW5nIHBlcmlvZCBjaGVjayBpcyByZXF1aXJlZCBiZWZvcmUgYWxsb3dpbmcgdGhpcyB0cmFuc2FjdGlvbi4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsidHJ1ZSIsICJmYWxzZSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHR4bkF1dGhSZXF1aXJlZDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJUcmFuc2FjdGlvbmFsIEF1dGggUmVxdWlyZWQiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgbGV2ZWwgb2YgdHJhbnNhY3Rpb24gYXV0aG9yaXphdGlvbiByZXF1aXJlZC4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiMCAoTm9uZSkiLCAiMSAoQmFzaWMpIiwgIjIgKFN0cm9uZykiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBub3RpZmljYXRpb25QYXJhbU1hcDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJOb3RpZmljYXRpb24gUGFyYW1ldGVyIE1hcCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIk1hcHMgcmVxdWVzdCBmaWVsZHMgdG8gbm90aWZpY2F0aW9uIHRlbXBsYXRlIHBhcmFtZXRlcnMuIFVzZWQgdG8gcG9wdWxhdGUgbm90aWZpY2F0aW9uIG1lc3NhZ2VzLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJTSE9SVEZJRUxEMDE9cnFPYmoucmVxdWVzdF9ib2R5LmFtb3VudCwgU0hPUlRGSUVMRDAyPXJxT2JqLnJlcXVlc3RfYm9keS5jdXJyZW5jeSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlc3Npb25Db25kaXRpb25NYXA6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiU2Vzc2lvbiBDb25kaXRpb25zIE1hcCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIkNvbmRpdGlvbnMgYmFzZWQgb24gc2Vzc2lvbiBhdHRyaWJ1dGVzIHRoYXQgbXVzdCBiZSBtZXQuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbInNlc3Npb24ubG9naW5UeXBlPVNFQ1VSRSIsICJzZXNzaW9uLmRldmljZVZlcmlmaWVkPXRydWUiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBwcm9maWxlQ29uZGl0aW9uTWFwOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlByb2ZpbGUgQ29uZGl0aW9ucyBNYXAiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJDb25kaXRpb25zIGJhc2VkIG9uIHVzZXIgcHJvZmlsZSBhdHRyaWJ1dGVzIHRoYXQgbXVzdCBiZSBtZXQuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbInByb2ZpbGUuYWNjb3VudFR5cGU9UFJFTUlVTSIsICJwcm9maWxlLnZlcmlmaWVkPXRydWUiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICByZXF1ZXN0Q29uZGl0aW9uc01hcDogewogICAgICAgICAgICAgICAgdGl0bGU6ICJSZXF1ZXN0IENvbmRpdGlvbnMgTWFwIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiQ3VzdG9tIGNvbmRpdGlvbnMgYmFzZWQgb24gcmVxdWVzdCBkYXRhIHRoYXQgbXVzdCBiZSBtZXQuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbInJxT2JqLnJlcXVlc3RfYm9keS5hbW91bnQ+MTAwMCIsICJycU9iai5yZXF1ZXN0X2JvZHkuY3VycmVuY3k9VVNEIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmlza0luZGljYXRvcjogewogICAgICAgICAgICAgICAgdGl0bGU6ICJSaXNrIEluZGljYXRvciIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlJpc2sgbGV2ZWwgaW5kaWNhdG9yIGZvciB0aGlzIHRyYW5zYWN0aW9uIHR5cGUuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIjAgKExvdykiLCAiMSAoTWVkaXVtKSIsICIyIChIaWdoKSIsICIzIChDcml0aWNhbCkiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBwb3N0YWxDb2RlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlBvc3RhbCBDb2RlIENoZWNrIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiV2hldGhlciBwb3N0YWwgY29kZSB2YWxpZGF0aW9uIGlzIHJlcXVpcmVkLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyIwIChOb3QgcmVxdWlyZWQpIiwgIjEgKFJlcXVpcmVkKSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVwZGF0ZUxpbWl0OiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlVwZGF0ZSBMaW1pdCBDaGVjayIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIldoZXRoZXIgbGltaXQgdXBkYXRlcyBhcmUgYWxsb3dlZC4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiMCAoTm90IGFsbG93ZWQpIiwgIjEgKEFsbG93ZWQpIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWluQW10Q29kZTogewogICAgICAgICAgICAgICAgdGl0bGU6ICJNaW4gQW1vdW50IENvZGUiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJSZWZlcmVuY2UgY29kZSBmb3IgdGhlIG1pbmltdW0gYW1vdW50IGFsbG93ZWQgZm9yIHRoaXMgdHJhbnNhY3Rpb24uIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIkRFRkFVTFRfTUlOX0FNVCIsICJQQVlOT1dfTUlOIiwgIlRSQU5TRkVSX01JTiJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1pbkFtdENvZGVWYWx1ZTogewogICAgICAgICAgICAgICAgdGl0bGU6ICJNaW4gQW1vdW50IFZhbHVlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIGFjdHVhbCBtaW5pbXVtIGFtb3VudCB2YWx1ZS4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiMC4wMDAwIiwgIjEwLjAwMDAiLCAiMTAwLjAwMDAiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBtYXhBbXRDb2RlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIk1heCBBbW91bnQgQ29kZSIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlJlZmVyZW5jZSBjb2RlIGZvciB0aGUgbWF4aW11bSBhbW91bnQgYWxsb3dlZCBmb3IgdGhpcyB0cmFuc2FjdGlvbi4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsiREVGQVVMVF9NQVhfQU1UIiwgIlBBWU5PV19NQVgiLCAiVFJBTlNGRVJfTUFYIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWF4QW10Q29kZVZhbHVlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIk1heCBBbW91bnQgVmFsdWUiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgYWN0dWFsIG1heGltdW0gYW1vdW50IHZhbHVlLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyI5OTk5OTkuOTk5OSIsICIxMDAwMC4wMDAwIiwgIjUwMDAwLjAwMDAiXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBub3RpZmljYXRpb25UeXBlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIk5vdGlmaWNhdGlvbiBUeXBlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIHR5cGUgb2Ygbm90aWZpY2F0aW9uIHRvIHNlbmQgdG8gdGhlIHVzZXIuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlNNUyIsICJFTUFJTCIsICJQVVNIIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXV0aFR5cGU6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiQXV0aCBUeXBlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIGF1dGhlbnRpY2F0aW9uIHR5cGUgcmVxdWlyZWQgZm9yIHRoaXMgbm90aWZpY2F0aW9uL3RyYW5zYWN0aW9uLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJBVVRIX0hBUkRfU0lHTiIsICJBVVRIX1NPRlRfU0lHTiIsICJBVVRIX09UUCJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRlbXBsYXRlSWQ6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiVGVtcGxhdGUgSUQiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJUaGUgbm90aWZpY2F0aW9uIHRlbXBsYXRlIGlkZW50aWZpZXIgaW5jbHVkaW5nIGxhbmd1YWdlLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJTVEI4OFVQMTA4OkVuZ2xpc2giLCAiVEVNUExBVEVfMDAxOkVuZ2xpc2giLCAiVFhOX0FMRVJUOlNwYW5pc2giXSwKICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICAgICAgICB9LAogICAgICAgICAgICB0ZW1wbGF0ZVBhcmFtczogewogICAgICAgICAgICAgICAgdGl0bGU6ICJUZW1wbGF0ZSBQYXJhbWV0ZXJzIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiQ29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgcGFyYW1ldGVycyB1c2VkIGluIHRoZSBub3RpZmljYXRpb24gdGVtcGxhdGUuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlNIT1JURklFTEQwMSxTSE9SVEZJRUxEMDIsU0hPUlRGSUVMRDAzIiwgIkFNT1VOVCxDVVJSRU5DWSxEQVRFIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaXNNYW5kYXRvcnk6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiSXMgTWFuZGF0b3J5IiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiV2hldGhlciB0aGlzIG5vdGlmaWNhdGlvbiBpcyBtYW5kYXRvcnkgZm9yIHRoZSB0cmFuc2FjdGlvbi4iLAogICAgICAgICAgICAgICAgZXhhbXBsZXM6IFsidHJ1ZSIsICJmYWxzZSJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFtb3VudENvZGU6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiQW1vdW50IENvZGUiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJDdXN0b20gYW1vdW50IGNvZGUgaWRlbnRpZmllciBmb3IgdGhpcyBwb2xpY3kuIERvIG5vdCB1c2UgREVGQVVMVF9NSU5fQU1UIG9yIERFRkFVTFRfTUFYX0FNVF9ORVhUR0VOIGFzIHRoZXNlIGFyZSBzeXN0ZW0gZGVmYXVsdHMuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIlBBWU5PV19NQVgiLCAiVFJBTlNGRVJfTElNSVQiLCAiQ1VTVE9NX1RIUkVTSE9MRCJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFtb3VudENvZGVEZXNjOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkFtb3VudCBDb2RlIERlc2NyaXB0aW9uIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiRGVzY3JpcHRpb24gb2YgdGhlIGFtb3VudCBjb2RlLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJNYXhpbXVtIGFtb3VudCBmb3IgUGF5Tm93IHRyYW5zZmVycyIsICJEYWlseSB0cmFuc2ZlciBsaW1pdCJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFtb3VudENvZGVTdWJEZXNjOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkFtb3VudCBDb2RlIFN1YiBEZXNjcmlwdGlvbiIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIkFkZGl0aW9uYWwgZGVzY3JpcHRpb24gb3IgY29udGV4dCBmb3IgdGhlIGFtb3VudCBjb2RlLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJBcHBsaWVzIHRvIFNHRCB0byBJTlIgdHJhbnNmZXJzIiwgIlBlciB0cmFuc2FjdGlvbiBsaW1pdCJdLAogICAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFtb3VudFNlcnZpY2VEZXNjOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkFtb3VudCBTZXJ2aWNlIERlc2NyaXB0aW9uIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiRGVzY3JpcHRpb24gb2YgdGhlIHNlcnZpY2UgdGhpcyBhbW91bnQgY29kZSBhcHBsaWVzIHRvLiIsCiAgICAgICAgICAgICAgICBleGFtcGxlczogWyJQYXlOb3cgVVBJIFNlcnZpY2UiLCAiRnVuZCBUcmFuc2ZlciBTZXJ2aWNlIl0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYW1vdW50Q29kZVZhbHVlOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkFtb3VudCBDb2RlIFZhbHVlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVGhlIG51bWVyaWMgdmFsdWUgZm9yIHRoaXMgYW1vdW50IGNvZGUuIiwKICAgICAgICAgICAgICAgIGV4YW1wbGVzOiBbIjUwMDAuMDAiLCAiMTAwMDAuMDAiLCAiOTk5OTk5Ljk5Il0sCiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgYWRkQ2hhbm5lbCgpOwogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIHNob3dJbmZvKGZpZWxkTmFtZSkgewogICAgICAgICAgICBjb25zdCBpbmZvID0gZmllbGRJbmZvW2ZpZWxkTmFtZV07CiAgICAgICAgICAgIGlmICghaW5mbykgewogICAgICAgICAgICAgICAgYWxlcnQoJ05vIGluZm9ybWF0aW9uIGF2YWlsYWJsZSBmb3IgdGhpcyBmaWVsZC4nKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm9UaXRsZScpLnRleHRDb250ZW50ID0gaW5mby50aXRsZTsKCiAgICAgICAgICAgIGxldCBib2R5SFRNTCA9IGA8cD4ke2luZm8uZGVzY3JpcHRpb259PC9wPmA7CgogICAgICAgICAgICBpZiAoaW5mby5yZXF1aXJlZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBib2R5SFRNTCArPSBgPHN0cm9uZz5SZXF1aXJlZDo8L3N0cm9uZz4gJHtpbmZvLnJlcXVpcmVkID8gJ1llcycgOiAnTm8nfWA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpbmZvLmV4YW1wbGVzICYmIGluZm8uZXhhbXBsZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgYm9keUhUTUwgKz0gYDxzdHJvbmc+RXhhbXBsZXM6PC9zdHJvbmc+YDsKICAgICAgICAgICAgICAgIGJvZHlIVE1MICs9ICc8dWwgc3R5bGU9Im1hcmdpbjogNXB4IDA7IHBhZGRpbmctbGVmdDogMjBweDsiPic7CiAgICAgICAgICAgICAgICBpbmZvLmV4YW1wbGVzLmZvckVhY2goZXggPT4gewogICAgICAgICAgICAgICAgICAgIGJvZHlIVE1MICs9IGA8bGk+PGNvZGU+JHtleH08L2NvZGU+PC9saT5gOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBib2R5SFRNTCArPSAnPC91bD4nOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaW5mby5sb2dpYykgewogICAgICAgICAgICAgICAgYm9keUhUTUwgKz0gYDxzdHJvbmc+QnVzaW5lc3MgTG9naWM6PC9zdHJvbmc+PHAgc3R5bGU9Im1hcmdpbjogNXB4IDA7IHBhZGRpbmc6IDhweDsgYmFja2dyb3VuZDogI2ZmZjNjZDsgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCAjZmZjMTA3OyBib3JkZXItcmFkaXVzOiAzcHg7Ij4ke2luZm8ubG9naWN9PC9wPmA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvQm9keScpLmlubmVySFRNTCA9IGJvZHlIVE1MOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mb01vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjbG9zZUluZm9Nb2RhbCgpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm9Nb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgfQoKICAgICAgICAvLyBDbG9zZSBpbmZvIG1vZGFsIHdoZW4gY2xpY2tpbmcgb3V0c2lkZQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIGNvbnN0IGluZm9Nb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvTW9kYWwnKTsKICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PSBpbmZvTW9kYWwpIHsKICAgICAgICAgICAgICAgIGNsb3NlSW5mb01vZGFsKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnN0IGV4cGFuZE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGFuZE1vZGFsJyk7CiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgPT0gZXhwYW5kTW9kYWwpIHsKICAgICAgICAgICAgICAgIGNsb3NlRXhwYW5kTW9kYWwoKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICAvLyBFeHBhbmQgZmllbGQgZnVuY3Rpb25hbGl0eQogICAgICAgIGxldCBjdXJyZW50RXhwYW5kSW5wdXQgPSBudWxsOwoKICAgICAgICBmdW5jdGlvbiBleHBhbmRGaWVsZChleHBhbmRJY29uLCBmaWVsZFRpdGxlKSB7CiAgICAgICAgICAgIGNvbnN0IGlucHV0V3JhcHBlciA9IGV4cGFuZEljb24ucGFyZW50RWxlbWVudDsKICAgICAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gaW5wdXRXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7CgogICAgICAgICAgICBjdXJyZW50RXhwYW5kSW5wdXQgPSBpbnB1dEVsZW1lbnQ7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBhbmRUaXRsZScpLnRleHRDb250ZW50ID0gZmllbGRUaXRsZTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGFuZFRleHRhcmVhJykudmFsdWUgPSBpbnB1dEVsZW1lbnQudmFsdWU7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBhbmRNb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kVGV4dGFyZWEnKS5mb2N1cygpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xvc2VFeHBhbmRNb2RhbCgpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGFuZE1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgY3VycmVudEV4cGFuZElucHV0ID0gbnVsbDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNhdmVFeHBhbmRlZFZhbHVlKCkgewogICAgICAgICAgICBpZiAoY3VycmVudEV4cGFuZElucHV0KSB7CiAgICAgICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBhbmRUZXh0YXJlYScpLnZhbHVlOwogICAgICAgICAgICAgICAgY3VycmVudEV4cGFuZElucHV0LnZhbHVlID0gbmV3VmFsdWU7CiAgICAgICAgICAgICAgICBjbG9zZUV4cGFuZE1vZGFsKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHN3aXRjaFRhYih0YWJOYW1lKSB7CiAgICAgICAgICAgIC8vIEhpZGUgYWxsIHRhYnMKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYi1jb250ZW50JykuZm9yRWFjaCh0YWIgPT4gewogICAgICAgICAgICAgICAgdGFiLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIFJlbW92ZSBhY3RpdmUgY2xhc3MgZnJvbSBhbGwgdGFiIGJ1dHRvbnMKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYicpLmZvckVhY2goYnRuID0+IHsKICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBTaG93IHNlbGVjdGVkIHRhYgogICAgICAgICAgICBpZiAodGFiTmFtZSA9PT0gJ2VkaXRvcicpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0b3JUYWInKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWInKVswXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICAgICAgfSBlbHNlIGlmICh0YWJOYW1lID09PSAnY29tcGFyZScpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21wYXJlVGFiJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiJylbMV0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CgogICAgICAgICAgICAgICAgLy8gUG9wdWxhdGUgZGVmYXVsdCB2YWx1ZSBpbiBib3RoIHRleHRhcmVhcyBpZiBlbXB0eQogICAgICAgICAgICAgICAgY29uc3QgZGVmYXVsdEpzb25TdHJpbmcgPSBgewogICJwb2xpY2llc01hcHMiOiBbCiAgICB7CiAgICAgICJjaGFubmVsSWQiOiAiU0dfTUIiLAogICAgICAicG9saWNpZXMiOiBbCgogICAgICBdCiAgICB9CiAgXQp9YDsKCiAgICAgICAgICAgICAgICBjb25zdCBqc29uMVRleHRhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzb24xJyk7CiAgICAgICAgICAgICAgICBpZiAoIWpzb24xVGV4dGFyZWEudmFsdWUudHJpbSgpKSB7CiAgICAgICAgICAgICAgICAgICAganNvbjFUZXh0YXJlYS52YWx1ZSA9IGRlZmF1bHRKc29uU3RyaW5nOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnN0IGpzb24yVGV4dGFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNvbjInKTsKICAgICAgICAgICAgICAgIGlmICghanNvbjJUZXh0YXJlYS52YWx1ZS50cmltKCkpIHsKICAgICAgICAgICAgICAgICAgICBqc29uMlRleHRhcmVhLnZhbHVlID0gZGVmYXVsdEpzb25TdHJpbmc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFkZENoYW5uZWwoKSB7CiAgICAgICAgICAgIGNvbnN0IGNoYW5uZWxJZCA9IGBjaGFubmVsXyR7Y2hhbm5lbENvdW50ZXIrK31gOwogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhbm5lbHNDb250YWluZXInKTsKCiAgICAgICAgICAgIGNvbnN0IGNoYW5uZWxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgY2hhbm5lbERpdi5jbGFzc05hbWUgPSAnY2hhbm5lbC1zZWN0aW9uJzsKICAgICAgICAgICAgY2hhbm5lbERpdi5pZCA9IGNoYW5uZWxJZDsKICAgICAgICAgICAgY2hhbm5lbERpdi5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlciI+CiAgICAgICAgICAgICAgICAgICAgPGgyPkNoYW5uZWwgPHNwYW4gY2xhc3M9ImJhZGdlIj4jJHtjaGFubmVsQ291bnRlcn08L3NwYW4+PC9oMj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImRhbmdlciBzbWFsbCIgb25jbGljaz0icmVtb3ZlQ2hhbm5lbCgnJHtjaGFubmVsSWR9JykiPlJlbW92ZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InJlcXVpcmVkIj5DaGFubmVsIElEIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdjaGFubmVsSWQnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iY2hhbm5lbElkIiB2YWx1ZT0iU0dfTUIiIHJlcXVpcmVkPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwb2xpY2llcy1jb250YWluZXIiIGlkPSJwb2xpY2llc18ke2NoYW5uZWxJZH0iPjwvZGl2PgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJzZWNvbmRhcnkgc21hbGwiIG9uY2xpY2s9ImFkZFBvbGljeSgnJHtjaGFubmVsSWR9JykiPisgUG9saWN5PC9idXR0b24+CiAgICAgICAgICAgIGA7CiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjaGFubmVsRGl2KTsKICAgICAgICAgICAgYWRkUG9saWN5KGNoYW5uZWxJZCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZW1vdmVDaGFubmVsKGNoYW5uZWxJZCkgewogICAgICAgICAgICBpZiAoY29uZmlybSgnUmVtb3ZlIHRoaXMgY2hhbm5lbD8nKSkgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2hhbm5lbElkKS5yZW1vdmUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWRkUG9saWN5KGNoYW5uZWxJZCkgewogICAgICAgICAgICBjb25zdCBwb2xpY3lJZCA9IGBwb2xpY3lfJHtwb2xpY3lDb3VudGVyKyt9YDsKICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHBvbGljaWVzXyR7Y2hhbm5lbElkfWApOwoKICAgICAgICAgICAgY29uc3QgcG9saWN5RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHBvbGljeURpdi5jbGFzc05hbWUgPSAncG9saWN5LXNlY3Rpb24nOwogICAgICAgICAgICBwb2xpY3lEaXYuaWQgPSBwb2xpY3lJZDsKICAgICAgICAgICAgcG9saWN5RGl2LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taGVhZGVyIj4KICAgICAgICAgICAgICAgICAgICA8aDM+CiAgICAgICAgICAgICAgICAgICAgICAgIFBvbGljeSA8c3BhbiBjbGFzcz0iYmFkZ2UiPiMke3BvbGljeUNvdW50ZXJ9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iZm9udC13ZWlnaHQ6IG5vcm1hbDsgY29sb3I6ICM2NjY7IGZvbnQtc2l6ZTogMTFweDsgbWFyZ2luLWxlZnQ6IDhweDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InBvbGljeS1tZXRob2QiIGlkPSJtZXRob2RfJHtwb2xpY3lJZH0iPlBPU1Q8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0icG9saWN5LXVyaSIgaWQ9InVyaV8ke3BvbGljeUlkfSI+L2FwaS9lbmRwb2ludDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvaDM+CiAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJ0b2dnbGUtYnRuIHNtYWxsIiBvbmNsaWNrPSJ0b2dnbGVQb2xpY3koJyR7cG9saWN5SWR9JykiPuKIkjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImRhbmdlciBzbWFsbCIgb25jbGljaz0icmVtb3ZlUG9saWN5KCcke3BvbGljeUlkfScpIj5SZW1vdmU8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBvbGljeS1jb250ZW50IiBpZD0iY29udGVudF8ke3BvbGljeUlkfSI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkLTUiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InJlcXVpcmVkIj5TZXJ2aWNlIElEIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdzZXJ2aWNlSWQnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InNlcnZpY2VJZCIgdmFsdWU9IlNFUlZJQ0VfSURfJHtwb2xpY3lDb3VudGVyfSIgcmVxdWlyZWQ+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0icmVxdWlyZWQiPlVSSSA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnZW5kUG9pbnQnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImVuZFBvaW50IiB2YWx1ZT0iL2FwaS9lbmRwb2ludCIgcmVxdWlyZWQgb25pbnB1dD0idXBkYXRlUG9saWN5SGVhZGVyKCcke3BvbGljeUlkfScpIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJyZXF1aXJlZCI+TWV0aG9kIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdodHRwTWV0aG9kJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0iaHR0cE1ldGhvZCIgcmVxdWlyZWQgb25jaGFuZ2U9InVwZGF0ZVBvbGljeUhlYWRlcignJHtwb2xpY3lJZH0nKSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQT1NUIj5QT1NUPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJHRVQiPkdFVDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUFVUIj5QVVQ8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkRFTEVURSI+REVMRVRFPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+T3V0IFVSSSA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnb3V0RW5kUG9pbnQnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9Im91dEVuZFBvaW50IiB2YWx1ZT0iL2FwaS9lbmRwb2ludCI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0icmVxdWlyZWQiPkRlc2NyaXB0aW9uIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdzZXJ2aWNlRGVzYycpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0ic2VydmljZURlc2MiIHZhbHVlPSJTZXJ2aWNlIGRlc2NyaXB0aW9uIiByZXF1aXJlZD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQtNSI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0icmVxdWlyZWQiPkxldmVsIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdhdXRoTGV2ZWxSZXF1aXJlZCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9ImF1dGhMZXZlbFJlcXVpcmVkIiBvbmNoYW5nZT0idXBkYXRlVmFsaWRhdGlvbkZpZWxkcyh0aGlzKSIgcmVxdWlyZWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIwIiBzZWxlY3RlZD4wPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIxIj4xPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIyIj4yPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+VmFsaWRhdGlvbiA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnc2Vzc2lvblZhbFJlcXVpcmVkJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0ic2Vzc2lvblZhbFJlcXVpcmVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImZhbHNlIiBzZWxlY3RlZD5mYWxzZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0idHJ1ZSI+dHJ1ZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPldoaXRlbGlzdCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnd2hpdGVsaXN0ZWQnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJ3aGl0ZWxpc3RlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJ0cnVlIiBzZWxlY3RlZD50cnVlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJmYWxzZSI+ZmFsc2U8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0icmVxdWlyZWQiPlR4biBBdXRoIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCd0eG5BdXRoQ29uY2VybnMnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJ0eG5BdXRoQ29uY2VybnMiIG9uY2hhbmdlPSJ1cGRhdGVBY2Nlc3NSZXN0cmljdGlvbih0aGlzKSIgcmVxdWlyZWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJOIj5OPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJZIj5ZPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InJlcXVpcmVkIj5TY29wZSA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnYWxsb3dlZFNjb3BlJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJhbGxvd2VkU2NvcGUiIHZhbHVlPSJhY2Nlc3NfbGV2ZWwwIiByZXF1aXJlZD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFsZXJ0IGFsZXJ0LWluZm8gYWNjZXNzLXJlc3RyaWN0aW9uIiBzdHlsZT0iZGlzcGxheTpub25lOyI+CiAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5Ob3RlOjwvc3Ryb25nPiBUeG4gQXV0aD1OIGFsbG93cyBvbmx5IDEgYWNjZXNzIHJlY29yZC4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luLXRvcDogOHB4OyI+QW1vdW50IENvZGUgQ29uZmlnIChQb2xpY3ktU3BlY2lmaWMpPC9oMz4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFtb3VudC1jb2RlLXNlY3Rpb24iIGlkPSJhbW91bnRjb2RlXyR7cG9saWN5SWR9IiBzdHlsZT0iYmFja2dyb3VuZDogI2ZmZjllNjsgYm9yZGVyOiAxcHggc29saWQgI2ZmZTA2NjsgYm9yZGVyLXJhZGl1czogM3B4OyBwYWRkaW5nOiA2cHg7IG1hcmdpbi1ib3R0b206IDZweDsiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgbWFyZ2luLWJvdHRvbTogNHB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzbWFsbCBzdHlsZT0iY29sb3I6ICM2NjY7IGZvbnQtc2l6ZTogMTBweDsiPkxlYXZlIGVtcHR5IHRvIHVzZSBvbmx5IHN5c3RlbSBkZWZhdWx0czwvc21hbGw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ic2Vjb25kYXJ5IHNtYWxsIiBvbmNsaWNrPSJ0b2dnbGVBbW91bnRDb2RlKCcke3BvbGljeUlkfScpIiBpZD0iYW10Y29kZWJ0bl8ke3BvbGljeUlkfSI+KyBBZGQgQW1vdW50IENvZGU8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhbW91bnQtY29kZS1mb3JtIiBpZD0iYW10Y29kZWZvcm1fJHtwb2xpY3lJZH0iIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQtNSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+QW10IENvZGUgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ2Ftb3VudENvZGUnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iYW1vdW50Q29kZSIgdmFsdWU9IiIgcGxhY2Vob2xkZXI9ImUuZy4gUEFZTk9XX01BWCIgb25pbnB1dD0idmFsaWRhdGVBbW91bnRDb2RlKHRoaXMsICcke3BvbGljeUlkfScpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkFtdCBDb2RlIERlc2MgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ2Ftb3VudENvZGVEZXNjJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImFtb3VudENvZGVEZXNjIiB2YWx1ZT0iIiBwbGFjZWhvbGRlcj0iRGVzY3JpcHRpb24iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+QW10IENvZGUgU3ViIERlc2MgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ2Ftb3VudENvZGVTdWJEZXNjJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImFtb3VudENvZGVTdWJEZXNjIiB2YWx1ZT0iIiBwbGFjZWhvbGRlcj0iU3ViIERlc2NyaXB0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlNlcnZpY2UgRGVzYyA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnYW1vdW50U2VydmljZURlc2MnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iYW1vdW50U2VydmljZURlc2MiIHZhbHVlPSIiIHBsYWNlaG9sZGVyPSJTZXJ2aWNlIERlc2NyaXB0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkFtdCBDb2RlIFZhbHVlIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdhbW91bnRDb2RlVmFsdWUnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBzdGVwPSIwLjAxIiBuYW1lPSJhbW91bnRDb2RlVmFsdWUiIHZhbHVlPSIiIHBsYWNlaG9sZGVyPSJlLmcuIDUwMDAuMDAiIG9uaW5wdXQ9InVwZGF0ZUFtb3VudENvZGVEcm9wZG93bnMoJyR7cG9saWN5SWR9JykiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW4tdG9wOiA4cHg7Ij5Ob3RpZmljYXRpb25zIChhcHBsaWVkIHRvIGFsbCBhY2Nlc3MgcmVjb3Jkcyk8L2gzPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibm90aWZpY2F0aW9ucy1jb250YWluZXIiIGlkPSJub3RpZmljYXRpb25zXyR7cG9saWN5SWR9Ij48L2Rpdj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ic2Vjb25kYXJ5IHNtYWxsIiBvbmNsaWNrPSJhZGROb3RpZmljYXRpb24oJyR7cG9saWN5SWR9JykiPisgTm90aWZpY2F0aW9uPC9idXR0b24+CgogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW4tdG9wOiA4cHg7Ij5BY2Nlc3MgUmVjb3JkczwvaDM+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhY2Nlc3Nlcy1jb250YWluZXIiIGlkPSJhY2Nlc3Nlc18ke3BvbGljeUlkfSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9InNlY29uZGFyeSBzbWFsbCIgb25jbGljaz0iYWRkQWNjZXNzKCcke3BvbGljeUlkfScpIj4rIEFjY2VzczwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGA7CiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwb2xpY3lEaXYpOwogICAgICAgICAgICBhZGROb3RpZmljYXRpb24ocG9saWN5SWQpOwogICAgICAgICAgICBhZGRBY2Nlc3MocG9saWN5SWQpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlUG9saWN5KHBvbGljeUlkKSB7CiAgICAgICAgICAgIGlmIChjb25maXJtKCdSZW1vdmUgdGhpcyBwb2xpY3k/JykpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBvbGljeUlkKS5yZW1vdmUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlUG9saWN5KHBvbGljeUlkKSB7CiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnREaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudF8nICsgcG9saWN5SWQpOwogICAgICAgICAgICBjb25zdCBwb2xpY3lTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9saWN5SWQpOwogICAgICAgICAgICBjb25zdCB0b2dnbGVCdG4gPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy50b2dnbGUtYnRuJyk7CgogICAgICAgICAgICBpZiAoY29udGVudERpdi5jbGFzc0xpc3QuY29udGFpbnMoJ2NvbGxhcHNlZCcpKSB7CiAgICAgICAgICAgICAgICBjb250ZW50RGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbGxhcHNlZCcpOwogICAgICAgICAgICAgICAgdG9nZ2xlQnRuLnRleHRDb250ZW50ID0gJ+KIkic7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb250ZW50RGl2LmNsYXNzTGlzdC5hZGQoJ2NvbGxhcHNlZCcpOwogICAgICAgICAgICAgICAgdG9nZ2xlQnRuLnRleHRDb250ZW50ID0gJysnOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjb2xsYXBzZUFsbFBvbGljaWVzKCkgewogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9saWN5LWNvbnRlbnQnKS5mb3JFYWNoKGNvbnRlbnQgPT4gewogICAgICAgICAgICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKCdjb2xsYXBzZWQnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2dnbGUtYnRuJykuZm9yRWFjaChidG4gPT4gewogICAgICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gJysnOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGV4cGFuZEFsbFBvbGljaWVzKCkgewogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9saWN5LWNvbnRlbnQnKS5mb3JFYWNoKGNvbnRlbnQgPT4gewogICAgICAgICAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdjb2xsYXBzZWQnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2dnbGUtYnRuJykuZm9yRWFjaChidG4gPT4gewogICAgICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gJ+KIkic7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlQW1vdW50Q29kZShwb2xpY3lJZCkgewogICAgICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FtdGNvZGVmb3JtXycgKyBwb2xpY3lJZCk7CiAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbXRjb2RlYnRuXycgKyBwb2xpY3lJZCk7CgogICAgICAgICAgICBpZiAoZm9ybS5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHsKICAgICAgICAgICAgICAgIGZvcm0uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSAn4oiSIFJlbW92ZSBBbW91bnQgQ29kZSc7CiAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnc2Vjb25kYXJ5Jyk7CiAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgnZGFuZ2VyJyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBmb3JtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSAnKyBBZGQgQW1vdW50IENvZGUnOwogICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2RhbmdlcicpOwogICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ3NlY29uZGFyeScpOwogICAgICAgICAgICAgICAgLy8gQ2xlYXIgdGhlIGZvcm0KICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeVNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb2xpY3lJZCk7CiAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhbW91bnRDb2RlIl0nKS52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYW1vdW50Q29kZURlc2MiXScpLnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhbW91bnRDb2RlU3ViRGVzYyJdJykudmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImFtb3VudFNlcnZpY2VEZXNjIl0nKS52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYW1vdW50Q29kZVZhbHVlIl0nKS52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgLy8gVXBkYXRlIGRyb3Bkb3ducyB0byByZW1vdmUgY3VzdG9tIGFtb3VudCBjb2RlCiAgICAgICAgICAgICAgICB1cGRhdGVBbW91bnRDb2RlRHJvcGRvd25zKHBvbGljeUlkKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlQW1vdW50Q29kZURyb3Bkb3ducyhwb2xpY3lJZCkgewogICAgICAgICAgICBjb25zdCBwb2xpY3lTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9saWN5SWQpOwogICAgICAgICAgICBjb25zdCBhbW91bnRDb2RlSW5wdXQgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhbW91bnRDb2RlIl0nKTsKICAgICAgICAgICAgY29uc3QgYW1vdW50Q29kZVZhbHVlSW5wdXQgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhbW91bnRDb2RlVmFsdWUiXScpOwoKICAgICAgICAgICAgY29uc3QgY3VzdG9tQ29kZSA9IGFtb3VudENvZGVJbnB1dCA/IGFtb3VudENvZGVJbnB1dC52YWx1ZS50cmltKCkgOiAnJzsKICAgICAgICAgICAgY29uc3QgY3VzdG9tVmFsdWUgPSBhbW91bnRDb2RlVmFsdWVJbnB1dCA/IGFtb3VudENvZGVWYWx1ZUlucHV0LnZhbHVlIDogJyc7CgogICAgICAgICAgICAvLyBVcGRhdGUgYWxsIG1pbiBhbW91bnQgY29kZSBkcm9wZG93bnMgaW4gdGhpcyBwb2xpY3kncyBhY2Nlc3MgcmVjb3JkcwogICAgICAgICAgICBjb25zdCBtaW5Ecm9wZG93bnMgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoJy5taW5BbXRDb2RlRHJvcGRvd24nKTsKICAgICAgICAgICAgbWluRHJvcGRvd25zLmZvckVhY2goZHJvcGRvd24gPT4gewogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gZHJvcGRvd24udmFsdWU7CiAgICAgICAgICAgICAgICAvLyBDbGVhciBvcHRpb25zCiAgICAgICAgICAgICAgICBkcm9wZG93bi5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iREVGQVVMVF9NSU5fQU1UIiBkYXRhLXZhbHVlPSIwIj5ERUZBVUxUX01JTl9BTVQ8L29wdGlvbj4nOwoKICAgICAgICAgICAgICAgIC8vIEFkZCBjdXN0b20gYW1vdW50IGNvZGUgaWYgZXhpc3RzCiAgICAgICAgICAgICAgICBpZiAoY3VzdG9tQ29kZSAmJiBjdXN0b21WYWx1ZSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOwogICAgICAgICAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IGN1c3RvbUNvZGU7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnNldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScsIGN1c3RvbVZhbHVlKTsKICAgICAgICAgICAgICAgICAgICBvcHRpb24udGV4dENvbnRlbnQgPSBjdXN0b21Db2RlOwogICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFwcGVuZENoaWxkKG9wdGlvbik7CgogICAgICAgICAgICAgICAgICAgIC8vIFJlc3RvcmUgc2VsZWN0aW9uIGlmIGl0IHdhcyB0aGUgY3VzdG9tIGNvZGUKICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFZhbHVlID09PSBjdXN0b21Db2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLnZhbHVlID0gY3VzdG9tQ29kZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIGZpZWxkCiAgICAgICAgICAgICAgICB1cGRhdGVBbW91bnRWYWx1ZShkcm9wZG93bik7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gVXBkYXRlIGFsbCBtYXggYW1vdW50IGNvZGUgZHJvcGRvd25zIGluIHRoaXMgcG9saWN5J3MgYWNjZXNzIHJlY29yZHMKICAgICAgICAgICAgY29uc3QgbWF4RHJvcGRvd25zID0gcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yQWxsKCcubWF4QW10Q29kZURyb3Bkb3duJyk7CiAgICAgICAgICAgIG1heERyb3Bkb3ducy5mb3JFYWNoKGRyb3Bkb3duID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IGRyb3Bkb3duLnZhbHVlOwogICAgICAgICAgICAgICAgLy8gQ2xlYXIgb3B0aW9ucwogICAgICAgICAgICAgICAgZHJvcGRvd24uaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IkRFRkFVTFRfTUFYX0FNVF9ORVhUR0VOIiBkYXRhLXZhbHVlPSI5OTk5OTk5OTk5OTkuOTkiPkRFRkFVTFRfTUFYX0FNVF9ORVhUR0VOPC9vcHRpb24+JzsKCiAgICAgICAgICAgICAgICAvLyBBZGQgY3VzdG9tIGFtb3VudCBjb2RlIGlmIGV4aXN0cwogICAgICAgICAgICAgICAgaWYgKGN1c3RvbUNvZGUgJiYgY3VzdG9tVmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsKICAgICAgICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSBjdXN0b21Db2RlOwogICAgICAgICAgICAgICAgICAgIG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnLCBjdXN0b21WYWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gY3VzdG9tQ29kZTsKICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5pbnNlcnRCZWZvcmUob3B0aW9uLCBkcm9wZG93bi5maXJzdENoaWxkKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gUmVzdG9yZSBzZWxlY3Rpb24gaWYgaXQgd2FzIHRoZSBjdXN0b20gY29kZQogICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VmFsdWUgPT09IGN1c3RvbUNvZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24udmFsdWUgPSBjdXN0b21Db2RlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgZmllbGQKICAgICAgICAgICAgICAgIHVwZGF0ZUFtb3VudFZhbHVlKGRyb3Bkb3duKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVBbW91bnRWYWx1ZShzZWxlY3RFbGVtZW50KSB7CiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkT3B0aW9uID0gc2VsZWN0RWxlbWVudC5vcHRpb25zW3NlbGVjdEVsZW1lbnQuc2VsZWN0ZWRJbmRleF07CiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gc2VsZWN0ZWRPcHRpb24uZ2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJyk7CiAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1NlY3Rpb24gPSBzZWxlY3RFbGVtZW50LmNsb3Nlc3QoJy5hY2Nlc3Mtc2VjdGlvbicpOwoKICAgICAgICAgICAgaWYgKHNlbGVjdEVsZW1lbnQubmFtZSA9PT0gJ21pbkFtdENvZGUnKSB7CiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZUlucHV0ID0gYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibWluQW10Q29kZVZhbHVlIl0nKTsKICAgICAgICAgICAgICAgIGlmICh2YWx1ZUlucHV0KSB2YWx1ZUlucHV0LnZhbHVlID0gdmFsdWU7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0RWxlbWVudC5uYW1lID09PSAnbWF4QW10Q29kZScpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlSW5wdXQgPSBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJtYXhBbXRDb2RlVmFsdWUiXScpOwogICAgICAgICAgICAgICAgaWYgKHZhbHVlSW5wdXQpIHZhbHVlSW5wdXQudmFsdWUgPSB2YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVBbW91bnRDb2RlKGlucHV0LCBwb2xpY3lJZCkgewogICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGlucHV0LnZhbHVlLnRyaW0oKS50b1VwcGVyQ2FzZSgpOwogICAgICAgICAgICBjb25zdCByZXNlcnZlZENvZGVzID0gWydERUZBVUxUX01JTl9BTVQnLCAnREVGQVVMVF9NQVhfQU1UX05FWFRHRU4nXTsKCiAgICAgICAgICAgIGlmIChyZXNlcnZlZENvZGVzLmluY2x1ZGVzKHZhbHVlKSkgewogICAgICAgICAgICAgICAgYWxlcnQoJ0Ftb3VudCBjb2RlICInICsgdmFsdWUgKyAnIiBpcyByZXNlcnZlZCBhbmQgY2Fubm90IGJlIHVzZWQuIFBsZWFzZSBjaG9vc2UgYSBkaWZmZXJlbnQgY29kZS4nKTsKICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHVwZGF0ZUFtb3VudENvZGVEcm9wZG93bnMocG9saWN5SWQpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUG9saWN5SGVhZGVyKHBvbGljeUlkKSB7CiAgICAgICAgICAgIGNvbnN0IHBvbGljeVNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb2xpY3lJZCk7CiAgICAgICAgICAgIGNvbnN0IHVyaUlucHV0ID0gcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iZW5kUG9pbnQiXScpOwogICAgICAgICAgICBjb25zdCBtZXRob2RTZWxlY3QgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJodHRwTWV0aG9kIl0nKTsKCiAgICAgICAgICAgIGNvbnN0IHVyaURpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXJpXycgKyBwb2xpY3lJZCk7CiAgICAgICAgICAgIGNvbnN0IG1ldGhvZERpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWV0aG9kXycgKyBwb2xpY3lJZCk7CgogICAgICAgICAgICBpZiAodXJpRGlzcGxheSAmJiB1cmlJbnB1dCkgewogICAgICAgICAgICAgICAgdXJpRGlzcGxheS50ZXh0Q29udGVudCA9IHVyaUlucHV0LnZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChtZXRob2REaXNwbGF5ICYmIG1ldGhvZFNlbGVjdCkgewogICAgICAgICAgICAgICAgbWV0aG9kRGlzcGxheS50ZXh0Q29udGVudCA9IG1ldGhvZFNlbGVjdC52YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlVmFsaWRhdGlvbkZpZWxkcyhpbnB1dCkgewogICAgICAgICAgICBjb25zdCBwb2xpY3lTZWN0aW9uID0gaW5wdXQuY2xvc2VzdCgnLnBvbGljeS1zZWN0aW9uJyk7CiAgICAgICAgICAgIGNvbnN0IGxldmVsID0gcGFyc2VJbnQoaW5wdXQudmFsdWUpOwogICAgICAgICAgICBjb25zdCB2YWxpZGF0aW9uU2VsZWN0ID0gcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ic2Vzc2lvblZhbFJlcXVpcmVkIl0nKTsKICAgICAgICAgICAgY29uc3Qgd2hpdGVsaXN0U2VsZWN0ID0gcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0id2hpdGVsaXN0ZWQiXScpOwoKICAgICAgICAgICAgaWYgKGxldmVsID09PSAwKSB7CiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uU2VsZWN0LnZhbHVlID0gJ2ZhbHNlJzsKICAgICAgICAgICAgICAgIHdoaXRlbGlzdFNlbGVjdC52YWx1ZSA9ICd0cnVlJzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZhbGlkYXRpb25TZWxlY3QudmFsdWUgPSAndHJ1ZSc7CiAgICAgICAgICAgICAgICB3aGl0ZWxpc3RTZWxlY3QudmFsdWUgPSAnZmFsc2UnOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVBY2Nlc3NSZXN0cmljdGlvbihzZWxlY3QpIHsKICAgICAgICAgICAgY29uc3QgcG9saWN5U2VjdGlvbiA9IHNlbGVjdC5jbG9zZXN0KCcucG9saWN5LXNlY3Rpb24nKTsKICAgICAgICAgICAgY29uc3QgYWxlcnQgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5hY2Nlc3MtcmVzdHJpY3Rpb24nKTsKICAgICAgICAgICAgY29uc3QgYWNjZXNzQ29udGFpbmVyID0gcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuYWNjZXNzZXMtY29udGFpbmVyJyk7CgogICAgICAgICAgICBpZiAoc2VsZWN0LnZhbHVlID09PSAnTicpIHsKICAgICAgICAgICAgICAgIGFsZXJ0LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzU2VjdGlvbnMgPSBhY2Nlc3NDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmFjY2Vzcy1zZWN0aW9uJyk7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGFjY2Vzc1NlY3Rpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgYWNjZXNzU2VjdGlvbnNbaV0ucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBhbGVydC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhZGROb3RpZmljYXRpb24ocG9saWN5SWQpIHsKICAgICAgICAgICAgY29uc3Qgbm90aWZpY2F0aW9uSWQgPSBgbm90aWZpY2F0aW9uXyR7bm90aWZpY2F0aW9uQ291bnRlcisrfWA7CiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBub3RpZmljYXRpb25zXyR7cG9saWN5SWR9YCk7CgogICAgICAgICAgICBjb25zdCBub3RpZmljYXRpb25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgbm90aWZpY2F0aW9uRGl2LmNsYXNzTmFtZSA9ICdub3RpZmljYXRpb24tc2VjdGlvbic7CiAgICAgICAgICAgIG5vdGlmaWNhdGlvbkRpdi5pZCA9IG5vdGlmaWNhdGlvbklkOwogICAgICAgICAgICBub3RpZmljYXRpb25EaXYuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxoMz5Ob3RpZiA8c3BhbiBjbGFzcz0iYmFkZ2UiPiMke25vdGlmaWNhdGlvbkNvdW50ZXJ9PC9zcGFuPjwvaDM+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJkYW5nZXIgc21hbGwiIG9uY2xpY2s9InJlbW92ZU5vdGlmaWNhdGlvbignJHtub3RpZmljYXRpb25JZH0nKSI+eDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkLTUiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+VHlwZSA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnbm90aWZpY2F0aW9uVHlwZScpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9Im5vdGlmaWNhdGlvblR5cGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iU01TIj5TTVM8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkVNQUlMIj5FTUFJTDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUFVTSCI+UFVTSDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkF1dGggVHlwZSA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnYXV0aFR5cGUnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImF1dGhUeXBlIiB2YWx1ZT0iQVVUSF9IQVJEX1NJR04iPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+TWFuZGF0b3J5IDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdpc01hbmRhdG9yeScpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9ImlzTWFuZGF0b3J5Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InRydWUiIHNlbGVjdGVkPnRydWU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImZhbHNlIj5mYWxzZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlRlbXBsYXRlIElEIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCd0ZW1wbGF0ZUlkJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJ0ZW1wbGF0ZUlkIiB2YWx1ZT0iVEVNUExBVEVfMDAxOkVuZ2xpc2giPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+VGVtcGxhdGUgUGFyYW1zIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCd0ZW1wbGF0ZVBhcmFtcycpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0idGVtcGxhdGVQYXJhbXMiIHZhbHVlPSJTSE9SVEZJRUxEMDEsU0hPUlRGSUVMRDAyIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICBgOwogICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobm90aWZpY2F0aW9uRGl2KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbW92ZU5vdGlmaWNhdGlvbihub3RpZmljYXRpb25JZCkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChub3RpZmljYXRpb25JZCkucmVtb3ZlKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhZGRBY2Nlc3MocG9saWN5SWQpIHsKICAgICAgICAgICAgY29uc3QgcG9saWN5U2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBvbGljeUlkKTsKICAgICAgICAgICAgY29uc3QgdHhuQXV0aFNlbGVjdCA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InR4bkF1dGhDb25jZXJucyJdJyk7CiAgICAgICAgICAgIGNvbnN0IGFjY2Vzc0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBhY2Nlc3Nlc18ke3BvbGljeUlkfWApOwogICAgICAgICAgICBjb25zdCBjdXJyZW50QWNjZXNzQ291bnQgPSBhY2Nlc3NDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmFjY2Vzcy1zZWN0aW9uJykubGVuZ3RoOwoKICAgICAgICAgICAgaWYgKHR4bkF1dGhTZWxlY3QudmFsdWUgPT09ICdOJyAmJiBjdXJyZW50QWNjZXNzQ291bnQgPj0gMSkgewogICAgICAgICAgICAgICAgYWxlcnQoJ1R4biBBdXRoPU4gYWxsb3dzIG9ubHkgMSBhY2Nlc3MgcmVjb3JkLicpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zdCBhY2Nlc3NJZCA9IGBhY2Nlc3NfJHthY2Nlc3NDb3VudGVyKyt9YDsKCiAgICAgICAgICAgIGNvbnN0IGFjY2Vzc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBhY2Nlc3NEaXYuY2xhc3NOYW1lID0gJ2FjY2Vzcy1zZWN0aW9uJzsKICAgICAgICAgICAgYWNjZXNzRGl2LmlkID0gYWNjZXNzSWQ7CiAgICAgICAgICAgIGFjY2Vzc0Rpdi5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWhlYWRlciI+CiAgICAgICAgICAgICAgICAgICAgPGgzPkFjY2VzcyA8c3BhbiBjbGFzcz0iYmFkZ2UiPiMke2FjY2Vzc0NvdW50ZXJ9PC9zcGFuPjwvaDM+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJkYW5nZXIgc21hbGwiIG9uY2xpY2s9InJlbW92ZUFjY2VzcygnJHthY2Nlc3NJZH0nKSI+UmVtb3ZlPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkLTMiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+Q29vbGluZyBQZXJpb2QgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ2Nvb2xpbmdQZXJpb2RDaGVja1JlcXVpcmVkJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0iY29vbGluZ1BlcmlvZENoZWNrUmVxdWlyZWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZmFsc2UiIHNlbGVjdGVkPmZhbHNlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJ0cnVlIj50cnVlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+VHhuIEF1dGggUmVxIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCd0eG5BdXRoUmVxdWlyZWQnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJ0eG5BdXRoUmVxdWlyZWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMCIgc2VsZWN0ZWQ+MDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMSI+MTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMiI+Mjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPk5vdGlmIFBhcmFtIE1hcCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnbm90aWZpY2F0aW9uUGFyYW1NYXAnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9Im5vdGlmaWNhdGlvblBhcmFtTWFwIiB2YWx1ZT0iU0hPUlRGSUVMRDAxPXZhbDEiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZC0zIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlNlc3Npb24gQ29uZCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygnc2Vzc2lvbkNvbmRpdGlvbk1hcCcpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnB1dC13aXRoLWV4cGFuZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0ic2Vzc2lvbkNvbmRpdGlvbnNNYXAiIHZhbHVlPSIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImV4cGFuZC1pY29uIiBvbmNsaWNrPSJleHBhbmRGaWVsZCh0aGlzLCAnU2Vzc2lvbiBDb25kaXRpb25zIE1hcCcpIiB0aXRsZT0iRXhwYW5kIj7ipKI8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+UHJvZmlsZSBDb25kIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdwcm9maWxlQ29uZGl0aW9uTWFwJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImlucHV0LXdpdGgtZXhwYW5kIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJwcm9maWxlQ29uZGl0aW9uc01hcCIgdmFsdWU9IiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZXhwYW5kLWljb24iIG9uY2xpY2s9ImV4cGFuZEZpZWxkKHRoaXMsICdQcm9maWxlIENvbmRpdGlvbnMgTWFwJykiIHRpdGxlPSJFeHBhbmQiPuKkojwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5SZXF1ZXN0IENvbmQgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3JlcXVlc3RDb25kaXRpb25zTWFwJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImlucHV0LXdpdGgtZXhwYW5kIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJyZXF1ZXN0Q29uZGl0aW9uc01hcCIgdmFsdWU9IiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZXhwYW5kLWljb24iIG9uY2xpY2s9ImV4cGFuZEZpZWxkKHRoaXMsICdSZXF1ZXN0IENvbmRpdGlvbnMgTWFwJykiIHRpdGxlPSJFeHBhbmQiPuKkojwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkLTMiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+UmlzayBJbmQgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ3Jpc2tJbmRpY2F0b3InKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InJpc2tJbmRpY2F0b3IiIHZhbHVlPSIwIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlBvc3RhbCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygncG9zdGFsQ29kZScpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0icG9zdGFsQ29kZSIgdmFsdWU9IjAiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+VXBkYXRlIExtdCA8c3BhbiBjbGFzcz0iaW5mby1pY29uIiBvbmNsaWNrPSJzaG93SW5mbygndXBkYXRlTGltaXQnKSIgdGl0bGU9IkNsaWNrIGZvciBtb3JlIGluZm8iPmk8L3NwYW4+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InVwZGF0ZUxpbWl0IiB2YWx1ZT0iMCI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJncmlkLTQiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+TWluIEFtdCBDb2RlIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdtaW5BbXRDb2RlJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0ibWluQW10Q29kZSIgY2xhc3M9Im1pbkFtdENvZGVEcm9wZG93biIgb25jaGFuZ2U9InVwZGF0ZUFtb3VudFZhbHVlKHRoaXMpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkRFRkFVTFRfTUlOX0FNVCIgZGF0YS12YWx1ZT0iMCI+REVGQVVMVF9NSU5fQU1UPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+TWluIEFtdCBWYWwgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ21pbkFtdENvZGVWYWx1ZScpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBzdGVwPSIwLjAxIiBuYW1lPSJtaW5BbXRDb2RlVmFsdWUiIHZhbHVlPSIwIiByZWFkb25seSBzdHlsZT0iYmFja2dyb3VuZDogI2YwZjBmMDsiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+TWF4IEFtdCBDb2RlIDxzcGFuIGNsYXNzPSJpbmZvLWljb24iIG9uY2xpY2s9InNob3dJbmZvKCdtYXhBbXRDb2RlJykiIHRpdGxlPSJDbGljayBmb3IgbW9yZSBpbmZvIj5pPC9zcGFuPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0ibWF4QW10Q29kZSIgY2xhc3M9Im1heEFtdENvZGVEcm9wZG93biIgb25jaGFuZ2U9InVwZGF0ZUFtb3VudFZhbHVlKHRoaXMpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkRFRkFVTFRfTUFYX0FNVF9ORVhUR0VOIiBkYXRhLXZhbHVlPSI5OTk5OTk5OTk5OTkuOTkiPkRFRkFVTFRfTUFYX0FNVF9ORVhUR0VOPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+TWF4IEFtdCBWYWwgPHNwYW4gY2xhc3M9ImluZm8taWNvbiIgb25jbGljaz0ic2hvd0luZm8oJ21heEFtdENvZGVWYWx1ZScpIiB0aXRsZT0iQ2xpY2sgZm9yIG1vcmUgaW5mbyI+aTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBzdGVwPSIwLjAxIiBuYW1lPSJtYXhBbXRDb2RlVmFsdWUiIHZhbHVlPSI5OTk5OTk5OTk5OTkuOTkiIHJlYWRvbmx5IHN0eWxlPSJiYWNrZ3JvdW5kOiAjZjBmMGYwOyI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYDsKICAgICAgICAgICAgYWNjZXNzQ29udGFpbmVyLmFwcGVuZENoaWxkKGFjY2Vzc0Rpdik7CgogICAgICAgICAgICAvLyBVcGRhdGUgZHJvcGRvd25zIHdpdGggcG9saWN5LXNwZWNpZmljIGFtb3VudCBjb2RlIGlmIGV4aXN0cwogICAgICAgICAgICB1cGRhdGVBbW91bnRDb2RlRHJvcGRvd25zKHBvbGljeUlkKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbW92ZUFjY2VzcyhhY2Nlc3NJZCkgewogICAgICAgICAgICBpZiAoY29uZmlybSgnUmVtb3ZlIHRoaXMgYWNjZXNzIHJlY29yZD8nKSkgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYWNjZXNzSWQpLnJlbW92ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjb2xsZWN0Rm9ybURhdGEoKSB7CiAgICAgICAgICAgIGNvbnN0IGNoYW5uZWxzID0gW107CiAgICAgICAgICAgIGNvbnN0IGNoYW5uZWxTZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGFubmVsLXNlY3Rpb24nKTsKCiAgICAgICAgICAgIGNoYW5uZWxTZWN0aW9ucy5mb3JFYWNoKGNoYW5uZWxTZWN0aW9uID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGNoYW5uZWxJZCA9IGNoYW5uZWxTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJjaGFubmVsSWQiXScpLnZhbHVlOwogICAgICAgICAgICAgICAgY29uc3QgcG9saWNpZXMgPSBbXTsKCiAgICAgICAgICAgICAgICBjb25zdCBwb2xpY3lTZWN0aW9ucyA9IGNoYW5uZWxTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb2xpY3ktc2VjdGlvbicpOwogICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbnMuZm9yRWFjaChwb2xpY3lTZWN0aW9uID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2xpY3kgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VJZDogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ic2VydmljZUlkIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgZW5kUG9pbnQ6IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImVuZFBvaW50Il0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgaHR0cE1ldGhvZDogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iaHR0cE1ldGhvZCJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIG91dEVuZFBvaW50OiBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJvdXRFbmRQb2ludCJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VEZXNjOiBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJzZXJ2aWNlRGVzYyJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhMZXZlbFJlcXVpcmVkOiBwYXJzZUludChwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhdXRoTGV2ZWxSZXF1aXJlZCJdJykudmFsdWUpLAogICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uVmFsUmVxdWlyZWQ6IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InNlc3Npb25WYWxSZXF1aXJlZCJdJykudmFsdWUgPT09ICd0cnVlJywKICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGVsaXN0ZWQ6IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9IndoaXRlbGlzdGVkIl0nKS52YWx1ZSA9PT0gJ3RydWUnLAogICAgICAgICAgICAgICAgICAgICAgICBhbGxvd2VkU2NvcGU6IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImFsbG93ZWRTY29wZSJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHR4bkF1dGhDb25jZXJuczogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0idHhuQXV0aENvbmNlcm5zIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzZXM6IFtdCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGFtb3VudCBjb2RlIGNvbmZpZyBpZiBwcmVzZW50CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW1vdW50Q29kZUlucHV0ID0gcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYW1vdW50Q29kZSJdJyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGFtb3VudENvZGVJbnB1dCAmJiBhbW91bnRDb2RlSW5wdXQudmFsdWUudHJpbSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeS5hbW91bnRDb2RlQ29uZmlnID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50Q29kZTogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYW1vdW50Q29kZSJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnRDb2RlRGVzYzogcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYW1vdW50Q29kZURlc2MiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50Q29kZVN1YkRlc2M6IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImFtb3VudENvZGVTdWJEZXNjIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VEZXNjOiBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhbW91bnRTZXJ2aWNlRGVzYyJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnRDb2RlVmFsdWU6IHBhcnNlRmxvYXQocG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYW1vdW50Q29kZVZhbHVlIl0nKS52YWx1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIENvbGxlY3QgcG9saWN5LWxldmVsIG5vdGlmaWNhdGlvbnMKICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2xpY3lOb3RpZmljYXRpb25zID0gW107CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9saWN5Tm90aWZTZWN0aW9ucyA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvckFsbCgnLm5vdGlmaWNhdGlvbnMtY29udGFpbmVyIC5ub3RpZmljYXRpb24tc2VjdGlvbicpOwogICAgICAgICAgICAgICAgICAgIHBvbGljeU5vdGlmU2VjdGlvbnMuZm9yRWFjaChub3RpZmljYXRpb25TZWN0aW9uID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90aWZpY2F0aW9uID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uVHlwZTogbm90aWZpY2F0aW9uU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibm90aWZpY2F0aW9uVHlwZSJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoVHlwZTogbm90aWZpY2F0aW9uU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYXV0aFR5cGUiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVJZDogbm90aWZpY2F0aW9uU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0idGVtcGxhdGVJZCJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVBhcmFtczogbm90aWZpY2F0aW9uU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0idGVtcGxhdGVQYXJhbXMiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNYW5kYXRvcnk6IG5vdGlmaWNhdGlvblNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImlzTWFuZGF0b3J5Il0nKS52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lOb3RpZmljYXRpb25zLnB1c2gobm90aWZpY2F0aW9uKTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzU2VjdGlvbnMgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoJy5hY2Nlc3Mtc2VjdGlvbicpOwogICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb25zLmZvckVhY2goYWNjZXNzU2VjdGlvbiA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjY2VzcyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvb2xpbmdQZXJpb2RDaGVja1JlcXVpcmVkOiBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJjb29saW5nUGVyaW9kQ2hlY2tSZXF1aXJlZCJdJykudmFsdWUgPT09ICd0cnVlJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4bkF1dGhSZXF1aXJlZDogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0idHhuQXV0aFJlcXVpcmVkIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblBhcmFtTWFwOiBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJub3RpZmljYXRpb25QYXJhbU1hcCJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25EZXRsczogWy4uLnBvbGljeU5vdGlmaWNhdGlvbnNdLCAvLyBDb3B5IHBvbGljeS1sZXZlbCBub3RpZmljYXRpb25zIHRvIGVhY2ggYWNjZXNzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uQ29uZGl0aW9uc01hcDogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ic2Vzc2lvbkNvbmRpdGlvbnNNYXAiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZmlsZUNvbmRpdGlvbnNNYXA6IGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InByb2ZpbGVDb25kaXRpb25zTWFwIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RDb25kaXRpb25zTWFwOiBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJyZXF1ZXN0Q29uZGl0aW9uc01hcCJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0Q29uZGl0aW9uczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpc2tJbmRpY2F0b3I6IGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InJpc2tJbmRpY2F0b3IiXScpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkFtdDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbXRDb2RlOiBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJtaW5BbXRDb2RlIl0nKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW10Q29kZVZhbHVlOiBwYXJzZUZsb2F0KGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im1pbkFtdENvZGVWYWx1ZSJdJykudmFsdWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhBbXQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW10Q29kZTogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ibWF4QW10Q29kZSJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtdENvZGVWYWx1ZTogcGFyc2VGbG9hdChhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJtYXhBbXRDb2RlVmFsdWUiXScpLnZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdGFsQ29kZTogYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0icG9zdGFsQ29kZSJdJykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlTGltaXQ6IGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InVwZGF0ZUxpbWl0Il0nKS52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5LmFjY2Vzc2VzLnB1c2goYWNjZXNzKTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgcG9saWNpZXMucHVzaChwb2xpY3kpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY2hhbm5lbHMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbElkOiBjaGFubmVsSWQsCiAgICAgICAgICAgICAgICAgICAgcG9saWNpZXM6IHBvbGljaWVzCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICByZXR1cm4geyBwb2xpY2llc01hcHM6IGNoYW5uZWxzIH07CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZUpTT04oKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gY29sbGVjdEZvcm1EYXRhKCk7CiAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMik7CiAgICAgICAgICAgICAgICBjdXJyZW50T3V0cHV0ID0ganNvbjsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdXRwdXRUeXBlJykudmFsdWUgPSAnanNvbic7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3V0cHV0Qm94JykudGV4dENvbnRlbnQgPSBqc29uOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgYWxlcnQoJ0Vycm9yIGdlbmVyYXRpbmcgSlNPTjogJyArIGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZVNRTCgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBjb2xsZWN0Rm9ybURhdGEoKTsKICAgICAgICAgICAgICAgIGxldCBzcWwgPSAnLS0gR2VuZXJhdGVkIFNRTCBJbnNlcnQgU3RhdGVtZW50c1xuJzsKICAgICAgICAgICAgICAgIHNxbCArPSAnLS0gR2VuZXJhdGVkIG9uOiAnICsgbmV3IERhdGUoKS50b0lTT1N0cmluZygpICsgJ1xuXG4nOwoKICAgICAgICAgICAgICAgIGRhdGEucG9saWNpZXNNYXBzLmZvckVhY2goY2hhbm5lbCA9PiB7CiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbC5wb2xpY2llcy5mb3JFYWNoKHBvbGljeSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgLS0gUG9saWN5OiAke3BvbGljeS5zZXJ2aWNlSWR9XG5gOwogICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYC0tIGAgKyAnLScucmVwZWF0KDgwKSArICdcblxuJzsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDEuIEluc2VydCBwb2xpY3ktc3BlY2lmaWMgYW1vdW50IGNvZGUgZmlyc3QgKGlmIHByZXNlbnQpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2xpY3kuYW1vdW50Q29kZUNvbmZpZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGAtLSBQb2xpY3ktU3BlY2lmaWMgQW1vdW50IENvZGUgZm9yICR7cG9saWN5LnNlcnZpY2VJZH1cbmA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYElOU0VSVCBJR05PUkUgSU5UTyBcYGFtb3VudF9jb2RlX21hc3RlclxgIChcYEFNT1VOVF9DT0RFXGAsIFxgQU1PVU5UX0NPREVfREVTQ1xgLCBcYEFNT1VOVF9DT0RFX1NVQl9ERVNDXGAsIFxgU0VSVklDRV9ERVNDXGAsIFxgQU1PVU5UX0NPREVfVkFMVUVcYCwgXGBDUkVBVEVEX0JZX1VTRVJcYCwgXGBDUkVBVEVEX0RBVEVcYCwgXGBVUERBVEVEX0JZX1VTRVJcYCwgXGBVUERBVEVEX0RBVEVcYCwgXGBNQUtFUl9VU0VSXGAsIFxgQU1PVU5UX0RGTFRfVkFMVUVcYCwgXGBBTU9VTlRfQUNMX1ZBTFVFXGAsIFxgQU1PVU5UX0FDTF9GTEFHXGApXG5gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGBWQUxVRVMgKCcke3BvbGljeS5hbW91bnRDb2RlQ29uZmlnLmFtb3VudENvZGV9JywgJyR7cG9saWN5LmFtb3VudENvZGVDb25maWcuYW1vdW50Q29kZURlc2MucmVwbGFjZSgvJy9nLCAiJyciKX0nLCAnJHtwb2xpY3kuYW1vdW50Q29kZUNvbmZpZy5hbW91bnRDb2RlU3ViRGVzYy5yZXBsYWNlKC8nL2csICInJyIpfScsICcke3BvbGljeS5hbW91bnRDb2RlQ29uZmlnLnNlcnZpY2VEZXNjLnJlcGxhY2UoLycvZywgIicnIil9JywgJHtwb2xpY3kuYW1vdW50Q29kZUNvbmZpZy5hbW91bnRDb2RlVmFsdWV9LCAnU1lTVEVNJywgQ1VSUkVOVF9USU1FU1RBTVAsICdTWVNURU0nLCBDVVJSRU5UX1RJTUVTVEFNUCwgJ1NZU1RFTScsICR7cG9saWN5LmFtb3VudENvZGVDb25maWcuYW1vdW50Q29kZVZhbHVlfSwgJHtwb2xpY3kuYW1vdW50Q29kZUNvbmZpZy5hbW91bnRDb2RlVmFsdWV9LCAxKTtcblxuYDsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gMi4gR2V0IG9yIGNyZWF0ZSBub3RpZmljYXRpb24gSUQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvbGljeS5hY2Nlc3NlcyAmJiBwb2xpY3kuYWNjZXNzZXMubGVuZ3RoID4gMCAmJiBwb2xpY3kuYWNjZXNzZXNbMF0ubm90aWZpY2F0aW9uRGV0bHMgJiYgcG9saWN5LmFjY2Vzc2VzWzBdLm5vdGlmaWNhdGlvbkRldGxzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgU0VUIEBMSU1JVF9OT1RJRklDQVRJT05fSUQgPSAoU0VMRUNUIE1BWChOT1RJRklDQVRJT05fSUQpKzEgRlJPTSBSSVNLX01BVFJJWF9OT1RJRklDQVRJT05fTUFTVEVSKTtcblxuYDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAzLiBJbnNlcnQgbm90aWZpY2F0aW9ucwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5LmFjY2Vzc2VzWzBdLm5vdGlmaWNhdGlvbkRldGxzLmZvckVhY2goKG5vdGlmLCBub3RpZklkeCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgSU5TRVJUIElOVE8gXGByaXNrX21hdHJpeF9ub3RpZmljYXRpb25fbWFzdGVyXGAgKFxgTk9USUZJQ0FUSU9OX0lEXGAsIFxgU0VSVklDRV9JRFxgLCBcYE5PVElGSUNBVElPTl9UWVBFXGAsIFxgVEVNUExBVEVfSURcYCwgXGBURU1QTEFURV9QQVJBTVNcYCwgXGBJU19NQU5EQVRPUllcYCwgXGBDUkVBVEVEX0JZX1VTRVJcYCwgXGBDUkVBVEVEX0RBVEVcYCwgXGBVUERBVEVEX0JZX1VTRVJcYCwgXGBVUERBVEVEX0RBVEVcYCwgXGBBVVRIX1RZUEVcYCwgXGBNQUtFUl9VU0VSXGApXG5gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgVkFMVUVTIChATElNSVRfTk9USUZJQ0FUSU9OX0lELCAnJHtwb2xpY3kuc2VydmljZUlkfScsICcke25vdGlmLm5vdGlmaWNhdGlvblR5cGV9JywgJyR7bm90aWYudGVtcGxhdGVJZH0nLCAnJHtub3RpZi50ZW1wbGF0ZVBhcmFtc30nLCAke25vdGlmLmlzTWFuZGF0b3J5ID09PSAndHJ1ZScgPyAxIDogMH0sICdTWVNURU0nLCBDVVJSRU5UX1RJTUVTVEFNUCwgJ1NZU1RFTScsIENVUlJFTlRfVElNRVNUQU1QLCAnJHtub3RpZi5hdXRoVHlwZX0nLCAnU1lTVEVNJyk7XG5cbmA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gNC4gSW5zZXJ0IHJlcXVlc3QgY29uZGl0aW9ucyBhbmQgYWNjZXNzIHJlY29yZHMgZm9yIGVhY2ggYWNjZXNzCiAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeS5hY2Nlc3Nlcy5mb3JFYWNoKChhY2Nlc3MsIGFjY2Vzc0lkeCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5zZXJ0IHJlcXVlc3QgY29uZGl0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYElOU0VSVCBJTlRPIFxgcmlza19tYXRyaXhfcnFjb25kaXRpb25fbWFzdGVyXGAgKFxgU0VSVklDRV9JRFxgLCBcYE1JTl9BTVRfQ09ERVxgLCBcYE1BWF9BTVRfQ09ERVxgLCBcYFBPU1RBTF9DT0RFXGAsIFxgUklTS19JTkRJQ0FUT1JcYCwgXGBVUERBVEVfTElNSVRcYCwgXGBDUkVBVEVEX0JZX1VTRVJcYCwgXGBDUkVBVEVEX0RBVEVcYCwgXGBVUERBVEVEX0JZX1VTRVJcYCwgXGBVUERBVEVEX0RBVEVcYCwgXGBNQUtFUl9VU0VSXGApXG5gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGBWQUxVRVMgKCcke3BvbGljeS5zZXJ2aWNlSWR9JywgJyR7YWNjZXNzLnJlcXVlc3RDb25kaXRpb25zLm1pbkFtdC5hbXRDb2RlfScsICcke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5tYXhBbXQuYW10Q29kZX0nLCAnJHthY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMucG9zdGFsQ29kZX0nLCAnJHthY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMucmlza0luZGljYXRvcn0nLCAnJHthY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMudXBkYXRlTGltaXR9JywgJ1NZU1RFTScsIENVUlJFTlRfVElNRVNUQU1QLCAnU1lTVEVNJywgQ1VSUkVOVF9USU1FU1RBTVAsICdTWVNURU0nKTtcblxuYDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnNlcnQgYWNjZXNzIHJlY29yZCB3aXRoIG5lc3RlZCBTRUxFQ1QgcXVlcmllcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGBJTlNFUlQgSU5UTyBcYHJpc2tfbWF0cml4X2FjY2Vzc19tYXN0ZXJcYCAoXGBTRVJWSUNFX0lEXGAsIFxgQ09PTElOR19QRVJJT0RfQ0hFQ0tfUkVRXGAsIFxgVFJBTlNBQ1RJT05BTF9BVVRIX1JFUVxgLCBcYE5PVElGSUNBVElPTl9JRFxgLCBcYE5PVElGSUNBVElPTl9GSUVMRFNfTUFQXGAsIFxgS0VZX1NFU1NJT05fQ09ORElUSU9OU1xgLCBcYEtFWV9QUk9GSUxFX0NPTkRJVElPTlNcYCwgXGBLRVlfUkVRVUVTVF9DT05ESVRJT05TXGAsIFxgUkVRVUVTVF9DT05ESVRJT05TX0lEXGAsIFxgQ1JFQVRFRF9CWV9VU0VSXGAsIFxgQ1JFQVRFRF9EQVRFXGAsIFxgVVBEQVRFRF9CWV9VU0VSXGAsIFxgVVBEQVRFRF9EQVRFXGAsIFxgTUFLRVJfVVNFUlxgKVxuYDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgVkFMVUVTICgnJHtwb2xpY3kuc2VydmljZUlkfScsICR7YWNjZXNzLmNvb2xpbmdQZXJpb2RDaGVja1JlcXVpcmVkID8gMSA6IDB9LCAnJHthY2Nlc3MudHhuQXV0aFJlcXVpcmVkfScsIGA7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXNlIG5lc3RlZCBTRUxFQ1QgZm9yIE5PVElGSUNBVElPTl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGAoc2VsZWN0IE5PVElGSUNBVElPTl9JRCBmcm9tIHJpc2tfbWF0cml4X25vdGlmaWNhdGlvbl9tYXN0ZXIgd2hlcmUgU0VSVklDRV9JRD0nJHtwb2xpY3kuc2VydmljZUlkfScgbGltaXQgMSksIGA7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGAnJHthY2Nlc3Mubm90aWZpY2F0aW9uUGFyYW1NYXAucmVwbGFjZSgvJy9nLCAiJyciKX0nLCAnJHthY2Nlc3Muc2Vzc2lvbkNvbmRpdGlvbnNNYXB9JywgJyR7YWNjZXNzLnByb2ZpbGVDb25kaXRpb25zTWFwfScsICcke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9uc01hcH0nLCBgOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZSBuZXN0ZWQgU0VMRUNUIGZvciBSRVFVRVNUX0NPTkRJVElPTlNfSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNxbCArPSBgKHNlbGVjdCBSRVFVRVNUX0NPTkRJVElPTlNfSUQgZnJvbSByaXNrX21hdHJpeF9ycWNvbmRpdGlvbl9tYXN0ZXIgd2hlcmUgc2VydmljZV9pZD0nJHtwb2xpY3kuc2VydmljZUlkfScgYW5kIG1pbl9hbXRfY29kZT0nJHthY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMubWluQW10LmFtdENvZGV9JyBhbmQgbWF4X2FtdF9jb2RlPScke2FjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5tYXhBbXQuYW10Q29kZX0nKSwgYDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYCdTWVNURU0nLCBDVVJSRU5UX1RJTUVTVEFNUCwgJ1NZU1RFTScsIENVUlJFTlRfVElNRVNUQU1QLCAnU1lTVEVNJyk7XG5cbmA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gNS4gSW5zZXJ0IHBvbGljeSBtYXN0ZXIgbGFzdAogICAgICAgICAgICAgICAgICAgICAgICBzcWwgKz0gYElOU0VSVCBJTlRPIFxgcmlza19tYXRyaXhfcG9saWN5X21hc3RlclxgIChcYFBPTElDWV9UWVBFXGAsIFxgTkVYVEdFTl9GTEFHXGAsIFxgU0VSVklDRV9JRFxgLCBcYENIQU5ORUxfSURcYCwgXGBFTkRfUE9JTlRcYCwgXGBIVFRQX01FVEhPRFxgLCBcYFNFUlZJQ0VfREVTQ1xgLCBcYEFVVEhfTEVWRUxfUkVRXGAsIFxgU0VTX1ZBTERfUkVRXGAsIFxgV0hJVEVMSVNURURcYCwgXGBBTExPV0VEX1NDT1BFXGAsIFxgVFhOX0FVVEhfQ09OQ0VSTlNcYCwgXGBDUkVBVEVEX0JZX1VTRVJcYCwgXGBDUkVBVEVEX0RBVEVcYCwgXGBVUERBVEVEX0JZX1VTRVJcYCwgXGBVUERBVEVEX0RBVEVcYCwgXGBPVVRfRU5EX1BPSU5UXGAsIFxgTUFLRVJfVVNFUlxgKVxuYDsKICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9IGBWQUxVRVMgKCc5NycsIDEsICcke3BvbGljeS5zZXJ2aWNlSWR9JywgJyR7Y2hhbm5lbC5jaGFubmVsSWR9JywgJyR7cG9saWN5LmVuZFBvaW50fScsICcke3BvbGljeS5odHRwTWV0aG9kfScsICcke3BvbGljeS5zZXJ2aWNlRGVzYy5yZXBsYWNlKC8nL2csICInJyIpfScsICR7cG9saWN5LmF1dGhMZXZlbFJlcXVpcmVkfSwgJHtwb2xpY3kuc2Vzc2lvblZhbFJlcXVpcmVkID8gMSA6IDB9LCAke3BvbGljeS53aGl0ZWxpc3RlZCA/IDEgOiAwfSwgJyR7cG9saWN5LmFsbG93ZWRTY29wZX0nLCAnJHtwb2xpY3kudHhuQXV0aENvbmNlcm5zfScsICdTWVNURU0nLCBDVVJSRU5UX1RJTUVTVEFNUCwgJ1NZU1RFTScsIENVUlJFTlRfVElNRVNUQU1QLCAnJHtwb2xpY3kub3V0RW5kUG9pbnR9JywgJ1NZU1RFTScpO1xuXG5gOwoKICAgICAgICAgICAgICAgICAgICAgICAgc3FsICs9ICctLSAnICsgJy0nLnJlcGVhdCg4MCkgKyAnXG5cbic7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjdXJyZW50T3V0cHV0ID0gc3FsOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ291dHB1dFR5cGUnKS52YWx1ZSA9ICdzcWwnOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ291dHB1dEJveCcpLnRleHRDb250ZW50ID0gc3FsOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgYWxlcnQoJ0Vycm9yIGdlbmVyYXRpbmcgU1FMOiAnICsgZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIG9wZW5Mb2FkTW9kYWwoKSB7CiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRKc29uU3RyaW5nID0gYHsKICAicG9saWNpZXNNYXBzIjogWwogICAgewogICAgICAiY2hhbm5lbElkIjogIlNHX01CIiwKICAgICAgInBvbGljaWVzIjogWwoKICAgICAgXQogICAgfQogIF0KfWA7CgogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZE1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgIGNvbnN0IGpzb25JbnB1dFRleHRhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzb25JbnB1dCcpOwogICAgICAgICAgICBpZiAoIWpzb25JbnB1dFRleHRhcmVhLnZhbHVlLnRyaW0oKSkgewogICAgICAgICAgICAgICAganNvbklucHV0VGV4dGFyZWEudmFsdWUgPSBkZWZhdWx0SnNvblN0cmluZzsKICAgICAgICAgICAgfQogICAgICAgICAgICBqc29uSW5wdXRUZXh0YXJlYS5mb2N1cygpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xvc2VMb2FkTW9kYWwoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbG9hZEZyb21UZXh0YXJlYSgpIHsKICAgICAgICAgICAgY29uc3QganNvblRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNvbklucHV0JykudmFsdWUudHJpbSgpOwoKICAgICAgICAgICAgaWYgKCFqc29uVGV4dCkgewogICAgICAgICAgICAgICAgYWxlcnQoJ1BsZWFzZSBwYXN0ZSBKU09OIGNvbnRlbnQgZmlyc3QuJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZShqc29uVGV4dCk7CiAgICAgICAgICAgICAgICBwb3B1bGF0ZUZvcm0oanNvbik7CiAgICAgICAgICAgICAgICBjbG9zZUxvYWRNb2RhbCgpOwogICAgICAgICAgICAgICAgYWxlcnQoJ0pTT04gbG9hZGVkIHN1Y2Nlc3NmdWxseSEnKTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdFcnJvciBwYXJzaW5nIEpTT046ICcgKyBlcnJvci5tZXNzYWdlICsgJ1xuXG5QbGVhc2UgY2hlY2sgeW91ciBKU09OIGZvcm1hdC4nKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gQ2xvc2UgbW9kYWwgd2hlbiBjbGlja2luZyBvdXRzaWRlCiAgICAgICAgd2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkTW9kYWwnKTsKICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PSBtb2RhbCkgewogICAgICAgICAgICAgICAgY2xvc2VMb2FkTW9kYWwoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcG9wdWxhdGVGb3JtKGRhdGEpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYW5uZWxzQ29udGFpbmVyJykuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgIGNoYW5uZWxDb3VudGVyID0gMDsKICAgICAgICAgICAgcG9saWN5Q291bnRlciA9IDA7CiAgICAgICAgICAgIGFjY2Vzc0NvdW50ZXIgPSAwOwogICAgICAgICAgICBub3RpZmljYXRpb25Db3VudGVyID0gMDsKCiAgICAgICAgICAgIGlmIChkYXRhLnBvbGljaWVzTWFwcyAmJiBBcnJheS5pc0FycmF5KGRhdGEucG9saWNpZXNNYXBzKSkgewogICAgICAgICAgICAgICAgZGF0YS5wb2xpY2llc01hcHMuZm9yRWFjaChjaGFubmVsRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgYWRkQ2hhbm5lbCgpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYW5uZWxTZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGFubmVsLXNlY3Rpb24nKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFubmVsU2VjdGlvbiA9IGNoYW5uZWxTZWN0aW9uc1tjaGFubmVsU2VjdGlvbnMubGVuZ3RoIC0gMV07CgogICAgICAgICAgICAgICAgICAgIGNoYW5uZWxTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJjaGFubmVsSWQiXScpLnZhbHVlID0gY2hhbm5lbERhdGEuY2hhbm5lbElkIHx8ICcnOwoKICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2xpY2llc0NvbnRhaW5lciA9IGNoYW5uZWxTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5wb2xpY2llcy1jb250YWluZXInKTsKICAgICAgICAgICAgICAgICAgICBwb2xpY2llc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5uZWxEYXRhLnBvbGljaWVzICYmIEFycmF5LmlzQXJyYXkoY2hhbm5lbERhdGEucG9saWNpZXMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWxEYXRhLnBvbGljaWVzLmZvckVhY2gocG9saWN5RGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFubmVsSWQgPSBjaGFubmVsU2VjdGlvbi5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBvbGljeShjaGFubmVsSWQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeVNlY3Rpb25zID0gcG9saWNpZXNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnBvbGljeS1zZWN0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2xpY3lTZWN0aW9uID0gcG9saWN5U2VjdGlvbnNbcG9saWN5U2VjdGlvbnMubGVuZ3RoIC0gMV07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ic2VydmljZUlkIl0nKS52YWx1ZSA9IHBvbGljeURhdGEuc2VydmljZUlkIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iZW5kUG9pbnQiXScpLnZhbHVlID0gcG9saWN5RGF0YS5lbmRQb2ludCB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Imh0dHBNZXRob2QiXScpLnZhbHVlID0gcG9saWN5RGF0YS5odHRwTWV0aG9kIHx8ICdQT1NUJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im91dEVuZFBvaW50Il0nKS52YWx1ZSA9IHBvbGljeURhdGEub3V0RW5kUG9pbnQgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJzZXJ2aWNlRGVzYyJdJykudmFsdWUgPSBwb2xpY3lEYXRhLnNlcnZpY2VEZXNjIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYXV0aExldmVsUmVxdWlyZWQiXScpLnZhbHVlID0gcG9saWN5RGF0YS5hdXRoTGV2ZWxSZXF1aXJlZCB8fCAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0ic2Vzc2lvblZhbFJlcXVpcmVkIl0nKS52YWx1ZSA9IHBvbGljeURhdGEuc2Vzc2lvblZhbFJlcXVpcmVkID8gJ3RydWUnIDogJ2ZhbHNlJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9IndoaXRlbGlzdGVkIl0nKS52YWx1ZSA9IHBvbGljeURhdGEud2hpdGVsaXN0ZWQgPyAndHJ1ZScgOiAnZmFsc2UnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYWxsb3dlZFNjb3BlIl0nKS52YWx1ZSA9IHBvbGljeURhdGEuYWxsb3dlZFNjb3BlIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0idHhuQXV0aENvbmNlcm5zIl0nKS52YWx1ZSA9IHBvbGljeURhdGEudHhuQXV0aENvbmNlcm5zIHx8ICdOJzsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcG9saWN5IGhlYWRlciB3aXRoIGxvYWRlZCB2YWx1ZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBvbGljeUhlYWRlcihwb2xpY3lTZWN0aW9uLmlkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMb2FkIGFtb3VudCBjb2RlIGNvbmZpZyBpZiBwcmVzZW50IG9yIGluZmVyIGZyb20gYWNjZXNzIHJlY29yZHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeUlkID0gcG9saWN5U2VjdGlvbi5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXN0b21BbW91bnRDb2RlID0gbnVsbDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBhbW91bnRDb2RlQ29uZmlnIGlzIGV4cGxpY2l0bHkgcHJvdmlkZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2xpY3lEYXRhLmFtb3VudENvZGVDb25maWcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21BbW91bnRDb2RlID0gcG9saWN5RGF0YS5hbW91bnRDb2RlQ29uZmlnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmZlciBmcm9tIGFjY2VzcyByZWNvcmRzIC0gY2hlY2sgaWYgYW55IGN1c3RvbSBjb2RlcyBhcmUgdXNlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2xpY3lEYXRhLmFjY2Vzc2VzICYmIHBvbGljeURhdGEuYWNjZXNzZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGFjY2VzcyBvZiBwb2xpY3lEYXRhLmFjY2Vzc2VzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjZXNzLnJlcXVlc3RDb25kaXRpb25zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgbWluQW10IGNvZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjZXNzLnJlcXVlc3RDb25kaXRpb25zLm1pbkFtdCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMubWluQW10LmFtdENvZGUgIT09ICdERUZBVUxUX01JTl9BTVQnICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5taW5BbXQuYW10Q29kZSAhPT0gJ0RFRkFVTFRfTUFYX0FNVF9ORVhUR0VOJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21BbW91bnRDb2RlID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50Q29kZTogYWNjZXNzLnJlcXVlc3RDb25kaXRpb25zLm1pbkFtdC5hbXRDb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50Q29kZVZhbHVlOiBhY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMubWluQW10LmFtdENvZGVWYWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudENvZGVEZXNjOiAnUG9saWN5LXNwZWNpZmljIGFtb3VudCBjb2RlJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudENvZGVTdWJEZXNjOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VEZXNjOiBwb2xpY3lEYXRhLnNlcnZpY2VEZXNjIHx8ICcnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBtYXhBbXQgY29kZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMubWF4QW10ICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5tYXhBbXQuYW10Q29kZSAhPT0gJ0RFRkFVTFRfTUlOX0FNVCcgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzLnJlcXVlc3RDb25kaXRpb25zLm1heEFtdC5hbXRDb2RlICE9PSAnREVGQVVMVF9NQVhfQU1UX05FWFRHRU4nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbUFtb3VudENvZGUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnRDb2RlOiBhY2Nlc3MucmVxdWVzdENvbmRpdGlvbnMubWF4QW10LmFtdENvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnRDb2RlVmFsdWU6IGFjY2Vzcy5yZXF1ZXN0Q29uZGl0aW9ucy5tYXhBbXQuYW10Q29kZVZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50Q29kZURlc2M6ICdQb2xpY3ktc3BlY2lmaWMgYW1vdW50IGNvZGUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50Q29kZVN1YkRlc2M6ICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZURlc2M6IHBvbGljeURhdGEuc2VydmljZURlc2MgfHwgJycKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGN1c3RvbSBhbW91bnQgY29kZSBmb3VuZCwgc2hvdyBhbmQgcG9wdWxhdGUgdGhlIGZvcm0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXN0b21BbW91bnRDb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbXRjb2RlZm9ybV8nICsgcG9saWN5SWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbXRjb2RlYnRuXycgKyBwb2xpY3lJZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSAn4oiSIFJlbW92ZSBBbW91bnQgQ29kZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3NlY29uZGFyeScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdkYW5nZXInKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUG9wdWxhdGUgYW1vdW50IGNvZGUgZmllbGRzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYW1vdW50Q29kZSJdJykudmFsdWUgPSBjdXN0b21BbW91bnRDb2RlLmFtb3VudENvZGUgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYW1vdW50Q29kZURlc2MiXScpLnZhbHVlID0gY3VzdG9tQW1vdW50Q29kZS5hbW91bnRDb2RlRGVzYyB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJhbW91bnRDb2RlU3ViRGVzYyJdJykudmFsdWUgPSBjdXN0b21BbW91bnRDb2RlLmFtb3VudENvZGVTdWJEZXNjIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImFtb3VudFNlcnZpY2VEZXNjIl0nKS52YWx1ZSA9IGN1c3RvbUFtb3VudENvZGUuc2VydmljZURlc2MgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYW1vdW50Q29kZVZhbHVlIl0nKS52YWx1ZSA9IGN1c3RvbUFtb3VudENvZGUuYW1vdW50Q29kZVZhbHVlIHx8ICcnOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZHJvcGRvd25zIGltbWVkaWF0ZWx5IGFmdGVyIGxvYWRpbmcgYW1vdW50IGNvZGUgY29uZmlnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlQW1vdW50Q29kZURyb3Bkb3ducyhwb2xpY3lJZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgZGVmYXVsdCBub3RpZmljYXRpb24gYW5kIHBvcHVsYXRlIGZyb20gZmlyc3QgYWNjZXNzIHJlY29yZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90aWZpY2F0aW9uc0NvbnRhaW5lciA9IHBvbGljeVNlY3Rpb24ucXVlcnlTZWxlY3RvcignLm5vdGlmaWNhdGlvbnMtY29udGFpbmVyJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25zQ29udGFpbmVyLmlubmVySFRNTCA9ICcnOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2xpY3lEYXRhLmFjY2Vzc2VzICYmIHBvbGljeURhdGEuYWNjZXNzZXMubGVuZ3RoID4gMCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeURhdGEuYWNjZXNzZXNbMF0ubm90aWZpY2F0aW9uRGV0bHMgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KHBvbGljeURhdGEuYWNjZXNzZXNbMF0ubm90aWZpY2F0aW9uRGV0bHMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5RGF0YS5hY2Nlc3Nlc1swXS5ub3RpZmljYXRpb25EZXRscy5mb3JFYWNoKG5vdGlmRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeUlkID0gcG9saWN5U2VjdGlvbi5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkTm90aWZpY2F0aW9uKHBvbGljeUlkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGlmU2VjdGlvbnMgPSBub3RpZmljYXRpb25zQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub3RpZmljYXRpb24tc2VjdGlvbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub3RpZlNlY3Rpb24gPSBub3RpZlNlY3Rpb25zW25vdGlmU2VjdGlvbnMubGVuZ3RoIC0gMV07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZlNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im5vdGlmaWNhdGlvblR5cGUiXScpLnZhbHVlID0gbm90aWZEYXRhLm5vdGlmaWNhdGlvblR5cGUgfHwgJ1NNUyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0iYXV0aFR5cGUiXScpLnZhbHVlID0gbm90aWZEYXRhLmF1dGhUeXBlIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZlNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InRlbXBsYXRlSWQiXScpLnZhbHVlID0gbm90aWZEYXRhLnRlbXBsYXRlSWQgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0idGVtcGxhdGVQYXJhbXMiXScpLnZhbHVlID0gbm90aWZEYXRhLnRlbXBsYXRlUGFyYW1zIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZlNlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImlzTWFuZGF0b3J5Il0nKS52YWx1ZSA9IG5vdGlmRGF0YS5pc01hbmRhdG9yeSB8fCAndHJ1ZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzZXNDb250YWluZXIgPSBwb2xpY3lTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5hY2Nlc3Nlcy1jb250YWluZXInKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc2VzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2xpY3lEYXRhLmFjY2Vzc2VzICYmIEFycmF5LmlzQXJyYXkocG9saWN5RGF0YS5hY2Nlc3NlcykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lEYXRhLmFjY2Vzc2VzLmZvckVhY2goYWNjZXNzRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbGljeUlkID0gcG9saWN5U2VjdGlvbi5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkQWNjZXNzKHBvbGljeUlkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1NlY3Rpb25zID0gYWNjZXNzZXNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmFjY2Vzcy1zZWN0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1NlY3Rpb24gPSBhY2Nlc3NTZWN0aW9uc1thY2Nlc3NTZWN0aW9ucy5sZW5ndGggLSAxXTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9ImNvb2xpbmdQZXJpb2RDaGVja1JlcXVpcmVkIl0nKS52YWx1ZSA9IGFjY2Vzc0RhdGEuY29vbGluZ1BlcmlvZENoZWNrUmVxdWlyZWQgPyAndHJ1ZScgOiAnZmFsc2UnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJ0eG5BdXRoUmVxdWlyZWQiXScpLnZhbHVlID0gYWNjZXNzRGF0YS50eG5BdXRoUmVxdWlyZWQgfHwgJzAnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJub3RpZmljYXRpb25QYXJhbU1hcCJdJykudmFsdWUgPSBhY2Nlc3NEYXRhLm5vdGlmaWNhdGlvblBhcmFtTWFwIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJzZXNzaW9uQ29uZGl0aW9uc01hcCJdJykudmFsdWUgPSBhY2Nlc3NEYXRhLnNlc3Npb25Db25kaXRpb25zTWFwIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJwcm9maWxlQ29uZGl0aW9uc01hcCJdJykudmFsdWUgPSBhY2Nlc3NEYXRhLnByb2ZpbGVDb25kaXRpb25zTWFwIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJyZXF1ZXN0Q29uZGl0aW9uc01hcCJdJykudmFsdWUgPSBhY2Nlc3NEYXRhLnJlcXVlc3RDb25kaXRpb25zTWFwIHx8ICcnOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjY2Vzc0RhdGEucmVxdWVzdENvbmRpdGlvbnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJjID0gYWNjZXNzRGF0YS5yZXF1ZXN0Q29uZGl0aW9uczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9InJpc2tJbmRpY2F0b3IiXScpLnZhbHVlID0gcmMucmlza0luZGljYXRvciB8fCAnMCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NTZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSJwb3N0YWxDb2RlIl0nKS52YWx1ZSA9IHJjLnBvc3RhbENvZGUgfHwgJzAnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdbbmFtZT0idXBkYXRlTGltaXQiXScpLnZhbHVlID0gcmMudXBkYXRlTGltaXQgfHwgJzAnOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYy5taW5BbXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtaW5Ecm9wZG93biA9IGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im1pbkFtdENvZGUiXScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pbkNvZGUgPSByYy5taW5BbXQuYW10Q29kZSB8fCAnREVGQVVMVF9NSU5fQU1UJzsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgb3B0aW9uIGV4aXN0cywgaWYgbm90IGFkZCBpdCAoZm9yIGN1c3RvbSBjb2RlcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3B0aW9uRXhpc3RzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtaW5Ecm9wZG93bi5vcHRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW5Ecm9wZG93bi5vcHRpb25zW2ldLnZhbHVlID09PSBtaW5Db2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25FeGlzdHMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW9uRXhpc3RzICYmIG1pbkNvZGUgIT09ICdERUZBVUxUX01JTl9BTVQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSBtaW5Db2RlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24uc2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJywgcmMubWluQW10LmFtdENvZGVWYWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IG1pbkNvZGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkRyb3Bkb3duLmFwcGVuZENoaWxkKG9wdGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5Ecm9wZG93bi52YWx1ZSA9IG1pbkNvZGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlQW1vdW50VmFsdWUobWluRHJvcGRvd24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYy5tYXhBbXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXhEcm9wZG93biA9IGFjY2Vzc1NlY3Rpb24ucXVlcnlTZWxlY3RvcignW25hbWU9Im1heEFtdENvZGUiXScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heENvZGUgPSByYy5tYXhBbXQuYW10Q29kZSB8fCAnREVGQVVMVF9NQVhfQU1UX05FWFRHRU4nOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBvcHRpb24gZXhpc3RzLCBpZiBub3QgYWRkIGl0IChmb3IgY3VzdG9tIGNvZGVzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvcHRpb25FeGlzdHMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heERyb3Bkb3duLm9wdGlvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1heERyb3Bkb3duLm9wdGlvbnNbaV0udmFsdWUgPT09IG1heENvZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbkV4aXN0cyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpb25FeGlzdHMgJiYgbWF4Q29kZSAhPT0gJ0RFRkFVTFRfTUFYX0FNVF9ORVhUR0VOJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gbWF4Q29kZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnNldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScsIHJjLm1heEFtdC5hbXRDb2RlVmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24udGV4dENvbnRlbnQgPSBtYXhDb2RlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhEcm9wZG93bi5pbnNlcnRCZWZvcmUob3B0aW9uLCBtYXhEcm9wZG93bi5maXJzdENoaWxkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heERyb3Bkb3duLnZhbHVlID0gbWF4Q29kZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVBbW91bnRWYWx1ZShtYXhEcm9wZG93bik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGRvd25sb2FkT3V0cHV0KCkgewogICAgICAgICAgICBpZiAoIWN1cnJlbnRPdXRwdXQpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdQbGVhc2UgZ2VuZXJhdGUgSlNPTiBvciBTUUwgb3V0cHV0IGZpcnN0LicpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zdCBvdXRwdXRUeXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ291dHB1dFR5cGUnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBvdXRwdXRUeXBlID09PSAnanNvbicgPyAncG9saWN5LWNvbmZpZy5qc29uJyA6ICdwb2xpY3ktaW5zZXJ0LnNxbCc7CiAgICAgICAgICAgIGNvbnN0IG1pbWVUeXBlID0gb3V0cHV0VHlwZSA9PT0gJ2pzb24nID8gJ2FwcGxpY2F0aW9uL2pzb24nIDogJ3RleHQvcGxhaW4nOwoKICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtjdXJyZW50T3V0cHV0XSwgeyB0eXBlOiBtaW1lVHlwZSB9KTsKICAgICAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgYS5ocmVmID0gdXJsOwogICAgICAgICAgICBhLmRvd25sb2FkID0gZmlsZW5hbWU7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgICAgIGEuY2xpY2soKTsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTsKICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVzZXRGb3JtKCkgewogICAgICAgICAgICBpZiAoY29uZmlybSgnUmVzZXQgdGhlIGVudGlyZSBmb3JtPycpKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhbm5lbHNDb250YWluZXInKS5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdXRwdXRCb3gnKS50ZXh0Q29udGVudCA9ICdPdXRwdXQgd2lsbCBhcHBlYXIgaGVyZS4uLic7CiAgICAgICAgICAgICAgICBjdXJyZW50T3V0cHV0ID0gJyc7CiAgICAgICAgICAgICAgICBjaGFubmVsQ291bnRlciA9IDA7CiAgICAgICAgICAgICAgICBwb2xpY3lDb3VudGVyID0gMDsKICAgICAgICAgICAgICAgIGFjY2Vzc0NvdW50ZXIgPSAwOwogICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uQ291bnRlciA9IDA7CiAgICAgICAgICAgICAgICBhZGRDaGFubmVsKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNvcHlPdXRwdXQoKSB7CiAgICAgICAgICAgIGlmICghY3VycmVudE91dHB1dCkgewogICAgICAgICAgICAgICAgYWxlcnQoJ1BsZWFzZSBnZW5lcmF0ZSBKU09OIG9yIFNRTCBvdXRwdXQgZmlyc3QuJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFVzZSBtb2Rlcm4gY2xpcGJvYXJkIEFQSQogICAgICAgICAgICBpZiAobmF2aWdhdG9yLmNsaXBib2FyZCAmJiBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCkgewogICAgICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoY3VycmVudE91dHB1dCkudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAvLyBWaXN1YWwgZmVlZGJhY2sKICAgICAgICAgICAgICAgICAgICBjb25zdCBidG4gPSBldmVudC50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gYnRuLnRleHRDb250ZW50OwogICAgICAgICAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9ICdDb3BpZWQhJzsKICAgICAgICAgICAgICAgICAgICBidG4uc3R5bGUuYmFja2dyb3VuZCA9ICcjNENBRjUwJzsKCiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gb3JpZ2luYWxUZXh0OwogICAgICAgICAgICAgICAgICAgICAgICBidG4uc3R5bGUuYmFja2dyb3VuZCA9ICcnOwogICAgICAgICAgICAgICAgICAgIH0sIDIwMDApOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0ZhaWxlZCB0byBjb3B5OiAnICsgZXJyKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgZm9yIG9sZGVyIGJyb3dzZXJzCiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7CiAgICAgICAgICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9IGN1cnJlbnRPdXRwdXQ7CiAgICAgICAgICAgICAgICB0ZXh0YXJlYS5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7CiAgICAgICAgICAgICAgICB0ZXh0YXJlYS5zdHlsZS5vcGFjaXR5ID0gJzAnOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0YXJlYSk7CiAgICAgICAgICAgICAgICB0ZXh0YXJlYS5zZWxlY3QoKTsKCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5Jyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuID0gZXZlbnQudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsVGV4dCA9IGJ0bi50ZXh0Q29udGVudDsKICAgICAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSAnQ29waWVkISc7CiAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLmJhY2tncm91bmQgPSAnIzRDQUY1MCc7CgogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9IG9yaWdpbmFsVGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLmJhY2tncm91bmQgPSAnJzsKICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdGYWlsZWQgdG8gY29weTogJyArIGVycik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0ZXh0YXJlYSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNvbXBhcmVKU09OcygpIHsKICAgICAgICAgICAgY29uc3QganNvbjFUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzb24xJykudmFsdWUudHJpbSgpOwogICAgICAgICAgICBjb25zdCBqc29uMlRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanNvbjInKS52YWx1ZS50cmltKCk7CgogICAgICAgICAgICBpZiAoIWpzb24xVGV4dCB8fCAhanNvbjJUZXh0KSB7CiAgICAgICAgICAgICAgICBhbGVydCgnUGxlYXNlIHBhc3RlIEpTT04gY29udGVudCBpbiBib3RoIHRleHQgYXJlYXMuJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBvYmoxID0gSlNPTi5wYXJzZShqc29uMVRleHQpOwogICAgICAgICAgICAgICAgY29uc3Qgb2JqMiA9IEpTT04ucGFyc2UoanNvbjJUZXh0KTsKCiAgICAgICAgICAgICAgICBjb25zdCBkaWZmZXJlbmNlcyA9IFtdOwogICAgICAgICAgICAgICAgZmluZERpZmZlcmVuY2VzKG9iajEsIG9iajIsICcnLCBkaWZmZXJlbmNlcyk7CgogICAgICAgICAgICAgICAgZGlzcGxheURpZmZlcmVuY2VzKGRpZmZlcmVuY2VzKTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdFcnJvciBwYXJzaW5nIEpTT046ICcgKyBlcnJvci5tZXNzYWdlICsgJ1xuXG5QbGVhc2UgY2hlY2sgeW91ciBKU09OIGZvcm1hdC4nKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZmluZERpZmZlcmVuY2VzKG9iajEsIG9iajIsIHBhdGgsIGRpZmZlcmVuY2VzKSB7CiAgICAgICAgICAgIC8vIENoZWNrIGlmIGJvdGggYXJlIG9iamVjdHMKICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmoxID09PSAnb2JqZWN0JyAmJiBvYmoxICE9PSBudWxsICYmIHR5cGVvZiBvYmoyID09PSAnb2JqZWN0JyAmJiBvYmoyICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAvLyBHZXQgYWxsIHVuaXF1ZSBrZXlzIGZyb20gYm90aCBvYmplY3RzCiAgICAgICAgICAgICAgICBjb25zdCBrZXlzMSA9IE9iamVjdC5rZXlzKG9iajEpOwogICAgICAgICAgICAgICAgY29uc3Qga2V5czIgPSBPYmplY3Qua2V5cyhvYmoyKTsKICAgICAgICAgICAgICAgIGNvbnN0IGFsbEtleXMgPSBbLi4ubmV3IFNldChbLi4ua2V5czEsIC4uLmtleXMyXSldOwoKICAgICAgICAgICAgICAgIGFsbEtleXMuZm9yRWFjaChrZXkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BhdGggPSBwYXRoID8gYCR7cGF0aH0uJHtrZXl9YCA6IGtleTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG9iajEpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtleSBleGlzdHMgaW4gb2JqMiBidXQgbm90IGluIG9iajEKICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmVyZW5jZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYWRkZWQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogbmV3UGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBKU09OLnN0cmluZ2lmeShvYmoyW2tleV0sIG51bGwsIDIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIShrZXkgaW4gb2JqMikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2V5IGV4aXN0cyBpbiBvYmoxIGJ1dCBub3QgaW4gb2JqMgogICAgICAgICAgICAgICAgICAgICAgICBkaWZmZXJlbmNlcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZW1vdmVkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG5ld1BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkob2JqMVtrZXldLCBudWxsLCAyKQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBLZXkgZXhpc3RzIGluIGJvdGgsIGNvbXBhcmUgdmFsdWVzIHJlY3Vyc2l2ZWx5CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iajFba2V5XSkgJiYgQXJyYXkuaXNBcnJheShvYmoyW2tleV0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wYXJlIGFycmF5cwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KG9iajFba2V5XSkgIT09IEpTT04uc3RyaW5naWZ5KG9iajJba2V5XSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wYXJlQXJyYXlzKG9iajFba2V5XSwgb2JqMltrZXldLCBuZXdQYXRoLCBkaWZmZXJlbmNlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9iajFba2V5XSA9PT0gJ29iamVjdCcgJiYgb2JqMVtrZXldICE9PSBudWxsICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIG9iajJba2V5XSA9PT0gJ29iamVjdCcgJiYgb2JqMltrZXldICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmREaWZmZXJlbmNlcyhvYmoxW2tleV0sIG9iajJba2V5XSwgbmV3UGF0aCwgZGlmZmVyZW5jZXMpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9iajFba2V5XSAhPT0gb2JqMltrZXldKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWYWx1ZXMgYXJlIGRpZmZlcmVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmVyZW5jZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21vZGlmaWVkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBuZXdQYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlOiBKU09OLnN0cmluZ2lmeShvYmoxW2tleV0sIG51bGwsIDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlOiBKU09OLnN0cmluZ2lmeShvYmoyW2tleV0sIG51bGwsIDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKG9iajEgIT09IG9iajIpIHsKICAgICAgICAgICAgICAgIC8vIFNpbXBsZSB2YWx1ZSBjb21wYXJpc29uCiAgICAgICAgICAgICAgICBkaWZmZXJlbmNlcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbW9kaWZpZWQnLAogICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGggfHwgJyhyb290KScsCiAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWU6IEpTT04uc3RyaW5naWZ5KG9iajEsIG51bGwsIDIpLAogICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlOiBKU09OLnN0cmluZ2lmeShvYmoyLCBudWxsLCAyKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNvbXBhcmVBcnJheXMoYXJyMSwgYXJyMiwgcGF0aCwgZGlmZmVyZW5jZXMpIHsKICAgICAgICAgICAgY29uc3QgbWF4TGVuID0gTWF0aC5tYXgoYXJyMS5sZW5ndGgsIGFycjIubGVuZ3RoKTsKCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4TGVuOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BhdGggPSBgJHtwYXRofVske2l9XWA7CgogICAgICAgICAgICAgICAgaWYgKGkgPj0gYXJyMS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAvLyBFbGVtZW50IGV4aXN0cyBpbiBhcnIyIGJ1dCBub3QgaW4gYXJyMQogICAgICAgICAgICAgICAgICAgIGRpZmZlcmVuY2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYWRkZWQnLAogICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBuZXdQYXRoLAogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkoYXJyMltpXSwgbnVsbCwgMikKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA+PSBhcnIyLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIC8vIEVsZW1lbnQgZXhpc3RzIGluIGFycjEgYnV0IG5vdCBpbiBhcnIyCiAgICAgICAgICAgICAgICAgICAgZGlmZmVyZW5jZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZW1vdmVkJywKICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogbmV3UGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KGFycjFbaV0sIG51bGwsIDIpCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIEVsZW1lbnQgZXhpc3RzIGluIGJvdGggYXJyYXlzCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcnIxW2ldID09PSAnb2JqZWN0JyAmJiBhcnIxW2ldICE9PSBudWxsICYmCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBhcnIyW2ldID09PSAnb2JqZWN0JyAmJiBhcnIyW2ldICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmREaWZmZXJlbmNlcyhhcnIxW2ldLCBhcnIyW2ldLCBuZXdQYXRoLCBkaWZmZXJlbmNlcyk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChKU09OLnN0cmluZ2lmeShhcnIxW2ldKSAhPT0gSlNPTi5zdHJpbmdpZnkoYXJyMltpXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmVyZW5jZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbW9kaWZpZWQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogbmV3UGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlOiBKU09OLnN0cmluZ2lmeShhcnIxW2ldLCBudWxsLCAyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlOiBKU09OLnN0cmluZ2lmeShhcnIyW2ldLCBudWxsLCAyKQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGRpc3BsYXlEaWZmZXJlbmNlcyhkaWZmZXJlbmNlcykgewogICAgICAgICAgICBjb25zdCBkaWZmUmVzdWx0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaWZmUmVzdWx0cycpOwogICAgICAgICAgICBjb25zdCBkaWZmQ29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaWZmQ29udGVudCcpOwoKICAgICAgICAgICAgaWYgKGRpZmZlcmVuY2VzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgZGlmZkNvbnRlbnQuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9ImRpZmYtaXRlbSIgc3R5bGU9ImJhY2tncm91bmQ6ICNkNGVkZGE7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgIzI4YTc0NTsiPjxzdHJvbmc+Tm8gZGlmZmVyZW5jZXMgZm91bmQhPC9zdHJvbmc+IEJvdGggSlNPTnMgYXJlIGlkZW50aWNhbC48L2Rpdj4nOwogICAgICAgICAgICAgICAgZGlmZlJlc3VsdHMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCBodG1sID0gJyc7CiAgICAgICAgICAgIGRpZmZlcmVuY2VzLmZvckVhY2goZGlmZiA9PiB7CiAgICAgICAgICAgICAgICBpZiAoZGlmZi50eXBlID09PSAnYWRkZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpZmYtaXRlbSBkaWZmLWFkZGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpZmYtcGF0aCI+KyBBZGRlZDogJHtkaWZmLnBhdGh9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaWZmLXZhbHVlIj4ke2VzY2FwZUh0bWwoZGlmZi52YWx1ZSl9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRpZmYudHlwZSA9PT0gJ3JlbW92ZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpZmYtaXRlbSBkaWZmLXJlbW92ZWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGlmZi1wYXRoIj4tIFJlbW92ZWQ6ICR7ZGlmZi5wYXRofTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGlmZi12YWx1ZSI+JHtlc2NhcGVIdG1sKGRpZmYudmFsdWUpfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkaWZmLnR5cGUgPT09ICdtb2RpZmllZCcpIHsKICAgICAgICAgICAgICAgICAgICBodG1sICs9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGlmZi1pdGVtIGRpZmYtbW9kaWZpZWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGlmZi1wYXRoIj5+IE1vZGlmaWVkOiAke2RpZmYucGF0aH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpZmYtdmFsdWUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+T2xkOjwvc3Ryb25nPiAke2VzY2FwZUh0bWwoZGlmZi5vbGRWYWx1ZSl9PGJyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+TmV3Ojwvc3Ryb25nPiAke2VzY2FwZUh0bWwoZGlmZi5uZXdWYWx1ZSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBkaWZmQ29udGVudC5pbm5lckhUTUwgPSBodG1sOwogICAgICAgICAgICBkaWZmUmVzdWx0cy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGVzY2FwZUh0bWwodGV4dCkgewogICAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgZGl2LnRleHRDb250ZW50ID0gdGV4dDsKICAgICAgICAgICAgcmV0dXJuIGRpdi5pbm5lckhUTUw7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjbGVhckNvbXBhcmlzb24oKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc29uMScpLnZhbHVlID0gJyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc29uMicpLnZhbHVlID0gJyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaWZmUmVzdWx0cycpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaWZmQ29udGVudCcpLmlubmVySFRNTCA9ICcnOwogICAgICAgIH0KICAgIDwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4K
